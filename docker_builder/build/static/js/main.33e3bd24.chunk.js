/*! For license information please see main.33e3bd24.chunk.js.LICENSE.txt */
(this["webpackJsonporigam-html5-tcu"]=this["webpackJsonporigam-html5-tcu"]||[]).push([[0],{100:function(e,t,n){e.exports={headerIcon:"HeaderButton_headerIcon__3uXMm",headerIconActive:"HeaderButton_headerIconActive__2zXHa",headerIconHidden:"HeaderButton_headerIconHidden__LFvPG"}},101:function(e,t,n){e.exports={resultIemRow:"ResultItem_resultIemRow__1Y9Gv",resultIemRowHovered:"ResultItem_resultIemRowHovered__2FkO5",resultIemRowSelected:"ResultItem_resultIemRowSelected__1oO6r",itemIcon:"ResultItem_itemIcon__3NtUv",itemContents:"ResultItem_itemContents__3gu1H",itemTitle:"ResultItem_itemTitle__1oftb",itemTextSeparator:"ResultItem_itemTextSeparator__1hbkp"}},102:function(e,t,n){e.exports={root:"MobileBooleanInput_root__3LaJ4",slot:"MobileBooleanInput_slot__IjEiU",readOnly:"MobileBooleanInput_readOnly__Gsjdv",off:"MobileBooleanInput_off__153AN",nob:"MobileBooleanInput_nob__3F0nS",on:"MobileBooleanInput_on__jGlqI",undefined:"MobileBooleanInput_undefined__2TCcz"}},103:function(e,t,n){e.exports={heading:"TabSelector_heading__3pc01",titleContainer:"TabSelector_titleContainer__1uSYf",icon:"TabSelector_icon__1FKyA",screenName:"TabSelector_screenName__yjGrf",dirtyIcon:"TabSelector_dirtyIcon__pHimP",dirtyDropDownItem:"TabSelector_dirtyDropDownItem__3MYPb",dirtyScreenName:"TabSelector_dirtyScreenName__1X49Y"}},104:function(e,t,n){e.exports={alert:"RootError_alert__1bPMk",alertDanger:"RootError_alertDanger__15wwz",root:"RootError_root__2ZGWy",inPageLink:"RootError_inPageLink__3FuS4",returnLink:"RootError_returnLink__2M3t_"}},116:function(e,t,n){e.exports={root:"ScreenHeader_root__XtVru",progressIndicator:"ScreenHeader_progressIndicator__1aeCl",indefinite:"ScreenHeader_indefinite__3cpO9",slideright:"ScreenHeader_slideright__2zQfL",workflowActionBtn:"ScreenHeader_workflowActionBtn__KnoD-"}},117:function(e,t,n){e.exports={noSelect:"TreeView_noSelect__17rHq",expander:"TreeView_expander__3L8So",treeView:"TreeView_treeView__1F3Me",nodeLabel:"TreeView_nodeLabel__16Tbo",node:"TreeView_node__3bs1W",nodeSelected:"TreeView_nodeSelected__1Wy67"}},118:function(e,t,n){e.exports={root:"FilterEditor_root__P-5hN",filterRow:"FilterEditor_filterRow__2atR4",rowCount:"FilterEditor_rowCount__2b_Vy",rowContainer:"FilterEditor_rowContainer__3eAAD",label:"FilterEditor_label__1ILLV",filterSettingContainer:"FilterEditor_filterSettingContainer__2TnFz"}},119:function(e,t,n){e.exports={root:"CheckList_root__1b_eb",focusedLabel:"CheckList_focusedLabel__1BAwE",unFocusedLabel:"CheckList_unFocusedLabel__17NcI",item:"CheckList_item__3SnE1",editorContainer:"CheckList_editorContainer__LZM9U"}},120:function(e,t,n){e.exports={dialogContent:"ErrorDialog_dialogContent__28cVW",errorMessageList:"ErrorDialog_errorMessageList__w2M8V",errorMessageListItem:"ErrorDialog_errorMessageListItem__19Wve",errorMessageDatetime:"ErrorDialog_errorMessageDatetime__1FRWj",dialogBigIconColumn:"ErrorDialog_dialogBigIconColumn__1AdKK",dialogMessageColumn:"ErrorDialog_dialogMessageColumn__2cJk4"}},127:function(e,t,n){e.exports={root:"ActionDropUp_root__h6hqB",clickArea:"ActionDropUp_clickArea__3HclI",iconContainer:"ActionDropUp_iconContainer__2xnzZ",placeholder:"ActionDropUp_placeholder__2boj6"}},128:function(e,t,n){e.exports={divider:"Splitter_divider__1eCA-",root:"Splitter_root__3DyVI",panel:"Splitter_panel__1-mk_"}},129:function(e,t,n){e.exports={trigger:"FilterSettingsComboBox_trigger__3Tn6f",container:"FilterSettingsComboBox_container__3oZRL",dropdownSymbol:"FilterSettingsComboBox_dropdownSymbol__2JaTE",dropdown:"FilterSettingsComboBox_dropdown__1AM02",dropdownItem:"FilterSettingsComboBox_dropdownItem__3hdPN"}},130:function(e,t,n){e.exports={root:"DetailNavigator_root__VxtzL",navigationButtonList:"DetailNavigator_navigationButtonList__22lJP",navigatorButtonListRoot:"DetailNavigator_navigatorButtonListRoot__5AzIp",contentPlaceholder:"DetailNavigator_contentPlaceholder__19MeG"}},131:function(e,t,n){e.exports={root:"WebScreen_root__3AKKk",webContent:"WebScreen_webContent__aTCat",progressIndicator:"WebScreen_progressIndicator__27DmF",indefinite:"WebScreen_indefinite__2o895",slideright:"WebScreen_slideright__26Adi",transparentOverlay:"WebScreen_transparentOverlay__3c-O8"}},144:function(e,t,n){e.exports={filterInput:"TagInputEditor_filterInput__1JBvo"}},145:function(e,t,n){e.exports={inputRow:"SearchView_inputRow__ZLz2u",icon:"SearchView_icon__3R6Vb",input:"SearchView_input__3etZ_",resultsContainer:"SearchView_resultsContainer__bIIwO"}},146:function(e,t,n){e.exports={resultGroupRow:"ResultGroup_resultGroupRow__2Fmwf",groupName:"ResultGroup_groupName__1c_Oh",arrow:"ResultGroup_arrow__3JDvC"}},147:function(e,t,n){e.exports={tagInputContainer:"TagInput_tagInputContainer__tKnU9",tagInputAdd:"TagInput_tagInputAdd__YXLft",tagInputItem:"TagInput_tagInputItem__1JJOE",tagInputItemDelete:"TagInput_tagInputItemDelete__RkBId"}},148:function(e,t,n){e.exports={droppedPanelContainer:"ColorEditor_droppedPanelContainer__3ZqTv",dropdownSymbol:"ColorEditor_dropdownSymbol__2kPcG",input:"ColorEditor_input__1isDF",notification:"ColorEditor_notification__39mpy",editorContainer:"ColorEditor_editorContainer__1B5PF",colorDiv:"ColorEditor_colorDiv__2IAit",colorRect:"ColorEditor_colorRect__XRfcE"}},151:function(e,t,n){e.exports={caption:"CheckBox_caption__1O04L",editor:"CheckBox_editor__2J2PU",focusedLabel:"CheckBox_focusedLabel__eM8ql",unFocusedLabel:"CheckBox_unFocusedLabel__sN3ng"}},152:function(e,t,n){e.exports={root:"ComboBox_root__CKwq9",mobileInput:"ComboBox_mobileInput__55u54",input:"ComboBox_input__3PzQv",link:"ComboBox_link__2gnHO",readOnly:"ComboBox_readOnly__24LF0"}},153:function(e,t,n){e.exports={anchor:"MainMenuItem_anchor__3Tvko",icon:"MainMenuItem_icon__3ITAx",label:"MainMenuItem_label__2cE_P",linkContainer:"MainMenuItem_linkContainer__Id-l8"}},180:function(e,t,n){e.exports={divider:"CustomSplitter_divider__-qkL1",root:"CustomSplitter_root__1yjRe",panel:"CustomSplitter_panel__1ugRS"}},185:function(e,t,n){e.exports={editor:"CommonStyle_editor__fG3fi",editorContainer:"CommonStyle_editorContainer__2GsW2",notification:"CommonStyle_notification__1invu"}},186:function(e,t,n){e.exports={droppedPanel:"FilterSettingsLookup_droppedPanel__QJJs8",optionGridCell:"FilterSettingsLookup_optionGridCell__3g_aD",noItemsFound:"FilterSettingsLookup_noItemsFound__3g9gh",tagInput:"FilterSettingsLookup_tagInput__38Hhm"}},189:function(e,t,n){e.exports={root:"BottomToolBar_root__34o_c",isRed:"BottomToolBar_isRed__3K4PY"}},190:function(e,t,n){e.exports={root:"TabbedViewHandle_root__FtmjE",label:"TabbedViewHandle_label__3WKQA",closeBtn:"TabbedViewHandle_closeBtn__2Qz-R"}},191:function(e,t,n){e.exports={disabled:"DataViewHeaderButton_disabled__30tMu",enabled:"DataViewHeaderButton_enabled__2_PK_",root:"DataViewHeaderButton_root__3wMyU"}},192:function(e,t,n){e.exports={dataView:"DataView_dataView__3BBVa",dataViewOverlay:"DataView_dataViewOverlay__369Wv",dataViewLoadingLabel:"DataView_dataViewLoadingLabel__3vmXn",overlayContainer:"DataView_overlayContainer__1dL0r",dataViewContentContainer:"DataView_dataViewContentContainer__3RCrJ"}},193:function(e,t,n){e.exports={root:"BottomIcon_root__1-p0m",icon:"BottomIcon_icon__10Xuh",hidden:"BottomIcon_hidden__3_ffy"}},194:function(e,t,n){e.exports={root:"RadioButton_root__34icq",input:"RadioButton_input__jeBj6",label:"RadioButton_label__2jyKx"}},195:function(e,t,n){e.exports={root:"ScreenToolbarAction_root__1Qbw8",icon:"ScreenToolbarAction_icon__3UHK7",label:"ScreenToolbarAction_label__TtlI4"}},196:function(e,t,n){e.exports={version:"AboutView_version__2bj_w"}},197:function(e,t,n){e.exports={root:"SidebarSectionHeader_root__3FxtF",icon:"SidebarSectionHeader_icon__1WRni"}},198:function(e,t,n){e.exports={root:"WorkQueuesItem_root__2-1M-",icon:"WorkQueuesItem_icon__2G6oy",label:"WorkQueuesItem_label__2TgXV"}},199:function(e,t,n){e.exports={favoritesList:"CFavorites_favoritesList__3N9pZ",forceOpenSection:"CFavorites_forceOpenSection__3sRav",favoritesFolderHeader:"CFavorites_favoritesFolderHeader__kPTR0"}},200:function(e,t,n){e.exports={navigationBar:"BreadCrumbs_navigationBar__201rC",breadcrumb:"BreadCrumbs_breadcrumb__zrbA7",pathSeparator:"BreadCrumbs_pathSeparator__7l9jv"}},201:function(e,t,n){e.exports={Root:"ScreenArea_Root__3zQy3",TabHandles:"ScreenArea_TabHandles__2ZPP4",TabHandle:"ScreenArea_TabHandle__33XJ2",TabHandleCloseBtn:"ScreenArea_TabHandleCloseBtn__1moBk",active:"ScreenArea_active__1FruL",dialogLoadingContent:"ScreenArea_dialogLoadingContent__2igd-",actionButtonHeader:"ScreenArea_actionButtonHeader__Q-iIA",workflowActionBtn:"ScreenArea_workflowActionBtn__UHW-X"}},240:function(e,t,n){e.exports={root:"DataViewHeaderAction_root__3GKkP",isDisabled:"DataViewHeaderAction_isDisabled__3eW8i"}},241:function(e,t,n){e.exports={droppedBox:"Dropdowner_droppedBox__2nMdX",dropdownerContainer:"Dropdowner_dropdownerContainer__2986s"}},242:function(e,t,n){e.exports={root:"DataViewHeader_root__3U46w",inner:"DataViewHeader_inner__23mfh"}},243:function(e,t,n){e.exports={root:"DropdownItem_root__lFOYV",isSelected:"DropdownItem_isSelected__2sEuT"}},244:function(e,t,n){e.exports={root:"ColumnOrderEditor_root__2Eq9H",row:"ColumnOrderEditor_row__c_UjO"}},246:function(e,t,n){e.exports={formView:"FormView_formView__ppscI",formViewForm:"FormView_formViewForm__3NXWj"}},247:function(e,t,n){e.exports={input:"NumberEditor_input__3mA4i",editorContainer:"NumberEditor_editorContainer__xgmo9",notification:"NumberEditor_notification__2pf_S"}},251:function(e,t,n){e.exports={scrollee:"Scrollee_scrollee__2vPBU",scrolleeShifted:"Scrollee_scrolleeShifted__1WyCM"}},252:function(e,t,n){e.exports={scroller:"Scroller_scroller__1l0_M"}},255:function(e,t,n){e.exports={root:"WorkflowFinishedPanel_root__V4n-y",message:"WorkflowFinishedPanel_message__yQcJb"}},256:function(e,t,n){e.exports={divider:"WorkbenchPage_divider__16KmV",root:"WorkbenchPage_root__2EiJb",panel:"WorkbenchPage_panel__1qRys",mobileContainer:"WorkbenchPage_mobileContainer__3nYJL"}},257:function(e,t,n){e.exports={root:"MenuButton_root__1yfy_",menuIcon:"MenuButton_menuIcon__pnx86"}},339:function(e,t,n){},348:function(e,t,n){e.exports={root:"MainBar_root__msk09"}},349:function(e,t,n){e.exports={root:"ScreenTabsArea_root__3Z2Au"}},352:function(e,t,n){e.exports={root:"TabbedViewHandleRow_root__3njsv"}},353:function(e,t,n){e.exports={dialogContent:"processActionQueryResult_dialogContent__1O36_"}},355:function(e,t,n){e.exports={root:"DataViewHeaderButtonGroup_root__23g4O"}},356:function(e,t,n){e.exports={root:"Dropdown_root__I7Lwm"}},357:function(e,t,n){e.exports={root:"DataViewHeaderGroup_root__2r663"}},361:function(e,t,n){e.exports={root:"DropdownDivider_root__2Yfx6"}},362:function(e,t,n){e.exports={container:"DataViewLoading_container__8OvTG",label:"DataViewLoading_label__xpVba"}},363:function(e,t,n){e.exports={mobileInputContainer:"FilterSettingsBoolean_mobileInputContainer__3GymC"}},364:function(e,t,n){e.exports={root:"ClearableInput_root__2NI6P"}},365:function(e,t,n){e.exports={root:"InputClearButton_root__5ZlcJ"}},366:function(e,t,n){e.exports={cell:"NumberCell_cell__1pxvS"}},367:function(e,t,n){e.exports={cell:"BooleanCell_cell__1j1fo"}},368:function(e,t,n){e.exports={root:"ComboFullScreenEditor_root__3ufog"}},369:function(e,t,n){e.exports={root:"RecordInfo_root__23Waa"}},370:function(e,t,n){e.exports={root:"SidebarRecordInfo_root__2dTV2"}},373:function(e,t,n){e.exports={formRoot:"FormRoot_formRoot__33ALv"}},374:function(e,t,n){e.exports={image:"ImageEditor_image__3LIR0"}},378:function(e,t,n){e.exports={editorContainer:"BoolEditor_editorContainer__ijNPb"}},384:function(e,t,n){e.exports={root:"FormSectionHeader_root__3PwDE"}},385:function(e,t,n){e.exports={root:"FormLabel_root__2n5qS"}},386:function(e,t,n){e.exports={root:"FormPerspectiveDirector_root__3LMZh"}},387:function(e,t,n){e.exports={canvas:"Canvas_canvas__Hmfib"}},388:function(e,t,n){e.exports={headerRow:"HeaderRow_headerRow__3pdNJ"}},389:function(e,t,n){e.exports={positionedField:"PositionedField_positionedField__3JNW7"}},390:function(e,t,n){e.exports={root:"SelectionCheckboxHeader_root__2RpRQ"}},391:function(e,t,n){e.exports={aggregationRow:"TableView_aggregationRow__3epa6"}},392:function(e,t,n){e.exports={root:"TablePerspectiveDirector_root__LrLkU"}},397:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(3),i=n(29),a=n(737),s=n(739);n(740);var c=n(741),u=n(742);function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}n(743);var d=l(o),p=l(i),h=l(s),f=l(c),b=l(u);function v(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}var y="styles-module_mainContainer__WgAfS",g="styles-module_subContainer__qjNi4";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}("/*\nCopyright 2005 - 2021 Advantage Solutions, s. r. o.\n\nThis file is part of ORIGAM (http://www.origam.org).\n\nORIGAM is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nORIGAM is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with ORIGAM. If not, see <http://www.gnu.org/licenses/>.\n*/\n.styles-module_mainContainer__WgAfS {\n  flex-grow: 1;\n  position: relative;\n  margin: auto;\n  height: 95%;\n  width: 100%;\n  background-color: white;\n  overflow: auto;\n}\n\n.styles-module_subContainer__qjNi4 {\n  flex-grow: 1;\n  position: relative;\n  margin: auto;\n  margin-top: 50px;\n  height: 60%;\n  width: 60%;\n  background-color: white;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlcy5tb2R1bGUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FpQkM7QUFDRDtFQUNFLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxXQUFXO0VBQ1gsdUJBQXVCO0VBQ3ZCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLFVBQVU7RUFDVix1QkFBdUI7QUFDekIiLCJmaWxlIjoic3R5bGVzLm1vZHVsZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDA1IC0gMjAyMSBBZHZhbnRhZ2UgU29sdXRpb25zLCBzLiByLiBvLlxuXG5UaGlzIGZpbGUgaXMgcGFydCBvZiBPUklHQU0gKGh0dHA6Ly93d3cub3JpZ2FtLm9yZykuXG5cbk9SSUdBTSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG5pdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxudGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbihhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cbk9SSUdBTSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2Zcbk1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZVxuR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cblxuWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbmFsb25nIHdpdGggT1JJR0FNLiBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuLm1haW5Db250YWluZXIge1xuICBmbGV4LWdyb3c6IDE7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgbWFyZ2luOiBhdXRvO1xuICBoZWlnaHQ6IDk1JTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuLnN1YkNvbnRhaW5lciB7XG4gIGZsZXgtZ3JvdzogMTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBtYXJnaW46IGF1dG87XG4gIG1hcmdpbi10b3A6IDUwcHg7XG4gIGhlaWdodDogNjAlO1xuICB3aWR0aDogNjAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbn0iXX0= */"),a.registerPlugin(f.default,b.default),a.registerPlugin(h.default);var m=function(){function e(){this.$type_ISectionPlugin=1,this.id="",this.initialized=!1}return e.prototype.initialize=function(e){this.apiurl=this.getXmlParameter(e,"ApiUrl"),this.filterFileType=this.getXmlParameter(e,"FilterFileType"),this.invalidFileTypeMessage=this.getXmlParameter(e,"InvalidFileTypeMessage"),this.instantUpload="true"==this.getXmlParameter(e,"InstantUpload"),this.maxParallelUploads=Number.parseInt(this.getXmlParameter(e,"MaxParallelUploads")),this.initialized=!0},e.prototype.getXmlParameter=function(e,t){if(!e[t])throw new Error("Parameter ".concat(t," was not found."));return e[t]},e.prototype.getComponent=function(e,t){var n=t([]);if(p.default.locale(n.locale),!this.initialized)return d.default.createElement(d.default.Fragment,null);console.info(e.dataView);var r=e.dataView.tableRows[0][1];if(null==r)return d.default.createElement(d.default.Fragment,null);var o=e.dataView.tableRows[0][2],i=this.apiurl+"?refrowid="+r+"&entityid="+o;return console.info(i),d.default.createElement(w,{fileType:this.filterFileType,apiurl:i,invalidFileTypeMessage:this.invalidFileTypeMessage,instantUpload:this.instantUpload,maxParallelUploads:this.maxParallelUploads})},e.prototype.generateData=function(e,t){return e.dataView.tableRows.map((function(n){return e.dataView.getCellValue(n,t)}))},v([r.observable],e.prototype,"initialized",void 0),v([r.observable],e.prototype,"getScreenParameters",void 0),e}(),w=function(e){var t,n,r,i=null!==(t=e.fileType)&&void 0!==t?t:"",s=o.useState([])[0],c=o.useState([])[0];return d.default.createElement("div",{className:y},d.default.createElement("div",{className:g},d.default.createElement("div",{className:"FilePondComponent"},d.default.createElement(a.FilePond,{server:e.apiurl,allowFileTypeValidation:!0,acceptedFileTypes:[i],labelFileTypeNotAllowed:e.invalidFileTypeMessage,instantUpload:null!==(n=e.instantUpload)&&void 0!==n&&n,maxParallelUploads:null!==(r=e.maxParallelUploads)&&void 0!==r?r:1,files:s,allowReorder:!0,allowMultiple:!0,onupdatefiles:c,onerror:function(e){401==e.code?alert("Please logout and login again."):alert(e.body)},labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'}))))};t.FilePondComponent=w,t.FileUploadSectionPlugin=m},398:function(e,t,n){e.exports={root:"ScreenToolbar_root__3cMcS"}},399:function(e,t,n){e.exports={root:"ScreenToolbarPusher_root__1SqU0"}},400:function(e,t,n){e.exports={root:"ScreenToolbarActionGroup_root__2_N5R"}},401:function(e,t,n){e.exports={contentArea:"AboutDialog_contentArea__3ygJE"}},402:function(e,t,n){e.exports={root:"AlertCounter_root__uU1nW"}},403:function(e,t,n){e.exports={root:"LogoSection_root__Ak-q5"}},404:function(e,t,n){e.exports={root:"SidebarSection_root__3dIPV"}},405:function(e,t,n){e.exports={root:"SidebarSectionDivider_root__2Ai2p"}},406:function(e,t,n){e.exports={root:"MainMenuUL_root__1dCJf"}},407:function(e,t,n){e.exports={root:"MainMenuLI_root__2Ak2N"}},408:function(e,t,n){e.exports={root:"SidebarSectionBody_root__224Kf"}},409:function(e,t,n){e.exports={editIcon:"EditButton_editIcon__2qZmz"}},410:function(e,t,n){},411:function(e,t,n){e.exports={logoLeft:"CSidebar_logoLeft__1FGy4"}},412:function(e,t,n){e.exports={root:"ScreenHeaderAction_root__FbCq5"}},413:function(e,t,n){e.exports={root:"ScreenHeaderPusher_root__LuqeN"}},414:function(e,t,n){e.exports={root:"ScreenHeaderDivider_root__1Oh2l"}},415:function(e,t,n){e.exports={root:"ScreenContainer_root__1I29E"}},416:function(e,t,n){e.exports={label:"Label_label__15kpc"}},417:function(e,t,n){e.exports={vBox:"VBox_vBox__Pzefn"}},418:function(e,t,n){e.exports={hBox:"HBox_hBox__1ogW_"}},419:function(e,t,n){e.exports={root:"TabbedViewPanel_root__17_ol"}},420:function(e,t,n){e.exports={root:"TabbedView_root__2rKJQ"}},421:function(e,t,n){e.exports={root:"TabbedViewPanelsContainer_root__1O4oQ"}},422:function(e,t,n){e.exports={box:"Box_box__3NhCV"}},423:function(e,t,n){e.exports={root:"Screen_root__2hF7C"}},424:function(e,t,n){e.exports={root:"Fullscreen_root__3g5_O"}},425:function(e,t,n){e.exports={root:"MobileMain_root__3-8C4"}},426:function(e,t,n){e.exports={root:"TopToolBar_root__UMuE3"}},427:function(e,t,n){e.exports={root:"SearchButton_root__2oi9z"}},428:function(e,t,n){e.exports={root:"Search_root__3HM7W"}},429:function(e,t,n){e.exports={root:"MobileAboutView_root__28GUQ"}},430:function(e,t,n){e.exports={root:"ScreenHeader_root__1K8ua"}},431:function(e,t,n){e.exports={mobileStyleSheetIdentifier:"mobile_mobileStyleSheetIdentifier__3apVP"}},432:function(e,t,n){e.exports={modalWindowOverlay:"DialogStack_modalWindowOverlay__1BRvX"}},47:function(e,t,n){e.exports={root:"ColumnConfiguration_root__1DAjL",content:"ColumnConfiguration_content__2hzn4",columnConfigs:"ColumnConfiguration_columnConfigs__2PDSQ",columnConfigHeader:"ColumnConfiguration_columnConfigHeader__DqSDI",row:"ColumnConfiguration_row__W9OQh",lockedColumnsRow:"ColumnConfiguration_lockedColumnsRow__1Q1O9",buttonRow:"ColumnConfiguration_buttonRow__2HAlJ",arrow:"ColumnConfiguration_arrow__1Z4ws",input:"ColumnConfiguration_input__3zJsR",dropdown:"ColumnConfiguration_dropdown__2Uo7i"}},482:function(e,t,n){},52:function(e,t,n){e.exports={input:"TextEditor_input__Ks5Rm",readonlyDiv:"TextEditor_readonlyDiv__2a_fK",scrollY:"TextEditor_scrollY__3ZRPK",noScrollY:"TextEditor_noScrollY__2r71i",wrapText:"TextEditor_wrapText__2UFLv",multiLine:"TextEditor_multiLine__1F53U",editorContainer:"TextEditor_editorContainer__2Z2US",notification:"TextEditor_notification__3V8TR",richTextWrappContainer:"TextEditor_richTextWrappContainer__34zCg",richTextWrappStyle:"TextEditor_richTextWrappStyle__2zxU-",richTextEditorStyle:"TextEditor_richTextEditorStyle__1LSH4"}},55:function(e,t,n){e.exports={dialogContent:"DialogsCommon_dialogContent__110mb"}},57:function(e,t,n){e.exports={inpuContainer:"FavoriteFolderPropertiesDialog_inpuContainer__RgF07",lastRow:"FavoriteFolderPropertiesDialog_lastRow__kP5E4",row:"FavoriteFolderPropertiesDialog_row__a3kco",label:"FavoriteFolderPropertiesDialog_label__2SLxp",textInput:"FavoriteFolderPropertiesDialog_textInput__2hl3d",chcekBoxinput:"FavoriteFolderPropertiesDialog_chcekBoxinput__3BQJh",notification:"FavoriteFolderPropertiesDialog_notification__2cwb-"}},58:function(e,t,n){e.exports={avatarSection:"UserMenuDropdown_avatarSection__1NGCm",avatarContainer:"UserMenuDropdown_avatarContainer__tn0qe",avatar:"UserMenuDropdown_avatar__1JkhD",clickableAvatar:"UserMenuDropdown_clickableAvatar__3sW0W",pictureSection:"UserMenuDropdown_pictureSection__3VAy1",infoSection:"UserMenuDropdown_infoSection__9qTcR",userNameLabel:"UserMenuDropdown_userNameLabel__1CQHk",root:"UserMenuDropdown_root__r5tcv"}},60:function(e,t,n){e.exports={input:"FilterSettingsCommon_input__2ldkO",tagEditorDropdown:"FilterSettingsCommon_tagEditorDropdown__yM5yF",tagEditorDropdownItem:"FilterSettingsCommon_tagEditorDropdownItem__dGQQZ",dateTimeInput:"FilterSettingsCommon_dateTimeInput__3_1jf"}},61:function(e,t,n){e.exports={controlBtn:"CalendarWidget_controlBtn__Cu7GE",dayTable:"CalendarWidget_dayTable__U8abk",row:"CalendarWidget_row__1UDlS",cell:"CalendarWidget_cell__1XyYE",selectedDay:"CalendarWidget_selectedDay__3DZ39",dayHeaderCell:"CalendarWidget_dayHeaderCell__1PCpY",neighbourMonthCell:"CalendarWidget_neighbourMonthCell__xMeW8",header:"CalendarWidget_header__cLQvZ",title:"CalendarWidget_title__1esmL"}},71:function(e,t,n){e.exports={inpuContainer:"SaveFilterDialog_inpuContainer__qLdzP",row:"SaveFilterDialog_row__DZjpC",label:"SaveFilterDialog_label__1ThB6",textInput:"SaveFilterDialog_textInput__17mfL",chcekBoxinput:"SaveFilterDialog_chcekBoxinput__EPpbx"}},719:function(e,t,n){},720:function(e,t,n){},725:function(e,t){},727:function(e,t){},73:function(e,t,n){e.exports={root:"MobileDateTimeEditor_root__3wsmI",fullScreenEditorRoot:"MobileDateTimeEditor_fullScreenEditorRoot__3OAqz",fullScreenEditorInput:"MobileDateTimeEditor_fullScreenEditorInput__1wnsk",fullScreenEditorInfoRow:"MobileDateTimeEditor_fullScreenEditorInfoRow__1GRZ-",fullScreenEditorInputContainer:"MobileDateTimeEditor_fullScreenEditorInputContainer__19qVY",input:"MobileDateTimeEditor_input__-l2J6",inputRow:"MobileDateTimeEditor_inputRow__285B1",autoCompleteButton:"MobileDateTimeEditor_autoCompleteButton__3ZuoC"}},744:function(e,t,n){},745:function(e,t,n){},747:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(12),a=n(70),s=n.n(a),c=n(1);function u(e){for(var t=e;t.parent;)t=t.parent;return t}function l(e){return u(e).api}var d=n(24),p=n(347),h=n.n(p),f=window.location.href.split("#"),b=Object(d.a)(f,1)[0],v={authority:"".concat(b),client_id:"origamWebClient",redirect_uri:"".concat(b,"#origamClientCallback/"),response_type:"code",scope:"openid IdentityServerApi offline_access",post_logout_redirect_uri:"".concat(b),response_mode:"query",automaticSilentRenew:!0,silent_redirect_uri:"".concat(b,"#origamClientCallbackRenew/")},y=new h.a.UserManager(v);function g(){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(o.a.mark((function e(){var t,n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sessionStorage.getItem("origamAuthTokenOverride"))){e.next=4;break}return sessionStorage.setItem("origamAuthTokenOverride",t),e.abrupt("return",{access_token:t});case 4:if(!window.location.hash.startsWith("#origamClientCallback/")){e.next=13;break}return e.next=7,y.signinRedirectCallback(window.location.hash.replace("#origamClientCallback/",""));case 7:return n=e.sent,r=window.location.href.split("#"),i=Object(d.a)(r,1),a=i[0],window.history.replaceState(null,"",a),e.abrupt("return",n);case 13:return e.next=15,y.getUser();case 15:if(!(s=e.sent)){e.next=20;break}return e.abrupt("return",s);case 20:return e.next=22,y.signinRedirect();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.signoutRedirect();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j,k,x,C,I,S,D,R,T,_,P,F,M,L,E,A,V,N,B,U,G,W=n(3),H=n.n(W),z=n(35),Y=n.n(z),K=n(7),q=n(5),Q=n(6),X=n(9),Z=n(10),$=n(4),J=n(348),ee=n.n(J),te=n(21),ne=n.n(te),re=n(0),oe=function(e){return Object(re.jsx)("div",{className:ne()(ee.a.root),children:e.children})},ie=n(349),ae=n.n(ie),se=function(e){return Object(re.jsx)("div",{className:ae.a.root,children:e.children})},ce=n(180),ue=n.n(ce),le=n(11),de=n(8),pe=n(25),he=(n(23),n(128)),fe=n.n(he),be=n(54),ve=n(50),ye=n(26),ge=n.n(ye),me=Object(K.observer)((k=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refPanel=function(t){return e.elmPanel=t},e.elmPanel=null,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){}},{key:"style",get:function(){switch(this.props.type){case"isHoriz":return{width:this.props.size};case"isVert":return{height:this.props.size}}}},{key:"render",value:function(){return Object(re.jsx)("div",{ref:this.refPanel,className:ne()(this.props.className||fe.a.splitterPanel,this.props.type),style:this.style,children:this.props.children})}}]),n}(H.a.Component),Object($.a)(k.prototype,"style",[c.computed],Object.getOwnPropertyDescriptor(k.prototype,"style"),k.prototype),j=k))||j,we=Object(K.observer)((C=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"style",get:function(){if(!this.props.isDragging)return{};switch(this.props.type){case"isVert":return{top:this.props.relativeLoc};case"isHoriz":return{left:this.props.relativeLoc}}}},{key:"render",value:function(){return Object(re.jsx)("div",{ref:this.props.domRef,onMouseDown:this.props.onMouseDown,className:ne()(this.props.className||fe.a.splitterDivider,this.props.type,{isDragging:this.props.isDragging}),style:this.style,children:Object(re.jsx)("div",{className:"dividerLine"})})}}]),n}(H.a.Component),Object($.a)(C.prototype,"style",[c.computed],Object.getOwnPropertyDescriptor(C.prototype,"style"),C.prototype),x=C))||x,Oe=(I=c.action.bound,S=c.action.bound,D=c.action.bound,R=c.action.bound,T=c.action.bound,_=c.action.bound,P=c.action.bound,Object(K.observer)((M=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),r=t.call(this,e),Object(de.a)(r,"containerWidth",L,Object(pe.a)(r)),Object(de.a)(r,"containerHeight",E,Object(pe.a)(r)),Object(de.a)(r,"isInitialized",A,Object(pe.a)(r)),Object(de.a)(r,"sizeMap",V,Object(pe.a)(r)),Object(de.a)(r,"dividerSizeMap",N,Object(pe.a)(r)),Object(de.a)(r,"isResizing",B,Object(pe.a)(r)),Object(de.a)(r,"mouseLocStart",U,Object(pe.a)(r)),Object(de.a)(r,"dividerRelativeLoc",G,Object(pe.a)(r)),r.draggingDividerId=void 0,r.initSizes=ge.a.debounce(r.initSizesImm,10),Object(c.runInAction)((function(){for(var e=0;e<r.props.panels.length;e++){var t=r.props.panels[e];r.sizeMap.set(t.id,t.positionRatio),e<r.props.panels.length-1&&r.dividerSizeMap.set(t.id,0)}})),r}return Object(Q.a)(n,[{key:"handleResize",value:function(e){var t=e.bounds;t&&this.announceContainerSize(t.width,t.height)}},{key:"announceContainerSize",value:function(e,t){e>0&&t>0&&this.differentSizeRequested(e,t)&&(this.containerWidth=e,this.containerHeight=t,this.initSizes(),this.isInitialized=!0)}},{key:"differentSizeRequested",value:function(e,t){return Math.abs(t-this.containerHeight)>.001||Math.abs(e-this.containerWidth)>.001}},{key:"initSizesImm",value:function(){var e=this,t="isVert"===this.props.type?this.containerHeight:this.containerWidth,n=Array.from(this.dividerSizeMap.values()).reduce((function(e,t){return e+t}),0);if(void 0===this.props.sizeOverrideFirstPanel){var r,o=(t-n)/Array.from(this.sizeMap.values()).reduce((function(e,t){return e+t}),0),i=Object(le.a)(this.sizeMap.entries());try{for(i.s();!(r=i.n()).done;){var a=Object(d.a)(r.value,2),s=a[0],c=a[1];this.sizeMap.set(s,c*o)}}catch(y){i.e(y)}finally{i.f()}}else if(this.props.panels.length>0){var u,l=Math.max(this.props.sizeOverrideFirstPanel,20),p=(t-n-l)/this.props.panels.slice(1).reduce((function(t,n){return t+(e.sizeMap.get(n.id)||0)}),0),h=Object(le.a)(this.sizeMap.entries());try{for(h.s();!(u=h.n()).done;){var f=Object(d.a)(u.value,2),b=f[0],v=f[1];b!==this.props.panels[0].id&&this.sizeMap.set(b,v*p)}}catch(y){h.e(y)}finally{h.f()}this.sizeMap.set(this.props.panels[0].id,l)}}},{key:"handleDividerMouseDown",value:function(e,t){this.draggingDividerId=t,this.isResizing=!0,this.dividerRelativeLoc=0,this.mouseLocStart="isVert"===this.props.type?e.screenY:e.screenX,window.addEventListener("mouseup",this.handleWindowMouseUp),window.addEventListener("mousemove",this.handleWindowMouseMove)}},{key:"handleWindowMouseMove",value:function(e){e.preventDefault();var t=("isVert"===this.props.type?e.screenY:e.screenX)-this.mouseLocStart,n=this.computeNewSizes(t),r=Object(d.a)(n,2),o=r[0],i=r[1];o>=20&&i>=20&&(this.dividerRelativeLoc=t)}},{key:"draggingIds",get:function(){var e=this;return[this.draggingDividerId,this.props.panels[this.props.panels.findIndex((function(t){return t.id===e.draggingDividerId}))+1].id]}},{key:"computeNewSizes",value:function(e){var t=Object(d.a)(this.draggingIds,2),n=t[0],r=t[1];return[this.sizeMap.get(n)+e,this.sizeMap.get(r)-e]}},{key:"newSizes",get:function(){return this.computeNewSizes(this.dividerRelativeLoc)}},{key:"handleWindowMouseUp",value:function(e){this.isResizing=!1,window.removeEventListener("mouseup",this.handleWindowMouseUp),window.removeEventListener("mousemove",this.handleWindowMouseMove);var t=Object(d.a)(this.draggingIds,2),n=t[0],r=t[1],o=Object(d.a)(this.newSizes,2),i=o[0],a=o[1];this.sizeMap.set(n,i),this.sizeMap.set(r,a),this.props.onSizeChangeFinished&&("isHoriz"===this.props.type?this.props.onSizeChangeFinished(n,r,i/this.containerWidth,a):this.props.onSizeChangeFinished(n,r,i/this.containerHeight,a))}},{key:"handleDividerResize",value:function(e,t){if(e.bounds){var n="isVert"===this.props.type?e.bounds.height:e.bounds.width;this.dividerSizeMap.get(t)!==n&&(this.dividerSizeMap.set(t,n),this.initSizes())}}},{key:"render",value:function(){for(var e=this,t=[],n=function(n){var r=e.props.panels[n];t.push(Object(re.jsx)(me,{className:(e.props.STYLE||fe.a).panel,type:e.props.type,size:e.sizeMap.get(r.id),children:r.element},"S".concat(r.id))),n<e.props.panels.length-1&&t.push(Object(re.jsx)(ve.default,{bounds:!0,onResize:function(t){return e.handleDividerResize(t,r.id)},children:function(t){var n=t.measureRef;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(we,{className:(e.props.STYLE||fe.a).divider,domRef:n,isDragging:e.isResizing&&e.draggingDividerId===r.id,relativeLoc:e.dividerRelativeLoc,type:e.props.type,onMouseDown:function(t){return e.handleDividerMouseDown(t,r.id)}},"D".concat(r.id))}})}},n))},r=0;r<this.props.panels.length;r++)n(r);return Object(re.jsx)(ve.default,{bounds:!0,onResize:this.handleResize,children:function(n){var r=n.measureRef;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",{ref:r,className:ne()((e.props.STYLE||fe.a).root,e.props.type),children:e.isInitialized&&t})}})}})}}]),n}(H.a.Component),L=Object($.a)(M.prototype,"containerWidth",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object($.a)(M.prototype,"containerHeight",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=Object($.a)(M.prototype,"isInitialized",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object($.a)(M.prototype,"sizeMap",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),N=Object($.a)(M.prototype,"dividerSizeMap",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),B=Object($.a)(M.prototype,"isResizing",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object($.a)(M.prototype,"mouseLocStart",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Object($.a)(M.prototype,"dividerRelativeLoc",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(M.prototype,"handleResize",[I],Object.getOwnPropertyDescriptor(M.prototype,"handleResize"),M.prototype),Object($.a)(M.prototype,"announceContainerSize",[S],Object.getOwnPropertyDescriptor(M.prototype,"announceContainerSize"),M.prototype),Object($.a)(M.prototype,"initSizesImm",[D],Object.getOwnPropertyDescriptor(M.prototype,"initSizesImm"),M.prototype),Object($.a)(M.prototype,"handleDividerMouseDown",[R],Object.getOwnPropertyDescriptor(M.prototype,"handleDividerMouseDown"),M.prototype),Object($.a)(M.prototype,"handleWindowMouseMove",[T],Object.getOwnPropertyDescriptor(M.prototype,"handleWindowMouseMove"),M.prototype),Object($.a)(M.prototype,"handleWindowMouseUp",[_],Object.getOwnPropertyDescriptor(M.prototype,"handleWindowMouseUp"),M.prototype),Object($.a)(M.prototype,"handleDividerResize",[P],Object.getOwnPropertyDescriptor(M.prototype,"handleDividerResize"),M.prototype),F=M))||F),je=function(e){return Object(re.jsx)(Oe,{type:"isHoriz",STYLE:ue.a,panels:[{id:"sidebar",positionRatio:1,element:e.sidebar},{id:"mainbar",positionRatio:5,element:e.mainbar}]})};function ke(e){var t=u(e).workbench;if(!t)throw new Error("No workbench in Application.");return t}var xe=n(190),Ce=n.n(xe),Ie=n(19),Se=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsxs)("div",{onClick:this.props.onClick,className:ne()(Ce.a.root,{isActive:this.props.isActive,isDirty:this.props.isDirty}),title:this.props.title,id:this.props.id,children:[Object(re.jsx)("div",{className:Ce.a.label,children:this.props.children}),this.props.hasCloseBtn&&Object(re.jsx)("a",{className:Ce.a.closeBtn,onClick:this.props.onCloseClick,onMouseDown:this.props.onCloseMouseDown,children:Object(re.jsx)(Ie.Icon,{src:"./icons/close.svg",tooltip:""})})]})}}]),n}(H.a.Component),De=n(352),Re=n.n(De),Te=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:Re.a.root,children:this.props.children})}}]),n}(H.a.Component);function _e(e){return ke(e).workbenchLifecycle}function Pe(e){for(var t,n=e;;){if(null===(t=n)||void 0===t?void 0:t.$type_IOpenedScreen)return n;if(!n)return;n=n.parent}}var Fe=n(20),Me=n(43),Le=n.n(Me);function Ee(e){for(var t=e;;){if(t.$type_IFormScreen)return t;t=t.parent}}function Ae(e){return Ee(e).formScreenLifecycle}function Ve(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Ae(e).refreshSession(),"t0",1);case 1:case"end":return t.stop()}}),t)}))}var Ne=function(e){return null===e||void 0===e?void 0:e.$type_IDataView};function Be(e){for(var t=e;;){var n;if(Ne(t))return t;if(!t)return;t=null===(n=t)||void 0===n?void 0:n.parent}}var Ue,Ge={getIsSelectedRowId:function(e,t){return Be(e).hasSelectedRowId(t)},getSelectedRowIds:function(e){return Be(e).selectedRowIds}};!function(e){e.Dock="Dock",e.Fill="Fill"}(Ue||(Ue={}));function We(e){for(var t=e;;){if(t.$type_IProperty)return t;t=t.parent}}function He(e){return ke(e).mainMenuEnvelope}function ze(e){return He(e).mainMenu}var Ye,Ke,qe,Qe=Ge,Xe={isLinkToForm:function(e){return We(e).isLink},getLinkMenuId:function(e,t){return Object(i.a)(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=We(e)).linkDependsOnValue){n.next=6;break}return i=l(e),n.next=5,i.getMenuId({LookupId:r.lookupId,ReferenceId:t});case 5:return n.abrupt("return",n.sent);case 6:return n.abrupt("return",r.linkToMenuId);case 7:case"end":return n.stop()}}),n)})))()}},Ze={getItemById:function(e,t){return ze(e).getItemById(t)}},$e={getDialogController:function(e){return u(e).errorDialogController}};function Je(e){return ke(e).workQueues}function et(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Je(e).stopTimer(),"t0",1);case 1:case"end":return t.stop()}}),t)}))}function tt(e){return u(e).applicationLifecycle}function nt(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(tt(e).performLogout(),"t0",1);case 1:case"end":return t.stop()}}),t)}))}function rt(e){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length){var n=t.pop().split(";").shift();return n||""}return""}function ot(){if(!Ye){var e=decodeURIComponent(rt("origamCurrentLocale")).match(/c=([a-zA-Z-]+)\|/i);if(!e)throw new Error('Locale cookie was not found. Was the function "initLocaleCookie" called?');Ye=e[1]}return Ye}function it(e){switch(e){case"DayMonthYear":return Ke.DayMonthYear;case"MonthDayYear":return Ke.MonthDayYear;default:throw new Error('Cannot parse "'+e+'" to DateSequence')}}function at(){if(!qe){var e=decodeURIComponent(rt("origamCurrentLocale"));try{var t=function(e){return e.split("|").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{})}(e);qe={defaultDateSeparator:ct("defaultDateSeparator",t),defaultTimeSeparator:ct("defaultTimeSeparator",t),defaultDateTimeSeparator:ct("defaultDateTimeSeparator",t),defaultDateSequence:it(ct("defaultDateSequence",t)),defaultLongDateFormat:ct("defaultLongDateFormat",t),defaultShortDateFormat:ct("defaultShortDateFormat",t),defaultTimeFormat:ct("defaultTimeFormat",t)}}catch(n){throw new Error('Could not parse locale cookie value "'+e+'". '+n)}}return qe}function st(e){if(!e)return!1;try{return at(),!0}catch(t){return console.warn("Error when parsing localization cookie:"+t),!1}}function ct(e,t){var n=t[e];if(void 0===n||null===n)throw new Error('Parameter named "'+e+'" was not found');return n}function ut(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st(decodeURIComponent(rt("origamCurrentLocale")))){e.next=3;break}return e.abrupt("return");case 3:return n=l(t),e.next=6,n.defaultLocalizationCookie();case 6:if(e.t0=e.sent,document.cookie="origamCurrentLocale="+e.t0,st(r=decodeURIComponent(rt("origamCurrentLocale")))){e.next=11;break}throw new Error('Could not parse localization cookie: "'+r+'"');case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.DayMonthYear=0]="DayMonthYear",e[e.MonthDayYear=1]="MonthDayYear"}(Ke||(Ke={}));var dt="true"===window.localStorage.getItem("debugShowTranslations"),pt={};function ht(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(i.a)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ot(),e.prev=1,e.next=4,s.a.get("locale/localization_".concat(n,".json"),{});case 4:r=e.sent,pt=r.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),404===e.t0.response.status&&(i=n.split("-")[0],s.a.get("locale/localization_".concat(i,".json"),{}).then((function(e){return pt=e.data})).catch((function(e){return console.error(e)}))),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function bt(e,t){var n,r=!1;pt.hasOwnProperty(t)?n=pt[t]:(n=e,r=!0);for(var o=0;o<(arguments.length<=2?0:arguments.length-2);o++)n=n.replace("{".concat(o,"}"),o+2<2||arguments.length<=o+2?void 0:arguments[o+2]);return dt?r?(console.error('Could not find translation for: "'.concat(t,'", showing default: "').concat(n,'"')),Object(re.jsx)("span",{title:t,style:{backgroundColor:"red"},children:n})):Object(re.jsx)("span",{title:t,style:{backgroundColor:"green"},children:n}):n}var vt=Symbol("_$ErrorHandled");function yt(e){return o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.response||474!==n.response.status){t.next=2;break}return t.abrupt("return");case 2:if(!n.response||401!==n.response.status){t.next=10;break}return t.delegateYield(et(e)(),"t0",4);case 4:return $e.getDialogController(e).dismissErrors(),t.delegateYield($e.getDialogController(e).pushError(bt("Your request is no longer authorized, which means that \n          you were either logged out or your session expired. Please log in again.","request_no_longer_authorized")),"t1",6);case 6:return t.delegateYield(nt(e)(),"t2",7);case 7:case 13:return t.abrupt("return");case 10:if(!n[vt]){t.next=14;break}return t.next=13,n[vt];case 14:return r=Object(c.flow)((function(){return $e.getDialogController(e).pushError(n)}))(),n[vt]=r,t.next=18,r;case 18:case"end":return t.stop()}}),t)}))}var gt=n(16),mt=n(55),wt=n.n(mt);function Ot(e){var t=u(e).breakpoint;return!!t&&t.includes("small")}var jt,kt,xt=function(e){var t=Object(W.useContext)(K.MobXProviderContext).application;return Object(re.jsx)(Ie.ModalWindow,{title:e.title,titleButtons:e.titleButtons,titleIsWorking:e.titleIsWorking,buttonsLeft:e.buttonsLeft,buttonsRight:e.buttonsRight,buttonsCenter:e.buttonsCenter,width:e.width,height:e.height,fullScreen:Ot(t),topPosiotionProc:e.topPosiotionProc,onKeyDown:e.onKeyDown,children:e.children})},Ct=Object(K.observer)(jt=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refPrimaryBtn=function(t){return e.elmPrimaryBtn=t},e.elmPrimaryBtn=void 0,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t,n;e.elmPrimaryBtn&&(null===(t=(n=e.elmPrimaryBtn).focus)||void 0===t||t.call(n))}),150)}},{key:"render",value:function(){return Object(re.jsx)(xt,{title:bt("Question","question_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{autoFocus:!0,tabIndex:0,ref:this.refPrimaryBtn,onClick:this.props.onSaveClick,children:bt("Save","save")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onDontSaveClick,id:"dontSaveButton",children:bt("Don't Save","close_without_saving")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:bt("Do you wish to save changes in {0}?","do_you_wish_to_save",this.props.screenTitle)})})}}]),n}(H.a.Component))||jt;function It(e){var t;return null===(t=Be(e))||void 0===t?void 0:t.tablePanelView}!function(e){e.UpdateData="UpdateData",e.RefreshData="RefreshData",e.OpenForm="OpenForm",e.OpenUrl="OpenUrl",e.ChangeUI="ChangeUI",e.DestroyForm="DestroyForm",e.Script="Script"}(kt||(kt={}));var St,Dt,Rt,Tt,_t,Pt,Ft,Mt,Lt,Et,At,Vt=function(){function e(){Object(q.a)(this,e),this.callBacks=[]}return Object(Q.a)(e,[{key:"add",value:function(e){this.callBacks.includes(e)||this.callBacks.push(e)}},{key:"remove",value:function(e){this.callBacks.remove(e)}},{key:"call",value:function(){var e,t=Object(le.a)(this.callBacks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),Nt=function e(t,n){Object(q.a)(this,e),this.width=t,this.height=n},Bt=(St=c.action.bound,Dt=c.action.bound,Rt=function(){function e(t){Object(q.a)(this,e),this.dialogInfo=void 0,this.parentContext=void 0,this.$type_IOpenedScreen=1,this.parentSessionId=void 0,this.isBeingClosed=!1,this.activationHandler=new Vt,Object(de.a)(this,"stackPosition",Tt,this),Object(de.a)(this,"isActive",_t,this),this.lazyLoading=!1,this.menuItemId="",this.menuItemType=null,this.order=0,this._title="",Object(de.a)(this,"isSleeping",Pt,this),Object(de.a)(this,"isSleepingDirty",Ft,this),this.isClosed=!1,Object(de.a)(this,"content",Mt,this),this.parameters={},this.parent=void 0,Object.assign(this,t),this.content.parent=this}return Object(Q.a)(e,[{key:"tabTitle",get:function(){var e,t;return null!==(e=null===(t=this.content.formScreen)||void 0===t?void 0:t.dynamicTitle)&&void 0!==e?e:this._title},set:function(e){this._title=e}},{key:"formTitle",get:function(){var e,t,n,r;return null!==(e=null!==(t=null===(n=this.content.formScreen)||void 0===n?void 0:n.dynamicTitle)&&void 0!==t?t:null===(r=this.content.formScreen)||void 0===r?void 0:r.title)&&void 0!==e?e:""}},{key:"hasDynamicTitle",get:function(){var e;return!!(null===(e=this.content.formScreen)||void 0===e?void 0:e.dynamicTitle)}},{key:"isDialog",get:function(){return void 0!==this.dialogInfo}},{key:"setActive",value:function(e){if(this.isActive=e,e&&this.content.formScreen){var t=this.content.formScreen.dataViews.length>0?this.content.formScreen.dataViews[0]:void 0;if(t&&!t.isFormViewActive())It(t).triggerOnFocusTable();this.activationHandler.call()}}},{key:"setContent",value:function(e){this.content=e,e.parent=this}}]),e}(),Tt=Object($.a)(Rt.prototype,"stackPosition",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_t=Object($.a)(Rt.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=Object($.a)(Rt.prototype,"isSleeping",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ft=Object($.a)(Rt.prototype,"isSleepingDirty",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mt=Object($.a)(Rt.prototype,"content",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($.a)(Rt.prototype,"isDialog",[c.computed],Object.getOwnPropertyDescriptor(Rt.prototype,"isDialog"),Rt.prototype),Object($.a)(Rt.prototype,"setActive",[St],Object.getOwnPropertyDescriptor(Rt.prototype,"setActive"),Rt.prototype),Object($.a)(Rt.prototype,"setContent",[Dt],Object.getOwnPropertyDescriptor(Rt.prototype,"setContent"),Rt.prototype),Rt);!function(e){e.Report="Report",e.ChangeUI="ChangeUI",e.OpenForm="OpenForm",e.Workflow="Workflow",e.QueueAction="QueueAction",e.SelectionDialogAction="SelectionDialogAction",e.Dropdown="Dropdown"}(Lt||(Lt={})),function(e){e.PanelHeader="PanelHeader",e.Toolbar="Toolbar",e.PanelMenu="PanelMenu"}(Et||(Et={})),function(e){e.MultipleCheckboxes="MultipleCheckboxes",e.ActiveRecord="ActiveRecord",e.Always="Always"}(At||(At={}));function Ut(e){for(var t=e;!t.$type_IAction;)t=t.parent;return t}var Gt,Wt={refresh:function(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Ae(e).refreshSession(),"t0",1);case 1:case"end":return t.stop()}}),t)}))}};function Ht(e){return o.a.mark((function t(n,r,i){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next=t.t0===Gt.OrigamTab?3:5;break;case 3:return t.delegateYield(_e(e).openNewUrl(n,i),"t1",4);case 4:return t.abrupt("break",8);case 5:return(a=window.open("".concat(n),"_blank"))&&a.focus(),t.abrupt("break",8);case 8:case"end":return t.stop()}}),t)}))}function zt(e,t){return Ee(e).getDataViewsByEntity(t)}function Yt(e,t){return Ee(e).getDataSourceByEntity(t)}function Kt(e){return function(t,n){var r=function(e,t){var n=Yt(e,t);return n?n.rowState:void 0}(e,t);r&&r.putValue(n)}}function qt(e){return Ee(e).dataViews}function Qt(e){return Be(e).isBindingRoot}function Xt(e){return Ee(e).dataSources}function Zt(e){return Ee(e).dataViewCache}!function(e){e.OrigamTab="OrigamTab"}(Gt||(Gt={}));var $t,Jt=o.a.mark(en);function en(e,t,n,r){var i,a,s,c,u,l,d,p,h,f,b,v,y,g,m,w,O,j,k,x,C,I,S,D,R,T,_,P,F,M,L,E,A,V,N,B,U;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!ge.a.isArray(t)){o.next=18;break}i=Object(le.a)(t),o.prev=2,i.s();case 4:if((a=i.n()).done){o.next=9;break}return s=a.value,o.delegateYield(en(e,s,n,r),"t0",7);case 7:o.next=4;break;case 9:o.next=14;break;case 11:o.prev=11,o.t1=o.catch(2),i.e(o.t1);case 14:return o.prev=14,i.f(),o.finish(14);case 17:return o.abrupt("return");case 18:(c=t).state&&Kt(e)(c.entity,c.state),o.t2=c.operation,o.next=o.t2===$t.Update?23:o.t2===$t.Create?50:o.t2===$t.Delete?87:o.t2===$t.FormSaved?92:o.t2===$t.CurrentRecordNeedsUpdate?100:o.t2===$t.FormNeedsRefresh?121:o.t2===$t.DeleteAllData?124:128;break;case 23:u=zt(e,c.entity),l=Object(le.a)(u),o.prev=25,l.s();case 27:if((d=l.n()).done){o.next=40;break}if((p=d.value).dataTable.clearRecordDirtyValues(c.objectId,c.wrappedObject),p.substituteRecord(c.wrappedObject),Zt(p).UpdateData(p),!n){o.next=35;break}return o.next=35,p.dataTable.updateSortAndFilter({retainPreviousSelection:!0});case 35:p.selectedRow||p.reselectOrSelectFirst(),p.formFocusManager.stopAutoFocus(),p.gridFocusManager.focusTableIfNeeded();case 38:o.next=27;break;case 40:o.next=45;break;case 42:o.prev=42,o.t3=o.catch(25),l.e(o.t3);case 45:return o.prev=45,l.f(),o.finish(45);case 48:return Ee(e).setDirty(!0),o.abrupt("break",129);case 50:h=zt(e,c.entity),f=Object(le.a)(h),o.prev=52,f.s();case 54:if((b=f.n()).done){o.next=77;break}if(v=b.value,y=v.tablePanelView,g=t.wrappedObject,m=(null===r||void 0===r?void 0:r.modelInstanceId)===v.modelInstanceId,!v.isLazyLoading){o.next=71;break}return o.next=62,v.dataTable.insertRecord(y.firstVisibleRowIndex,g,m);case 62:return o.prev=62,v.lifecycle.stopSelectedRowReaction(),v.selectRow(g),o.delegateYield(v.lifecycle.changeMasterRow(),"t4",66);case 66:return o.prev=66,v.lifecycle.startSelectedRowReaction(),o.finish(66);case 69:o.next=74;break;case 71:return o.next=73,v.dataTable.insertRecord(v.tableRows.length,g,m);case 73:v.selectRow(g);case 74:Zt(v).UpdateData(v);case 75:o.next=54;break;case 77:o.next=82;break;case 79:o.prev=79,o.t5=o.catch(52),f.e(o.t5);case 82:return o.prev=82,f.f(),o.finish(82);case 85:return Ee(e).setDirty(!0),o.abrupt("break",129);case 87:w=zt(e,c.entity),O=Object(le.a)(w);try{for(O.s();!(j=O.n()).done;)k=j.value,(x=k.dataTable.getRowById(c.objectId))&&(k.deleteRowAndSelectNext(x),Zt(k).UpdateData(k))}catch(G){O.e(G)}finally{O.f()}return Ee(e).setDirty(!0),o.abrupt("break",129);case 92:Ee(e).setDirty(!1),C=ke(e),I=C.lookupMultiEngine,S=I.cacheDependencies,D=I.lookupCleanerReloaderById,R=Xt(e),T=S.getDependencyLookupIdsByCacheKeys(R.map((function(e){return e.lookupCacheKey}))),_=Object(le.a)(T);try{for(_.s();!(P=_.n()).done;)M=P.value,null===(F=D.get(M))||void 0===F||F.reloadLookupLabels(),C.lookupListCache.deleteLookup(M)}catch(G){_.e(G)}finally{_.f()}return o.abrupt("break",129);case 100:L=qt(e),E=Object(le.a)(L),o.prev=102,E.s();case 104:if((A=E.n()).done){o.next=112;break}if(!Qt(V=A.value)||!V.requestDataAfterSelectionChange){o.next=109;break}return o.delegateYield(V.lifecycle.changeMasterRow(),"t6",108);case 108:return o.delegateYield(V.lifecycle.navigateChildren(),"t7",109);case 109:V.selectedRow||V.reselectOrSelectFirst();case 110:o.next=104;break;case 112:o.next=117;break;case 114:o.prev=114,o.t8=o.catch(102),E.e(o.t8);case 117:return o.prev=117,E.f(),o.finish(117);case 120:return o.abrupt("break",129);case 121:if(Ee(e).suppressRefresh){o.next=123;break}return o.delegateYield(Ve(e)(),"t9",123);case 123:return o.abrupt("break",129);case 124:N=qt(e),B=Object(le.a)(N);try{for(B.s();!(U=B.n()).done;)U.value.clear()}catch(G){B.e(G)}finally{B.f()}return o.abrupt("break",129);case 128:throw new Error("Unknown operation "+c.operation);case 129:case"end":return o.stop()}}),Jt,null,[[2,11,14,17],[25,42,45,48],[52,79,82,85],[62,,66,69],[102,114,117,120]])}!function(e){e[e.DeleteAllData=-2]="DeleteAllData",e[e.Delete=-1]="Delete",e[e.Update=0]="Update",e[e.Create=1]="Create",e[e.FormSaved=2]="FormSaved",e[e.FormNeedsRefresh=3]="FormNeedsRefresh",e[e.CurrentRecordNeedsUpdate=4]="CurrentRecordNeedsUpdate",e[e.RefreshPortal=5]="RefreshPortal"}($t||($t={}));var tn=Symbol("BREAK_RECURSION");function nn(e,t){var n,r=ze(e).menuUI;try{!function e(r){if(r.attributes.id===t)throw n=r,tn;var o,i=Object(le.a)(r.elements);try{for(i.s();!(o=i.n()).done;)e(o.value)}catch(a){i.e(a)}finally{i.f()}}(r)}catch(o){if(o===tn)return n;throw o}}function rn(e){var t,n=_e(e);return t={getPanelFunc:function(t){return function(e,t){return Pe(e).content.formScreen.dataViews.find((function(e){return e.modelInstanceId===t}))}(e,t)},openNewForm:n.openNewForm,openNewUrl:Ht(e),closeForm:X_(e),refreshForm:Wt.refresh(e),getActionCaption:function(){return function(e){return Ut(e).caption}(e)},processCRUDResult:function(t){return en(e,t.crudResult,t.resortTables)},parentContext:e},o.a.mark((function e(n){var r,i,a,s,c,u,l,d,p,h,f,b,v,y,g,m,w,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=n.map((function(e,t){return[t,e]}))).sort((function(e,t){return e[1].type===kt.DestroyForm?-1:t[1].type===kt.DestroyForm?1:e[0]-t[0]})),i=Object(le.a)(r.map((function(e){return e[1]}))),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=40;break}s=a.value,e.t0=s.type,e.next=e.t0===kt.OpenForm?10:e.t0===kt.DestroyForm?17:e.t0===kt.RefreshData?19:e.t0===kt.UpdateData?21:e.t0===kt.OpenUrl?23:e.t0===kt.Script?27:38;break;case 10:return u=nn(t.parentContext,s.request.objectId),l=!!u&&"true"===(null===u||void 0===u||null===(c=u.attributes)||void 0===c?void 0:c.lazyLoading),d=s.request,p=s.refreshOnReturnType,h=d.objectId,f=d.typeString,b=d.parameters,v=d.isModalDialog,y=d.dialogWidth,g=d.dialogHeight,m=d.caption,w=v?new Nt(y,g):void 0,e.delegateYield(t.openNewForm(h,f,m||t.getActionCaption(),l,w,b,t.parentContext,s.request,void 0,void 0,void 0,p),"t1",16);case 16:return e.abrupt("break",38);case 17:return e.delegateYield(t.closeForm(),"t2",18);case 18:return e.abrupt("break",38);case 19:return e.delegateYield(t.refreshForm(),"t3",20);case 20:return e.abrupt("break",38);case 21:return e.delegateYield(t.processCRUDResult({crudResult:s.changes,resortTables:!0}),"t4",22);case 22:return e.abrupt("break",38);case 23:return e.delegateYield(t.openNewUrl(s.url,s.urlOpenMethod,s.request.caption),"t5",24);case 24:if(!Pe(t.parentContext).isDialog){e.next=26;break}return e.delegateYield(t.closeForm(),"t6",26);case 26:return e.abrupt("break",38);case 27:e.prev=27,new Function("getPanel",s.script)(t.getPanelFunc),e.next=37;break;case 32:throw e.prev=32,e.t7=e.catch(27),O="An error occurred while executing custom script: "+s.script+", \n"+e.t7.message,e.t7.stackTrace&&(O+=", \n"+e.t7.stackTrace),new Error(O);case 37:return e.abrupt("break",38);case 38:e.next=5;break;case 40:e.next=45;break;case 42:e.prev=42,e.t8=e.catch(3),i.e(e.t8);case 45:return e.prev=45,i.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[3,42,45,48],[27,32]])}))}function on(e){return ke(e).searcher}function an(e){return o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Je(e),t.delegateYield(n.getWorkQueueList(),"t0",2);case 2:on(e).indexWorkQueues(n.items);case 3:case"end":return t.stop()}}),t)}))}function sn(e){for(var t=e;;){if(Ne(t))return t.dataSource;if(t.$type_IDataSource)return t;t=t.parent}}function cn(e){return function(e){return sn(e).fields}(e).map((function(e){return e.name})).filter((function(e){return!e.startsWith("__")}))}function un(e){return sn(e).dataStructureEntityId}function ln(e){return Be(e).modelInstanceId}function dn(e,t){return Pe(e).content.formScreen.dataViews.find((function(e){return ln(e)===t}))}function pn(e){var t=Pe(e);return!(!t.isSleeping||!t.isSleepingDirty)||!(!t.content||t.content.isLoading)&&t.content.formScreen.isDirty}function hn(e){return Ee(e).suppressSave}function fn(e){var t=u(e).mobileState;if(!t)throw new Error("No mobileState in Application.");return t}function bn(e){return ke(e).openedScreens}function vn(e){return bn(e).items.filter((function(e){return!e.isDialog}))}function yn(e){return bn(e).activeItem}var gn,mn=function(){function e(){Object(q.a)(this,e),this.actionDropUpHidden=!0,this.refreshButtonHidden=!0,this.saveButtonHidden=!0,this.showOpenTabCombo=!1,this.showSearchButton=!0,this.showHamburgerMenuButton=!1,this.showOkButton=!1,this.heading=bt("Menu","menu")}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return e}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xn);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new xn}}]),e}(),wn=function(){function e(){Object(q.a)(this,e),this.actionDropUpHidden=!0,this.refreshButtonHidden=!0,this.saveButtonHidden=!0,this.showOpenTabCombo=!1,this.showSearchButton=!0,this.showHamburgerMenuButton=!0,this.showOkButton=!1,this.heading=bt("About","about_application")}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return!0}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xn);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new mn}}]),e}(),On=function(){function e(){Object(q.a)(this,e),this.actionDropUpHidden=!0,this.refreshButtonHidden=!0,this.saveButtonHidden=!0,this.showOpenTabCombo=!1,this.showSearchButton=!1,this.showHamburgerMenuButton=!0,this.showOkButton=!1,this.heading=bt("Search","mobile_search_title")}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return!0}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xn);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new mn}}]),e}(),jn=function(){function e(t,n,r,o){Object(q.a)(this,e),this.component=t,this.heading=n,this.layoutAfterClose=r,this.actionDropUpHidden=!0,this.refreshButtonHidden=!0,this.saveButtonHidden=!0,this.showOpenTabCombo=!1,this.showSearchButton=!1,this.showHamburgerMenuButton=!1,this.showOkButton=!0,this.showOkButton=null===o||void 0===o||o}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return!1}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(n=this.layoutAfterClose)&&void 0!==n?n:new xn);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new mn}}]),e}(),kn=function(){function e(t,n){Object(q.a)(this,e),this.component=t,this.layoutAfterClose=n,this.actionDropUpHidden=!0,this.refreshButtonHidden=!0,this.saveButtonHidden=!0,this.showOpenTabCombo=!1,this.showSearchButton=!1,this.showHamburgerMenuButton=!1,this.showOkButton=!1,this.heading=""}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return!1}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(n=this.layoutAfterClose)&&void 0!==n?n:new xn);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new mn}}]),e}(),xn=function(){function e(){Object(q.a)(this,e),this.actionDropUpHidden=!1,this.refreshButtonHidden=!1,this.saveButtonHidden=!1,this.showOpenTabCombo=!0,this.showSearchButton=!0,this.showHamburgerMenuButton=!0,this.showOkButton=!1,this.heading=""}return Object(Q.a)(e,[{key:"showCloseButton",value:function(e){return!0}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=yn(t))){e.next=7;break}return e.next=4,Z_(n)(null);case 4:if(0!==vn(t).length){e.next=7;break}return e.abrupt("return",new mn);case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){return new mn}}]),e}();function Cn(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.action();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.delegateYield(yt(e.ctx)(t.t0),"t1",8);case 8:throw t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}function In(e){return Cn(e)()}function Sn(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(e.generator,"t0",2);case 2:return t.abrupt("return",t.t0);case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e.ctx)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}function Dn(e){return u(e).dialogStack}function Rn(e,t,n){if(Ot(e)){var r=fn(e).layoutState,a=new kn(n,r);return fn(e).layoutState=a,function(){In({ctx:e,action:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.close(e);case 2:fn(e).layoutState=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}return Dn(e).pushDialog(t,n)}function Tn(e){return Pe(e).isActive}function _n(e){var t,n={},r=Object(le.a)(e.entries());try{for(r.s();!(t=r.n()).done;){var o=Object(d.a)(t.value,2),i=o[0],a=o[1];n[i]=a}}catch(s){r.e(s)}finally{r.f()}return n}function Pn(e){if(e)return e.split(";").filter((function(e){return""!==e})).map((function(e){return function(e){return e.split(":").map((function(e){return e.trim()}))}(e)})).reduce((function(e,t){return e[t[0]]=t[1],e}),{})}function Fn(e){return Be(e).lifecycle}function Mn(e,t){return o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(Fn(e).navigateAsChild(t),"t0",1);case 1:case"end":return n.stop()}}),n)}))}function Ln(e){return Be(e).childBindings.map((function(e){return e.childDataView}))}function En(e){return sn(e).entity}function An(e){return function(e){return Be(e).bindingRoot}(e).selectedRowId}function Vn(e){return Be(e).selectedRowId}function Nn(e){return Be(e).parentBindings.map((function(e){return e.parentDataView}))}function Bn(e){var t=Nn(e);return t.length>0?t[0]:void 0}function Un(e){var t=Bn(e);return t?Vn(t):void 0}!function(e){e.FormRef="FormReferenceMenuItem",e.FormRefWithSelection="FormReferenceMenuItem_WithSelection",e.ReportRefWithSelection="ReportReferenceMenuItem_WithSelection",e.WorkflowRef="WorkflowReferenceMenuItem",e.WorkQueue="WorkQueue",e.ReportReferenceMenuItem="ReportReferenceMenuItem"}(gn||(gn={}));function Gn(e){var t=Pe(e);return t.lazyLoading&&t.menuItemType!==gn.FormRefWithSelection}function Wn(e){return Ee(e).sessionId}function Hn(e){return Pe(e).menuItemId}var zn,Yn,Kn,qn=n(29),Qn=n.n(qn),Xn=n(66);function Zn(e){return 0===e.length?"":1===e.length?e[0]:'["$AND", '+e.join(", ")+"]"}function $n(e){return"[".concat(e.join(", "),"]")}function Jn(e,t){var n=Array.isArray(e),r=Array.isArray(t);if(void 0!==e&&!n&&void 0!==t&&!r)return $n([tr(e),tr(t)]);if(n&&void 0===t)return $n(e.map((function(e){return tr(e)})));if(!n&&void 0===t)return tr(e);if(void 0===e&&!r)return tr(t);throw new Error('Cannot convert values "'.concat(e,'" and "').concat(t,'" to a right hand side'))}function er(e,t,n,r,o){if("Date"===t&&("eq"===n||"neq"===n)&&void 0!==r&&""!==r&&null!==r&&r.endsWith("T00:00:00.000")){var i=new Date(r);i.setDate(i.getDate()+1);var a=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(i),s=Object(d.a)(a,5),c=s[0].value,u=s[2].value,l=s[4].value.concat("-",c,"-",u,"T00:00:00.000"),p="eq"===n?"between":"nbetween";return'["'.concat(e,'", "').concat(p,'", ').concat(Jn(r,l),"]")}var h=Qn.a.isMoment(r)?Object(Xn.toOrigamServerString)(r):r;return'["'.concat(e,'", "').concat(n,'", ').concat(Jn(h,o),"]")}function tr(e){return void 0===e?null:isNaN(e)?'"'+e+'"':e}function nr(e){return It(e).filterConfiguration}function rr(e){return Zn(nr(Be(e.ctx)).activeFilters.filter((function(t){return!e.excludePropertyId||e.excludePropertyId!==t.propertyId})).filter((function(e){return e.setting.isComplete})).map((function(e){return function(e){return er(e.propertyId,e.dataType,e.setting.type,e.setting.filterValue1,e.setting.filterValue2)}(e)})))}function or(e){return It(e).orderingConfiguration}function ir(e){switch(e){case"Descending":return zn.DESC;case"Ascending":return zn.ASC;case void 0:return zn.NONE;default:throw new Error("Option not implemented: "+e)}}function ar(e){if(e&&0!==e.length)return e.filter((function(e){return e.field||e.direction})).map((function(e){return{columnId:e.field,direction:ir(e.direction),lookupId:void 0}}))}function sr(e){var t=Be(e),n=or(t),r=n.getDefaultOrderings();if(0===r.length){var o=un(t);throw new Error("Cannot infinitely scroll on dataStructureEntity: ".concat(o," because it has no default ordering on the displayed form."))}return 0===n.userOrderings.length?r:n.userOrderings.filter((function(e){return e.direction!==zn.NONE}))}function cr(e,t,n,r,o){var i=function(e,t,n){for(var r,o=0,i=t-1,a=n;o<=i;){var s=Math.floor((o+i)/2);if((r=e(s))<a)o=s+1;else{if(!(r>a))return s;i=s-1}}return Math.max(o,i)}(e,n,r),a=function(e,t,n){for(var r,o=0,i=t-1,a=n;o<=i;){var s=Math.floor((o+i)/2);if((r=e(s))<a)o=s+1;else{if(!(r>a))return s;i=s-1}}return Math.min(o,i)}(t,n,o);return{lastLessThanNumber:a,firstGreaterThanNumber:i}}function ur(e){return Be(e).dataTable}function lr(e){var t=Be(e);if(!t)throw new Error("DataView is needed to determine what kind of grouper should be used");return t.isLazyLoading?t.serverSideGrouper:t.clientSideGrouper}!function(e){e.NONE="NONE",e.ASC="ASC",e.DESC="DESC"}(zn||(zn={})),Array.prototype.remove=function(e){var t=this.indexOf(e);return t>-1&&this.splice(t,1),this},Array.prototype.groupBy=function(e){var t=new Map;return this.forEach((function(n){var r=e(n),o=t.get(r);o?o.push(n):t.set(r,[n])})),t};var dr,pr,hr=(Yn=function(){function e(t,n,r){Object(q.a)(this,e),this.ctx=void 0,this.gridDimensions=void 0,this.scrollState=void 0,this.ctx=t,this.gridDimensions=n,this.scrollState=r}return Object(Q.a)(e,[{key:"visibleRowsRange",get:function(){var e,t,n=this,r=Be(this.ctx);return cr((function(e){return n.gridDimensions.getRowBottom(e)}),(function(e){return n.gridDimensions.getRowTop(e)}),this.gridDimensions.rowCount,this.scrollState.scrollTop,this.scrollState.scrollTop+(null!==(e=null===(t=r.contentBounds)||void 0===t?void 0:t.height)&&void 0!==e?e:0))}},{key:"firstIndex",get:function(){return this.visibleRowsRange.firstGreaterThanNumber}},{key:"lastIndex",get:function(){return this.visibleRowsRange.lastLessThanNumber}}]),e}(),Object($.a)(Yn.prototype,"visibleRowsRange",[c.computed],Object.getOwnPropertyDescriptor(Yn.prototype,"visibleRowsRange"),Yn.prototype),Object($.a)(Yn.prototype,"firstIndex",[c.computed],Object.getOwnPropertyDescriptor(Yn.prototype,"firstIndex"),Yn.prototype),Object($.a)(Yn.prototype,"lastIndex",[c.computed],Object.getOwnPropertyDescriptor(Yn.prototype,"lastIndex"),Yn.prototype),Yn),fr=(Kn=function(){function e(t,n,r){Object(q.a)(this,e),this.ctx=void 0,this.gridDimensions=void 0,this.scrollState=void 0,this.visibleRowsAll=void 0,this.dataTable=void 0,this.ctx=t,this.gridDimensions=n,this.scrollState=r,this.visibleRowsAll=new hr(t,n,r),this.dataTable=ur(t)}return Object(Q.a)(e,[{key:"firstIndex",get:function(){var e=lr(this.ctx).topLevelGroups.findIndex((function(e){return e.isExpanded}));return e>this.visibleRowsAll.firstIndex?0:this.visibleRowsAll.firstIndex-e}},{key:"lastIndex",get:function(){var e=lr(this.ctx).topLevelGroups.findIndex((function(e){return e.isExpanded}));return this.visibleRowsAll.lastIndex-e}}]),e}(),Object($.a)(Kn.prototype,"firstIndex",[c.computed],Object.getOwnPropertyDescriptor(Kn.prototype,"firstIndex"),Kn.prototype),Object($.a)(Kn.prototype,"lastIndex",[c.computed],Object.getOwnPropertyDescriptor(Kn.prototype,"lastIndex"),Kn.prototype),Kn);function br(e){var t=nr(Be(e)).activeFilters.filter((function(e){return e.setting.isComplete&&e.setting.lookupId})).reduce((function(e,t){return e[t.propertyId]=t.setting.lookupId,e}),{});return 0!==Object.keys(t).length?t:void 0}var vr,yr,gr,mr,wr,Or,jr,kr,xr,Cr,Ir,Sr,Dr,Rr,Tr,_r,Pr,Fr,Mr,Lr,Er,Ar,Vr,Nr,Br,Ur=1e3,Gr=function(){function e(){Object(q.a)(this,e),this.ctx=null,this.gridDimensions=null,this.scrollState=null,this.rowsContainer=null,this.groupFilter=void 0,this.visibleRowsMonitor=null}return Object(Q.a)(e,[{key:"start",value:function(){return function(){}}},{key:"dispose",value:function(){}},{key:"loadLastPage",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))},{key:"loadFirstPage",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))}]),e}(),Wr=(dr=c.action.bound,pr=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_InfiniteScrollLoader=1,this.debugDisposer=void 0,this.reactionDisposer=void 0,this.visibleRowsMonitor=void 0,this.groupFilter=void 0,this.lastRequestedStartOffset=0,this.lastRequestedEndOffset=0,this.gridDimensions=null,this.scrollState=null,this.ctx=null,this.rowsContainer=null,this.requestProcessor=new Hr(100,100),this.prependListeners=[],this.appendListeners=[],this.appendLines=Object(c.flow)(o.a.mark((function e(){var t,n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tailLoadingNeeded){e.next=2;break}return e.abrupt("return");case 2:if(this.lastRequestedEndOffset!==this.rowsContainer.nextEndOffset){e.next=4;break}return e.abrupt("return");case 4:return this.lastRequestedEndOffset=this.rowsContainer.nextEndOffset,this.lastRequestedStartOffset=-1,t=l(this.ctx),n=Ae(this.ctx),e.next=10,t.getRows({MenuId:Hn(this.ctx),SessionFormIdentifier:Wn(n),DataStructureEntityId:un(this.ctx),Filter:this.getFilters(),FilterLookups:br(this.ctx),Ordering:sr(this.ctx),RowLimit:Ur,MasterRowId:void 0,Parameters:{},RowOffset:this.rowsContainer.nextEndOffset,ColumnNames:cn(this.ctx)});case 10:r=e.sent,i=this.distanceToStart,this.rowsContainer.appendRecords(r),this.rowsContainer.isFull&&!this.rowsContainer.isLastRowLoaded&&(a=i-Ur,s=this.gridDimensions.getRowTop(a),this.scrollState.scrollTo({scrollTop:s})),this.appendListeners.forEach((function(e){return e(r)}));case 15:case"end":return e.stop()}}),e,this)}))),this.prependLines=Object(c.flow)(o.a.mark((function e(){var t,n,r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.headLoadingNeeded){e.next=2;break}return e.abrupt("return");case 2:if(t=this.rowsContainer.nextStartOffset,!(this.lastRequestedStartOffset===t||t<0)){e.next=5;break}return e.abrupt("return");case 5:return this.lastRequestedStartOffset=t,this.lastRequestedEndOffset=0,n=l(this.ctx),r=Ae(this.ctx),e.next=11,n.getRows({MenuId:Hn(this.ctx),SessionFormIdentifier:Wn(r),DataStructureEntityId:un(this.ctx),Filter:this.getFilters(),FilterLookups:br(this.ctx),Ordering:sr(this.ctx),RowLimit:Ur,RowOffset:t,Parameters:{},MasterRowId:void 0,ColumnNames:cn(this.ctx)});case 11:i=e.sent,a=this.distanceToStart,this.rowsContainer.prependRecords(i),this.rowsContainer.isFirstRowLoaded||(s=a+Ur,c=this.gridDimensions.getRowTop(s),this.scrollState.scrollTo({scrollTop:c})),this.prependListeners.forEach((function(e){return e(i)}));case 16:case"end":return e.stop()}}),e,this)}))),Object.assign(this,t),this.rowsContainer.registerResetListener((function(){return n.handleRowContainerReset()})),this.visibleRowsMonitor=new fr(this.ctx,this.gridDimensions,this.scrollState),this.requestProcessor.start()}return Object(Q.a)(e,[{key:"loadLastPage",value:o.a.mark((function e(){var t,n,r,i,a,s,c,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(this.ctx),r=Ae(this.ctx),i=Be(this.ctx),e.next=5,r.updateTotalRowCount(i);case 5:if(void 0!==i.totalRowCount){e.next=7;break}return e.abrupt("return");case 7:return i.totalRowCount>Ur?(s=i.totalRowCount%Ur+Ur,a=i.totalRowCount-s):a=0,e.next=10,n.getRows({MenuId:Hn(this.ctx),SessionFormIdentifier:Wn(r),DataStructureEntityId:un(this.ctx),Filter:this.getFilters(),FilterLookups:br(this.ctx),Ordering:sr(this.ctx),RowLimit:2e3,RowOffset:a,Parameters:{},MasterRowId:void 0,ColumnNames:cn(this.ctx)});case 10:c=e.sent,this.rowsContainer.set(c,a,!0),null===(t=this.reactionDisposer)||void 0===t||t.call(this),setTimeout((function(){var e=u.distanceToStart+Ur,t=u.gridDimensions.getRowTop(e);u.scrollState.scrollTo({scrollTop:t}),u.start()}));case 14:case"end":return e.stop()}}),e,this)}))},{key:"loadFirstPage",value:o.a.mark((function e(){var t,n,r,i,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rowsContainer.isFirstRowLoaded){e.next=2;break}return e.abrupt("return");case 2:return n=l(this.ctx),r=Ae(this.ctx),e.next=6,n.getRows({MenuId:Hn(this.ctx),SessionFormIdentifier:Wn(r),DataStructureEntityId:un(this.ctx),Filter:this.getFilters(),FilterLookups:br(this.ctx),Ordering:sr(this.ctx),RowLimit:Ur,RowOffset:0,Parameters:{},MasterRowId:void 0,ColumnNames:cn(this.ctx)});case 6:i=e.sent,this.rowsContainer.set(i),null===(t=this.reactionDisposer)||void 0===t||t.call(this),setTimeout((function(){var e=a.gridDimensions.getRowTop(0);a.scrollState.scrollTo({scrollTop:e}),a.start()}));case 10:case"end":return e.stop()}}),e,this)}))},{key:"distanceToStart",get:function(){return this.visibleRowsMonitor.firstIndex}},{key:"distanceToEnd",get:function(){return this.rowsContainer.rows.length-this.visibleRowsMonitor.lastIndex}},{key:"headLoadingNeeded",get:function(){return this.distanceToStart<=900&&!this.rowsContainer.isFirstRowLoaded}},{key:"tailLoadingNeeded",get:function(){return this.distanceToEnd<=900&&!this.rowsContainer.isLastRowLoaded}},{key:"incrementLoadingNeeded",get:function(){return this.headLoadingNeeded||this.tailLoadingNeeded}},{key:"start",value:function(){var e=this;return this.debugDisposer=Object(c.autorun)((function(){})),this.reactionDisposer=Object(c.reaction)((function(){return[e.visibleRowsMonitor.firstIndex,e.visibleRowsMonitor.lastIndex,e.headLoadingNeeded,e.tailLoadingNeeded]}),(function(){e.headLoadingNeeded&&e.requestProcessor.enqueue((function(){return e.prependLines()})),e.tailLoadingNeeded&&e.requestProcessor.enqueue((function(){return e.appendLines()}))})),this.reactionDisposer}},{key:"registerPrependListener",value:function(e){this.prependListeners.push(e)}},{key:"registerAppendListener",value:function(e){this.appendListeners.push(e)}},{key:"handleRowContainerReset",value:function(){this.lastRequestedStartOffset=0,this.lastRequestedEndOffset=0}},{key:"getFilters",value:function(){var e=[];this.groupFilter&&e.push(this.groupFilter);var t=rr({ctx:this.ctx});return t&&e.push(t),Zn(e)}},{key:"dispose",value:function(){this.reactionDisposer&&this.reactionDisposer(),this.debugDisposer&&this.debugDisposer(),this.requestProcessor.dispose(),this.prependListeners.length=0,this.appendListeners.length=0}}]),e}(),Object($.a)(pr.prototype,"distanceToStart",[c.computed],Object.getOwnPropertyDescriptor(pr.prototype,"distanceToStart"),pr.prototype),Object($.a)(pr.prototype,"distanceToEnd",[c.computed],Object.getOwnPropertyDescriptor(pr.prototype,"distanceToEnd"),pr.prototype),Object($.a)(pr.prototype,"headLoadingNeeded",[c.computed],Object.getOwnPropertyDescriptor(pr.prototype,"headLoadingNeeded"),pr.prototype),Object($.a)(pr.prototype,"tailLoadingNeeded",[c.computed],Object.getOwnPropertyDescriptor(pr.prototype,"tailLoadingNeeded"),pr.prototype),Object($.a)(pr.prototype,"incrementLoadingNeeded",[c.computed],Object.getOwnPropertyDescriptor(pr.prototype,"incrementLoadingNeeded"),pr.prototype),Object($.a)(pr.prototype,"start",[dr],Object.getOwnPropertyDescriptor(pr.prototype,"start"),pr.prototype),pr),Hr=function(){function e(t,n){Object(q.a)(this,e),this.flowQueue=[],this.stopRequested=!1,this.delayBetweenCallsMillis=void 0,this.mainLoopDelayMills=void 0,this.timeoutHandle=void 0,this.mainLoopDelayMills=t,this.delayBetweenCallsMillis=n}return Object(Q.a)(e,[{key:"sleep",value:function(e){var t=this;return new Promise((function(n){t.timeoutHandle=setTimeout(n,e)}))}},{key:"enqueue",value:function(e){this.flowQueue.push(e)}},{key:"dispose",value:function(){this.stopRequested=!0,clearTimeout(this.timeoutHandle)}},{key:"start",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:if(!(this.flowQueue.length>0)){e.next=9;break}return t=this.flowQueue.shift(),e.next=5,t();case 5:return e.next=7,this.sleep(this.delayBetweenCallsMillis);case 7:e.next=1;break;case 9:return e.next=11,this.sleep(this.mainLoopDelayMills);case 11:if(!this.stopRequested){e.next=13;break}return e.abrupt("return");case 13:e.next=0;break;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),zr=(vr=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"_inFlow",yr,this),Object(de.a)(this,"isWorkingDelayed",gr,this),Object(de.a)(this,"isWorking",mr,this),this.flowLeft=!1}return Object(Q.a)(e,[{key:"inFlow",get:function(){return this._inFlow},set:function(e){var t=this;e<0&&(e=0),0===this._inFlow&&1===e?(this.flowLeft=!1,this.isWorking=!0,setTimeout((function(){t.flowLeft||(t.isWorkingDelayed=!0)}),500)):1===this._inFlow&&0===e&&(this.isWorkingDelayed=!1,this.isWorking=!1,this.flowLeft=!0),this._inFlow=e}}]),e}(),yr=Object($.a)(vr.prototype,"_inFlow",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gr=Object($.a)(vr.prototype,"isWorkingDelayed",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mr=Object($.a)(vr.prototype,"isWorking",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vr),Yr=(wr=c.action.bound,Or=c.action.bound,jr=c.action.bound,kr=function(){function e(){Object(q.a)(this,e),this.$type_IDataViewLifecycle=1,this.monitor=new zr,this.disposers=[],this.onSelectedRowIdChangeImm=Object(c.flow)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Be(this),e.prev=1,this.monitor.inFlow++,!Qt(this)){e.next=9;break}if(Ae(this).rowSelectedReactionsDisabled(t)){e.next=6;break}return e.delegateYield(this.changeMasterRow(),"t0",6);case 6:return e.delegateYield(this.navigateChildren(),"t1",7);case 7:e.next=11;break;case 9:if(!Be(this).isBindingParent){e.next=11;break}return e.delegateYield(this.navigateChildren(),"t2",11);case 11:e.next=17;break;case 13:return e.prev=13,e.t3=e.catch(1),e.delegateYield(yt(this)(e.t3),"t4",16);case 16:throw e.t3;case 17:return e.prev=17,this.monitor.inFlow--,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[1,13,17,20]])})).bind(this)),this._selectedRowReactionDisposer=void 0,this.changeMasterRowCanceller=void 0,this.parent=void 0}return Object(Q.a)(e,[{key:"isWorking",get:function(){return this.monitor.isWorkingDelayed}},{key:"start",value:function(){Gn(this)&&this.disposers.push(this.startSelectedRowReaction())}},{key:"startSelectedRowReaction",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.onSelectedRowIdChangeImm();case 3:return n=this,e.abrupt("return",this._selectedRowReactionDisposer=Object(c.reaction)((function(){return Vn(r)}),(function(){return n.onSelectedRowIdChangeImm()}),{equals:c.comparer.structural}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"runRecordChangedReaction",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,e.prev=1,n=this.stopSelectedRowReaction(),!t){e.next=6;break}return e.next=6,Object(c.flow)(t)();case 6:if(e.prev=6,!n){e.next=10;break}return e.next=10,this.startSelectedRowReaction(!0);case 10:return e.finish(6);case 11:case"end":return e.stop()}}),e,this,[[1,,6,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSelectedRowReaction",value:function(){return!!this._selectedRowReactionDisposer&&(this._selectedRowReactionDisposer(),this._selectedRowReactionDisposer=void 0,!0)}},{key:"navigateAsChild",value:o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||null===t){e.next=7;break}return n=Be(this),e.next=4,n.setRecords(t);case 4:n.selectFirstRow(),e.next=8;break;case 7:return e.delegateYield(this.loadGetData(),"t0",8);case 8:case"end":return e.stop()}}),e,this)}))},{key:"changeMasterRow",value:o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,t=l(this),this.changeMasterRowCanceller&&this.changeMasterRowCanceller(),this.changeMasterRowCanceller=t.createCanceller(),e.next=7,t.setMasterRecord({SessionFormIdentifier:Wn(this),Entity:En(this),RowId:Vn(this)},this.changeMasterRowCanceller);case 7:return n=e.sent,e.delegateYield(en(this,n),"t0",9);case 9:Ee(this).clearDataCache(),e.next=17;break;case 12:if(e.prev=12,e.t1=e.catch(0),!s.a.isCancel(e.t1)){e.next=16;break}return e.abrupt("return");case 16:throw e.t1;case 17:return e.prev=17,this.monitor.inFlow--,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[0,12,17,20]])}))},{key:"buildDetailFilter",value:function(e){var t,n=[],r=Object(le.a)(e.parentBindings);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o.parentDataView.selectedRow;if(i){var a,s=Object(le.a)(o.bindingPairs);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=o.parentDataView.dataSource.getFieldByName(c.parentPropertyId);if(u){var l=o.parentDataView.dataTable.getCellValueByDataSourceField(i,u),d=o.childDataView.dataSource.getFieldByName(c.childPropertyId);d&&n.push(er(d.name,"eq",l))}}}catch(p){s.e(p)}finally{s.f()}}}}catch(p){r.e(p)}finally{r.f()}return Zn(n)}},{key:"loadGetData",value:o.a.mark((function e(){var t,n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.monitor.inFlow++,t=Be(this),n=l(this),!t.isRootEntity||t.isRootGrid||!Gn(this)){e.next=14;break}if(1!==t.parentBindings.length){e.next=9;break}r=[t.parentBindings[0].parentDataView.selectedRow],e.next=12;break;case 9:return e.next=11,n.getRows({MenuId:Hn(t),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(t),Filter:this.buildDetailFilter(t),FilterLookups:br(t),Ordering:[],RowLimit:Ur,MasterRowId:void 0,RowOffset:0,Parameters:{},ColumnNames:cn(t)});case 11:r=e.sent;case 12:e.next=24;break;case 14:if(i=Un(this),a=An(this),i&&a){e.next=20;break}e.t0=[],e.next=23;break;case 20:return e.next=22,Ee(this).getData(En(this),t.modelInstanceId,i,a);case 22:e.t0=e.sent;case 23:r=e.t0;case 24:return e.next=26,t.setRecords(r);case 26:t.selectFirstRow();case 27:return e.prev=27,this.monitor.inFlow--,e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[0,,27,30]])}))},{key:"navigateChildren",value:o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,t=En(this),n=Be(this),e.next=6,Promise.all(Ln(this).map((function(e){return Object(c.flow)(o.a.mark((function r(){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,En(e)!==t||!e.isPreloaded){r.next=6;break}return r.delegateYield(Mn(e,n.dataTable.allRows)(),"t0",4);case 4:r.next=7;break;case 6:return r.delegateYield(Mn(e)(),"t1",7);case 7:r.next=12;break;case 9:return r.prev=9,r.t2=r.catch(0),r.delegateYield(yt(e)(r.t2),"t3",12);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()})));case 6:return e.prev=6,this.monitor.inFlow--,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[0,,6,9]])}))}]),e}(),Object($.a)(kr.prototype,"start",[wr],Object.getOwnPropertyDescriptor(kr.prototype,"start"),kr.prototype),Object($.a)(kr.prototype,"startSelectedRowReaction",[Or],Object.getOwnPropertyDescriptor(kr.prototype,"startSelectedRowReaction"),kr.prototype),Object($.a)(kr.prototype,"stopSelectedRowReaction",[jr],Object.getOwnPropertyDescriptor(kr.prototype,"stopSelectedRowReaction"),kr.prototype),kr),Kr=(xr=c.action.bound,Cr=function(){function e(){Object(q.a)(this,e),this.collectedQuery=[],Object(de.a)(this,"loadingScheduled",Ir,this),Object(de.a)(this,"loadingDone",Sr,this),Object(de.a)(this,"loadingError",Dr,this),this.willLoad=!1,this.isLoading=!1,this.loadedItems={},this.waitingRequesters=0,Object(de.a)(this,"inFlow",Rr,this),this.triggerLoad=ge.a.throttle(this.triggerLoadImm.bind(this),100),this.parent=void 0}return Object(Q.a)(e,[{key:"isWorking",get:function(){return this.inFlow>0}},{key:"getLookupLabels",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=this.collectedQuery.find((function(e){return e.LookupId===t.LookupId&&e.MenuId===t.MenuId})))?(r=new Set(n.LabelIds),t.LabelIds.forEach((function(e){return r.add(e)})),n.LabelIds=Array.from(r)):this.collectedQuery.push(t),this.ensureScheduleLoad(),this.waitingRequesters++,e.next=7,Object(c.when)((function(){return a.loadingDone||a.loadingError}));case 7:if(!this.loadingError){e.next=9;break}throw this.loadingError;case 9:return i=this.loadedItems[t.LookupId]||{},e.abrupt("return",i);case 11:return e.prev=11,this.waitingRequesters--,0===this.waitingRequesters&&(this.loadedItems={},this.loadingError=void 0),e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[0,,11,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerLoadImm",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,Object(c.flow)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLoading){e.next=2;break}return e.abrupt("return");case 2:t.isLoading=!0,e.prev=3,t.inFlow++;case 5:if(!t.willLoad){e.next=19;break}return n=l(t),t.willLoad=!1,r=t.collectedQuery,t.collectedQuery=[],e.t0=Fe.a,e.t1=Object(Fe.a)({},t.loadedItems),e.next=14,n.getLookupLabelsEx(r);case 14:e.t2=e.sent,t.loadedItems=(0,e.t0)(e.t1,e.t2),t.willLoad||(t.loadingDone=!0),e.next=5;break;case 19:e.next=24;break;case 21:return e.prev=21,e.t3=e.catch(3),e.delegateYield(yt(t)(e.t3),"t4",24);case 24:return e.prev=24,t.inFlow--,t.isLoading=!1,e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[3,21,24,28]])})))();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ensureScheduleLoad",value:function(){this.loadingDone=!1,this.willLoad=!0,this.triggerLoad()}}]),e}(),Ir=Object($.a)(Cr.prototype,"loadingScheduled",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sr=Object($.a)(Cr.prototype,"loadingDone",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dr=Object($.a)(Cr.prototype,"loadingError",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rr=Object($.a)(Cr.prototype,"inFlow",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(Cr.prototype,"isWorking",[c.computed],Object.getOwnPropertyDescriptor(Cr.prototype,"isWorking"),Cr.prototype),Object($.a)(Cr.prototype,"ensureScheduleLoad",[xr],Object.getOwnPropertyDescriptor(Cr.prototype,"ensureScheduleLoad"),Cr.prototype),Cr);function qr(e){if(0!==e&&null!==e&&void 0!==e)return"#"+(e<0?e+4294967295+1:e).toString(16).slice(-6).toUpperCase().padStart(6,"0")}function Qr(e){return void 0===e||null===e?e:(e.startsWith("#")&&(e=e.slice(1)),parseInt(e,16))}!function(e){e.LOADING="LOADING",e.ERROR="ERROR"}(Br||(Br={}));var Xr=(Tr=c.action.bound,_r=c.action.bound,Pr=c.action.bound,Fr=function(){function e(t){Object(q.a)(this,e),this.$type_IRowState=1,this.suppressWorkingStatus=!1,this.monitor=new zr,Object(de.a)(this,"firstLoadingPerformed",Mr,this),Object(de.a)(this,"temporaryContainersValues",Lr,this),this.containers=new Map,Object(de.a)(this,"isSomethingLoading",Er,this),this.triggerLoadImm=Object(c.flow)(o.a.mark((function e(){var t,n,r,i,a,s,c,u,d,p,h,f,b,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSomethingLoading){e.next=2;break}return e.abrupt("return");case 2:t=new Map,n=!0,e.prev=4;case 5:0,e.prev=6,r=Object(le.a)(this.containers.values());try{for(r.s();!(i=r.n()).done;)!(a=i.value).rowId||a.isValid||a.processingSate||t.set(a.rowId,a)}catch(o){r.e(o)}finally{r.f()}if(n=Array.from(t.values()).every((function(e){return!e.suppressWorkingStatus})),n&&this.monitor.inFlow++,0!==t.size){e.next=13;break}return e.abrupt("break",40);case 13:s=Object(le.a)(t.values());try{for(s.s();!(c=s.n()).done;)c.value.processingSate=Br.LOADING}catch(o){s.e(o)}finally{s.f()}return this.isSomethingLoading=!0,u=l(this),e.next=19,u.getRowStates({SessionFormIdentifier:Wn(this),Entity:En(this),Ids:Array.from(t.values()).map((function(e){return e.rowId}))});case 19:d=e.sent,this.isSomethingLoading=!1,this.firstLoadingPerformed=!0,p=Object(le.a)(d);try{for(p.s();!(h=p.n()).done;)f=h.value,this.putValue(f),this.containers.get(f.id).processingSate=void 0}catch(o){p.e(o)}finally{p.f()}e.next=33;break;case 26:e.prev=26,e.t0=e.catch(6),this.isSomethingLoading=!1,this.firstLoadingPerformed=!0,b=Object(le.a)(t.values());try{for(b.s();!(v=b.n()).done;)v.value.processingSate=Br.ERROR}catch(o){b.e(o)}finally{b.f()}return e.delegateYield(yt(this)(e.t0),"t1",33);case 33:return e.prev=33,n&&this.monitor.inFlow--,t.forEach((function(e){return e.suppressWorkingStatus=!1})),t.clear(),e.finish(33);case 38:e.next=5;break;case 40:return e.prev=40,this.temporaryContainersValues=void 0,e.finish(40);case 43:case"end":return e.stop()}}),e,this,[[4,,40,43],[6,26,33,38]])})).bind(this)),this.triggerLoad=ge.a.debounce(this.triggerLoadImm,666),this.parent=void 0,Object.assign(this,t)}return Object(Q.a)(e,[{key:"isWorking",get:function(){return this.monitor.isWorkingDelayed}},{key:"mayCauseFlicker",get:function(){return!this.firstLoadingPerformed}},{key:"getValue",value:function(e){var t,n,r=this;this.containers.has(e)||this.containers.set(e,new Jr(e));var o,i,a=this.containers.get(e);return a.atom||(a.suppressWorkingStatus=this.suppressWorkingStatus,a.atom=Object(c.createAtom)("RowState atom [".concat(e,"]"),(function(){return requestAnimationFrame((function(){r.triggerLoad()}))}),(function(){}))),null===(t=(n=a.atom).reportObserved)||void 0===t||t.call(n),this.temporaryContainersValues&&this.temporaryContainersValues.has(e)?null===(o=this.temporaryContainersValues.get(e))||void 0===o?void 0:o.rowStateItem:null===(i=this.containers.get(e))||void 0===i?void 0:i.rowStateItem}},{key:"loadValues",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(le.a)(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.containers.has(i)||this.containers.set(i,new Jr(i))}catch(o){n.e(o)}finally{n.f()}return e.next=4,this.triggerLoadImm();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasValue",value:function(e){return this.containers.has(e)}},{key:"putValue",value:function(e){var t=new Zr(e.id,e.allowCreate,e.allowDelete,qr(e.foregroundColor),qr(e.backgroundColor),new Map(e.columns.map((function(e){var t=new $r(e.name,e.dynamicLabel,qr(e.foregroundColor),qr(e.backgroundColor),e.allowRead,e.allowUpdate);return[e.name,t]}))),new Set(e.disabledActions),e.relations);this.containers.has(e.id)||this.containers.set(e.id,new Jr(e.id));var n=this.containers.get(e.id);n.rowStateItem=t,n.isValid=!0,this.firstLoadingPerformed=!0}},{key:"reload",value:function(){this.temporaryContainersValues=new Map(this.containers.entries());var e,t=Object(le.a)(this.containers.values());try{for(t.s();!(e=t.n()).done;){var n,r,o,i,a=e.value;null===(n=a.atom)||void 0===n||null===(r=n.onBecomeUnobservedListeners)||void 0===r||r.clear(),null===(o=a.atom)||void 0===o||null===(i=o.onBecomeObservedListeners)||void 0===i||i.clear(),a.atom=void 0,a.isValid=!1,a.processingSate=void 0}}catch(s){t.e(s)}finally{t.f()}}},{key:"clearAll",value:function(){var e,t=Object(le.a)(this.containers.values());try{for(t.s();!(e=t.n()).done;){var n,r,o,i,a=e.value;null===(n=a.atom)||void 0===n||null===(r=n.onBecomeUnobservedListeners)||void 0===r||r.clear(),null===(o=a.atom)||void 0===o||null===(i=o.onBecomeObservedListeners)||void 0===i||i.clear(),a.atom=void 0,a.isValid=!1,a.processingSate=void 0}}catch(s){t.e(s)}finally{t.f()}this.firstLoadingPerformed=!1,this.temporaryContainersValues=void 0}}]),e}(),Mr=Object($.a)(Fr.prototype,"firstLoadingPerformed",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lr=Object($.a)(Fr.prototype,"temporaryContainersValues",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(Fr.prototype,"mayCauseFlicker",[c.computed],Object.getOwnPropertyDescriptor(Fr.prototype,"mayCauseFlicker"),Fr.prototype),Er=Object($.a)(Fr.prototype,"isSomethingLoading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Fr.prototype,"putValue",[Tr],Object.getOwnPropertyDescriptor(Fr.prototype,"putValue"),Fr.prototype),Object($.a)(Fr.prototype,"reload",[_r],Object.getOwnPropertyDescriptor(Fr.prototype,"reload"),Fr.prototype),Object($.a)(Fr.prototype,"clearAll",[Pr],Object.getOwnPropertyDescriptor(Fr.prototype,"clearAll"),Fr.prototype),Fr),Zr=function e(t,n,r,o,i,a,s,c){Object(q.a)(this,e),this.id=t,this.allowCreate=n,this.allowDelete=r,this.foregroundColor=o,this.backgroundColor=i,this.columns=a,this.disabledActions=s,this.relations=c},$r=function e(t,n,r,o,i,a){Object(q.a)(this,e),this.name=t,this.dynamicLabel=n,this.foregroundColor=r,this.backgroundColor=o,this.allowRead=i,this.allowUpdate=a},Jr=(Ar=function e(t,n){Object(q.a)(this,e),this.atom=n,this.rowId=void 0,Object(de.a)(this,"rowStateItem",Vr,this),Object(de.a)(this,"isValid",Nr,this),this.processingSate=void 0,this.suppressWorkingStatus=!1,this.rowId=t},Vr=Object($.a)(Ar.prototype,"rowStateItem",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nr=Object($.a)(Ar.prototype,"isValid",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ar);function eo(e){return sn(e).rowState}function to(e,t){return eo(e).getValue(t)}function no(e,t,n){var r=to(e,t);return!r||r.disabledActions.has(n)}var ro,oo,io,ao,so,co,uo,lo,po,ho,fo,bo,vo,yo,go=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_IAction=1,this.type=null,this.id="",this.groupId="",this.caption="",this.placement=null,this.iconUrl="",this.mode=null,this.isDefault=!1,this.parameters=[],this.parent=void 0,Object.assign(this,t),this.parameters.forEach((function(e){return e.parent=n}))}return Object(Q.a)(e,[{key:"isEnabled",get:function(){var e=this;if(this.mode===At.Always)return!0;switch(this.mode){case At.ActiveRecord:var t=Vn(this);return!!t&&!no(this,t,this.id);case At.MultipleCheckboxes:var n=Be(this).selectedRowIds;return n.size>0?!Array.from(n).map((function(t){return no(e,t,e.id)})).some((function(e){return e})):this.placement===Et.Toolbar}return!1}}]),e}(),mo=function e(t){Object(q.a)(this,e),this.$type_IActionParameter=1,this.name="",this.fieldName="",this.parent=void 0,Object.assign(this,t)},wo=function e(t){Object(q.a)(this,e),this.parent=void 0,this.parentPropertyId="",this.childPropertyId="",Object.assign(this,t)},Oo=(ro=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_IComponentBinding=1,this.parentId="",this.parentEntity="",this.childId="",this.childEntity="",this.childPropertyType="",this.bindingPairs=[],this.parent=void 0,Object.assign(this,t),this.bindingPairs.forEach((function(e){return e.parent=n}))}return Object(Q.a)(e,[{key:"parentDataView",get:function(){return Ee(this).getDataViewByModelInstanceId(this.parentId)}},{key:"childDataView",get:function(){return Ee(this).getDataViewByModelInstanceId(this.childId)}},{key:"bindingController",get:function(){var e,t=[],n=ur(this.parentDataView),r=Object(le.a)(this.bindingPairs);try{for(r.s();!(e=r.n()).done;){var o=e.value,i=this.parentDataView.selectedRow,a=n.getPropertyById(o.parentPropertyId);i&&a&&t.push([o.childPropertyId,n.getCellValue(i,a)])}}catch(s){r.e(s)}finally{r.f()}return t}},{key:"isBindingControllerValid",get:function(){return this.bindingController.every((function(e){return e[0]&&e[1]}))}}]),e}(),Object($.a)(ro.prototype,"parentDataView",[c.computed],Object.getOwnPropertyDescriptor(ro.prototype,"parentDataView"),ro.prototype),Object($.a)(ro.prototype,"childDataView",[c.computed],Object.getOwnPropertyDescriptor(ro.prototype,"childDataView"),ro.prototype),Object($.a)(ro.prototype,"bindingController",[c.computed],Object.getOwnPropertyDescriptor(ro.prototype,"bindingController"),ro.prototype),Object($.a)(ro.prototype,"isBindingControllerValid",[c.computed],Object.getOwnPropertyDescriptor(ro.prototype,"isBindingControllerValid"),ro.prototype),ro),jo=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_IDataSource=1,this.parent=void 0,this.entity="",this.dataStructureEntityId="",this.identifier="",this.lookupCacheKey="",this.fields=[],this.rowState=null,Object.assign(this,t),this.fields.forEach((function(e){return e.parent=n})),this.rowState.parent=this}return Object(Q.a)(e,[{key:"getFieldByName",value:function(e){return this.fields.find((function(t){return t.name===e}))}},{key:"getFieldByIndex",value:function(e){return this.fields.find((function(t){return t.index===e}))}}]),e}(),ko=function e(t){Object(q.a)(this,e),this.$type_IDataSourceField=1,this.parent=void 0,this.name="",this.index=0,Object.assign(this,t)},xo=(oo=function e(){Object(q.a)(this,e),this.$type_IAdditionalRowData=1,Object(de.a)(this,"dirtyNew",io,this),Object(de.a)(this,"dirtyDeleted",ao,this),Object(de.a)(this,"dirtyValues",so,this),Object(de.a)(this,"dirtyFormValues",co,this),this.parent=void 0},io=Object($.a)(oo.prototype,"dirtyNew",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ao=Object($.a)(oo.prototype,"dirtyDeleted",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),so=Object($.a)(oo.prototype,"dirtyValues",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),co=Object($.a)(oo.prototype,"dirtyFormValues",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),oo);function Co(e,t){var n=t?"true"===t.IsRootGrid:Be(e).isRootGrid;return Gn(e)&&n}function Io(e,t){var n=(e=Object(gt.a)(e))[t];return null!==n&&void 0!==n&&(e[t]="".concat(n)),e}var So,Do,Ro,To,_o,Po=(uo=c.action.bound,lo=c.action.bound,po=c.action.bound,ho=function(){function e(t,n){Object(q.a)(this,e),this.$type_ScrollRowContainer=1,this.parent=void 0,Object(de.a)(this,"rowChunks",fo,this),this.rowIdGetter=void 0,this.resetListeners=[],this.addedRowPositionLocked=!1,this.rowIdGetter=t,this.parent=n}return Object(Q.a)(e,[{key:"getTrueIndexById",value:function(e){var t=this.findChunkByRowId(e);if(t)return t.rowOffset+t.getRowIdxById(e)}},{key:"updateSortAndFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"rows",get:function(){return this.rowChunks.flatMap((function(e){return e.rows}))}},{key:"allRows",get:function(){return this.rows}},{key:"getAllValuesOfProp",value:function(e){return this.rows}},{key:"clear",value:function(){this.rowChunks.length=0}},{key:"delete",value:function(e){var t=this.rowIdGetter(e),n=this.findChunkByRowId(t);if(!n)throw new Error('Row with id "'.concat(t,'" was not found'));n.delete(t)}},{key:"findChunkByRowId",value:function(e){return this.rowChunks.find((function(t){return t.has(e)}))}},{key:"findChunkByRowIndex",value:function(e){var t=0;if(0===this.rowChunks.length)return{chunk:void 0,indexInChunk:void 0};var n,r=Object(le.a)(this.rowChunks);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=e-t;if(i<o.rows.length)return{chunk:o,indexInChunk:i};t+=o.rows.length}}catch(s){r.e(s)}finally{r.f()}var a=this.rowChunks[this.rowChunks.length-1];return{chunk:a,indexInChunk:a.rows.length}}},{key:"insert",value:function(e,t,n){t=Io(t,ur(this).identifierDataIndex);var r=this.findChunkByRowIndex(e),o=r.chunk,i=r.indexInChunk;return o?o.insert(i,t):this.rowChunks.push(new Fo(0,[t],this.rowIdGetter,void 0)),Promise.resolve()}},{key:"set",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s,c,u,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:0,r=l.length>2&&void 0!==l[2]?l[2]:void 0,i=ur(this),a=[],s=Object(le.a)(t);try{for(s.s();!(c=s.n()).done;)u=c.value,a.push(Io(u,i.identifierDataIndex))}catch(o){s.e(o)}finally{s.f()}this.clear(),0!==a.length&&this.rowChunks.push(new Fo(n,a,this.rowIdGetter,r)),this.notifyResetListeners();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"substitute",value:function(e){e=Io(e,ur(this).identifierDataIndex);var t,n=Object(le.a)(this.rowChunks);try{for(n.s();!(t=n.n()).done;){if(t.value.trySubstitute(e))return}}catch(r){n.e(r)}finally{n.f()}}},{key:"registerResetListener",value:function(e){this.resetListeners.push(e)}},{key:"notifyResetListeners",value:function(){var e,t=Object(le.a)(this.resetListeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"nextEndOffset",get:function(){return 0===this.rowChunks.length?Ur:this.rowChunks[this.rowChunks.length-1].rowOffset+Ur}},{key:"nextStartOffset",get:function(){return 0===this.rowChunks.length||this.rowChunks[0].rowOffset<Ur?0:this.rowChunks[0].rowOffset-Ur}},{key:"prependRecords",value:function(e){var t,n=ur(this),r=[],o=Object(le.a)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push(Io(i,n.identifierDataIndex))}}catch(s){o.e(s)}finally{o.f()}if(0!==this.rowChunks.length){var a=this.rowChunks[0].rowOffset-Ur;a<0||(this.rowChunks.unshift(new Fo(a,r,this.rowIdGetter,void 0)),this.rowChunks.length>10&&this.rowChunks.pop())}else this.rowChunks.push(new Fo(0,r,this.rowIdGetter,void 0))}},{key:"appendRecords",value:function(e){var t,n=ur(this),r=[],o=Object(le.a)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push(Io(i,n.identifierDataIndex))}}catch(l){o.e(l)}finally{o.f()}if(0!==this.rowChunks.length){var a=this.rowChunks[this.rowChunks.length-1].rowOffset+Ur,s=r.length<Ur,c=new Fo(a,r,this.rowIdGetter,s),u=this.replaceDuplicateRows(c);this.rowChunks.push(u),this.rowChunks.length>10&&this.rowChunks.shift()}else this.rowChunks.push(new Fo(0,r,this.rowIdGetter,void 0))}},{key:"replaceDuplicateRows",value:function(e){var t,n=e,r=Object(le.a)(this.rowChunks);try{for(r.s();!(t=r.n()).done;){n=t.value.replaceRows(n)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"isLastRowLoaded",get:function(){return 0!==this.rowChunks.length&&this.rowChunks[this.rowChunks.length-1].isFinal}},{key:"isFirstRowLoaded",get:function(){return 0!==this.rowChunks.length&&this.rowChunks[0].isInitial}},{key:"isFull",get:function(){return 1e4===this.rows.length}},{key:"unlockAddedRowPosition",value:function(){}},{key:"getFirstRow",value:function(){if(0!==this.rows.length)return this.rows[0]}},{key:"getFilteredRows",value:function(e){return[]}}]),e}(),fo=Object($.a)(ho.prototype,"rowChunks",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(ho.prototype,"rows",[c.computed],Object.getOwnPropertyDescriptor(ho.prototype,"rows"),ho.prototype),Object($.a)(ho.prototype,"set",[uo],Object.getOwnPropertyDescriptor(ho.prototype,"set"),ho.prototype),Object($.a)(ho.prototype,"prependRecords",[lo],Object.getOwnPropertyDescriptor(ho.prototype,"prependRecords"),ho.prototype),Object($.a)(ho.prototype,"appendRecords",[po],Object.getOwnPropertyDescriptor(ho.prototype,"appendRecords"),ho.prototype),Object($.a)(ho.prototype,"isLastRowLoaded",[c.computed],Object.getOwnPropertyDescriptor(ho.prototype,"isLastRowLoaded"),ho.prototype),Object($.a)(ho.prototype,"isFirstRowLoaded",[c.computed],Object.getOwnPropertyDescriptor(ho.prototype,"isFirstRowLoaded"),ho.prototype),Object($.a)(ho.prototype,"isFull",[c.computed],Object.getOwnPropertyDescriptor(ho.prototype,"isFull"),ho.prototype),ho),Fo=(bo=c.observable.shallow,vo=function(){function e(t,n,r,o){if(Object(q.a)(this,e),this.rowOffset=void 0,Object(de.a)(this,"rows",yo,this),this.rowIdGetter=void 0,this.isFinal=void 0,this.idMap=void 0,this.rowIdGetter=r,this.isFinal=void 0===o?n.length<Ur:o,t<0)throw new Error("Offset cannot be less than 0");this.rowOffset=t,this.rows=n,this.idMap=this.makeIdMap(n)}return Object(Q.a)(e,[{key:"makeIdMap",value:function(e){for(var t=new Map,n=0;n<e.length;n++)t.set(this.rowIdGetter(e[n]),n);return t}},{key:"isInitial",get:function(){return 0===this.rowOffset}},{key:"length",get:function(){return this.rows.length}},{key:"trySubstitute",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.rowIdGetter(n)===t.rowIdGetter(e)}));return n>-1&&(this.rows.splice(n,1,e),!0)}},{key:"getRow",value:function(e){var t=this.idMap.get(e);if(void 0!==t)return this.rows[t]}},{key:"replaceRows",value:function(t){var n,r=[],o=Object(le.a)(this.idMap.keys());try{for(o.s();!(n=o.n()).done;){var i=n.value,a=t.getRow(i);if(a){var s=this.idMap.get(i);this.rows[s]=a,r.push(t.getIndex(i))}}}catch(u){o.e(u)}finally{o.f()}if(0===r.length)return t;var c=t.rows.filter((function(e,t){return!r.includes(t)}));return new e(t.rowOffset,c,this.rowIdGetter,t.isFinal)}},{key:"getIndex",value:function(e){return this.idMap.get(e)}},{key:"has",value:function(e){return void 0!==this.getIndex(e)}},{key:"delete",value:function(e){var t=this.getIndex(e);this.idMap.delete(e),this.rows.splice(t,1),this.shiftIdMapDown(t)}},{key:"insert",value:function(e,t){this.rows.splice(e,0,t);var n=this.rowIdGetter(t);this.shiftIdMapUp(e),this.idMap.set(n,e)}},{key:"shiftIdMapDown",value:function(e){for(var t=0,n=Array.from(this.idMap.entries());t<n.length;t++){var r=n[t];r[1]>e&&this.idMap.set(r[0],r[1]-1)}}},{key:"shiftIdMapUp",value:function(e){for(var t=0,n=Array.from(this.idMap.entries());t<n.length;t++){var r=n[t];r[1]>e-1&&this.idMap.set(r[0],r[1]+1)}}},{key:"getRowIdxById",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.rowIdGetter(n)===e}));return n>-1?n:void 0}}]),e}(),yo=Object($.a)(vo.prototype,"rows",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo);function Mo(e,t){return Be(e).properties.flatMap((function(e){return[e].concat(Object(gt.a)(e.childProperties))})).find((function(e){return e.id===t}))}var Lo=(So=c.observable.shallow,Do=function(){function e(t,n,r,o){Object(q.a)(this,e),this.orderingConfiguration=void 0,this.filterConfiguration=void 0,this.reactionDisposer=void 0,Object(de.a)(this,"forcedLastRowId",Ro,this),Object(de.a)(this,"allRows",To,this),this.rowIdGetter=void 0,Object(de.a)(this,"sortedIds",_o,this),this.updateSortAndFilterDebounced=ge.a.debounce(this.updateSortAndFilter,10),this.monitor=new zr,this.parent=void 0,this.orderingConfiguration=t,this.filterConfiguration=n,this.rowIdGetter=r,this.parent=o}return Object(Q.a)(e,[{key:"idToRow",get:function(){var e=this,t=this.allRows.map((function(t){return[e.rowIdGetter(t),t]}));return new Map(t)}},{key:"start",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reactionDisposer=Object(c.reaction)((function(){return[t.filterConfiguration.activeFilters.map((function(e){return[e.propertyId,Array.isArray(e.setting.val1)?Object(gt.a)(e.setting.val1):e.setting.val1,Array.isArray(e.setting.val2)?Object(gt.a)(e.setting.val2):e.setting.val2,e.setting.type]})),t.orderingConfiguration.orderings.map((function(e){return[e.columnId,e.direction]}))]}),(function(){return t.updateSortAndFilterDebounced()}),{equals:c.comparer.structural}),e.next=3,this.updateSortAndFilter();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e;null===(e=this.reactionDisposer)||void 0===e||e.call(this)}},{key:"preloadLookups",value:o.a.mark((function e(){var t,n,r,a,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be(this.orderingConfiguration),n=ur(t),r=this.orderingConfiguration.userOrderings.map((function(e){return c.getOrderingProperty(t,e)})).filter((function(e){return"ComboBox"===e.column})),a=this.filterConfiguration.activeFilters.map((function(e){return Mo(c.filterConfiguration,e.propertyId)})).filter((function(e){return"ComboBox"===e.column})),s=Array.from(new Set(a.concat(r))),e.next=7,Promise.all(s.map(function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.lookupEngine)||void 0===r?void 0:r.lookupResolver.resolveList(n.getAllValuesOfProp(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e,this)}))},{key:"getOrderingProperty",value:function(e,t){var n=Mo(e,t.columnId);if(!n)throw new Error(bt("Panel ".concat(e.modelId," has default sort set to column ").concat(t.columnId,". This column does not exist in the panel. Cannot set default sort."),"invalid_sort_column",e.modelId,t.columnId,e.name));return n}},{key:"updateSortAndFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,Object(c.flow)(o.a.mark((function e(){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(n.preloadLookups(),"t0",1);case 1:r=n.allRows,n.filterConfiguration.filteringFunction()&&(r=r.filter((function(e){return n.filterConfiguration.filteringFunction()(e)}))),0!==n.orderingConfiguration.orderings.length&&(r=r.sort((function(e,t){return n.internalRowOrderingFunc(e,t)}))),n.sortedIds=r.map((function(e){return n.rowIdGetter(e)})),i=Be(n),(null===t||void 0===t?void 0:t.retainPreviousSelection)||i.reselectOrSelectFirst();case 7:case"end":return e.stop()}}),e)})))();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFilteredRows",value:function(e){var t=this;return this.allRows.filter((function(n){return t.filterConfiguration.filteringFunction(e.propertyFilterIdToExclude)(n)}))}},{key:"rows",get:function(){var e=this;return this.sortedIds?this.sortedIds.map((function(t){return e.idToRow.get(t)})).filter((function(e){return e})):this.allRows}},{key:"internalRowOrderingFunc",value:function(e,t){if(void 0!==this.forcedLastRowId){var n=this.orderingConfiguration.orderings,r=1===n.length&&n[0].direction===zn.DESC?-1:1;if(this.forcedLastRowId===this.rowIdGetter(e))return 1*r;if(this.forcedLastRowId===this.rowIdGetter(t))return-1*r}return this.orderingConfiguration.orderingFunction()(e,t)}},{key:"unlockAddedRowPosition",value:function(){this.forcedLastRowId=void 0}},{key:"clear",value:function(){this.allRows.length=0}},{key:"delete",value:function(e){var t=this,n=this.rowIdGetter(e),r=this.allRows.findIndex((function(e){return t.rowIdGetter(e)===n}));r>-1&&(this.allRows.splice(r,1),n===this.forcedLastRowId&&(this.forcedLastRowId=void 0),this.updateSortAndFilter({retainPreviousSelection:!0}))}},{key:"insert",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){var i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ur(this),n=Io(n,i.identifierDataIndex),a=i.getRowId(n),s=this.allRows.some((function(e){return i.getRowId(e)===a})),!s){e.next=6;break}return e.abrupt("return");case 6:return this.allRows.splice(t,0,n),r&&(this.forcedLastRowId=this.rowIdGetter(n)),e.next=10,this.updateSortAndFilter();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i,a,s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=ur(this),i=[],a=Object(le.a)(t);try{for(a.s();!(s=a.n()).done;)c=s.value,i.push(Io(c,r.identifierDataIndex))}catch(n){a.e(n)}finally{a.f()}for(this.clear(),u=0,l=i;u<l.length;u++)d=l[u],this.allRows.push(d);return e.next=8,this.updateSortAndFilter();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"appendRecords",value:function(e){var t=Be(this);if("SectionLevelPlugin"===t.type)throw new Error(t.name+' is a SectionLevelPlugin which does not allow navigation. This is not implemented. Please set the "AllowNavigation" property to true.');throw new Error("Not implemented")}},{key:"substitute",value:function(e){var t=this,n=ur(this);e=Io(e,n.identifierDataIndex);var r=this.allRows.findIndex((function(n){return t.rowIdGetter(n)===t.rowIdGetter(e)}));r>-1&&this.allRows.splice(r,1,e)}},{key:"registerResetListener",value:function(e){}},{key:"getTrueIndexById",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.rowIdGetter(n)===e}));return n>-1?n:void 0}},{key:"addedRowPositionLocked",get:function(){return void 0!==this.forcedLastRowId}},{key:"getFirstRow",value:function(){if(0!==this.rows.length)return this.rows[0]}}]),e}(),Ro=Object($.a)(Do.prototype,"forcedLastRowId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),To=Object($.a)(Do.prototype,"allRows",[So],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_o=Object($.a)(Do.prototype,"sortedIds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(Do.prototype,"idToRow",[c.computed],Object.getOwnPropertyDescriptor(Do.prototype,"idToRow"),Do.prototype),Object($.a)(Do.prototype,"updateSortAndFilter",[c.action],Object.getOwnPropertyDescriptor(Do.prototype,"updateSortAndFilter"),Do.prototype),Object($.a)(Do.prototype,"rows",[c.computed],Object.getOwnPropertyDescriptor(Do.prototype,"rows"),Do.prototype),Do);var Eo=ge.a.debounce((function(){Ao.clear()}),1e4),Ao=new Map;function Vo(e,t,n){return function(e){for(var t=Ao,n=0,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];for(var a=0,s=o;a<s.length;a++){var c=s[a],u=t.get(c);void 0===u&&(n===o.length-1?t.set(c,u=e()):t.set(c,u=new Map)),t=u,n++}return Eo(),t}((function(){if(e){var r=new si(e);return t.toLocaleString(n,{minimumFractionDigits:r.minimumFractionDigits,maximumFractionDigits:r.maximumFractionDigits,useGrouping:r.useThousandsSeparator})}return t.toLocaleString(n)}),n,e,t)}function No(){return Uo("decimal")}function Bo(){return Uo("group")}function Uo(e){var t=ot();return Intl.NumberFormat(t).formatToParts(1000.1).find((function(t){return t.type===e})).value}function Go(e,t,n){if(isNaN(n))return"";var r=ot();return Vo(e||("Currency"===t||"Float"===t?"### ###.00##########":"### ###"),n,r)}var Wo,Ho,zo,Yo,Ko,qo,Qo,Xo,Zo,$o,Jo,ei,ti,ni,ri,oi,ii,ai,si=function(){function e(t){if(Object(q.a)(this,e),this.format=void 0,this.fractionFormat=void 0,!RegExp("^[# 0.]+$").test(t))throw new Error('Custom format contains unimplemented characters: "'+t+'"');this.format=t.trim(),this.fractionFormat=this.getFractionFormat(this.format)}return Object(Q.a)(e,[{key:"getFractionFormat",value:function(e){var t=e.split(".");return t.length<2?void 0:t[1]}},{key:"maximumFractionDigits",get:function(){return this.fractionFormat?this.fractionFormat.length:void 0}},{key:"minimumFractionDigits",get:function(){if(this.fractionFormat){var e=this.fractionFormat.split("0").length-1;return 0===e?void 0:e}}},{key:"useThousandsSeparator",get:function(){return this.format.includes(" ")}}]),e}();var ci,ui=(Wo=c.action.bound,Ho=c.action.bound,zo=c.action.bound,Yo=c.action.bound,Ko=c.action.bound,qo=c.action.bound,Qo=c.action.bound,Xo=c.action.bound,Zo=c.action.bound,$o=c.action.bound,Jo=c.action.bound,ei=c.action.bound,ti=c.action.bound,ni=c.action.bound,ri=function(){function e(t){var n,r,o,i,a,s,c=this;Object(q.a)(this,e),this.$type_IDataTable=1,this.rowsContainer=null,Object(de.a)(this,"isEmpty",oi,this),Object(de.a)(this,"rowsAddedSinceSave",ii,this),this.rowRemovedListeners=[],Object(de.a)(this,"additionalRowData",ai,this),this.parent=void 0,Object.assign(this,t),this.rowsContainer=(n=t.formScreenLifecycle,r=t.dataViewAttributes,o=t.orderingConfiguration,i=t.filterConfiguration,a=function(e){return c.getRowId(e)},s=this,Co(n,r)?new Po(a,s):new Lo(o,i,a,s))}return Object(Q.a)(e,[{key:"notifyRowRemovedListeners",value:function(){this.rowRemovedListeners.forEach((function(e){return e()}))}},{key:"start",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rowsContainer.start();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.rowsContainer.stop()}},{key:"allRows",get:function(){return this.rowsContainer.allRows}},{key:"rows",get:function(){return this.rowsContainer.rows}},{key:"properties",get:function(){return Be(this).properties}},{key:"dataSource",get:function(){return sn(this)}},{key:"identifierProperty",get:function(){var e=this;return this.properties.find((function(t){return t.id===e.dataSource.identifier}))}},{key:"identifierDataIndex",get:function(){return this.identifierProperty.dataIndex}},{key:"getRowId",value:function(e){return e[this.identifierDataIndex]}},{key:"getCellValue",value:function(e,t){if(this.additionalRowData.has(this.getRowId(e))){var n=this.additionalRowData.get(this.getRowId(e));if(n.dirtyFormValues.has(t.id))return n.dirtyFormValues.get(t.id);if(n.dirtyValues.has(t.id))return n.dirtyValues.get(t.id)}return this.getOriginalCellValue(e,t)}},{key:"getOriginalCellValue",value:function(e,t){return e[t.dataIndex]}},{key:"updateSortAndFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rowsContainer.updateSortAndFilter(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCellValueByDataSourceField",value:function(e,t){if(this.additionalRowData.has(this.getRowId(e))){var n=this.additionalRowData.get(this.getRowId(e));if(n.dirtyFormValues.has(t.name))return n.dirtyFormValues.get(t.name);if(n.dirtyValues.has(t.name))return n.dirtyValues.get(t.name)}return e[t.index]}},{key:"getAllValuesOfProp",value:function(e){var t=this,n=this.rowsContainer.getFilteredRows({propertyFilterIdToExclude:e.id}).map((function(n){return t.getCellValue(n,e)})).filter((function(e){return e}));return n.some((function(e){return Object(ye.isArray)(e)}))?new Set(n.flatMap((function(e){return e}))):new Set(n)}},{key:"getCellText",value:function(e,t){var n=this.getCellValue(e,t);return this.resolveCellText(t,n)}},{key:"getOriginalCellText",value:function(e,t){var n=this.getOriginalCellValue(e,t);return this.resolveCellText(t,n)}},{key:"resolveCellText",value:function(e,t){if(null===t||void 0===t||Array.isArray(t)&&0===t.length)return"";if(e.isLookup&&e.lookupEngine){var n=e.lookupEngine;return"TagInput"===e.column?(Array.isArray(t)||(t=[t]),t.map((function(e){return n.lookupResolver.resolveValue("".concat(e))}))||[]):Array.isArray(t)?t.map((function(e){return n.lookupResolver.resolveValue("".concat(e))})).join(", "):n.lookupResolver.resolveValue("".concat(t))}return"Number"===e.column?Go(e.customNumericFormat,e.entity,t):t}},{key:"getRowByExistingIdx",value:function(e){return this.rows[e]}},{key:"getRowById",value:function(e){var t=this;return this.rowsContainer.rows.find((function(n){return t.getRowId(n)===e}))}},{key:"getTrueIndexById",value:function(e){return this.rowsContainer.getTrueIndexById(e)}},{key:"getExistingRowIdxById",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.getRowId(n)===e}));return n>-1?n:void 0}},{key:"isCellTextResolving",value:function(e,t){if(null===t||void 0===t)return!1;if(e.isLookup&&e.lookupEngine){var n=e.lookupEngine;return"TagInput"===e.column?t.some((function(e){return n.lookupResolver.isEmptyAndLoading("".concat(e))})):n.lookupResolver.isEmptyAndLoading("".concat(t))}return!1}},{key:"getPropertyById",value:function(e){return this.properties.find((function(t){return t.id===e}))}},{key:"getFirstRow",value:function(){return this.rowsContainer.getFirstRow()}},{key:"getLastRow",value:function(){if(0!==this.rows.length)return this.rows[this.rows.length-1]}},{key:"getNearestRow",value:function(e){var t=this.getRowId(e),n=this.getExistingRowIdxById(t);if(1!==this.rows.length)return void 0!==n?0===n?this.rows[1]:this.rows[n-1]:void 0}},{key:"getNextExistingRowId",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.getRowId(n)===e}));if(n>-1){var r=this.rows[n+1];return r?this.getRowId(r):void 0}}},{key:"getPrevExistingRowId",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.getRowId(n)===e}));if(n>0){var r=this.rows[n-1];return r?this.getRowId(r):void 0}}},{key:"getAdditionalRowData",value:function(e){return this.getAdditionalRowDataById(this.getRowId(e))}},{key:"getAdditionalRowDataById",value:function(e){return this.additionalRowData.get(e)}},{key:"hasRowDirtyValues",value:function(e){var t=this.getAdditionalRowData(e);if(t)return t.dirtyValues.size>0}},{key:"getDirtyValues",value:function(e){var t=this.getAdditionalRowData(e);return t?t.dirtyValues:new Map}},{key:"getDirtyValueRows",value:function(){var e=this;return this.rows.filter((function(t){return e.hasRowDirtyValues(t)}))}},{key:"appendRecords",value:function(e){this.rowsContainer.appendRecords(e)}},{key:"setRecords",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clear(),e.next=3,this.rowsContainer.set(t,0,void 0);case 3:0===t.length&&(this.isEmpty=!0);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setFormDirtyValue",value:function(e,t,n){this.createAdditionalData(e),this.additionalRowData.get(this.getRowId(e)).dirtyFormValues.set(t,n)}},{key:"flushFormToTable",value:function(e){var t=this.getAdditionalRowData(e);if(t){var n,r=Object(le.a)(t.dirtyFormValues.entries());try{for(r.s();!(n=r.n()).done;){var o=Object(d.a)(n.value,2),i=o[0],a=o[1];t.dirtyValues.set(i,a)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"setDirtyValue",value:function(e,t,n){this.createAdditionalData(e);var r=this.getAdditionalRowData(e);r&&r.dirtyValues.set(t,n)}},{key:"createAdditionalData",value:function(e){if(!this.additionalRowData.has(this.getRowId(e))){var t=new xo;t.parent=this,this.additionalRowData.set(this.getRowId(e),t)}}},{key:"clearUnneededAdditionalRowData",value:function(){for(var e=0,t=Array.from(this.additionalRowData.entries());e<t.length;e++){var n=Object(d.a)(t[e],2),r=n[0],o=n[1];0===o.dirtyFormValues.size&&0===o.dirtyValues.size&&this.additionalRowData.delete(r)}}},{key:"deleteAdditionalCellData",value:function(e,t){var n=this.additionalRowData.get(this.getRowId(e));n&&(n.dirtyFormValues.delete(t),n.dirtyValues.delete(t))}},{key:"deleteAdditionalRowData",value:function(e){this.additionalRowData.delete(this.getRowId(e))}},{key:"deleteRow",value:function(e){this.deleteAdditionalRowData(e),this.rowsContainer.delete(e),this.notifyRowRemovedListeners(),this.rowsAddedSinceSave--}},{key:"clearRecordDirtyValues",value:function(e,t){var n,r=this.getAdditionalRowDataById(e);if(r){for(var o=this.getRowById(e),i=0;i<t.length;i++){var a=(n=i,sn(this).getFieldByIndex(n));t[i]!==o[i]&&(r.dirtyFormValues.delete(a.name),r.dirtyValues.delete(a.name)),r.dirtyFormValues.get(a.name)===t[i]&&r.dirtyFormValues.delete(a.name),r.dirtyValues.get(a.name)===t[i]&&r.dirtyValues.delete(a.name)}this.clearUnneededAdditionalRowData()}}},{key:"substituteRecord",value:function(e){this.rowsContainer.substitute(e)}},{key:"insertRecord",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rowsContainer.insert(t,n,r);case 2:this.rowsAddedSinceSave++;case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.rowsContainer.clear(),this.additionalRowData.clear(),this.notifyRowRemovedListeners()}},{key:"unlockAddedRowPosition",value:function(){this.rowsContainer.unlockAddedRowPosition()}},{key:"addedRowPositionLocked",get:function(){return this.rowsContainer.addedRowPositionLocked}}]),e}(),oi=Object($.a)(ri.prototype,"isEmpty",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ii=Object($.a)(ri.prototype,"rowsAddedSinceSave",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(ri.prototype,"rows",[c.computed],Object.getOwnPropertyDescriptor(ri.prototype,"rows"),ri.prototype),ai=Object($.a)(ri.prototype,"additionalRowData",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(ri.prototype,"properties",[c.computed],Object.getOwnPropertyDescriptor(ri.prototype,"properties"),ri.prototype),Object($.a)(ri.prototype,"dataSource",[c.computed],Object.getOwnPropertyDescriptor(ri.prototype,"dataSource"),ri.prototype),Object($.a)(ri.prototype,"identifierProperty",[c.computed],Object.getOwnPropertyDescriptor(ri.prototype,"identifierProperty"),ri.prototype),Object($.a)(ri.prototype,"appendRecords",[Wo],Object.getOwnPropertyDescriptor(ri.prototype,"appendRecords"),ri.prototype),Object($.a)(ri.prototype,"setRecords",[Ho],Object.getOwnPropertyDescriptor(ri.prototype,"setRecords"),ri.prototype),Object($.a)(ri.prototype,"setFormDirtyValue",[zo],Object.getOwnPropertyDescriptor(ri.prototype,"setFormDirtyValue"),ri.prototype),Object($.a)(ri.prototype,"flushFormToTable",[Yo],Object.getOwnPropertyDescriptor(ri.prototype,"flushFormToTable"),ri.prototype),Object($.a)(ri.prototype,"setDirtyValue",[Ko],Object.getOwnPropertyDescriptor(ri.prototype,"setDirtyValue"),ri.prototype),Object($.a)(ri.prototype,"createAdditionalData",[qo],Object.getOwnPropertyDescriptor(ri.prototype,"createAdditionalData"),ri.prototype),Object($.a)(ri.prototype,"clearUnneededAdditionalRowData",[Qo],Object.getOwnPropertyDescriptor(ri.prototype,"clearUnneededAdditionalRowData"),ri.prototype),Object($.a)(ri.prototype,"deleteAdditionalCellData",[Xo],Object.getOwnPropertyDescriptor(ri.prototype,"deleteAdditionalCellData"),ri.prototype),Object($.a)(ri.prototype,"deleteAdditionalRowData",[Zo],Object.getOwnPropertyDescriptor(ri.prototype,"deleteAdditionalRowData"),ri.prototype),Object($.a)(ri.prototype,"deleteRow",[$o],Object.getOwnPropertyDescriptor(ri.prototype,"deleteRow"),ri.prototype),Object($.a)(ri.prototype,"clearRecordDirtyValues",[Jo],Object.getOwnPropertyDescriptor(ri.prototype,"clearRecordDirtyValues"),ri.prototype),Object($.a)(ri.prototype,"substituteRecord",[ei],Object.getOwnPropertyDescriptor(ri.prototype,"substituteRecord"),ri.prototype),Object($.a)(ri.prototype,"insertRecord",[ti],Object.getOwnPropertyDescriptor(ri.prototype,"insertRecord"),ri.prototype),Object($.a)(ri.prototype,"clear",[ni],Object.getOwnPropertyDescriptor(ri.prototype,"clear"),ri.prototype),ri);function li(e){return Be(e).selectedRow}function di(e){return Pe(e).isDialog}function pi(e,t){return sn(e).getFieldByName(t)}function hi(e){var t=Be(e);return eo(e).mayCauseFlicker&&!t.dataTable.isEmpty}function fi(e){return It(e).tableProperties}function bi(e){return Be(e).showSelectionCheckboxes}function vi(e){return It(e).groupingConfiguration}!function(e){e.Form="0",e.Table="1",e.Map="5"}(ci||(ci={}));var yi,gi,mi=function(){function e(t,n){Object(q.a)(this,e),this.groupLevel=t,this.sourceGroup=n,this.parent=void 0}return Object(Q.a)(e,[{key:"columnLabel",get:function(){return this.sourceGroup.groupLabel}},{key:"columnValue",get:function(){return this.sourceGroup.columnDisplayValue}},{key:"isExpanded",get:function(){return this.sourceGroup.isExpanded}}]),e}();function wi(e){var t=bi(e);return vi(e).orderedGroupingColumnSettings.length+(t?1:0)}var Oi,ji,ki,xi,Ci,Ii,Si,Di,Ri,Ti,_i,Pi,Fi,Mi=(yi=c.action.bound,gi=function(){function e(t){Object(q.a)(this,e),this.getTableViewProperties=null,this.getRowCount=null,this.getIsSelectionCheckboxes=null,this.ctx=void 0,this.defaultRowHeight=null,Object.assign(this,t)}return Object(Q.a)(e,[{key:"columnWidths",get:function(){return new Map(this.tableViewProperties.map((function(e){return[e.id,e.columnWidth]})))}},{key:"imageProperty",get:function(){var e,t=Object(le.a)(this.tableViewProperties);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("Image"===n.column)return n}}catch(r){t.e(r)}finally{t.f()}}},{key:"rowHeight",get:function(){return this.imageProperty?this.imageProperty.height:this.defaultRowHeight}},{key:"isSelectionCheckboxes",get:function(){return this.getIsSelectionCheckboxes()}},{key:"tableViewPropertiesOriginal",get:function(){return this.getTableViewProperties()}},{key:"tableViewProperties",get:function(){return this.tableViewPropertiesOriginal}},{key:"rowCount",get:function(){return this.getRowCount()}},{key:"columnCount",get:function(){return this.tableViewProperties.length}},{key:"contentWidth",get:function(){return 0===this.columnCount?0:this.getColumnRight(this.columnCount-1)}},{key:"contentHeight",get:function(){return this.getRowBottom(this.rowCount-1)}},{key:"getColumnLeft",value:function(e){var t=this.dataColumnIndexToDisplayedIndex(e);return this.displayedColumnDimensionsCom[t].left}},{key:"getColumnRight",value:function(e){var t=this.dataColumnIndexToDisplayedIndex(e);return this.displayedColumnDimensionsCom[t].right}},{key:"dataColumnIndexToDisplayedIndex",value:function(e){return e+wi(this.ctx)}},{key:"getRowTop",value:function(e){return e*this.getRowHeight(e)}},{key:"getRowHeight",value:function(e){return this.rowHeight}},{key:"getRowBottom",value:function(e){return this.getRowTop(e)+this.getRowHeight(e)}},{key:"setColumnWidth",value:function(e,t){this.columnWidths.set(e,Math.max(t,20))}},{key:"displayedColumnDimensionsCom",get:function(){var e=bi(this.ctx),t=vi(this.ctx).orderedGroupingColumnSettings,n=fi(this.ctx).map((function(e){return e.id})),r=this.columnWidths,i=Array.from(o.a.mark((function i(){return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e){o.next=3;break}return o.next=3,20;case 3:return o.delegateYield(t.map((function(e){return 20})),"t0",4);case 4:return o.delegateYield(n.map((function(e){return r.get(e)})).filter((function(e){return void 0!==e})),"t1",5);case 5:case"end":return o.stop()}}),i)}))()),a=0;return Array.from(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(le.a)(i),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}return r=n.value,e.next=7,{left:a,width:r,right:a+r};case 7:a+=r;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))())}}]),e}(),Object($.a)(gi.prototype,"columnWidths",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"columnWidths"),gi.prototype),Object($.a)(gi.prototype,"imageProperty",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"imageProperty"),gi.prototype),Object($.a)(gi.prototype,"rowHeight",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"rowHeight"),gi.prototype),Object($.a)(gi.prototype,"isSelectionCheckboxes",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"isSelectionCheckboxes"),gi.prototype),Object($.a)(gi.prototype,"tableViewPropertiesOriginal",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"tableViewPropertiesOriginal"),gi.prototype),Object($.a)(gi.prototype,"tableViewProperties",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"tableViewProperties"),gi.prototype),Object($.a)(gi.prototype,"rowCount",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"rowCount"),gi.prototype),Object($.a)(gi.prototype,"columnCount",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"columnCount"),gi.prototype),Object($.a)(gi.prototype,"setColumnWidth",[yi],Object.getOwnPropertyDescriptor(gi.prototype,"setColumnWidth"),gi.prototype),Object($.a)(gi.prototype,"displayedColumnDimensionsCom",[c.computed],Object.getOwnPropertyDescriptor(gi.prototype,"displayedColumnDimensionsCom"),gi.prototype),gi),Li=(Oi=c.action.bound,ji=function(){function e(t,n){Object(q.a)(this,e),this.scrollToFunction=void 0,Object(de.a)(this,"scrollTop",ki,this),Object(de.a)(this,"scrollLeft",xi,this),this.scrollTop=t,this.scrollLeft=n}return Object(Q.a)(e,[{key:"scrollTo",value:function(e){this.scrollToFunction&&this.scrollToFunction(e)}},{key:"setScrollOffset",value:function(e,t,n){this.scrollTop=t,this.scrollLeft=n}}]),e}(),ki=Object($.a)(ji.prototype,"scrollTop",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xi=Object($.a)(ji.prototype,"scrollLeft",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(ji.prototype,"setScrollOffset",[Oi],Object.getOwnPropertyDescriptor(ji.prototype,"setScrollOffset"),ji.prototype),ji),Ei=n(145),Ai=n.n(Ei),Vi=n(146),Ni=n.n(Vi),Bi=n(101),Ui=n.n(Bi),Gi=(Ci=c.action.bound,Object(K.observer)((Si=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"mouseOver",Di,Object(pe.a)(e)),e.divRef=H.a.createRef(),e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.registerElementRef(this.props.result.id,this.divRef)}},{key:"componentDidUpdate",value:function(){this.props.registerElementRef(this.props.result.id,this.divRef)}},{key:"onClick",value:function(){this.props.onResultItemClick(),this.props.result.onClick()}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{className:Ui.a.resultIemRow+" "+(this.mouseOver?Ui.a.resultIemRowHovered:"")+" "+(this.props.selected?Ui.a.resultIemRowSelected:""),ref:this.divRef,onClick:function(){return e.onClick()},onMouseOver:function(t){return e.mouseOver=!0},onMouseOut:function(t){return e.mouseOver=!1},children:[Object(re.jsx)("div",{className:Ui.a.itemIcon,children:Object(re.jsx)(Ie.Icon,{src:this.props.result.iconUrl})}),Object(re.jsxs)("div",{className:Ui.a.itemContents,children:[Object(re.jsx)("div",{className:Ui.a.itemTitle,children:this.props.result.label}),Object(re.jsx)("div",{className:Ui.a.itemTextSeparator,children:" "}),Object(re.jsx)("div",{children:this.props.result.description})]})]})}}]),n}(H.a.Component),Di=Object($.a)(Si.prototype,"mouseOver",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Si.prototype,"onClick",[Ci],Object.getOwnPropertyDescriptor(Si.prototype,"onClick"),Si.prototype),Ii=Si))||Ii),Wi=Object(K.observer)(Ri=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"onGroupClick",value:function(){this.props.group.isExpanded=!this.props.group.isExpanded}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:Ni.a.resultGroupRow,onClick:function(){return e.onGroupClick()},children:[this.props.group.isExpanded?Object(re.jsx)("i",{className:"fas fa-angle-up "+Ni.a.arrow}):Object(re.jsx)("i",{className:"fas fa-angle-down "+Ni.a.arrow}),Object(re.jsx)("div",{className:Ni.a.groupName,children:this.props.name})]}),Object(re.jsx)("div",{children:this.props.group.isExpanded&&this.props.group.results.map((function(t){var n;return Object(re.jsx)(Gi,{result:t,onResultItemClick:function(){return e.props.onResultItemClick(t)},selected:(null===(n=e.props.selectedResult)||void 0===n?void 0:n.id)===t.id,registerElementRef:e.props.registerElementRef},t.label+t.description+t.iconUrl)}))})]})}}]),n}(H.a.Component))||Ri;function Hi(e){return ke(e).sidebarState.mainMenuState}var zi,Yi="Search Dialog",Ki=Object(K.observer)(Ti=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"viewState",get:function(){return this.props.state}},{key:"componentDidMount",value:function(){var e;null===(e=this.viewState.input)||void 0===e||e.focus()}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{className:"searchView",children:[Object(re.jsxs)("div",{className:Ai.a.inputRow,children:[Object(re.jsx)(Ie.Icon,{className:Ai.a.icon,src:"./icons/search.svg"}),Object(re.jsx)("input",{ref:this.viewState.refInput,className:Ai.a.input,placeholder:bt("Search for anything here","type_search_here"),onKeyDown:function(t){return e.viewState.onInputKeyDown(t)},onChange:function(t){return e.viewState.onInputChange(t)}})]}),this.viewState.searcher.resultGroups.length>0&&Object(re.jsx)("div",{className:"resultArea",ref:this.viewState.scrollDivRef,children:Object(re.jsx)("div",{className:Ai.a.resultsContainer,children:this.viewState.searcher.resultGroups.map((function(t){return Object(re.jsx)(Wi,{name:t.name,group:t,onResultItemClick:function(t){return e.viewState.onResultItemClick(t)},selectedResult:e.viewState.searcher.selectedResult,registerElementRef:function(t,n){return e.viewState.resultElementMap.set(t,n)}},t.name)}))})})]})}}]),n}(H.a.Component))||Ti,qi=(_i=c.action.bound,Pi=function(){function e(t,n){var r=this;Object(q.a)(this,e),this.ctx=t,this.onCloseClick=n,this.input=void 0,this.refInput=function(e){return r.input=e},this.scrollDivRef=H.a.createRef(),this.resultElementMap=new Map,this.searcher=void 0,Object(de.a)(this,"value",Fi,this),this.timeout=void 0,this.searcher=on(this.ctx),this.searcher.clear()}return Object(Q.a)(e,[{key:"onKeyDown",value:function(e){if("Escape"!==e.key)return"ArrowDown"===e.key?(e.preventDefault(),this.searcher.selectNextResult(),void this.scrollToCell()):"ArrowUp"===e.key?(e.preventDefault(),this.searcher.selectPreviousResult(),void this.scrollToCell()):void("Enter"!==e.key||(this.searcher.selectedResult?(this.searcher.selectedResult.onClick(),this.onResultItemClick(this.searcher.selectedResult)):this.searcher.searchOnServer()));this.onCloseClick()}},{key:"onResultItemClick",value:function(e){this.onCloseClick(),Hi(this.ctx).highlightItem(e.id)}},{key:"scrollToCell",value:function(){var e;if(this.searcher.selectedResult){var t=this.scrollDivRef.current,n=null===(e=this.resultElementMap.get(this.searcher.selectedResult.id))||void 0===e?void 0:e.current;if(n&&t){var r=n.getBoundingClientRect(),o=t.getBoundingClientRect(),i=o.top-r.top,a=o.height-t.clientHeight,s=r.bottom-o.bottom+a;if(i>0)t.scrollTop-=i;else if(s>0)t.scrollTop+=s;else if(0===i){var c=this.searcher.getSelectedResultIndices();0===c.groupIndex&&0===c.indexInGroup&&(t.scrollTop=0)}}}}},{key:"onInputKeyDown",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){n.timeout=void 0,n.searcher.searchOnServer()}),1e3);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onInputChange",value:function(e){this.value=e.target.value,this.searcher.onSearchFieldChange(this.value)}},{key:"clear",value:function(){this.searcher.clear()}}]),e}(),Fi=Object($.a)(Pi.prototype,"value",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object($.a)(Pi.prototype,"onKeyDown",[_i],Object.getOwnPropertyDescriptor(Pi.prototype,"onKeyDown"),Pi.prototype),Pi),Qi=Object(K.observer)(zi=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).searchViewState=new qi(e.props.ctx,e.props.onCloseClick),e}return Object(Q.a)(n,[{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:null,titleButtons:null,buttonsCenter:null,onKeyDown:function(t){return e.searchViewState.onKeyDown(t)},buttonsLeft:null,buttonsRight:null,topPosiotionProc:30,children:Object(re.jsx)(Ki,{state:this.searchViewState})})}}]),n}(H.a.Component))||zi;function Xi(e){on(e).clear();var t=Dn(e).pushDialog(Yi,Object(re.jsx)(Qi,{ctx:e,onCloseClick:function(){return t()}}),void 0,!0)}function Zi(e){return e.tabIndex?e.tabIndex.split(".").filter((function(e){return""!==e})).map((function(e){return parseInt(e)})):[1e6]}function $i(e,t){return Ji(e,t,0)}function Ji(e,t,n){if(ea(e,n)&&!ea(t,n))return 1;if(!ea(e,n)&&ea(t,n))return-1;if(!ea(e,n)&&!ea(t,n))return 0;var r=Zi(e)[n]-Zi(t)[n];return 0!==r?r:Ji(e,t,n+1)}function ea(e,t){return Zi(e).length-1>=t}var ta=function(){function e(t){Object(q.a)(this,e),this.parent=t,this.autoFocusDisabled=!1,this.objectMap=new Map,this.focusAbleContainers=[],this.lastFocused=void 0}return Object(Q.a)(e,[{key:"stopAutoFocus",value:function(){this.autoFocusDisabled=!0}},{key:"setLastFocused",value:function(e){this.lastFocused=e}},{key:"subscribe",value:function(e,t,n){if(e){var r=new na(e,t,n),o=this.focusAbleContainers.find((function(n){return n.name&&n.name===t||n.focusable===e}));o&&this.focusAbleContainers.remove(o),this.focusAbleContainers.push(r),this.focusAbleContainers=this.focusAbleContainers.sort($i)}}},{key:"focus",value:function(e){var t,n=null===(t=this.focusAbleContainers.find((function(t){return t.name===e})))||void 0===t?void 0:t.focusable;this.focusAndRemember(n)}},{key:"focusAndRemember",value:function(e){e&&(this.lastFocused=e,e.focus())}},{key:"refocusLast",value:function(){var e;null===(e=this.lastFocused)||void 0===e||e.focus()}},{key:"forceAutoFocus",value:function(){var e=this,t=this.focusAbleContainers[0].focusable;t.disabled?this.focusNext(t):setTimeout((function(){e.focusAndRemember(t)}),0)}},{key:"autoFocus",value:function(){0===this.focusAbleContainers.length||this.autoFocusDisabled||Dn(this.parent).isOpen(Yi)||this.forceAutoFocus()}},{key:"focusNext",value:function(e){this.focusNextInternal(e,0)}},{key:"focusNextInternal",value:function(e,t){var n=this;if(!(t>20)){var r=this.focusAbleContainers.findIndex((function(t){return t.focusable===e})),o=this.focusAbleContainers.length-1>r?r+1:0,i=this.focusAbleContainers[o].focusable;i!==e&&i.disabled?this.focusNextInternal(i,t+1):setTimeout((function(){n.focusAndRemember(i)}))}}},{key:"focusPrevious",value:function(e){var t=this,n=this.focusAbleContainers.findIndex((function(t){return t.focusable===e})),r=0===n?this.focusAbleContainers.length-1:n-1,o=this.focusAbleContainers[r].focusable;o.disabled?this.focusPrevious(o):setTimeout((function(){t.focusAndRemember(o)}))}}]),e}(),na=function e(t,n,r){Object(q.a)(this,e),this.focusable=t,this.name=n,this.tabIndex=r};function ra(e){return Be(e).selectionMember}function oa(e,t){return or(e).getOrdering(t)}var ia=n(183);function aa(e,t){var n;return null===(n=pi(e,t))||void 0===n?void 0:n.index}function sa(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(_e(e).onMainMenuItemClick(n),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function ca(e){return ke(e).recordInfo}function ua(e){return Object(c.flow)(o.a.mark((function t(n,r,i){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ca(e).onSelectedRowMaybeChanged(n,r,i),"t0",1);case 1:case"end":return t.stop()}}),t)})))}function la(e){return Be(e).tablePanelView.configurationManager}var da,pa,ha,fa,ba,va,ya,ga,ma,wa,Oa,ja,ka,xa,Ca,Ia,Sa,Da,Ra,Ta,_a,Pa,Fa,Ma,La,Ea,Aa,Va,Na,Ba,Ua,Ga,Wa,Ha=function(){function e(t){Object(q.a)(this,e),this.parent=t,this._activeEditor=void 0,this.focusTableOnReload=!0}return Object(Q.a)(e,[{key:"focusTableIfNeeded",value:function(){var e,t,n=nr(this.parent).isFilterControlsDisplayed&&"INPUT"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName);this.focusTableOnReload&&!n?null===(t=It(this))||void 0===t||t.triggerOnFocusTable():this.focusTableOnReload=!0}},{key:"activeEditor",get:function(){return this._activeEditor},set:function(e){this._activeEditor=e,this.focusEditor()}},{key:"focusEditor",value:function(){var e;null===(e=this._activeEditor)||void 0===e||e.focus()}}]),e}();function za(e){return Be(e).gridFocusManager}var Ya,Ka,qa,Qa,Xa,Za,$a,Ja,es,ts,ns,rs=function e(t){Object(q.a)(this,e),this.selectedRowId=t},os=(da=c.action.bound,pa=c.action.bound,ha=c.action.bound,fa=c.action.bound,ba=c.action.bound,va=c.action.bound,ya=c.action.bound,ga=c.action.bound,ma=c.action.bound,wa=c.action.bound,Oa=c.action.bound,ja=c.action.bound,ka=c.action.bound,xa=c.action.bound,Ca=c.action.bound,Ia=c.action.bound,Sa=c.action.bound,Da=c.action.bound,Ra=c.action.bound,Ta=c.action.bound,_a=c.action.bound,Pa=c.action.bound,Fa=c.action.bound,Ma=c.action.bound,La=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_IDataView=1,this.formFocusManager=new ta(this),this.gridFocusManager=new Ha(this),Object(de.a)(this,"aggregationData",Ea,this),this._isFormViewActive=function(){return!1},this._isTableViewActive=function(){return!1},Object(de.a)(this,"rowCount",Aa,this),this.orderProperty=void 0,this.activateFormView=void 0,this.activateTableView=void 0,this.gridDimensions=void 0,this.id="",this.modelInstanceId="",this.name="",this.modelId="",this.defaultPanelView=ci.Table,this.isHeadless=!1,this.isMapSupported=!1,this.disableActionButtons=!1,this.showAddButton=!1,this.showDeleteButton=!1,this.showSelectionCheckboxesSetting=!1,this.isGridHeightDynamic=!1,this.selectionMember="",this.orderMember="",this.isDraggingEnabled=!1,this.entity="",this.dataMember="",this.isRootGrid=!1,this.isRootEntity=!1,this.isPreloaded=!1,this.newRecordView=void 0,this.requestDataAfterSelectionChange=!1,this.confirmSelectionChange=!1,this.properties=[],this.actions=[],this.defaultActions=[],this.type="",Object(de.a)(this,"tableViewProperties",Va,this),this.dataTable=null,this.formViewUI=void 0,this.lifecycle=null,this.tablePanelView=null,this.formPanelView=null,this.lookupLoader=null,this.serverSideGrouper=null,this.clientSideGrouper=null,this.isFirst=null,this.dataViewRowCursor=null,this.dataViewApi=null,this.dataViewData=null,Object(de.a)(this,"selectAllCheckboxChecked",Na,this),Object(de.a)(this,"selectedRowIds",Ba,this),Object(de.a)(this,"activePanelView",Ua,this),Object(de.a)(this,"selectedRowId",Ga,this),this.viewStateStack=[],this.scrollState=new Li(0,0),Object(de.a)(this,"contentBounds",Wa,this),this.infiniteScrollLoader=new Gr,this.parent=void 0,this.attributes=void 0,Object.assign(this,t),this.properties.forEach((function(e){return e.parent=n})),this.actions.forEach((function(e){return e.parent=n})),this.defaultActions=this.actions.filter((function(e){return e.isDefault})),this.dataTable.parent=this,this.lifecycle.parent=this,this.tablePanelView.parent=this,this.formPanelView.parent=this,this.lookupLoader.parent=this,this.clientSideGrouper.parent=this,this.serverSideGrouper.parent=this,this.gridDimensions=new Mi({getTableViewProperties:function(){return fi(n)},getRowCount:function(){return n.tableRows.length},getIsSelectionCheckboxes:function(){return bi(n.tablePanelView)},ctx:this,defaultRowHeight:this.tablePanelView.rowHeight}),this.orderProperty=this.properties.find((function(e){return e.id===n.orderMember})),this.dataTable.rowRemovedListeners.push((function(){return n.selectAllCheckboxChecked=!1}))}return Object(Q.a)(e,[{key:"isFormViewActive",get:function(){return this._isFormViewActive},set:function(e){this._isFormViewActive=e}},{key:"isTableViewActive",get:function(){return this._isTableViewActive},set:function(e){this._isTableViewActive=e}},{key:"setRowCount",value:function(e){this.rowCount=e,this.dataTable.rowsAddedSinceSave=0}},{key:"totalRowCount",get:function(){return this.rowCount?this.rowCount+this.dataTable.rowsAddedSinceSave:this.rowCount}},{key:"showSelectionCheckboxes",get:function(){return this.showSelectionCheckboxesSetting||!!this.selectionMember}},{key:"firstEnabledDefaultAction",get:function(){return this.defaultActions.find((function(e){return e.isEnabled}))}},{key:"hasSelectedRowId",value:function(e){return this.selectedRowIds.has(e)}},{key:"appendRecords",value:function(e){var t=this;this.dataTable.appendRecords(e),this.selectedRowIds.clear(),this.selectAllCheckboxChecked=0!==this.dataTable.rows.length&&this.dataTable.rows.every((function(e){return t.isSelected(t.dataTable.getRowId(e))}))}},{key:"setRecords",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataTable.setRecords(t);case 2:n=this.dataTable.rows,r=n.map((function(e){return i.dataTable.getRowId(e)})),this.selectedRowIds=new Set(Array.from(this.selectedRowIds).filter((function(e){return r.includes(e)}))),this.selectAllCheckboxChecked=0!==this.dataTable.rows.length&&this.dataTable.rows.every((function(e){return i.isSelected(i.dataTable.getRowId(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isSelected",value:function(e){var t=ra(this);if(t){var n=pi(this,t);if(!n)throw new Error('SelectionMember "'.concat(t,'" was not found in data source. Make sure the SelectionMember value in ').concat(this.modelInstanceId," is correct"));var r=this.dataTable.getRowById(e);return this.dataTable.getCellValueByDataSourceField(r,n)}return this.selectedRowIds.has(e)}},{key:"addSelectedRowId",value:function(e){this.selectedRowIds.add(e)}},{key:"removeSelectedRowId",value:function(e){this.selectedRowIds.delete(e),this.selectAllCheckboxChecked=!1}},{key:"clear",value:function(){this.selectedRowIds.clear(),this.dataTable.clear()}},{key:"deleteRowAndSelectNext",value:function(e){var t=this.dataTable.getRowId(e),n=this.dataTable.getNextExistingRowId(t);n||(n=this.dataTable.getPrevExistingRowId(t)),this.selectedRowIds.delete(t),this.dataTable.deleteRow(e),this.setSelectedRowId(n)}},{key:"substituteRecord",value:function(e){if(!ra(this)){var t=this.dataTable.getRowId(e);this.removeSelectedRowId(t)}this.dataTable.substituteRecord(e),vi(this).isGrouping&&lr(this).substituteRecord(e)}},{key:"setSelectedState",value:function(e,t){t?this.addSelectedRowId(e):this.removeSelectedRowId(e)}},{key:"selectedRowIndex",get:function(){return vi(this).isGrouping?lr(this).allGroups.some((function(e){return e.isExpanded}))?lr(this).getRowIndex(this.selectedRowId):void 0:this.selectedRowId?this.dataTable.getExistingRowIdxById(this.selectedRowId):void 0}},{key:"trueSelectedRowIndex",get:function(){return vi(this).isGrouping?lr(this).allGroups.some((function(e){return e.isExpanded}))?lr(this).getRowIndex(this.selectedRowId):void 0:this.selectedRowId?this.dataTable.getTrueIndexById(this.selectedRowId):void 0}},{key:"selectedRow",get:function(){if(this.selectedRowId)return vi(this).isGrouping?lr(this).getRowById(this.selectedRowId):void 0!==this.selectedRowIndex?this.dataTable.getRowByExistingIdx(this.selectedRowIndex):void 0}},{key:"isValidRowSelection",get:function(){return void 0!==this.selectedRowIndex}},{key:"panelViewActions",get:function(){return hi(this)&&!this.dataTable.isEmpty?[]:this.actions.filter((function(e){return e.placement===Et.PanelHeader}))}},{key:"panelMenuActions",get:function(){return hi(this)&&!this.dataTable.isEmpty?[]:this.actions.filter((function(e){return e.placement===Et.PanelMenu}))}},{key:"toolbarActions",get:function(){var e=this;return hi(this)&&!this.dataTable.isEmpty?[]:this.actions.filter((function(t){return t.placement===Et.Toolbar&&t.type!==Lt.SelectionDialogAction&&!di(e)}))}},{key:"dialogActions",get:function(){var e=this;return this.actions.filter((function(t){return t.type===Lt.SelectionDialogAction||di(e)}))}},{key:"isWorking",get:function(){return this.lifecycle.isWorking||eo(this).isWorking||(e=this,Be(e).lookupLoader).isWorking;var e}},{key:"isAnyBindingAncestorWorking",get:function(){return!this.isBindingRoot&&(this.bindingParent.isWorking||this.bindingParent.isAnyBindingAncestorWorking)}},{key:"isBindingRoot",get:function(){return 0===this.parentBindings.length}},{key:"isBindingParent",get:function(){return this.childBindings.length>0}},{key:"bindingParent",get:function(){var e,t;return null===(e=this.parentBindings)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.parentDataView}},{key:"bindingRoot",get:function(){for(var e=this;!e.isBindingRoot;)e=e.bindingParent;return e}},{key:"parentBindings",get:function(){return Ee(this).getBindingsByChildId(this.modelInstanceId)}},{key:"childBindings",get:function(){return Ee(this).getBindingsByParentId(this.modelInstanceId)}},{key:"dataSource",get:function(){return Yt(this,this.entity)}},{key:"bindingParametersFromParent",get:function(){var e=function(e){var t=Nn(e),n=t.length>0?t[0]:void 0;return n?li(n):void 0}(this);if(e){var t,n=Bn(this),r=ur(n),o=function(e){var t=Be(e).parentBindings;return t.length>0?t[0]:void 0}(this),i={},a=Object(le.a)(o.bindingPairs);try{for(a.s();!(t=a.n()).done;){var s=t.value,c=pi(n,s.parentPropertyId);i[s.childPropertyId]=r.getCellValueByDataSourceField(e,c)}}catch(u){a.e(u)}finally{a.f()}return i}return{}}},{key:"moveSelectedRowUp",value:function(){this.selectedRowId&&(oa(this,this.orderMember).ordering===zn.ASC?this.moveSelectedRowDownIndexwise():this.moveSelectedRowUpIndexwise())}},{key:"moveSelectedRowDown",value:function(){this.selectedRowId&&(oa(this,this.orderMember).ordering===zn.ASC?this.moveSelectedRowUpIndexwise():this.moveSelectedRowDownIndexwise())}},{key:"moveSelectedRowUpIndexwise",value:function(){if(this.selectedRowId){var e=ur(this),t=e.getRowById(this.selectedRowId),n=pi(this,this.orderMember).index,r=t[n],o=e.rows.find((function(e){return e[n]===r+1}));o&&(t[n]+=1,o[n]-=1,this.dataTable.substituteRecord(t),this.dataTable.substituteRecord(o),this.dataTable.updateSortAndFilter({retainPreviousSelection:!0}),this.dataTable.setDirtyValue(t,this.orderMember,t[n]),this.dataTable.setDirtyValue(o,this.orderMember,o[n]))}}},{key:"moveSelectedRowDownIndexwise",value:function(){if(this.selectedRowId){var e=ur(this),t=e.getRowById(this.selectedRowId),n=pi(this,this.orderMember).index,r=t[n],o=e.rows.find((function(e){return e[n]===r-1}));o&&(t[n]-=1,o[n]+=1,this.dataTable.substituteRecord(t),this.dataTable.substituteRecord(o),this.dataTable.updateSortAndFilter({retainPreviousSelection:!0}),this.dataTable.setDirtyValue(t,this.orderMember,t[n]),this.dataTable.setDirtyValue(o,this.orderMember,o[n]))}}},{key:"selectNextRow",value:function(){var e=Vn(this),t=void 0;e&&(t=vi(this).isGrouping?lr(this).getNextRowId(e):ur(this).getNextExistingRowId(e)),t&&this.setSelectedRowId(t)}},{key:"selectPrevRow",value:function(){var e=Vn(this),t=void 0;e&&(t=vi(this).isGrouping?lr(this).getPreviousRowId(e):ur(this).getPrevExistingRowId(e)),t&&this.setSelectedRowId(t)}},{key:"navigateLookupLink",value:o.a.mark((function e(t,n){var r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,void 0!==(i=aa(this,r))){e.next=4;break}return e.abrupt("return");case 4:return a=n[i],e.next=7,Xe.getLinkMenuId(t,a);case 7:if(s=e.sent,!(c=s&&Ze.getItemById(this,s))){e.next=14;break}return c=Object(Fe.a)(Object(Fe.a)({},c),{},{parent:void 0,elements:[]}),c=Object(ia.a)(c,(function(e){c.attributes.type.startsWith("FormReferenceMenuItem")&&(e.attributes.type="FormReferenceMenuItem"),e.attributes.lazyLoading="false"})),e.next=14,sa(this)({event:void 0,item:c,idParameter:a,isSingleRecordEdit:!0});case 14:case"end":return e.stop()}}),e,this)}))},{key:"onFieldChange",value:function(e,t,n,r){if(!n.readOnly){if(r===ur(this).getCellValue(t,n))return;ur(this).setFormDirtyValue(t,n.id,r)}}},{key:"loadFirstPage",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.infiniteScrollLoader){e.next=2;break}return e.delegateYield(this.infiniteScrollLoader.loadFirstPage(),"t0",2);case 2:case"end":return e.stop()}}),e,this)}))},{key:"loadLastPage",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.infiniteScrollLoader){e.next=2;break}return e.delegateYield(this.infiniteScrollLoader.loadLastPage(),"t0",2);case 2:case"end":return e.stop()}}),e,this)}))},{key:"selectFirstRow",value:function(){if(!vi(this).isGrouping){var e=ur(this),t=e.getFirstRow();t?this.setSelectedRowId(e.getRowId(t)):this.setSelectedRowId(void 0)}}},{key:"selectLastRow",value:function(){if(!vi(this).isGrouping){var e=ur(this),t=e.getLastRow();t?this.setSelectedRowId(e.getRowId(t)):this.setSelectedRowId(void 0)}}},{key:"reselectOrSelectFirst",value:function(){var e=this.selectedRowId&&this.dataTable.getRowById(this.selectedRowId);this.isRootGrid&&e&&this.selectedRow||this.selectFirstRow()}},{key:"selectRow",value:function(e){this.setSelectedRowId(this.dataTable.getRowId(e))}},{key:"setSelectedRowId",value:function(e){if(this.selectedRowId!==e){this.selectedRowId=e,this.isBindingParent&&this.childBindings.forEach((function(e){return e.childDataView.dataTable.updateSortAndFilter()}));var t=this;this.selectedRowId&&Ae(this).focusedDataViewId===this.id&&In({ctx:t,action:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(t)(Hn(t),un(t),t.selectedRowId);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}}},{key:"saveViewState",value:function(){this.viewStateStack.push(new rs(this.selectedRowId))}},{key:"restoreViewState",value:function(){var e=this.viewStateStack.pop();e&&e.selectedRowId&&(this.setSelectedRowId(e.selectedRowId),li(this)||this.selectFirstRow(),It(this).scrollToCurrentCell())}},{key:"isLazyLoading",get:function(){return Gn(this)&&this.isRootGrid}},{key:"start",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lifecycle.start(),this.isLazyLoading&&this.serverSideGrouper.start(),Ae(this).registerDisposer((function(){return t.serverSideGrouper.dispose()})),e.next=6,this.dataTable.start();case 6:return Ae(this).registerDisposer(Object(c.reaction)((function(){return{selectedRowId:t.selectedRowId,rowsCount:ur(t).allRows.length}}),(function(e){Ae(t).rowSelectedReactionsDisabled(t)||void 0===e.selectedRowId&&e.rowsCount>0&&t.reselectOrSelectFirst()}),{fireImmediately:!0})),e.next=9,this.dataTable.start();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.properties.forEach((function(e){return e.stop()})),this.dataTable.stop()}},{key:"tableRows",get:function(){return 0===vi(this).orderedGroupingColumnSettings.length?ur(this).rows:function(e){var t=[],n=0;function r(e){if(t.push(new mi(n,e)),e.isExpanded){var o,i=Object(le.a)(e.childGroups);try{for(i.s();!(o=i.n()).done;){var a=o.value;n++,r(a),n--}}catch(s){i.e(s)}finally{i.f()}0===e.childGroups.length&&t.push.apply(t,Object(gt.a)(e.childRows))}}var o,i=Object(le.a)(e);try{for(i.s();!(o=i.n()).done;)r(o.value)}catch(a){i.e(a)}finally{i.f()}return t}(lr(this).topLevelGroups)}},{key:"initializeNewScrollLoader",value:function(){this.infiniteScrollLoader&&this.infiniteScrollLoader.dispose(),this.infiniteScrollLoader=this.getScrollLoader(),Ae(this).registerDisposer(this.infiniteScrollLoader.start())}},{key:"getScrollLoader",value:function(){var e=0===vi(this).orderedGroupingColumnSettings.length,t=ur(this).rowsContainer;return t instanceof Po&&e?new Wr({ctx:this,gridDimensions:this.gridDimensions,scrollState:this.scrollState,rowsContainer:t,groupFilter:void 0,visibleRowsMonitor:new hr(this,this.gridDimensions,this.scrollState)}):new Gr}},{key:"focusFormViewControl",value:function(e){this.formFocusManager.focus(e)}},{key:"showView",value:function(e,t){throw new Error("showView method is not yet implemented.")}},{key:"switchToPanel",value:function(e){throw new Error("switchToPanel method is not yet implemented.")}},{key:"onReload",value:function(){this.dataTable.unlockAddedRowPosition()}},{key:"exportToExcel",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=la(this).activeTableConfiguration.columnConfigurations.filter((function(e){return e.isVisible})).map((function(e){return e.propertyId})),n=It(this).allTableProperties.filter((function(e){return t.includes(e.id)})).map((function(e){return{Caption:e.name,FieldName:e.id,LookupId:e.lookupId,Format:e.formatterPattern,PolymorphRules:e.controlPropertyId?{ControlField:e.controlPropertyId,Rules:i.getPolymorphicRules(e)}:void 0}})),1048576,r=l(this),!Co(this)){e.next=9;break}return e.next=7,r.getExcelFile({Entity:this.entity,Fields:n,SessionFormIdentifier:Wn(this),RowIds:[],LazyLoadedEntityInput:{SessionFormIdentifier:Wn(this),Filter:rr({ctx:this}),MenuId:Hn(this),DataStructureEntityId:un(this),Ordering:sr(this),RowLimit:1048576,RowOffset:0,ColumnNames:cn(this),FilterLookups:br(this)}});case 7:e.next=11;break;case 9:return e.next=11,r.getExcelFile({Entity:this.entity,Fields:n,SessionFormIdentifier:Wn(this),RowIds:this.dataTable.rows.map((function(e){return i.dataTable.getRowId(e)})),LazyLoadedEntityInput:void 0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPolymorphicRules",value:function(e){return e.childProperties.filter((function(e){return e.controlPropertyValue})).reduce((function(e,t){return e[t.controlPropertyValue]=t.id,e}),{})}}]),e}(),Ea=Object($.a)(La.prototype,"aggregationData",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(La.prototype,"setRowCount",[da],Object.getOwnPropertyDescriptor(La.prototype,"setRowCount"),La.prototype),Aa=Object($.a)(La.prototype,"rowCount",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(La.prototype,"totalRowCount",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"totalRowCount"),La.prototype),Va=Object($.a)(La.prototype,"tableViewProperties",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Na=Object($.a)(La.prototype,"selectAllCheckboxChecked",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ba=Object($.a)(La.prototype,"selectedRowIds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),Ua=Object($.a)(La.prototype,"activePanelView",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ci.Table}}),Ga=Object($.a)(La.prototype,"selectedRowId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(La.prototype,"showSelectionCheckboxes",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"showSelectionCheckboxes"),La.prototype),Object($.a)(La.prototype,"firstEnabledDefaultAction",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"firstEnabledDefaultAction"),La.prototype),Object($.a)(La.prototype,"hasSelectedRowId",[Le.a],Object.getOwnPropertyDescriptor(La.prototype,"hasSelectedRowId"),La.prototype),Object($.a)(La.prototype,"addSelectedRowId",[pa],Object.getOwnPropertyDescriptor(La.prototype,"addSelectedRowId"),La.prototype),Object($.a)(La.prototype,"removeSelectedRowId",[ha],Object.getOwnPropertyDescriptor(La.prototype,"removeSelectedRowId"),La.prototype),Object($.a)(La.prototype,"clear",[fa],Object.getOwnPropertyDescriptor(La.prototype,"clear"),La.prototype),Object($.a)(La.prototype,"deleteRowAndSelectNext",[ba],Object.getOwnPropertyDescriptor(La.prototype,"deleteRowAndSelectNext"),La.prototype),Object($.a)(La.prototype,"substituteRecord",[va],Object.getOwnPropertyDescriptor(La.prototype,"substituteRecord"),La.prototype),Object($.a)(La.prototype,"setSelectedState",[ya],Object.getOwnPropertyDescriptor(La.prototype,"setSelectedState"),La.prototype),Object($.a)(La.prototype,"selectedRowIndex",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"selectedRowIndex"),La.prototype),Object($.a)(La.prototype,"trueSelectedRowIndex",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"trueSelectedRowIndex"),La.prototype),Object($.a)(La.prototype,"selectedRow",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"selectedRow"),La.prototype),Object($.a)(La.prototype,"isValidRowSelection",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"isValidRowSelection"),La.prototype),Object($.a)(La.prototype,"panelViewActions",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"panelViewActions"),La.prototype),Object($.a)(La.prototype,"panelMenuActions",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"panelMenuActions"),La.prototype),Object($.a)(La.prototype,"toolbarActions",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"toolbarActions"),La.prototype),Object($.a)(La.prototype,"dialogActions",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"dialogActions"),La.prototype),Object($.a)(La.prototype,"isWorking",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"isWorking"),La.prototype),Object($.a)(La.prototype,"isAnyBindingAncestorWorking",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"isAnyBindingAncestorWorking"),La.prototype),Object($.a)(La.prototype,"isBindingRoot",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"isBindingRoot"),La.prototype),Object($.a)(La.prototype,"isBindingParent",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"isBindingParent"),La.prototype),Object($.a)(La.prototype,"bindingParent",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"bindingParent"),La.prototype),Object($.a)(La.prototype,"bindingRoot",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"bindingRoot"),La.prototype),Object($.a)(La.prototype,"parentBindings",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"parentBindings"),La.prototype),Object($.a)(La.prototype,"childBindings",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"childBindings"),La.prototype),Object($.a)(La.prototype,"dataSource",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"dataSource"),La.prototype),Object($.a)(La.prototype,"bindingParametersFromParent",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"bindingParametersFromParent"),La.prototype),Object($.a)(La.prototype,"moveSelectedRowUp",[ga],Object.getOwnPropertyDescriptor(La.prototype,"moveSelectedRowUp"),La.prototype),Object($.a)(La.prototype,"moveSelectedRowDown",[ma],Object.getOwnPropertyDescriptor(La.prototype,"moveSelectedRowDown"),La.prototype),Object($.a)(La.prototype,"moveSelectedRowUpIndexwise",[wa],Object.getOwnPropertyDescriptor(La.prototype,"moveSelectedRowUpIndexwise"),La.prototype),Object($.a)(La.prototype,"moveSelectedRowDownIndexwise",[Oa],Object.getOwnPropertyDescriptor(La.prototype,"moveSelectedRowDownIndexwise"),La.prototype),Object($.a)(La.prototype,"selectNextRow",[ja],Object.getOwnPropertyDescriptor(La.prototype,"selectNextRow"),La.prototype),Object($.a)(La.prototype,"selectPrevRow",[ka],Object.getOwnPropertyDescriptor(La.prototype,"selectPrevRow"),La.prototype),Object($.a)(La.prototype,"onFieldChange",[xa],Object.getOwnPropertyDescriptor(La.prototype,"onFieldChange"),La.prototype),Object($.a)(La.prototype,"loadFirstPage",[Ca],Object.getOwnPropertyDescriptor(La.prototype,"loadFirstPage"),La.prototype),Object($.a)(La.prototype,"loadLastPage",[Ia],Object.getOwnPropertyDescriptor(La.prototype,"loadLastPage"),La.prototype),Object($.a)(La.prototype,"selectFirstRow",[Sa],Object.getOwnPropertyDescriptor(La.prototype,"selectFirstRow"),La.prototype),Object($.a)(La.prototype,"selectLastRow",[Da],Object.getOwnPropertyDescriptor(La.prototype,"selectLastRow"),La.prototype),Object($.a)(La.prototype,"selectRow",[Ra],Object.getOwnPropertyDescriptor(La.prototype,"selectRow"),La.prototype),Object($.a)(La.prototype,"setSelectedRowId",[Ta],Object.getOwnPropertyDescriptor(La.prototype,"setSelectedRowId"),La.prototype),Object($.a)(La.prototype,"saveViewState",[_a],Object.getOwnPropertyDescriptor(La.prototype,"saveViewState"),La.prototype),Object($.a)(La.prototype,"restoreViewState",[Pa],Object.getOwnPropertyDescriptor(La.prototype,"restoreViewState"),La.prototype),Object($.a)(La.prototype,"start",[Fa],Object.getOwnPropertyDescriptor(La.prototype,"start"),La.prototype),Object($.a)(La.prototype,"stop",[Ma],Object.getOwnPropertyDescriptor(La.prototype,"stop"),La.prototype),Object($.a)(La.prototype,"tableRows",[c.computed],Object.getOwnPropertyDescriptor(La.prototype,"tableRows"),La.prototype),Wa=Object($.a)(La.prototype,"contentBounds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),La),is=function e(t){Object(q.a)(this,e),this.$type_IDropDownColumn=1,this.parent=void 0,this.id="",this.name="",this.entity="",this.column="",this.index=0,Object.assign(this,t)},as={};function ss(e,t){if(void 0===e||null===e)return 1;if(void 0===t||null===t)return-1;var n=ot();return e.toString().localeCompare(t.toString(),n)}function cs(e,t){if(void 0===t||null===t)return t;var n=function(e){var t,n;return null!==(t=null===(n=_e(e).portalSettings)||void 0===n?void 0:n.filterConfig)&&void 0!==t?t:{caseSensitive:!1,accentSensitive:!0}}(e);return n.caseSensitive||(t=t.toLowerCase()),n.accentSensitive||(t=t.replace(/[^A-Za-z0-9\[\] ]/g,(function(e){return as.latin_map[e]||e}))),t}function us(e,t){return"string"===typeof t||t instanceof String?cs(e,t):Array.isArray(t)?t.map((function(t){return us(e,t)})):t}as.latin_map={"\xc1":"A","\u0102":"A","\u1eae":"A","\u1eb6":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u01cd":"A","\xc2":"A","\u1ea4":"A","\u1eac":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\xc4":"A","\u01de":"A","\u0226":"A","\u01e0":"A","\u1ea0":"A","\u0200":"A","\xc0":"A","\u1ea2":"A","\u0202":"A","\u0100":"A","\u0104":"A","\xc5":"A","\u01fa":"A","\u1e00":"A","\u023a":"A","\xc3":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u1e02":"B","\u1e04":"B","\u0181":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0106":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0108":"C","\u010a":"C","\u0187":"C","\u023b":"C","\u010e":"D","\u1e10":"D","\u1e12":"D","\u1e0a":"D","\u1e0c":"D","\u018a":"D","\u1e0e":"D","\u01f2":"D","\u01c5":"D","\u0110":"D","\u018b":"D","\u01f1":"DZ","\u01c4":"DZ","\xc9":"E","\u0114":"E","\u011a":"E","\u0228":"E","\u1e1c":"E","\xca":"E","\u1ebe":"E","\u1ec6":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1e18":"E","\xcb":"E","\u0116":"E","\u1eb8":"E","\u0204":"E","\xc8":"E","\u1eba":"E","\u0206":"E","\u0112":"E","\u1e16":"E","\u1e14":"E","\u0118":"E","\u0246":"E","\u1ebc":"E","\u1e1a":"E","\ua76a":"ET","\u1e1e":"F","\u0191":"F","\u01f4":"G","\u011e":"G","\u01e6":"G","\u0122":"G","\u011c":"G","\u0120":"G","\u0193":"G","\u1e20":"G","\u01e4":"G","\u1e2a":"H","\u021e":"H","\u1e28":"H","\u0124":"H","\u2c67":"H","\u1e26":"H","\u1e22":"H","\u1e24":"H","\u0126":"H","\xcd":"I","\u012c":"I","\u01cf":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u0130":"I","\u1eca":"I","\u0208":"I","\xcc":"I","\u1ec8":"I","\u020a":"I","\u012a":"I","\u012e":"I","\u0197":"I","\u0128":"I","\u1e2c":"I","\ua779":"D","\ua77b":"F","\ua77d":"G","\ua782":"R","\ua784":"S","\ua786":"T","\ua76c":"IS","\u0134":"J","\u0248":"J","\u1e30":"K","\u01e8":"K","\u0136":"K","\u2c69":"K","\ua742":"K","\u1e32":"K","\u0198":"K","\u1e34":"K","\ua740":"K","\ua744":"K","\u0139":"L","\u023d":"L","\u013d":"L","\u013b":"L","\u1e3c":"L","\u1e36":"L","\u1e38":"L","\u2c60":"L","\ua748":"L","\u1e3a":"L","\u013f":"L","\u2c62":"L","\u01c8":"L","\u0141":"L","\u01c7":"LJ","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u0143":"N","\u0147":"N","\u0145":"N","\u1e4a":"N","\u1e44":"N","\u1e46":"N","\u01f8":"N","\u019d":"N","\u1e48":"N","\u0220":"N","\u01cb":"N","\xd1":"N","\u01ca":"NJ","\xd3":"O","\u014e":"O","\u01d1":"O","\xd4":"O","\u1ed0":"O","\u1ed8":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\xd6":"O","\u022a":"O","\u022e":"O","\u0230":"O","\u1ecc":"O","\u0150":"O","\u020c":"O","\xd2":"O","\u1ece":"O","\u01a0":"O","\u1eda":"O","\u1ee2":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u020e":"O","\ua74a":"O","\ua74c":"O","\u014c":"O","\u1e52":"O","\u1e50":"O","\u019f":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\xd5":"O","\u1e4c":"O","\u1e4e":"O","\u022c":"O","\u01a2":"OI","\ua74e":"OO","\u0190":"E","\u0186":"O","\u0222":"OU","\u1e54":"P","\u1e56":"P","\ua752":"P","\u01a4":"P","\ua754":"P","\u2c63":"P","\ua750":"P","\ua758":"Q","\ua756":"Q","\u0154":"R","\u0158":"R","\u0156":"R","\u1e58":"R","\u1e5a":"R","\u1e5c":"R","\u0210":"R","\u0212":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua73e":"C","\u018e":"E","\u015a":"S","\u1e64":"S","\u0160":"S","\u1e66":"S","\u015e":"S","\u015c":"S","\u0218":"S","\u1e60":"S","\u1e62":"S","\u1e68":"S","\u0164":"T","\u0162":"T","\u1e70":"T","\u021a":"T","\u023e":"T","\u1e6a":"T","\u1e6c":"T","\u01ac":"T","\u1e6e":"T","\u01ae":"T","\u0166":"T","\u2c6f":"A","\ua780":"L","\u019c":"M","\u0245":"V","\ua728":"TZ","\xda":"U","\u016c":"U","\u01d3":"U","\xdb":"U","\u1e76":"U","\xdc":"U","\u01d7":"U","\u01d9":"U","\u01db":"U","\u01d5":"U","\u1e72":"U","\u1ee4":"U","\u0170":"U","\u0214":"U","\xd9":"U","\u1ee6":"U","\u01af":"U","\u1ee8":"U","\u1ef0":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u0216":"U","\u016a":"U","\u1e7a":"U","\u0172":"U","\u016e":"U","\u0168":"U","\u1e78":"U","\u1e74":"U","\ua75e":"V","\u1e7e":"V","\u01b2":"V","\u1e7c":"V","\ua760":"VY","\u1e82":"W","\u0174":"W","\u1e84":"W","\u1e86":"W","\u1e88":"W","\u1e80":"W","\u2c72":"W","\u1e8c":"X","\u1e8a":"X","\xdd":"Y","\u0176":"Y","\u0178":"Y","\u1e8e":"Y","\u1ef4":"Y","\u1ef2":"Y","\u01b3":"Y","\u1ef6":"Y","\u1efe":"Y","\u0232":"Y","\u024e":"Y","\u1ef8":"Y","\u0179":"Z","\u017d":"Z","\u1e90":"Z","\u2c6b":"Z","\u017b":"Z","\u1e92":"Z","\u0224":"Z","\u1e94":"Z","\u01b5":"Z","\u0132":"IJ","\u0152":"OE","\u1d00":"A","\u1d01":"AE","\u0299":"B","\u1d03":"B","\u1d04":"C","\u1d05":"D","\u1d07":"E","\ua730":"F","\u0262":"G","\u029b":"G","\u029c":"H","\u026a":"I","\u0281":"R","\u1d0a":"J","\u1d0b":"K","\u029f":"L","\u1d0c":"L","\u1d0d":"M","\u0274":"N","\u1d0f":"O","\u0276":"OE","\u1d10":"O","\u1d15":"OU","\u1d18":"P","\u0280":"R","\u1d0e":"N","\u1d19":"R","\ua731":"S","\u1d1b":"T","\u2c7b":"E","\u1d1a":"R","\u1d1c":"U","\u1d20":"V","\u1d21":"W","\u028f":"Y","\u1d22":"Z","\xe1":"a","\u0103":"a","\u1eaf":"a","\u1eb7":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u01ce":"a","\xe2":"a","\u1ea5":"a","\u1ead":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\xe4":"a","\u01df":"a","\u0227":"a","\u01e1":"a","\u1ea1":"a","\u0201":"a","\xe0":"a","\u1ea3":"a","\u0203":"a","\u0101":"a","\u0105":"a","\u1d8f":"a","\u1e9a":"a","\xe5":"a","\u01fb":"a","\u1e01":"a","\u2c65":"a","\xe3":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u1e03":"b","\u1e05":"b","\u0253":"b","\u1e07":"b","\u1d6c":"b","\u1d80":"b","\u0180":"b","\u0183":"b","\u0275":"o","\u0107":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0109":"c","\u0255":"c","\u010b":"c","\u0188":"c","\u023c":"c","\u010f":"d","\u1e11":"d","\u1e13":"d","\u0221":"d","\u1e0b":"d","\u1e0d":"d","\u0257":"d","\u1d91":"d","\u1e0f":"d","\u1d6d":"d","\u1d81":"d","\u0111":"d","\u0256":"d","\u018c":"d","\u0131":"i","\u0237":"j","\u025f":"j","\u0284":"j","\u01f3":"dz","\u01c6":"dz","\xe9":"e","\u0115":"e","\u011b":"e","\u0229":"e","\u1e1d":"e","\xea":"e","\u1ebf":"e","\u1ec7":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1e19":"e","\xeb":"e","\u0117":"e","\u1eb9":"e","\u0205":"e","\xe8":"e","\u1ebb":"e","\u0207":"e","\u0113":"e","\u1e17":"e","\u1e15":"e","\u2c78":"e","\u0119":"e","\u1d92":"e","\u0247":"e","\u1ebd":"e","\u1e1b":"e","\ua76b":"et","\u1e1f":"f","\u0192":"f","\u1d6e":"f","\u1d82":"f","\u01f5":"g","\u011f":"g","\u01e7":"g","\u0123":"g","\u011d":"g","\u0121":"g","\u0260":"g","\u1e21":"g","\u1d83":"g","\u01e5":"g","\u1e2b":"h","\u021f":"h","\u1e29":"h","\u0125":"h","\u2c68":"h","\u1e27":"h","\u1e23":"h","\u1e25":"h","\u0266":"h","\u1e96":"h","\u0127":"h","\u0195":"hv","\xed":"i","\u012d":"i","\u01d0":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u1ecb":"i","\u0209":"i","\xec":"i","\u1ec9":"i","\u020b":"i","\u012b":"i","\u012f":"i","\u1d96":"i","\u0268":"i","\u0129":"i","\u1e2d":"i","\ua77a":"d","\ua77c":"f","\u1d79":"g","\ua783":"r","\ua785":"s","\ua787":"t","\ua76d":"is","\u01f0":"j","\u0135":"j","\u029d":"j","\u0249":"j","\u1e31":"k","\u01e9":"k","\u0137":"k","\u2c6a":"k","\ua743":"k","\u1e33":"k","\u0199":"k","\u1e35":"k","\u1d84":"k","\ua741":"k","\ua745":"k","\u013a":"l","\u019a":"l","\u026c":"l","\u013e":"l","\u013c":"l","\u1e3d":"l","\u0234":"l","\u1e37":"l","\u1e39":"l","\u2c61":"l","\ua749":"l","\u1e3b":"l","\u0140":"l","\u026b":"l","\u1d85":"l","\u026d":"l","\u0142":"l","\u01c9":"lj","\u017f":"s","\u1e9c":"s","\u1e9b":"s","\u1e9d":"s","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u1d6f":"m","\u1d86":"m","\u0144":"n","\u0148":"n","\u0146":"n","\u1e4b":"n","\u0235":"n","\u1e45":"n","\u1e47":"n","\u01f9":"n","\u0272":"n","\u1e49":"n","\u019e":"n","\u1d70":"n","\u1d87":"n","\u0273":"n","\xf1":"n","\u01cc":"nj","\xf3":"o","\u014f":"o","\u01d2":"o","\xf4":"o","\u1ed1":"o","\u1ed9":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\xf6":"o","\u022b":"o","\u022f":"o","\u0231":"o","\u1ecd":"o","\u0151":"o","\u020d":"o","\xf2":"o","\u1ecf":"o","\u01a1":"o","\u1edb":"o","\u1ee3":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u020f":"o","\ua74b":"o","\ua74d":"o","\u2c7a":"o","\u014d":"o","\u1e53":"o","\u1e51":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\xf5":"o","\u1e4d":"o","\u1e4f":"o","\u022d":"o","\u01a3":"oi","\ua74f":"oo","\u025b":"e","\u1d93":"e","\u0254":"o","\u1d97":"o","\u0223":"ou","\u1e55":"p","\u1e57":"p","\ua753":"p","\u01a5":"p","\u1d71":"p","\u1d88":"p","\ua755":"p","\u1d7d":"p","\ua751":"p","\ua759":"q","\u02a0":"q","\u024b":"q","\ua757":"q","\u0155":"r","\u0159":"r","\u0157":"r","\u1e59":"r","\u1e5b":"r","\u1e5d":"r","\u0211":"r","\u027e":"r","\u1d73":"r","\u0213":"r","\u1e5f":"r","\u027c":"r","\u1d72":"r","\u1d89":"r","\u024d":"r","\u027d":"r","\u2184":"c","\ua73f":"c","\u0258":"e","\u027f":"r","\u015b":"s","\u1e65":"s","\u0161":"s","\u1e67":"s","\u015f":"s","\u015d":"s","\u0219":"s","\u1e61":"s","\u1e63":"s","\u1e69":"s","\u0282":"s","\u1d74":"s","\u1d8a":"s","\u023f":"s","\u0261":"g","\u1d11":"o","\u1d13":"o","\u1d1d":"u","\u0165":"t","\u0163":"t","\u1e71":"t","\u021b":"t","\u0236":"t","\u1e97":"t","\u2c66":"t","\u1e6b":"t","\u1e6d":"t","\u01ad":"t","\u1e6f":"t","\u1d75":"t","\u01ab":"t","\u0288":"t","\u0167":"t","\u1d7a":"th","\u0250":"a","\u1d02":"ae","\u01dd":"e","\u1d77":"g","\u0265":"h","\u02ae":"h","\u02af":"h","\u1d09":"i","\u029e":"k","\ua781":"l","\u026f":"m","\u0270":"m","\u1d14":"oe","\u0279":"r","\u027b":"r","\u027a":"r","\u2c79":"r","\u0287":"t","\u028c":"v","\u028d":"w","\u028e":"y","\ua729":"tz","\xfa":"u","\u016d":"u","\u01d4":"u","\xfb":"u","\u1e77":"u","\xfc":"u","\u01d8":"u","\u01da":"u","\u01dc":"u","\u01d6":"u","\u1e73":"u","\u1ee5":"u","\u0171":"u","\u0215":"u","\xf9":"u","\u1ee7":"u","\u01b0":"u","\u1ee9":"u","\u1ef1":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u0217":"u","\u016b":"u","\u1e7b":"u","\u0173":"u","\u1d99":"u","\u016f":"u","\u0169":"u","\u1e79":"u","\u1e75":"u","\u1d6b":"ue","\ua778":"um","\u2c74":"v","\ua75f":"v","\u1e7f":"v","\u028b":"v","\u1d8c":"v","\u2c71":"v","\u1e7d":"v","\ua761":"vy","\u1e83":"w","\u0175":"w","\u1e85":"w","\u1e87":"w","\u1e89":"w","\u1e81":"w","\u2c73":"w","\u1e98":"w","\u1e8d":"x","\u1e8b":"x","\u1d8d":"x","\xfd":"y","\u0177":"y","\xff":"y","\u1e8f":"y","\u1ef5":"y","\u1ef3":"y","\u01b4":"y","\u1ef7":"y","\u1eff":"y","\u0233":"y","\u1e99":"y","\u024f":"y","\u1ef9":"y","\u017a":"z","\u017e":"z","\u1e91":"z","\u0291":"z","\u2c6c":"z","\u017c":"z","\u1e93":"z","\u0225":"z","\u1e95":"z","\u1d76":"z","\u1d8e":"z","\u0290":"z","\u01b6":"z","\u0240":"z","\ufb00":"ff","\ufb03":"ffi","\ufb04":"ffl","\ufb01":"fi","\ufb02":"fl","\u0133":"ij","\u0153":"oe","\ufb06":"st","\u2090":"a","\u2091":"e","\u1d62":"i","\u2c7c":"j","\u2092":"o","\u1d63":"r","\u1d64":"u","\u1d65":"v","\u2093":"x"},String.prototype.latinize=function(){return this.replace(/[^A-Za-z0-9\[\] ]/g,(function(e){return as.latin_map[e]||e}))},String.prototype.isLatin=function(){return this==this.latinize()};var ls=(Ya=c.action.bound,Ka=c.action.bound,qa=c.action.bound,Qa=c.action.bound,Xa=c.action.bound,Za=c.action.bound,$a=c.action.bound,Ja=function(){function e(t){Object(q.a)(this,e),this.filteringOnOffHandlers=[],this.$type_IFilterConfigurationData=1,this.implicitFilters=void 0,Object(de.a)(this,"activeFilters",es,this),Object(de.a)(this,"isFilterControlsDisplayed",ts,this),this.disposers=[],Object(de.a)(this,"applyNewFilteringImm",ns,this),this.applyNewFiltering=ge.a.throttle(this.applyNewFilteringImm,200),this.parent=void 0,this.implicitFilters=t,this.start()}return Object(Q.a)(e,[{key:"registerFilteringOnOffHandler",value:function(e){this.filteringOnOffHandlers.push(e)}},{key:"getSettingByPropertyId",value:function(e){return this.activeFilters.find((function(t){return t.propertyId===e}))}},{key:"setFilters",value:function(e){var t=this;this.clearFilters(),e.forEach((function(e){return t.setFilter(e)})),this.isFilterControlsDisplayed=!0}},{key:"setFilter",value:function(e){var t=this.activeFilters.findIndex((function(t){return t.propertyId===e.propertyId}));t>-1&&this.activeFilters.splice(t,1),this.activeFilters.push(e),this.activeFilters=Object(gt.a)(this.activeFilters)}},{key:"clearFilters",value:function(){0!==this.activeFilters.length&&(this.activeFilters=[])}},{key:"onFilterDisplayClick",value:function(e){this.isFilterControlsDisplayed=!this.isFilterControlsDisplayed,this.isFilterControlsDisplayed||this.clearFilters();var t,n=Object(le.a)(this.filteringOnOffHandlers);try{for(n.s();!(t=n.n()).done;){(0,t.value)(this.isFilterControlsDisplayed)}}catch(r){n.e(r)}finally{n.f()}}},{key:"filteringFunction",value:function(e){var t=this;return function(n){if(!t.isPresentInDetail(n))return!1;var r,o=Object(le.a)(t.implicitFilters);try{for(o.s();!(r=o.n()).done;){var i=r.value;if((!e||e!==i.propertyId)&&!t.implicitFilterPredicate(n,i))return!1}}catch(u){o.e(u)}finally{o.f()}var a,s=Object(le.a)(t.activeFilters);try{for(s.s();!(a=s.n()).done;){var c=a.value;if((!e||e!==c.propertyId)&&!t.userFilterPredicate(n,c))return!1}}catch(u){s.e(u)}finally{s.f()}return!0}}},{key:"userFilterPredicate",value:function(e,t){var n=ur(this),r=n.getPropertyById(t.propertyId),o=us(this,n.getOriginalCellValue(e,r));switch(r.column){case"Text":var i=us(this,t.setting.val1),a=us(this,n.getOriginalCellText(e,r));if(void 0===o)return!0;switch(t.setting.type){case"contains":return""===i||void 0===i||null!==o&&a.includes(i);case"ends":return""===i||void 0===i||null!==o&&a.endsWith(i);case"eq":return""===i||void 0===i||null!==o&&a===i;case"ncontains":return""===i||void 0===i||null!==o&&!a.includes(i);case"nends":return""===i||void 0===i||null!==o&&!a.endsWith(i);case"neq":return""===i||void 0===i||null!==o&&a!==i;case"nnull":return null!==o;case"nstarts":return""===i||void 0===i||null!==o&&!a.startsWith(i);case"null":return null===o;case"starts":return""===i||void 0===i||null!==o&&a.startsWith(i)}break;case"Date":if(void 0===o)return!1;if("nnull"===t.setting.type)return null!==o;if("null"===t.setting.type)return null===o;if(""===t.setting.val1||void 0===t.setting.val1||null===t.setting.val1)return!0;var s=t.setting.val1.split(".")[0].endsWith("T00:00:00")&&null!==o?o.substr(0,10).concat("T00:00:00"):o;switch(t.setting.type){case"between":if(""===t.setting.val2||void 0===t.setting.val2||null===t.setting.val2)return!0;if(null===o)return!1;var c=t.setting.val1,u=t.setting.val2;return u.endsWith("T00:00:00")&&(u=u.substr(0,10).concat("T23:59:59")),c<=s&&s<=u;case"eq":return null!==o&&s===t.setting.val1;case"gt":return null!==o&&s>t.setting.val1;case"gte":return null!==o&&s>=t.setting.val1;case"lt":return null!==o&&s<t.setting.val1;case"lte":return null!==o&&s<=t.setting.val1;case"nbetween":if(""===t.setting.val2||void 0===t.setting.val2||null===t.setting.val2)return!0;if(null===o)return!1;var l=t.setting.val1,d=t.setting.val2;return s<l||s>d;case"neq":return null!==o&&s!==t.setting.val1}break;case"Number":if(void 0===o)return!0;var p="Number"===r.column?parseFloat(o):o;switch(t.setting.type){case"between":if(""===t.setting.val1||""===t.setting.val2||void 0===t.setting.val1||void 0===t.setting.val2)return!0;if(null===o)return!1;var h=parseFloat(t.setting.val1),f=parseFloat(t.setting.val2);return h<=p&&p<=f;case"eq":return""===t.setting.val1||void 0===t.setting.val1||null!==o&&p===parseFloat(t.setting.val1);case"gt":return""===t.setting.val1||void 0===t.setting.val1||null!==o&&p>parseFloat(t.setting.val1);case"gte":return""===t.setting.val1||void 0===t.setting.val1||null!==o&&p>=parseFloat(t.setting.val1);case"lt":return""===t.setting.val1||void 0===t.setting.val1||null!==o&&p<parseFloat(t.setting.val1);case"lte":return""===t.setting.val1||void 0===t.setting.val1||null!==o&&p<=parseFloat(t.setting.val1);case"nbetween":if(""===t.setting.val1||""===t.setting.val2||void 0===t.setting.val1||void 0===t.setting.val2)return!0;if(null===o)return!1;var b=parseFloat(t.setting.val1),v=parseFloat(t.setting.val2);return p<b||p>v;case"neq":return null!==o&&(""===t.setting.val1||void 0===t.setting.val1||p!==parseFloat(t.setting.val1));case"nnull":return null!==p;case"null":return null===p}break;case"ComboBox":var y=us(this,t.setting.val1)||[],g=us(this,t.setting.val2)||"",m=cs(this,n.getOriginalCellText(e,r));switch(t.setting.type){case"starts":return""===g||null!==m&&m.startsWith(g);case"nstarts":return""===g||null!==m&&!m.startsWith(g);case"in":case"eq":return 0===y.length||null!==o&&y.findIndex((function(e){return e===o}))>-1;case"nin":case"neq":return 0===y.length||null!==o&&!(y.findIndex((function(e){return e===o}))>-1);case"null":return null===o;case"nnull":return null!==o;case"contains":return""===g||null!==m&&m.includes(g);case"ncontains":return""===g||null!==m&&!m.includes(g)}break;case"TagInput":var w=us(this,n.getOriginalCellValue(e,r)),O=us(this,t.setting.val1);switch(t.setting.type){case"in":case"eq":return void 0===O||0===O.length||!(!w||0===w.length)&&w.some((function(e){return O.some((function(t){return t===e}))}));case"nin":case"neq":return void 0===O||0===O.length||(!w||0===w.length||w.every((function(e){return O.every((function(t){return t!==e}))})));case"null":return!w||0===w.length;case"nnull":return w&&w.length>0}return!0;case"CheckBox":if("eq"===t.setting.type)return void 0===t.setting.val1||n.getOriginalCellValue(e,r)===!!t.setting.val1}}},{key:"implicitFilterPredicate",value:function(e,t){var n=ur(this),r=sn(n).getFieldByName(t.propertyId),o=us(this,n.getCellValueByDataSourceField(e,r)),i=us(this,t.value);switch(parseInt(t.operatorCode)){case 1:return i===String(o);case 10:return i!==String(o);case 15:return null===o;case 16:return null!==o;default:throw new Error("Operator code ".concat(t.operatorCode," not implemented."))}}},{key:"isPresentInDetail",value:function(e){if(this.dataView.isBindingRoot)return!0;var t,n=Object(le.a)(this.dataView.parentBindings);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.parentDataView.selectedRow;if(!o)return!1;var i,a=Object(le.a)(r.bindingPairs);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=r.parentDataView.dataSource.getFieldByName(s.parentPropertyId);if(!c)return!1;var u=r.parentDataView.dataTable.getCellValueByDataSourceField(o,c),l=r.childDataView.dataSource.getFieldByName(s.childPropertyId);if(!l)return!1;if(u!==r.childDataView.dataTable.getCellValueByDataSourceField(e,l))return!1}}catch(d){a.e(d)}finally{a.f()}}}catch(d){n.e(d)}finally{n.f()}return!0}},{key:"dataView",get:function(){return Be(this)}},{key:"start",value:function(){var e=this;this.disposers.push(Object(c.reaction)((function(){return e.activeFilters.map((function(e){return[e.propertyId,e.setting.val1,e.setting.val2,e.setting.type]}))}),(function(){e.applyNewFiltering()}),{equals:c.comparer.structural}))}},{key:"stop",value:function(){this.disposers.forEach((function(e){return e()}))}}]),e}(),es=Object($.a)(Ja.prototype,"activeFilters",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(Ja.prototype,"setFilters",[Ya],Object.getOwnPropertyDescriptor(Ja.prototype,"setFilters"),Ja.prototype),Object($.a)(Ja.prototype,"setFilter",[Ka],Object.getOwnPropertyDescriptor(Ja.prototype,"setFilter"),Ja.prototype),Object($.a)(Ja.prototype,"clearFilters",[qa],Object.getOwnPropertyDescriptor(Ja.prototype,"clearFilters"),Ja.prototype),ts=Object($.a)(Ja.prototype,"isFilterControlsDisplayed",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Ja.prototype,"onFilterDisplayClick",[Qa],Object.getOwnPropertyDescriptor(Ja.prototype,"onFilterDisplayClick"),Ja.prototype),Object($.a)(Ja.prototype,"dataView",[c.computed],Object.getOwnPropertyDescriptor(Ja.prototype,"dataView"),Ja.prototype),Object($.a)(Ja.prototype,"start",[Xa],Object.getOwnPropertyDescriptor(Ja.prototype,"start"),Ja.prototype),ns=Object($.a)(Ja.prototype,"applyNewFilteringImm",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(c.flow)(o.a.mark((function e(){var t,n,r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Be(this),n=ur(t),t.isLazyLoading){e.next=7;break}if(!(this.activeFilters.length>0)){e.next=7;break}return r=this.activeFilters.filter((function(e){return e.setting.isComplete})).map((function(e){return Mo(a,e.propertyId)})).filter((function(e){return"ComboBox"===e.column})),e.next=7,Promise.all(r.map(function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.lookupEngine)||void 0===r?void 0:r.lookupResolver.resolveList(n.getAllValuesOfProp(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e,this)})))}}),Object($.a)(Ja.prototype,"stop",[$a],Object.getOwnPropertyDescriptor(Ja.prototype,"stop"),Ja.prototype),Ja),ds=function e(){Object(q.a)(this,e),this.$type_IFormPanelView=1,this.parent=void 0};var ps=function(){function e(){Object(q.a)(this,e),this.tokensIn=0,this.tokenQueue=[]}return Object(Q.a)(e,[{key:"enqueue",value:function(){var e=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}();return this.tokenQueue.push(e),e}},{key:"dequeue",value:function(){var e=this.tokenQueue.shift();null===e||void 0===e||e.resolve()}},{key:"incTokens",value:function(){this.tokensIn++}},{key:"decTokens",value:function(){this.tokensIn--}},{key:"enterPromise",value:function(){if(this.incTokens(),this.tokensIn>1)return this.enqueue()}},{key:"enterGenerator",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.incTokens(),!(this.tokensIn>1)){e.next=4;break}return e.next=4,this.enqueue();case 4:case"end":return e.stop()}}),e,this)}))},{key:"leave",value:function(){this.decTokens(),this.tokensIn>0&&this.dequeue()}},{key:"runAsync",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.enterPromise();case 3:return e.abrupt("return",t());case 4:return e.prev=4,this.leave(),e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[0,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"runGenerator",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(this.enterGenerator(),"t0",2);case 2:return e.delegateYield(t(),"t1",3);case 3:return e.abrupt("return",e.t1);case 4:return e.prev=4,this.leave(),e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[0,,4,7]])}))}]),e}();var hs,fs,bs,vs={"/":"jpg",i:"png",R:"gif",U:"webp"};function ys(e){return e?e.length>512||(t=e)&&t.search(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/)>-1?{isEmbedded:!0,value:"data:image/".concat(vs[e.charAt(0)],";base64,").concat(e)}:{isEmbedded:!1,value:e}:{isEmbedded:!1,value:null};var t}var gs,ms,ws,Os,js,ks,xs,Cs,Is,Ss,Ds=(hs=c.action.bound,fs=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"items",bs,this),this.atoms=new Map}return Object(Q.a)(e,[{key:"atomBecameObserved",value:function(e,t){var n=this;if(!this.items.has(e)){var r=ys(e),o=new Image;this.items.set(e,o),t.reportChanged(),o.onload=function(){t.reportChanged()},o.onerror=function(){n.items.set(e,null)},o.src=r.value}}},{key:"getImage",value:function(e){var t=this;if(!this.atoms.has(e)){var n=Object(c.createAtom)("ImageCacheAtom",(function(){t.atomBecameObserved(e,n)}),(function(){t.atoms.delete(e)}));this.atoms.set(e,n)}return this.atoms.get(e).reportObserved(),this.items.get(e)}}]),e}(),bs=Object($.a)(fs.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(fs.prototype,"atomBecameObserved",[hs],Object.getOwnPropertyDescriptor(fs.prototype,"atomBecameObserved"),fs.prototype),fs),Rs=function(){function e(t){Object(q.a)(this,e),this.ctx=t,this.dataMap=new Map}return Object(Q.a)(e,[{key:"UpdateData",value:function(e){var t=Un(e),n=An(e);if(t&&n){var r=this.makeCacheKey(e.modelInstanceId,t,n);this.dataMap.set(r,Object(gt.a)(e.dataTable.allRows))}}},{key:"getData",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.makeCacheKey(t.modelInstanceId,t.parentRecordId,t.rootRecordId),this.dataMap.has(n)){e.next=6;break}return e.next=4,this.callGetData(t.childEntity,t.parentRecordId,t.rootRecordId);case 4:r=e.sent,this.dataMap.set(n,r);case 6:return e.abrupt("return",this.dataMap.get(n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.dataMap.clear()}},{key:"callGetData",value:function(e,t,n){return l(this.ctx).getData({SessionFormIdentifier:Wn(this.ctx),ChildEntity:e,ParentRecordId:t,RootRecordId:n})}},{key:"makeCacheKey",value:function(e,t,n){return e+"_"+t+"_"+n}}]),e}(),Ts=(gs=c.action.bound,ms=c.action.bound,ws=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_IFormScreen=1,this.parent=void 0,this.dataUpdateCRS=new ps,this.pictureCache=new Ds,this.dataViewCache=new Rs(this),Object(de.a)(this,"isDirty",Os,this),this.uiRootType="",this.dynamicTitleSource=void 0,this.sessionId="",Object(de.a)(this,"title",js,this),this.suppressSave=!1,this.suppressRefresh=!1,this.menuId="",this.openingOrder=0,this.showInfoPanel=!1,this.showWorkflowCancelButton=!1,this.showWorkflowNextButton=!1,this.autoRefreshInterval=0,this.refreshOnFocus=!1,this.cacheOnClient=!1,this.autoSaveOnListRecordChange=!1,this.requestSaveAfterUpdate=!1,this.screenUI=void 0,Object(de.a)(this,"panelConfigurations",ks,this),this.isLoading=!1,this.formScreenLifecycle=null,this.autoWorkflowNext=null,this.workflowTaskId=null,this.dataViews=[],this.dataSources=[],this.componentBindings=[],Object.assign(this,t),this.formScreenLifecycle.parent=this,this.dataViews.forEach((function(e){return e.parent=n})),this.dataSources.forEach((function(e){return e.parent=n})),this.componentBindings.forEach((function(e){return e.parent=n}))}return Object(Q.a)(e,[{key:"setPanelSize",value:function(e,t){this.panelConfigurations.has(e)||this.panelConfigurations.set(e,{position:void 0,defaultOrdering:void 0}),this.panelConfigurations.get(e).position=t}},{key:"getData",value:function(e,t,n,r){return this.dataSources.filter((function(t){return t.entity===e})).forEach((function(e){return eo(e).clearAll()})),this.dataViewCache.getData({childEntity:e,modelInstanceId:t,parentRecordId:n,rootRecordId:r})}},{key:"clearDataCache",value:function(){this.dataViewCache.clear()}},{key:"dynamicTitle",get:function(){if(this.dynamicTitleSource){var e=this.dynamicTitleSource.split("."),t=e[0],n=e[1],r=this.dataViews.find((function(e){return e.entity===t}));if(r){var o=this.dataSources.find((function(e){return e.entity===t}));if(o){var i=o.getFieldByName(n),a=r.dataTable,s=a.rows[0];return s?a.getCellValueByDataSourceField(s,i):void 0}}}}},{key:"isLazyLoading",get:function(){return Gn(this)}},{key:"rootDataViews",get:function(){return this.dataViews.filter((function(e){return e.isBindingRoot}))}},{key:"nonRootDataViews",get:function(){return this.dataViews.filter((function(e){return!e.isBindingRoot}))}},{key:"setTitle",value:function(e){this.title=e}},{key:"getBindingsByChildId",value:function(e){return this.componentBindings.filter((function(t){return t.childId===e}))}},{key:"getBindingsByParentId",value:function(e){return this.componentBindings.filter((function(t){return t.parentId===e}))}},{key:"getDataViewByModelInstanceId",value:function(e){return this.dataViews.find((function(t){return t.modelInstanceId===e}))}},{key:"getDataViewsByEntity",value:function(e){return this.dataViews.filter((function(t){return t.entity===e}))}},{key:"getDataSourceByEntity",value:function(e){return this.dataSources.find((function(t){return t.entity===e}))}},{key:"toolbarActions",get:function(){var e,t=[],n=Object(le.a)(this.dataViews);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.toolbarActions.length>0&&t.push({section:r.name,actions:r.toolbarActions})}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"dialogActions",get:function(){var e,t=[],n=Object(le.a)(this.dataViews);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(gt.a)(r.dialogActions))}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"getPanelPosition",value:function(e){var t=this.panelConfigurations.get(e.toLowerCase());return t?t.position:void 0}},{key:"setDirty",value:function(e){this.suppressSave&&!0===e||(this.isDirty=e)}},{key:"getFirstFormPropertyId",value:function(){var e,t=Object(le.a)(this.dataViews);try{for(t.s();!(e=t.n()).done;){var n,r=e.value,o=Object(le.a)(r.properties);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.isFormField)return i.id}}catch(a){o.e(a)}finally{o.f()}}}catch(a){t.e(a)}finally{t.f()}}},{key:"printMasterDetailTree",value:function(){var e=function e(t,n){if(console.log("".concat(function(e,t){for(var n="",r=0;r<e;r++)n+=t;return n}(n,"  ")).concat(null===t||void 0===t?void 0:t.name," (").concat(null===t||void 0===t?void 0:t.entity," - ").concat(null===t||void 0===t?void 0:t.modelId,")")),t){var r,o=Object(le.a)(t.childBindings);try{for(o.s();!(r=o.n()).done;){e(r.value.childDataView,n+1)}}catch(i){o.e(i)}finally{o.f()}}};console.log("View bindings"),console.log("=============");var t,n=Array.from(this.dataViews.values()).filter((function(e){return e.isBindingRoot})),r=Object(le.a)(n);try{for(r.s();!(t=r.n()).done;){e(t.value,0)}}catch(o){r.e(o)}finally{r.f()}console.log("============="),console.log("End of View bindings"),console.log("")}}]),e}(),Os=Object($.a)(ws.prototype,"isDirty",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),js=Object($.a)(ws.prototype,"title",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ks=Object($.a)(ws.prototype,"panelConfigurations",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(ws.prototype,"isLazyLoading",[c.computed],Object.getOwnPropertyDescriptor(ws.prototype,"isLazyLoading"),ws.prototype),Object($.a)(ws.prototype,"rootDataViews",[c.computed],Object.getOwnPropertyDescriptor(ws.prototype,"rootDataViews"),ws.prototype),Object($.a)(ws.prototype,"nonRootDataViews",[c.computed],Object.getOwnPropertyDescriptor(ws.prototype,"nonRootDataViews"),ws.prototype),Object($.a)(ws.prototype,"setTitle",[gs],Object.getOwnPropertyDescriptor(ws.prototype,"setTitle"),ws.prototype),Object($.a)(ws.prototype,"toolbarActions",[c.computed],Object.getOwnPropertyDescriptor(ws.prototype,"toolbarActions"),ws.prototype),Object($.a)(ws.prototype,"dialogActions",[c.computed],Object.getOwnPropertyDescriptor(ws.prototype,"dialogActions"),ws.prototype),Object($.a)(ws.prototype,"setDirty",[ms],Object.getOwnPropertyDescriptor(ws.prototype,"setDirty"),ws.prototype),ws),_s=(xs=c.action.bound,Cs=function(){function e(t){Object(q.a)(this,e),this.$type_IFormScreenEnvelope=1,Object(de.a)(this,"formScreen",Is,this),this.formScreenLifecycle=null,this.parent=void 0,Object.assign(this,t),this.formScreenLifecycle.parent=this}return Object(Q.a)(e,[{key:"isLoading",get:function(){return!this.formScreen}},{key:"setFormScreen",value:function(e){e&&(e.parent=this),this.formScreen=e}},{key:"start",value:o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.formScreenLifecycle.start(t),"t0",1);case 1:if(!this.formScreen){e.next=5;break}if(this.formScreen.setDirty(!!n),!n){e.next=5;break}return e.delegateYield(this.loadDirtyRow(this.formScreen),"t1",5);case 5:case"end":return e.stop()}}),e,this)}))},{key:"loadDirtyRow",value:o.a.mark((function e(t){var n,r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(le.a)(t.rootDataViews),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=16;break}if(i=r.value,a=l(i),!Ee(i).isDirty){e.next=14;break}return e.next=10,a.getRow({SessionFormIdentifier:Wn(i),Entity:En(i),RowId:Vn(i)});case 10:return s=e.sent,c=i.selectedRowId&&i.dataTable.getRowById(i.selectedRowId),s.operation=c?$t.Update:$t.Create,e.delegateYield(en(i,s),"t0",14);case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),n.e(e.t1);case 21:return e.prev=21,n.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])}))}]),e}(),Is=Object($.a)(Cs.prototype,"formScreen",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(Cs.prototype,"isLoading",[c.computed],Object.getOwnPropertyDescriptor(Cs.prototype,"isLoading"),Cs.prototype),Object($.a)(Cs.prototype,"setFormScreen",[xs],Object.getOwnPropertyDescriptor(Cs.prototype,"setFormScreen"),Cs.prototype),Cs);!function(e){e.EagerlyLoadedGrid="EagerlyLoadedGrid",e.LazilyLoadedGrid="LazilyLoadedGrid",e.EagerlyLoadedTree="EagerlyLoadedTree"}(Ss||(Ss={}));var Ps;!function(e){e.LOADING="LOADING",e.ERROR="ERROR"}(Ps||(Ps={}));var Fs,Ms,Ls,Es,As=function(){function e(t){var n=this;Object(q.a)(this,e),this.$type_ILookup=1,this.lookupId="",this.dropDownShowUniqueValues=!1,this.identifier="",this.identifierIndex=0,this.dropDownType=Ss.EagerlyLoadedGrid,this.cached=!1,this.searchByFirstColumnOnly=!1,this.dropDownColumns=[],this.dropDownParameters=[],this.parent=void 0,Object.assign(this,t),this.dropDownColumns.forEach((function(e){return e.parent=n}))}return Object(Q.a)(e,[{key:"parameters",get:function(){var e,t={},n=Object(le.a)(this.dropDownParameters);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.parameterName]=r.fieldName}}catch(o){n.e(o)}finally{n.f()}return t}}]),e}();function Vs(e){return Be(e).properties}var Ns,Bs,Us,Gs,Ws,Hs=(Fs=c.action.bound,Ms=c.action.bound,Ls=function(){function e(t){Object(q.a)(this,e),Object(de.a)(this,"userOrderings",Es,this),this.defaultOrderings=void 0,this.maybeApplyOrdering=Object(c.flow)(o.a.mark((function e(){var t,n,r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Be(this),n=ur(t),t.isLazyLoading){e.next=6;break}return r=this.userOrderings.map((function(e){return Mo(a,e.columnId)})).filter((function(e){return"ComboBox"===e.column})),e.next=6,Promise.all(r.map(function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=t.lookupEngine)||void 0===r?void 0:r.lookupResolver.resolveList(n.getAllValuesOfProp(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e,this)})).bind(this)),this.defaultOrderings=null!==t&&void 0!==t?t:[],this.userOrderings=this.defaultOrderings}return Object(Q.a)(e,[{key:"getDefaultOrderings",value:function(){return this.defaultOrderings}},{key:"orderings",get:function(){return 0!==this.userOrderings.length?this.userOrderings:this.defaultOrderings}},{key:"groupChildrenOrdering",get:function(){return 0!==this.userOrderings.length&&this.userOrderings[0]?this.userOrderings[0]:void 0}},{key:"getOrdering",value:function(e){var t=this.orderings.findIndex((function(t){return t.columnId===e}));return-1===t?{order:0,ordering:zn.NONE}:{order:t,ordering:this.orderings[t].direction}}},{key:"newOrdering",value:function(e,t){var n=Vs(this).find((function(t){return t.id===e})),r=n&&n.lookup&&n.lookup.lookupId;return{columnId:e,direction:t,lookupId:r}}},{key:"setOrdering",value:function(e){var t=ge.a.cloneDeep(this.userOrderings),n=this.userOrderings.find((function(t){return t.columnId===e}));this.userOrderings.length=0,n?this.userOrderings.push(this.newOrdering(e,n.direction===zn.DESC?zn.ASC:zn.DESC)):this.userOrderings.push(this.newOrdering(e,zn.ASC)),ge.a.isEqual(t,this.userOrderings)||this.maybeApplyOrdering()}},{key:"addOrdering",value:function(e){var t=ge.a.cloneDeep(this.userOrderings),n=this.userOrderings.find((function(t){return t.columnId===e}));n?n.direction=function(e){switch(e){case zn.ASC:return zn.DESC;case zn.DESC:return zn.NONE;case zn.NONE:default:return zn.ASC}}(n.direction):this.userOrderings.push(this.newOrdering(e,zn.ASC)),ge.a.isEqual(t,this.userOrderings)||this.maybeApplyOrdering()}},{key:"orderingFunction",get:function(){var e=this;return function(){return function(t,n){var r,o=ur(e),i=10*e.orderings.length,a=0,s=Object(le.a)(e.orderings);try{for(s.s();!(r=s.n()).done;){var c=r.value,u=o.getPropertyById(c.columnId),l=0;switch(u.column){case"Text":case"Date":case"ComboBox":l=ss(o.getOriginalCellText(t,u),o.getOriginalCellText(n,u));break;case"CheckBox":var d=o.getOriginalCellValue(t,u),p=o.getOriginalCellValue(n,u);l=ss("".concat(d),"".concat(p));break;case"Number":var h=o.getOriginalCellValue(t,u),f=o.getOriginalCellValue(n,u);l=null===h?1:null===f?-1:Math.sign(h-f)}a+=i*(c.direction===zn.DESC?-1:1)*l,i/=10}}catch(b){s.e(b)}finally{s.f()}return a}}}}]),e}(),Es=Object($.a)(Ls.prototype,"userOrderings",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(Ls.prototype,"orderings",[c.computed],Object.getOwnPropertyDescriptor(Ls.prototype,"orderings"),Ls.prototype),Object($.a)(Ls.prototype,"groupChildrenOrdering",[c.computed],Object.getOwnPropertyDescriptor(Ls.prototype,"groupChildrenOrdering"),Ls.prototype),Object($.a)(Ls.prototype,"setOrdering",[Fs],Object.getOwnPropertyDescriptor(Ls.prototype,"setOrdering"),Ls.prototype),Object($.a)(Ls.prototype,"addOrdering",[Ms],Object.getOwnPropertyDescriptor(Ls.prototype,"addOrdering"),Ls.prototype),Object($.a)(Ls.prototype,"orderingFunction",[c.computed],Object.getOwnPropertyDescriptor(Ls.prototype,"orderingFunction"),Ls.prototype),Ls);!function(e){e.Text="Text",e.ComboBox="ComboBox",e.TagInput="TagInput",e.Date="Date",e.Number="Number",e.CheckBox="CheckBox",e.CheckList="Checklist",e.Image="Image",e.Blob="Blob",e.Polymorph="Polymorph",e.Color="Color"}(Ns||(Ns={}));var zs=(Bs=c.action.bound,Us=c.action.bound,Gs=function(){function e(t){Object(q.a)(this,e),this.$type_IProperty=1,this.autoSort=!1,this.id="",this.tabIndex=void 0,this.modelInstanceId="",this.name="",this.nameOverride=null,this.readOnly=!1,this.x=0,this.y=0,this.width=0,this.height=0,this.captionLength=0,this.captionPosition=void 0,this.entity="",this.column=Ns.Text,this.dock=void 0,this.multiline=!1,this.isPassword=!1,this.isRichText=!1,this.maxLength=0,this.allowReturnToForm=void 0,this.isTree=void 0,this.formatterPattern="",this.modelFormatterPattern="",this.customNumericFormat="",this.gridColumnWidth=100,Object(de.a)(this,"columnWidth",Ws,this),this.identifier=void 0,this.lookup=void 0,this.lookupId=void 0,this.lookupEngine=null,this.childProperties=[],this.isAggregatedColumn=!1,this.isLookupColumn=!1,this.style=void 0,this.controlPropertyId=void 0,this.toolTip=null,this.suppressEmptyColumns=!1,this.supportsServerSideSorting=!1,this.linkToMenuId=void 0,this.linkDependsOnValue=!1,this.fieldType=null,this.isFormField=!1,this.parent=void 0,this.xmlNode=void 0,Object.assign(this,t),this.lookup&&(this.lookup.parent=this)}return Object(Q.a)(e,[{key:"isLookup",get:function(){return!!this.lookup}},{key:"isLink",get:function(){return!!this.linkToMenuId||this.linkDependsOnValue}},{key:"setColumnWidth",value:function(e){this.columnWidth=e}},{key:"dataSourceIndex",get:function(){return this.dataSourceField.index}},{key:"dataIndex",get:function(){return this.dataSourceIndex}},{key:"dataSourceField",get:function(){return pi(this,this.id)}},{key:"stop",value:function(){}},{key:"getPolymophicProperty",value:function(e){var t,n=pi(this,this.controlPropertyId),r=ur(this).getCellValueByDataSourceField(e,n);return null!==(t=this.childProperties.find((function(e){return e.controlPropertyValue===r})))&&void 0!==t?t:this}}]),e}(),Ws=Object($.a)(Gs.prototype,"columnWidth",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Object($.a)(Gs.prototype,"setColumnWidth",[Bs],Object.getOwnPropertyDescriptor(Gs.prototype,"setColumnWidth"),Gs.prototype),Object($.a)(Gs.prototype,"dataSourceIndex",[c.computed],Object.getOwnPropertyDescriptor(Gs.prototype,"dataSourceIndex"),Gs.prototype),Object($.a)(Gs.prototype,"dataIndex",[c.computed],Object.getOwnPropertyDescriptor(Gs.prototype,"dataIndex"),Gs.prototype),Object($.a)(Gs.prototype,"dataSourceField",[c.computed],Object.getOwnPropertyDescriptor(Gs.prototype,"dataSourceField"),Gs.prototype),Object($.a)(Gs.prototype,"stop",[Us],Object.getOwnPropertyDescriptor(Gs.prototype,"stop"),Gs.prototype),Gs);function Ys(e){return u(e).dialogStack}var Ks,qs,Qs,Xs,Zs,$s,Js,ec,tc,nc,rc,oc,ic,ac,sc,cc,uc=n(57),lc=n.n(uc),dc=Object(K.observer)((qs=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"groupName",Qs,Object(pe.a)(e)),e.refInput=H.a.createRef(),e}return Object(Q.a)(n,[{key:"isInvalid",get:function(){return""===this.groupName}},{key:"onNameChanged",value:function(e){this.groupName=e.target.value}},{key:"componentDidMount",value:function(){var e;null===(e=this.refInput.current)||void 0===e||e.focus()}},{key:"onKeydown",value:function(e){"Enter"===e.key&&this.onOkClick()}},{key:"onOkClick",value:function(){this.isInvalid||this.props.onOkClick(this.groupName)}},{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:bt("New Column Configuration","column_config_new_config_name"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,onClick:function(){return e.onOkClick()},children:bt("Ok","button_ok")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:Object(re.jsx)("div",{className:lc.a.inpuContainer,children:Object(re.jsxs)("div",{className:lc.a.row,children:[Object(re.jsx)("div",{className:lc.a.label,children:bt("Name:","column_config_config_name")}),Object(re.jsx)("input",{ref:this.refInput,className:lc.a.textInput,value:this.groupName,onChange:function(t){return e.onNameChanged(t)},onKeyDown:function(t){return e.onKeydown(t)}}),this.isInvalid&&Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:lc.a.notification,title:bt("Name cannot be empty","column_config_name_empty"),children:Object(re.jsx)("i",{className:"fas fa-exclamation-circle red"})})})]})})})})}}]),n}(H.a.Component),Qs=Object($.a)(qs.prototype,"groupName",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ks=qs))||Ks;function pc(e){return Be(e).activePanelView}function hc(e){return o.a.mark((function t(){var n,r,i,a,s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Be(e),r=la(e),i=It(e),0!==r.allTableConfigurations.length){t.next=5;break}return t.abrupt("return");case 5:a=r.activeTableConfiguration,s=Object(le.a)(Vs(e));try{for(s.s();!(c=s.n()).done;)u=c.value,a.updateColumnWidth(u.id,u.columnWidth)}catch(o){s.e(o)}finally{s.f()}return a.sortColumnConfigurations(i.tablePropertyIds),t.next=11,l(e).saveObjectConfiguration({sessionFormIdentifier:Wn(e),instanceId:n.modelInstanceId,tableConfigurations:r.allTableConfigurations,defaultView:pc(e)});case 11:case"end":return t.stop()}}),t)}))}function fc(e){return bc.apply(this,arguments)}function bc(){return(bc=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn({ctx:t,generator:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(hc(t)(),"t0",1);case 1:case"end":return e.stop()}}),e)}))()});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vc(e){switch(e){case Xs.Year:return bt("Year","group_by_year");case Xs.Month:return bt("Month","group_by_month");case Xs.Day:return bt("Day","group_by_day");case Xs.Hour:return bt("Hour","group_by_hour");case Xs.Minute:return bt("Minute","group_by_minute");default:return""}}function yc(e){switch(e){case Xs.Year:return"year";case Xs.Month:return"month";case Xs.Day:return"day";case Xs.Hour:return"hour";case Xs.Minute:return"minute";case void 0:return;default:throw new Error("GroupingUnitToString not implemented for value:"+e)}}function gc(e){if(e&&"0"!==e)return mc(e)}function mc(e){if("string"!==typeof e)throw new Error('Cannot map "'+e+'" to AggregationType');switch(e.toUpperCase()){case"1":case"SUM":return Zs.SUM;case"2":case"AVG":return Zs.AVG;case"3":case"MIN":return Zs.MIN;case"4":case"MAX":return Zs.MAX;case"5":case"COUNT":return Zs.COUNT;default:throw new Error('Cannot map "'+e+'" to AggregationType')}}!function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Day=2]="Day",e[e.Hour=3]="Hour",e[e.Minute=4]="Minute"}(Xs||(Xs={})),function(e){e.SUM="SUM",e.AVG="AVG",e.MIN="MIN",e.MAX="MAX",e.COUNT="COUNT"}(Zs||(Zs={}));var wc,Oc="ColumnConfigurationDialog",jc=($s=c.action.bound,Js=c.action.bound,ec=c.action.bound,tc=c.action.bound,nc=c.action.bound,rc=c.action.bound,oc=c.action.bound,ic=c.action.bound,ac=c.action.bound,sc=c.action.bound,cc=function(){function e(){Object(q.a)(this,e),this.tableConfigBeforeChanges=void 0,this.parent=void 0}return Object(Q.a)(e,[{key:"columnOptions",get:function(){var e,t=this,n=!Gn(this),r=this.configManager.activeTableConfiguration,o=new Map,i=Object(le.a)(r.columnConfigurations);try{var a=function(){var r=e.value,i=t.tablePanelView.allTableProperties.find((function(e){return e.id===r.propertyId}));o.set(i.id,{canGroup:n||!i.isAggregatedColumn&&"DetachedField"!==i.fieldType,canAggregate:n||!i.isAggregatedColumn&&!i.isLookupColumn&&"TagInput"!==i.column,entity:i.entity,name:i.name,modelInstanceId:i.modelInstanceId})};for(i.s();!(e=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return o}},{key:"columnsConfiguration",get:function(){return this.configManager.activeTableConfiguration}},{key:"reset",value:function(){this.tableConfigBeforeChanges=this.configManager.activeTableConfiguration.deepClone()}},{key:"sortedColumnConfigs",get:function(){var e=this;return Object(gt.a)(this.columnsConfiguration.columnConfigurations).sort((function(t,n){var r=e.columnOptions.get(t.propertyId),o=e.columnOptions.get(n.propertyId);return ss(r.name,o.name)}))}},{key:"onColumnConfigurationSubmit",value:function(){var e=this;Sn({ctx:this,generator:o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onColumnConfSubmit(e.columnsConfiguration),e.reset(),t.delegateYield(hc(e)(),"t0",3);case 3:case"end":return t.stop()}}),t)}))()})}},{key:"onColumnConfCancel",value:function(){this.revertChanges(),Ys(this).closeDialog(Oc)}},{key:"revertChanges",value:function(){if(!this.tableConfigBeforeChanges)throw new Error("TableConfiguration was not backed up");this.configManager.activeTableConfiguration=this.tableConfigBeforeChanges}},{key:"onSaveAsClick",value:function(){var e=this,t=Ys(this).pushDialog("",Object(re.jsx)(dc,{onOkClick:function(n){In({ctx:e,action:function(){var t=e.columnsConfiguration.deepClone();e.revertChanges(),e.configManager.cloneAndActivate(t,n),e.onColumnConfigurationSubmit()}}),t()},onCancelClick:function(){e.revertChanges(),t()}}))}},{key:"onColumnConfSubmit",value:function(e){var t,n,r=null===(t=this.tablePanelView)||void 0===t?void 0:t.groupingConfiguration.isGrouping;e.apply(this.tablePanelView);var o=!(null===(n=this.tablePanelView)||void 0===n?void 0:n.groupingConfiguration.isGrouping);r&&o&&Ae(this).loadInitialData(),Ys(this).closeDialog(Oc)}},{key:"setVisible",value:function(e,t){this.sortedColumnConfigs[e].isVisible=t}},{key:"setGrouping",value:function(e,t,n){"Date"===n&&(t?this.setTimeGroupingUnit(e,Xs.Day):this.setTimeGroupingUnit(e,void 0));var r=Object(gt.a)(this.sortedColumnConfigs);if(r.sort((function(e,t){return t.groupingIndex-e.groupingIndex})),0===this.sortedColumnConfigs[e].groupingIndex)this.sortedColumnConfigs[e].groupingIndex=r[0].groupingIndex+1;else{this.sortedColumnConfigs[e].groupingIndex=0;var o=1;r.reverse();var i,a=Object(le.a)(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.groupingIndex>0&&(s.groupingIndex=o++)}}catch(c){a.e(c)}finally{a.f()}}}},{key:"setTimeGroupingUnit",value:function(e,t){this.sortedColumnConfigs[e].timeGroupingUnit=t}},{key:"setAggregation",value:function(e,t){this.sortedColumnConfigs[e].aggregationType=gc(t)}},{key:"setWidth",value:function(e,t){this.sortedColumnConfigs[e].width=t}},{key:"handleFixedColumnsCountChange",value:function(e){this.columnsConfiguration.fixedColumnCount=parseInt(e.target.value,10)}},{key:"tablePanelView",get:function(){return It(this)}},{key:"configManager",get:function(){return la(this)}}]),e}(),Object($.a)(cc.prototype,"columnOptions",[c.computed],Object.getOwnPropertyDescriptor(cc.prototype,"columnOptions"),cc.prototype),Object($.a)(cc.prototype,"onColumnConfigurationSubmit",[$s],Object.getOwnPropertyDescriptor(cc.prototype,"onColumnConfigurationSubmit"),cc.prototype),Object($.a)(cc.prototype,"onColumnConfCancel",[Js],Object.getOwnPropertyDescriptor(cc.prototype,"onColumnConfCancel"),cc.prototype),Object($.a)(cc.prototype,"onSaveAsClick",[ec],Object.getOwnPropertyDescriptor(cc.prototype,"onSaveAsClick"),cc.prototype),Object($.a)(cc.prototype,"onColumnConfSubmit",[tc],Object.getOwnPropertyDescriptor(cc.prototype,"onColumnConfSubmit"),cc.prototype),Object($.a)(cc.prototype,"setVisible",[nc],Object.getOwnPropertyDescriptor(cc.prototype,"setVisible"),cc.prototype),Object($.a)(cc.prototype,"setGrouping",[rc],Object.getOwnPropertyDescriptor(cc.prototype,"setGrouping"),cc.prototype),Object($.a)(cc.prototype,"setTimeGroupingUnit",[oc],Object.getOwnPropertyDescriptor(cc.prototype,"setTimeGroupingUnit"),cc.prototype),Object($.a)(cc.prototype,"setAggregation",[ic],Object.getOwnPropertyDescriptor(cc.prototype,"setAggregation"),cc.prototype),Object($.a)(cc.prototype,"setWidth",[ac],Object.getOwnPropertyDescriptor(cc.prototype,"setWidth"),cc.prototype),Object($.a)(cc.prototype,"handleFixedColumnsCountChange",[sc],Object.getOwnPropertyDescriptor(cc.prototype,"handleFixedColumnsCountChange"),cc.prototype),Object($.a)(cc.prototype,"tablePanelView",[c.computed],Object.getOwnPropertyDescriptor(cc.prototype,"tablePanelView"),cc.prototype),cc),kc=function e(t,n){Object(q.a)(this,e),this.label=t,this.value=n},xc=function e(t,n){Object(q.a)(this,e),this.label=t,this.value=n},Cc=[new kc("",void 0),new kc(bt("SUM","aggregation_sum"),Zs.SUM),new kc(bt("AVG","aggregation_avg"),Zs.AVG),new kc(bt("MIN","aggregation_min"),Zs.MIN),new kc(bt("MAX","aggregation_max"),Zs.MAX)],Ic=[new xc(vc(Xs.Year),Xs.Year),new xc(vc(Xs.Month),Xs.Month),new xc(vc(Xs.Day),Xs.Day),new xc(vc(Xs.Hour),Xs.Hour),new xc(vc(Xs.Minute),Xs.Minute)];function Sc(e){return Object(c.flow)(Dc(e))}function Dc(e){return o.a.mark((function t(n){var r,i,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.property,i=n.row,a=n.event,s=n.value,t.prev=2,"ComboBox"===r.column&&null!==s&&(s="".concat(s)),Be(e).onFieldChange(a,i,r,s),"TagInput"!==r.column&&"ComboBox"!==r.column&&"CheckBox"!==r.column&&"Checklist"!==r.column&&("Date"!==r.column||"click"!==a.type)){t.next=8;break}return ur(e).flushFormToTable(i),t.delegateYield(Ae(e).onFlushData(),"t0",8);case 8:t.next=14;break;case 10:return t.prev=10,t.t1=t.catch(2),t.delegateYield(yt(e)(t.t1),"t2",13);case 13:throw t.t1;case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))}function Rc(e){return Be(e).selectedRowIndex}function Tc(e,t,n){return ur(e).getCellValue(t,n)}function _c(e){return It(e).selectedColumnId}function Pc(e){return It(e).selectedColumnIndex}function Fc(e){return o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=li(e))){t.next=5;break}return ur(e).flushFormToTable(r),n&&It(e).setEditing(!1),t.delegateYield(Ae(e).onFlushData(),"t0",5);case 5:case"end":return t.stop()}}),t)}))}function Mc(e,t,n){var r=to(e,t),o=r?r.columns.get(n):void 0,i=o?o.allowUpdate:void 0;return void 0===i||i}function Lc(e,t){return e.readOnly||!Mc(e,t||"",e.id)}var Ec=Object(K.observer)(wc=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refPrimaryBtn=function(t){return e.elmPrimaryBtn=t},e.elmPrimaryBtn=void 0,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t,n;e.elmPrimaryBtn&&(null===(t=(n=e.elmPrimaryBtn).focus)||void 0===t||t.call(n))}),159)}},{key:"render",value:function(){return Object(re.jsx)(xt,{title:bt("Question","question_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,ref:this.refPrimaryBtn,onClick:this.props.onSaveClick,children:bt("Yes","button_yes")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onDontSaveClick,children:bt("No","button_no")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsxs)("div",{className:wt.a.dialogContent,children:[" ",bt("Record has been changed. Do you want to save the changes?","record_changed_info").split("\\n").join("\n")]})})}}]),n}(H.a.Component))||wc;function Ac(e){return function(t,n){if(t){var r=ur(e),o=pi(e,"__Errors"),i=o?r.getCellValueByDataSourceField(t,o):null,a=i?new Map(Object.entries(i.fieldErrors).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[parseInt(n,10),r]}))):void 0;return o&&a?a.get(n.dataSourceIndex):void 0}}}function Vc(e){var t=Be(e);return t.selectedRow?fi(e).map((function(e){return Ac(e)(t.selectedRow,e)})).filter((function(e){return e})):[]}var Nc,Bc,Uc,Gc,Wc,Hc,zc,Yc,Kc,qc,Qc,Xc,Zc,$c,Jc,eu,tu,nu,ru,ou,iu,au,su,cu,uu,lu,du,pu,hu,fu,bu,vu,yu=n(353),gu=n.n(yu);function mu(e){return o.a.mark((function t(n,r){var i,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,!(n.length>0)){t.next=6;break}a=Object(le.a)(n);try{for(a.s();!(s=a.n()).done;)0===s.value.severity&&(i=!1)}catch(o){a.e(o)}finally{a.f()}return t.next=6,new Promise(Object(c.action)((function(t){var o=Ys(e).pushDialog("",Object(re.jsx)(xt,{title:r,titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[!i&&Object(re.jsx)("button",{tabIndex:0,onClick:function(){i=!1,o(),t()},children:bt("Ok","button_ok")}),i&&Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,onClick:function(){i=!0,o(),t()},children:bt("Yes","button_yes")}),Object(re.jsx)("button",{tabIndex:0,onClick:function(){i=!1,o(),t()},children:bt("No","button_no")})]})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsxs)("div",{className:gu.a.dialogContent,children:[Object(re.jsx)("div",{className:"list",children:n.map((function(e,t){return Object(re.jsxs)("div",{className:"listItem",children:[1===e.severity&&Object(re.jsx)("div",{className:"itemIcon warning",children:Object(re.jsx)(Ie.Icon,{src:"./icons/warning-fill.svg",tooltip:bt("Refresh","refresh_tool_tip")})}),0===e.severity&&Object(re.jsx)("div",{className:"itemIcon error",children:Object(re.jsx)(Ie.Icon,{src:"./icons/error-fill.svg",tooltip:bt("Refresh","refresh_tool_tip")})}),Object(re.jsx)("div",{className:"itemMessage",children:e.message})]},t)}))}),i&&Object(re.jsx)(re.Fragment,{children:bt("Do you wish to continue anyway?","do_you_wish_to_continue")})]})}))})));case 6:return t.abrupt("return",{canContinue:i});case 7:case"end":return t.stop()}}),t)}))}function wu(e){return new Promise(Object(c.action)((function(t){var n=Rn(e,"",Object(re.jsx)(Ec,{screenTitle:Pe(e).tabTitle,onSaveClick:function(){n(),t(Bc.Yes)},onDontSaveClick:function(){n(),t(Bc.No)},onCancelClick:function(){n(),t(Bc.Cancel)}}))})))}function Ou(e){return ju.apply(this,arguments)}function ju(){return(ju=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l(t),r=Pe(t),i=Wn(r.content.formScreen),a=Ee(t),!Co(t)){e.next=18;break}return e.next=7,wu(t);case 7:e.t0=e.sent,e.next=e.t0===Bc.Cancel?10:e.t0===Bc.Yes?11:e.t0===Bc.No?12:15;break;case 10:case 22:return e.abrupt("return",!1);case 11:return e.abrupt("return",Sn({ctx:t,generator:o.a.mark((function e(){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveSessionQuery(i);case 2:return r=e.sent,e.delegateYield(mu(t)(r,a.title),"t0",4);case 4:if(e.t0.canContinue){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,n.saveSession(i);case 9:return s=e.sent,e.delegateYield(en(t,s),"t1",11);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))()}));case 12:return e.next=14,Object(c.flow)((function(){return Ae(t).throwChangesAway(t)}))();case 14:case 23:return e.abrupt("return",!0);case 15:throw new Error("Option not implemented");case 16:e.next=23;break;case 18:if(!((s=t.childBindings.map((function(e){return e.childDataView})).concat(t).flatMap((function(e){return Vc(e)}))).length>0)){e.next=23;break}return e.next=22,Object(c.flow)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield($e.getDialogController(t).pushError(s.join("\n")),"t0",1);case 1:case"end":return e.stop()}}),e)})))();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.No=0]="No",e[e.Yes=1]="Yes"}(Nc||(Nc={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No",e[e.Cancel=2]="Cancel"}(Bc||(Bc={}));var ku,xu,Cu=(Uc=c.observable.ref,Gc=c.action.bound,Wc=c.action.bound,Hc=c.action.bound,zc=c.action.bound,Yc=c.action.bound,Kc=c.action.bound,qc=c.action.bound,Qc=c.action.bound,Xc=c.action.bound,Zc=c.action.bound,$c=c.action.bound,Jc=c.action.bound,eu=c.action.bound,tu=c.action.bound,nu=c.action.bound,ru=c.action.bound,ou=function(){function e(t){Object(q.a)(this,e),this.$type_ITablePanelView=1,this.columnConfigurationModel=null,this.configurationManager=null,this.filterConfiguration=null,this.filterGroupManager=null,this.orderingConfiguration=null,this.groupingConfiguration=null,this.rowHeight=null,this.firstColumn=void 0,this.handleScrolling=!0,Object(de.a)(this,"rectangleMap",iu,this),Object(de.a)(this,"isEditing",au,this),Object(de.a)(this,"fixedColumnCount",su,this),Object(de.a)(this,"tablePropertyIds",cu,this),Object(de.a)(this,"hiddenPropertyIds",uu,this),Object(de.a)(this,"columnOrderChangingTargetId",lu,this),Object(de.a)(this,"columnOrderChangingSourceId",du,this),Object(de.a)(this,"_currentTooltipText",pu,this),this.parent=void 0,this.aggregations=new Iu,Object(de.a)(this,"selectedColumnId",hu,this),Object(de.a)(this,"tableCanvas",fu,this),this.subId=0,this.onScrollToCurrentCellHandlers=new Map,this.onFocusTableHandlers=new Map,Object.assign(this,t),this.columnConfigurationModel.parent=this,this.filterConfiguration.parent=this,this.filterGroupManager.parent=this,this.orderingConfiguration.parent=this,this.groupingConfiguration.parent=this}return Object(Q.a)(e,[{key:"currentTooltipText",get:function(){return this._currentTooltipText},set:function(e){this._currentTooltipText=e}},{key:"propertyMap",get:function(){return new Map(this.allTableProperties.map((function(e){return[e.id,e]})))}},{key:"allTableProperties",get:function(){var e=this;return this.tablePropertyIds.map((function(t){return ur(e).getPropertyById(t)})).filter((function(e){return e}))}},{key:"tableProperties",get:function(){var e=this;return this.allTableProperties.filter((function(t){return!e.hiddenPropertyIds.get(t.id)}))}},{key:"selectedRowId",get:function(){return Be(this).selectedRowId}},{key:"selectedColumnIndex",get:function(){var e=this,t=this.tableProperties.findIndex((function(t){return t.id===e.selectedColumnId}));return t>-1?t:void 0}},{key:"selectedRowIndex",get:function(){return Be(this).selectedRowIndex}},{key:"selectedProperty",get:function(){return this.selectedColumnId?Mo(this,this.selectedColumnId):void 0}},{key:"setTableCanvas",value:function(e){this.tableCanvas=e}},{key:"firstVisibleRowIndex",get:function(){return this.tableCanvas?this.tableCanvas.firstVisibleRowIndex:0}},{key:"lastVisibleRowIndex",get:function(){return this.tableCanvas?this.tableCanvas.lastVisibleRowIndex:0}},{key:"getCellValueByIdx",value:function(e,t){var n=this.tableProperties[t],r=this.dataTable.getRowByExistingIdx(e);return this.dataTable.getCellValue(r,n)}},{key:"getCellTextByIdx",value:function(e,t){var n=this.tableProperties[t],r=this.dataTable.getRowByExistingIdx(e);return this.dataTable.getCellText(r,n)}},{key:"clearCurrentCellEditData",value:function(){var e,t=Be(this).selectedRow,n=null===(e=this.selectedProperty)||void 0===e?void 0:e.id;t&&n&&Be(this).dataTable.deleteAdditionalCellData(t,n)}},{key:"onCellClick",value:o.a.mark((function e(t,n,r,i){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Be(this),s=this.dataTable.getRowId(n),It(this).setEditing(!1),e.delegateYield(Fc(this)(),"t0",4);case 4:if(!Ee(a).isDirty||a.selectedRowId===s){e.next=11;break}return e.next=8,Ou(a);case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:if(!Ot(a)){e.next=17;break}return e.delegateYield(this.onCellClickInternalMobile(t,n,r,i),"t1",13);case 13:return e.next=15,a.activateFormView({saveNewState:!1});case 15:e.next=18;break;case 17:return e.delegateYield(this.onCellClickInternal(t,n,r,i),"t2",18);case 18:case"end":return e.stop()}}),e,this)}))},{key:"onCellClickInternalMobile",value:o.a.mark((function e(t,n,r,i){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CheckBox"===(a=this.propertyMap.get(r)).column&&i){e.next=6;break}this.setEditing(!1),this.selectCell(this.dataTable.getRowId(n),a.id),e.next=10;break;case 6:return s=this.dataTable.getRowId(n),e.delegateYield(this.selectCellAsync(r,s),"t0",8);case 8:if(Lc(a,s)){e.next=10;break}return e.delegateYield(Dc(this)({event:void 0,row:n,property:a,value:!Tc(this,n,a)}),"t1",10);case 10:vi(this).isGrouping||this.scrollToCurrentCell();case 11:case"end":return e.stop()}}),e,this)}))},{key:"onCellClickInternal",value:o.a.mark((function e(t,n,r,i){var a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CheckBox"===(a=this.propertyMap.get(r)).column&&i){e.next=9;break}if(!a.isLink||"TagInput"===a.column||!t.ctrlKey&&!t.metaKey){e.next=6;break}return e.delegateYield(Be(this).navigateLookupLink(a,n),"t0",4);case 4:e.next=7;break;case 6:this.dataTable.getRowId(n)===this.selectedRowId?(this.selectCell(this.dataTable.getRowId(n),a.id),this.setEditing(!0)):((s=this.isEditing)&&this.setEditing(!1),this.selectCell(this.dataTable.getRowId(n),a.id),s&&this.setEditing(!0));case 7:e.next=13;break;case 9:return c=this.dataTable.getRowId(n),e.delegateYield(this.selectCellAsync(r,c),"t1",11);case 11:if(Lc(a,c)){e.next=13;break}return e.delegateYield(Dc(this)({event:void 0,row:n,property:a,value:!Tc(this,n,a)}),"t2",13);case 13:vi(this).isGrouping||this.scrollToCurrentCell();case 14:case"end":return e.stop()}}),e,this)}))},{key:"selectCellAsync",value:o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedColumnId=t,(r=Be(this)).selectedRowId!==n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.lifecycle.runRecordChangedReaction(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setSelectedRowId(n);case 2:case"end":return e.stop()}}),e)})));case 6:case"end":return e.stop()}}),e,this)}))},{key:"onNoCellClick",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEditing){e.next=3;break}return this.setEditing(!1),e.delegateYield(Fc(this)(),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"handleTableScroll",value:function(e,t,n){if(this.handleScrolling){var r=this;Object(c.flow)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isEditing){e.next=3;break}return r.setEditing(!1),e.delegateYield(Fc(r)(),"t0",3);case 3:case"end":return e.stop()}}),e)})))()}else this.handleScrolling=!0}},{key:"dontHandleNextScroll",value:function(){this.handleScrolling=!1}},{key:"onOutsideTableClick",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEditing){e.next=3;break}return this.setEditing(!1),e.delegateYield(Fc(this)(),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"selectCell",value:function(e,t){this.selectedColumnId=t,Be(this).setSelectedRowId(e)}},{key:"isFirstColumnSelected",value:function(){var e=fi(this),t=_c(this);return!!t&&0===e.findIndex((function(e){return e.id===t}))}},{key:"isLastColumnSelected",value:function(){var e=fi(this),t=_c(this);return!!t&&e.findIndex((function(e){return e.id===t}))===e.length-1}},{key:"selectNextColumn",value:function(e){var t=fi(this),n=_c(this);if(n){var r=t.findIndex((function(e){return e.id===n}));if(r<t.length-1){var o=t[r+1];this.setSelectedColumnId(o.id)}else if(e&&t.length>1){var i=Vn(this);Be(this).selectNextRow(),i!==Vn(this)&&this.selectFirstColumn()}}}},{key:"selectPrevColumn",value:function(e){var t=fi(this),n=_c(this);if(n){var r=t.findIndex((function(e){return e.id===n}));if(r>0){var o=t[r-1];this.setSelectedColumnId(o.id)}else if(e&&t.length>1){var i=Vn(this);Be(this).selectPrevRow(),i!==Vn(this)&&this.selectLastColumn()}}}},{key:"selectFirstColumn",value:function(){var e=fi(this)[0];this.setSelectedColumnId(e.id)}},{key:"selectLastColumn",value:function(){var e=fi(this),t=e[e.length-1];this.setSelectedColumnId(t.id)}},{key:"setSelectedColumnId",value:function(e){this.selectedColumnId=e}},{key:"setEditing",value:function(e){this.isEditing=e}},{key:"swapColumns",value:function(e,t){var n=this.tablePropertyIds.findIndex((function(t){return t===e})),r=this.tablePropertyIds.findIndex((function(e){return e===t})),o=this.tablePropertyIds[n];this.tablePropertyIds[n]=this.tablePropertyIds[r],this.tablePropertyIds[r]=o}},{key:"setColumnOrderChangeAttendants",value:function(e,t){this.columnOrderChangingTargetId=t,this.columnOrderChangingSourceId=e}},{key:"subOnScrollToCellShortest",value:function(e){var t=this,n=this.subId++;return this.onScrollToCurrentCellHandlers.set(n,e),function(){return t.onScrollToCurrentCellHandlers.delete(n)}}},{key:"scrollToCurrentRow",value:function(){var e=Rc(this);void 0!==e&&this.triggerOnScrollToCellShortest(e,0)}},{key:"scrollToCurrentCell",value:function(){var e=Rc(this),t=Pc(this);void 0!==e&&void 0!==t&&this.triggerOnScrollToCellShortest(e,t)}},{key:"triggerOnScrollToCellShortest",value:function(e,t){var n,r=Object(le.a)(this.onScrollToCurrentCellHandlers.values());try{for(r.s();!(n=r.n()).done;){(0,n.value)(e,t)}}catch(o){r.e(o)}finally{r.f()}}},{key:"subOnFocusTable",value:function(e){var t=this,n=this.subId++;return this.onFocusTableHandlers.set(n,e),function(){return t.onFocusTableHandlers.delete(n)}}},{key:"setPropertyHidden",value:function(e,t){t?this.hiddenPropertyIds.set(e,!0):this.hiddenPropertyIds.delete(e)}},{key:"triggerOnFocusTable",value:function(){var e,t=Object(le.a)(this.onFocusTableHandlers.values());try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"dataTable",get:function(){return ur(this)}},{key:"getCellRectangle",value:function(e,t){var n={row:0,column:0};if(vi(this).isGrouping){var r=Be(this).selectedRowId;n=lr(this).getCellOffset(r)}return this.rectangleMap.has(e+n.row)?this.rectangleMap.get(e+n.row).get(t+n.column):{columnLeft:0,columnWidth:0,rowTop:0,rowHeight:0}}},{key:"setCellRectangle",value:function(e,t,n){this.rectangleMap.has(e)||this.rectangleMap.set(e,new Map),this.rectangleMap.get(e).set(t,n)}}]),e}(),iu=Object($.a)(ou.prototype,"rectangleMap",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),au=Object($.a)(ou.prototype,"isEditing",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),su=Object($.a)(ou.prototype,"fixedColumnCount",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cu=Object($.a)(ou.prototype,"tablePropertyIds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),uu=Object($.a)(ou.prototype,"hiddenPropertyIds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),lu=Object($.a)(ou.prototype,"columnOrderChangingTargetId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=Object($.a)(ou.prototype,"columnOrderChangingSourceId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pu=Object($.a)(ou.prototype,"_currentTooltipText",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object($.a)(ou.prototype,"currentTooltipText",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"currentTooltipText"),ou.prototype),Object($.a)(ou.prototype,"propertyMap",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"propertyMap"),ou.prototype),Object($.a)(ou.prototype,"allTableProperties",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"allTableProperties"),ou.prototype),Object($.a)(ou.prototype,"tableProperties",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"tableProperties"),ou.prototype),hu=Object($.a)(ou.prototype,"selectedColumnId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(ou.prototype,"selectedRowId",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"selectedRowId"),ou.prototype),Object($.a)(ou.prototype,"selectedColumnIndex",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"selectedColumnIndex"),ou.prototype),Object($.a)(ou.prototype,"selectedRowIndex",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"selectedRowIndex"),ou.prototype),Object($.a)(ou.prototype,"selectedProperty",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"selectedProperty"),ou.prototype),fu=Object($.a)(ou.prototype,"tableCanvas",[Uc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($.a)(ou.prototype,"setTableCanvas",[Gc],Object.getOwnPropertyDescriptor(ou.prototype,"setTableCanvas"),ou.prototype),Object($.a)(ou.prototype,"handleTableScroll",[Wc],Object.getOwnPropertyDescriptor(ou.prototype,"handleTableScroll"),ou.prototype),Object($.a)(ou.prototype,"selectCell",[Hc],Object.getOwnPropertyDescriptor(ou.prototype,"selectCell"),ou.prototype),Object($.a)(ou.prototype,"selectNextColumn",[zc],Object.getOwnPropertyDescriptor(ou.prototype,"selectNextColumn"),ou.prototype),Object($.a)(ou.prototype,"selectPrevColumn",[Yc],Object.getOwnPropertyDescriptor(ou.prototype,"selectPrevColumn"),ou.prototype),Object($.a)(ou.prototype,"selectFirstColumn",[Kc],Object.getOwnPropertyDescriptor(ou.prototype,"selectFirstColumn"),ou.prototype),Object($.a)(ou.prototype,"selectLastColumn",[qc],Object.getOwnPropertyDescriptor(ou.prototype,"selectLastColumn"),ou.prototype),Object($.a)(ou.prototype,"setSelectedColumnId",[Qc],Object.getOwnPropertyDescriptor(ou.prototype,"setSelectedColumnId"),ou.prototype),Object($.a)(ou.prototype,"setEditing",[Xc],Object.getOwnPropertyDescriptor(ou.prototype,"setEditing"),ou.prototype),Object($.a)(ou.prototype,"swapColumns",[Zc],Object.getOwnPropertyDescriptor(ou.prototype,"swapColumns"),ou.prototype),Object($.a)(ou.prototype,"setColumnOrderChangeAttendants",[$c],Object.getOwnPropertyDescriptor(ou.prototype,"setColumnOrderChangeAttendants"),ou.prototype),Object($.a)(ou.prototype,"scrollToCurrentRow",[Jc],Object.getOwnPropertyDescriptor(ou.prototype,"scrollToCurrentRow"),ou.prototype),Object($.a)(ou.prototype,"scrollToCurrentCell",[eu],Object.getOwnPropertyDescriptor(ou.prototype,"scrollToCurrentCell"),ou.prototype),Object($.a)(ou.prototype,"triggerOnScrollToCellShortest",[tu],Object.getOwnPropertyDescriptor(ou.prototype,"triggerOnScrollToCellShortest"),ou.prototype),Object($.a)(ou.prototype,"setPropertyHidden",[nu],Object.getOwnPropertyDescriptor(ou.prototype,"setPropertyHidden"),ou.prototype),Object($.a)(ou.prototype,"triggerOnFocusTable",[ru],Object.getOwnPropertyDescriptor(ou.prototype,"triggerOnFocusTable"),ou.prototype),Object($.a)(ou.prototype,"dataTable",[c.computed],Object.getOwnPropertyDescriptor(ou.prototype,"dataTable"),ou.prototype),ou),Iu=(bu=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"aggregationTypes",vu,this)}return Object(Q.a)(e,[{key:"getType",value:function(e){return this.aggregationTypes.get(e)}},{key:"setType",value:function(e,t){t||!this.aggregationTypes.has(e)?(t||this.aggregationTypes.has(e))&&this.aggregationTypes.set(e,t):this.aggregationTypes.delete(e)}},{key:"aggregationList",get:function(){return Array.from(this.aggregationTypes.entries()).filter((function(e){return e[1]})).map((function(e){return{ColumnName:e[0],AggregationType:e[1]}}))}}]),e}(),vu=Object($.a)(bu.prototype,"aggregationTypes",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(bu.prototype,"aggregationList",[c.computed],Object.getOwnPropertyDescriptor(bu.prototype,"aggregationList"),bu.prototype),bu),Su=1;function Du(){return Su++}var Ru=(ku=function(e){function t(){Object(q.a)(this,t),Object(de.a)(this,"items",xu,this)}return Object(Q.a)(t,[{key:"put",value:function(e){var t=this;return this.items.set(e.$iid,e),function(){return t.items.delete(e.$iid)}}},{key:"del",value:function(e){this.items.delete(e.$iid)}},{key:e,value:function(){return this.items.values()[Symbol.iterator]()}},{key:"asArray",value:function(){return Array.from(this)}}]),t}(Symbol.iterator),xu=Object($.a)(ku.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ku);function Tu(e,t){var n=[];return function r(o){if(e!==o&&t(o)&&n.push(o),o.elements){var i,a=Object(le.a)(o.elements);try{for(a.s();!(i=a.n()).done;){r(i.value)}}catch(s){a.e(s)}finally{a.f()}}}(e),n}function _u(e,t){var n=[];return function r(o){if(e!==o&&t(o))n.push(o);else if(o.elements){var i,a=Object(le.a)(o.elements);try{for(a.s();!(i=a.n()).done;){r(i.value)}}catch(s){a.e(s)}finally{a.f()}}}(e),n}function Pu(e){!function e(t){if(t.$iid=Du(),t.elements){var n,r=Object(le.a)(t.elements);try{for(r.s();!(n=r.n()).done;){e(n.value)}}catch(o){r.e(o)}finally{r.f()}}}(e)}var Fu,Mu,Lu,Eu,Au,Vu,Nu,Bu,Uu,Gu,Wu,Hu=function(e){return _u(e,(function(e){return"UIRoot"===e.name}))[0]},zu=function(e){return _u(e,(function(e){return"UIChildren"===e.parent.name}))},Yu=function(e){return _u(e,(function(e){return e.attributes&&"Box"===e.attributes.Type}))},Ku=function(e){return _u(e,(function(e){return"Actions"===e.parent.name&&"Action"===e.name}))},qu=function(e){return _u(e,(function(e){return"Parameter"===e.name}))},Qu=function(e){return _u(e,(function(e){return"string"===e.name})).map((function(e){return _u(e,(function(e){return"text"===e.type}))[0].text}))},Xu=function(e){return _u(e,(function(e){return"FormRoot"===e.name}))[0]},Zu=(Fu=c.action.bound,Mu=c.action.bound,Lu=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"groupingSettings",Eu,this),this.onOffHandlers=[],this.parent=void 0}return Object(Q.a)(e,[{key:"isGrouping",get:function(){return this.groupingSettings.size>0}},{key:"groupingColumnCount",get:function(){return this.groupingSettings.size}},{key:"orderedGroupingColumnSettings",get:function(){var e=Array.from(this.groupingSettings.entries());return e.sort((function(e,t){return e[1].groupIndex-t[1].groupIndex})),e.map((function(e){return e[1]}))}},{key:"firstGroupingColumn",get:function(){return this.orderedGroupingColumnSettings[0]}},{key:"nextColumnToGroupBy",value:function(e){var t,n=null===(t=this.groupingSettings.get(e))||void 0===t?void 0:t.groupIndex;if(n){var r=n+1,o=Array.from(this.groupingSettings.entries()).find((function(e){return e[1].groupIndex===r}));return o?o[1]:void 0}}},{key:"setGrouping",value:function(e,t,n){var r=0===this.groupingSettings.size;this.groupingSettings.set(e,{columnId:e,groupingUnit:t,groupIndex:n}),r&&this.notifyOnOffHandlers()}},{key:"clearGrouping",value:function(){this.groupingSettings.clear(),this.notifyOnOffHandlers()}},{key:"notifyOnOffHandlers",value:function(){var e,t=Object(le.a)(this.onOffHandlers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"registerGroupingOnOffHandler",value:function(e){this.onOffHandlers.push(e)}}]),e}(),Eu=Object($.a)(Lu.prototype,"groupingSettings",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(Lu.prototype,"isGrouping",[c.computed],Object.getOwnPropertyDescriptor(Lu.prototype,"isGrouping"),Lu.prototype),Object($.a)(Lu.prototype,"groupingColumnCount",[c.computed],Object.getOwnPropertyDescriptor(Lu.prototype,"groupingColumnCount"),Lu.prototype),Object($.a)(Lu.prototype,"orderedGroupingColumnSettings",[c.computed],Object.getOwnPropertyDescriptor(Lu.prototype,"orderedGroupingColumnSettings"),Lu.prototype),Object($.a)(Lu.prototype,"firstGroupingColumn",[c.computed],Object.getOwnPropertyDescriptor(Lu.prototype,"firstGroupingColumn"),Lu.prototype),Object($.a)(Lu.prototype,"setGrouping",[Fu],Object.getOwnPropertyDescriptor(Lu.prototype,"setGrouping"),Lu.prototype),Object($.a)(Lu.prototype,"clearGrouping",[Mu],Object.getOwnPropertyDescriptor(Lu.prototype,"clearGrouping"),Lu.prototype),Lu),$u=(Au=function(){function e(t){Object(q.a)(this,e),this.isInfinitelyScrolled=!1,this.expansionListener=null,Object(de.a)(this,"childGroups",Vu,this),Object(de.a)(this,"_childRows",Nu,this),this.columnId=null,this.columnValue=null,this.groupLabel=null,this.parent=null,this.rowCount=null,this.columnDisplayValue=null,this.aggregations=void 0,this.grouper=null,this.groupFilters=[],Object(de.a)(this,"_isExpanded",Bu,this),Object.assign(this,t)}return Object(Q.a)(e,[{key:"level",get:function(){return this.allParents.length}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e,this.expansionListener(this)}},{key:"allChildGroups",get:function(){return tl(this)}},{key:"allParents",get:function(){return el(this)}},{key:"substituteRecord",value:function(e){}},{key:"getRowIndex",value:function(e){var t=this;return this._childRows.findIndex((function(n){return ur(t.grouper).getRowId(n)===e}))}},{key:"getRowById",value:function(e){var t=this;return this._childRows.find((function(n){return ur(t.grouper).getRowId(n)===e}))}},{key:"childRows",get:function(){var e=or(this.grouper);return 0===e.userOrderings.length?this._childRows:this._childRows.slice().sort(e.orderingFunction())},set:function(e){this._childRows=e}},{key:"composeGroupingFilter",value:function(){throw new Error("Method not implemented.")}},{key:"dispose",value:function(){}}]),e}(),Vu=Object($.a)(Au.prototype,"childGroups",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nu=Object($.a)(Au.prototype,"_childRows",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bu=Object($.a)(Au.prototype,"_isExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Au.prototype,"childRows",[c.computed],Object.getOwnPropertyDescriptor(Au.prototype,"childRows"),Au.prototype),Au),Ju=(Uu=function(){function e(t){Object(q.a)(this,e),Object(de.a)(this,"childGroups",Gu,this),this.columnId=null,this.columnValue=null,this.groupLabel=null,this.parent=null,this.rowCount=null,this.columnDisplayValue=null,this.aggregations=void 0,this.grouper=null,this.scrollLoader=void 0,this._childRows=void 0,this.groupingUnit=null,Object(de.a)(this,"_isExpanded",Wu,this);var n=ur(t.grouper);this._childRows=new Po((function(e){return n.getRowId(e)}),n),Object.assign(this,t);var r=Be(this.grouper);this.scrollLoader=new Wr({ctx:this.grouper,gridDimensions:r.gridDimensions,scrollState:r.scrollState,rowsContainer:this._childRows,groupFilter:this.composeGroupingFilter(),visibleRowsMonitor:new fr(this.grouper,r.gridDimensions,r.scrollState)}),this.scrollLoader.registerAppendListener((function(e){return n.appendRecords(e)})),this.scrollLoader.registerPrependListener((function(e){return n.appendRecords(e)}))}return Object(Q.a)(e,[{key:"level",get:function(){return this.allParents.length}},{key:"isInfinitelyScrolled",get:function(){return this.rowCount>=Ur&&this.isExpanded&&this.childRows.length>0}},{key:"allChildGroups",get:function(){return tl(this)}},{key:"allParents",get:function(){return el(this)}},{key:"substituteRecord",value:function(e){this._childRows.substitute(e)}},{key:"getRowIndex",value:function(e){var t=this;return this.childRows.findIndex((function(n){return ur(t.grouper).getRowId(n)===e}))}},{key:"getRowById",value:function(e){var t=this;return this.childRows.find((function(n){return ur(t.grouper).getRowId(n)===e}))}},{key:"childRows",get:function(){return this._childRows.rows},set:function(e){e.length>0&&(this.scrollLoader.start(),ur(this.grouper).appendRecords(e)),this._childRows.set(e)}},{key:"groupFilters",get:function(){if(void 0!==this.groupingUnit){var e=Qn()(this.columnValue),t=Qn()(this.columnValue);switch(this.groupingUnit){case Xs.Year:t.set({year:e.year()+1});break;case Xs.Month:t.set({month:e.month()+1});break;case Xs.Day:t.set({day:e.day()+1});break;case Xs.Hour:t.set({hour:e.hour()+1});break;case Xs.Minute:t.set({minute:e.minute()+1});break;default:throw new Error("Filter generation for groupingUnit:"+this.groupingUnit+" not implemented")}return[er(this.columnId,null,"gte",e),er(this.columnId,null,"lt",t)]}return[er(this.columnId,null,"eq",this.columnValue)]}},{key:"composeGroupingFilter",value:function(){return Zn(el(this).concat([this]).flatMap((function(e){return e.groupFilters})))}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){e||this.grouper.notifyGroupClosed(this),this._isExpanded=e}},{key:"dispose",value:function(){this.scrollLoader.dispose()}}]),e}(),Gu=Object($.a)(Uu.prototype,"childGroups",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($.a)(Uu.prototype,"childRows",[c.computed],Object.getOwnPropertyDescriptor(Uu.prototype,"childRows"),Uu.prototype),Wu=Object($.a)(Uu.prototype,"_isExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uu);function el(e){for(var t=[],n=e.parent;n;)t.push(n),n=n.parent;return t}function tl(e){var t=e.childGroups.flatMap((function(e){return e.allChildGroups}));return[].concat(Object(gt.a)(e.childGroups),Object(gt.a)(t))}function nl(e){if(e)return e.map((function(e){return{columnId:e.column,type:mc(e.type),value:e.value}}))}function rl(e,t){var n;var r,o=Go(t.customNumericFormat,null!==(n=t.entity)&&void 0!==n?n:"",(r=e.value,Math.round(100*r)/100));return e.type===Zs.SUM?"\u03a3 "+o:e.type+": "+o}function ol(e,t){return t.map((function(t){return{columnId:t.ColumnName,type:t.AggregationType,value:il(e,t)}}))}function il(e,t){var n=Vs(e).find((function(e){return e.id===t.ColumnName})),r=e.dataTable.rows.map((function(t){return e.dataTable.getCellValue(t,n)}));if(0===r.length)return 0;switch(t.AggregationType){case Zs.SUM:return r.reduce((function(e,t){return e+t}),0);case Zs.AVG:return r.reduce((function(e,t){return e+t}),0)/r.length;case Zs.MAX:return Math.max.apply(Math,Object(gt.a)(r));case Zs.MIN:return Math.min.apply(Math,Object(gt.a)(r));case Zs.COUNT:return r.length}}function al(e,t){return e.allGroups.map((function(e){return e.getRowById(t)})).find((function(e){return e}))}function sl(e,t){return e.allGroups.filter((function(e){return 0===e.childGroups.length})).map((function(e){return e.getRowIndex(t)})).find((function(e){return-1!==e}))}function cl(e,t){var n,r=e.allGroups.filter((function(e){return e.getRowById(t)&&e.isExpanded})).sort((function(e,t){return t.level-e.level}))[0],o=0,i=Object(le.a)(e.allGroups);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(o++,a===r)return{row:o,column:a.level+1};a.isExpanded&&!a.childGroups.some((function(e){return e.isExpanded}))&&(o+=a.childRows.length)}}catch(s){i.e(s)}finally{i.f()}return{row:0,column:0}}function ul(e,t){var n=e.allGroups.find((function(e){return e.getRowById(t)})),r=n.getRowIndex(t);if(void 0!==r&&0!==r){var o=n.childRows[r-1];return ur(e).getRowId(o)}var i=function(e,t){var n=e.allGroups.filter((function(e){return t.level===e.level&&e.rowCount>0&&e.isExpanded})),r=n.indexOf(t);return 0===r?void 0:n[r-1]}(e,n);if(void 0===i)return t;var a=i.childRows[i.childRows.length-1];return ur(e).getRowId(a)}function ll(e,t){var n=e.allGroups.find((function(e){return e.getRowById(t)})),r=n.getRowIndex(t);if(void 0!==r&&r!==n.rowCount-1){var o=n.childRows[r+1];return ur(e).getRowId(o)}var i=function(e,t){var n=e.allGroups.filter((function(e){return t.level===e.level&&e.rowCount>0&&e.isExpanded})),r=n.indexOf(t);return r===n.length-1?void 0:n[r+1]}(e,n);if(void 0===i)return t;var a=i.childRows[0];return ur(e).getRowId(a)}var dl,pl,hl,fl,bl,vl,yl=function(){function e(t,n){Object(q.a)(this,e),this.value=t,this._label=void 0,this.rows=[],this._label=Array.isArray(n)?n.join(", "):n}return Object(Q.a)(e,[{key:"label",get:function(){return this._label}},{key:"compare",value:function(e){return this.label&&e.label?"string"===typeof this.label?this.label.localeCompare(e.label,ot()):this.label>e.label?1:-1:this.label?1:-1}}]),e}(),gl=function(){function e(t,n){Object(q.a)(this,e),this.value=t,this.label=n,this.rows=[]}return Object(Q.a)(e,[{key:"compare",value:function(e){return this.value&&!e.value?-1:!this.value&&e.value?1:this.value||e.value?this.value.isValid()&&e.value.isValid()?this.value>e.value?1:this.value<e.value?-1:0:this.value?1:-1:0}}],[{key:"create",value:function(t,n){t.isValid()||new e(void 0,"");var r="";switch(n){case Xs.Year:t.set({month:0,date:1,hour:0,minute:0,second:0}),r=t.format("YYYY");break;case Xs.Month:t.set({date:1,hour:0,minute:0,second:0}),r=t.format("YYYY-MM");break;case Xs.Day:t.set({hour:0,minute:0,second:0}),r=t.format("YYYY-MM-DD");break;case Xs.Hour:t.set({minute:0,second:0}),r=t.format("YYYY-MM-DD h:00");break;case Xs.Minute:t.set({second:0}),r=t.format("YYYY-MM-DD h:mm")}return new e(t,r)}}]),e}(),ml=(dl=c.observable.shallow,pl=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"topLevelGroups",hl,this),this.parent=null,this.disposers=[],this.groupDisposers=new Map,Object(de.a)(this,"refreshTrigger",fl,this),this.loadGroupsDebounced=ge.a.debounce(this.loadGroupsImm,10),this.loadChildrenReactionDebounced=ge.a.debounce(this.loadChildrenReaction,10)}return Object(Q.a)(e,[{key:"start",value:function(){var e=this;this.disposers.push(Object(c.reaction)((function(){return[Array.from(vi(e).groupingSettings.values()),Array.from(vi(e).groupingSettings.keys()),e.refreshTrigger]}),(function(){return e.loadGroupsDebounced()}),{fireImmediately:!0,equals:c.comparer.structural,delay:50}))}},{key:"allGroups",get:function(){return this.topLevelGroups.flatMap((function(e){return[e].concat(Object(gt.a)(e.allChildGroups))}))}},{key:"loadGroupsImm",value:function(){Sn({ctx:this,generator:this.loadGroups()})}},{key:"loadGroups",value:o.a.mark((function e(){var t,n,r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=vi(this).firstGroupingColumn){e.next=4;break}return this.topLevelGroups.length=0,e.abrupt("return");case 4:return n=this.allGroups.filter((function(e){return e.isExpanded})).map((function(e){return e.columnDisplayValue})),r=Be(this),i=ur(this).getPropertyById(t.columnId),a=i&&i.lookup&&i.lookup.lookupId,s=It(this).aggregations.aggregationList,e.next=11,Ae(this).loadGroups(r,t,a,s);case 11:return c=e.sent,this.topLevelGroups=this.group(c,t.columnId,void 0),e.delegateYield(this.loadAndExpandChildren(this.topLevelGroups,n),"t0",14);case 14:case"end":return e.stop()}}),e,this)}))},{key:"loadAndExpandChildren",value:o.a.mark((function e(t,n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(le.a)(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=11;break}if(a=i.value,!n.includes(a.columnDisplayValue)){e.next=9;break}return a.isExpanded=!0,e.delegateYield(this.loadChildren(a),"t0",8);case 8:return e.delegateYield(this.loadAndExpandChildren(a.childGroups,n),"t1",9);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),r.e(e.t2);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"substituteRecord",value:function(e){this.allGroups.map((function(t){return t.substituteRecord(e)}))}},{key:"refresh",value:function(){this.refreshTrigger++}},{key:"getRowIndex",value:function(e){return sl(this,e)}},{key:"getRowById",value:function(e){return al(this,e)}},{key:"getTotalRowCount",value:function(e){var t;return null===(t=this.allGroups.find((function(t){return t.getRowById(e)})))||void 0===t?void 0:t.rowCount}},{key:"getCellOffset",value:function(e){return cl(this,e)}},{key:"getNextRowId",value:function(e){return ll(this,e)}},{key:"getPreviousRowId",value:function(e){return ul(this,e)}},{key:"notifyGroupClosed",value:function(e){this.groupDisposers.has(e)&&(this.groupDisposers.get(e)(),this.groupDisposers.delete(e))}},{key:"loadChildren",value:o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.groupDisposers.has(t)&&this.groupDisposers.get(t)(),this.groupDisposers.set(t,Object(c.reaction)((function(){return[vi(n).nextColumnToGroupBy(t.columnId),n.composeFinalFilter(t),Object(gt.a)(nr(n).activeFilters),Object(gt.a)(It(n).aggregations.aggregationList),or(n).groupChildrenOrdering]}),(function(){return n.loadChildrenReactionDebounced(t)}))),e.delegateYield(this.reload(t),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"loadChildrenReaction",value:function(e){var t=this;Object(c.flow)((function(){return t.reload(e)}))()}},{key:"reload",value:o.a.mark((function e(t){var n,r,i,a,s,c,u,l,d,p,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vi(this),r=n.nextColumnToGroupBy(t.columnId),i=Be(this),a=this.composeFinalFilter(t),s=Ae(this),c=It(this).aggregations.aggregationList,u=or(this),!r){e.next=16;break}return l=ur(this).getPropertyById(r.columnId),d=l&&l.lookup&&l.lookup.lookupId,e.next=12,s.loadChildGroups(i,a,r,c,d);case 12:p=e.sent,t.childGroups=this.group(p,r.columnId,t),e.next=20;break;case 16:return e.next=18,s.loadChildRows(i,a,u.groupChildrenOrdering);case 18:h=e.sent,t.childRows=h;case 20:case"end":return e.stop()}}),e,this)}))},{key:"composeFinalFilter",value:function(e){var t=e.composeGroupingFilter(),n=rr({ctx:this,excludePropertyId:e.columnId});return n?Zn([t,n]):t}},{key:"group",value:function(e,t,n){var r=this,o=vi(this).groupingSettings.get(t);if(!(null===o||void 0===o?void 0:o.groupIndex)||!o)throw new Error("Cannot find grouping index for column: "+t);var i=ur(this).getPropertyById(t);return e.map((function(e){var a=r.getGroupData(e,o);return new Ju({childGroups:[],childRows:[],columnId:t,groupLabel:i.name,rowCount:e.groupCount,parent:n,columnValue:a.value,columnDisplayValue:a.label,aggregations:nl(e.aggregations),groupingUnit:o.groupingUnit,grouper:r})}))}},{key:"getGroupData",value:function(e,t){if(e||new gl(void 0,""),void 0!==t.groupingUnit){var n,r,o,i=e[t.columnId+"_year"],a=e[t.columnId+"_month"]?e[t.columnId+"_month"]-1:0,s=null!==(n=e[t.columnId+"_day"])&&void 0!==n?n:1,c=null!==(r=e[t.columnId+"_hour"])&&void 0!==r?r:0,u=null!==(o=e[t.columnId+"_minute"])&&void 0!==o?o:0,l=Qn()({y:i,M:a,d:s,h:c,m:u,s:0});return gl.create(l,t.groupingUnit)}var d;return new yl(e[t.columnId],null!==(d=e.groupCaption)&&void 0!==d?d:e[t.columnId])}},{key:"dispose",value:function(){var e,t=Object(le.a)(this.disposers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}this.allGroups.forEach((function(e){return e.dispose()}))}}]),e}(),hl=Object($.a)(pl.prototype,"topLevelGroups",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fl=Object($.a)(pl.prototype,"refreshTrigger",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pl),wl=(bl=function(){function e(){Object(q.a)(this,e),this.parent=null,this.expandedGroupDisplayValues=new Set}return Object(Q.a)(e,[{key:"topLevelGroups",get:function(){var e=vi(this).firstGroupingColumn;if(void 0===e)return[];var t=ur(this),n=this.makeGroups(void 0,t.rows,e);return this.loadRecursively(n),n}},{key:"allGroups",get:function(){return this.topLevelGroups.flatMap((function(e){return[e].concat(Object(gt.a)(e.allChildGroups))}))}},{key:"substituteRecord",value:function(e){}},{key:"getCellOffset",value:function(e){return cl(this,e)}},{key:"getRowIndex",value:function(e){return sl(this,e)}},{key:"getRowById",value:function(e){return al(this,e)}},{key:"getTotalRowCount",value:function(e){return function(e,t){var n;return null===(n=e.allGroups.find((function(e){return 0===e.childGroups.length&&e.getRowById(t)})))||void 0===n?void 0:n.rowCount}(this,e)}},{key:"getNextRowId",value:function(e){return ll(this,e)}},{key:"getPreviousRowId",value:function(e){return ul(this,e)}},{key:"loadRecursively",value:function(e){var t,n=Object(le.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.expandedGroupDisplayValues.has(r.columnDisplayValue)&&(r.isExpanded=!0,this.loadChildrenInternal(r),this.loadRecursively(r.childGroups))}}catch(o){n.e(o)}finally{n.f()}}},{key:"expansionListener",value:function(e){e.isExpanded?this.expandedGroupDisplayValues.add(e.columnDisplayValue):this.expandedGroupDisplayValues.delete(e.columnDisplayValue)}},{key:"makeGroups",value:function(e,t,n){var r,o,i=this,a=ur(this),s=a.getPropertyById(n.columnId),c=null!==(r=null===(o=or(this).orderings.find((function(e){return e.columnId===n.columnId})))||void 0===o?void 0:o.direction)&&void 0!==r?r:zn.ASC;return this.groupToGroupDataList(n,t).sort((function(e,t){return c===zn.ASC?e.compare(t):-e.compare(t)})).map((function(t){return new $u({childGroups:[],childRows:t.rows,columnId:n.columnId,groupLabel:s.name,rowCount:t.rows.length,parent:e,columnValue:t.label,columnDisplayValue:s?a.resolveCellText(s,t.label):t.label,aggregations:i.calcAggregations(t.rows),grouper:i,expansionListener:i.expansionListener.bind(i)})}))}},{key:"groupToGroupDataList",value:function(e,t){if(!e)return[];var n,r=this.findDataIndex(e.columnId),o=new Map,i=Object(le.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=void 0===e.groupingUnit?new yl(a[r],a[r]):gl.create(Qn()(a[r]),e.groupingUnit);o.has(s.label)||o.set(s.label,s),o.get(s.label).rows.push(a)}}catch(c){i.e(c)}finally{i.f()}return Array.from(o.values())}},{key:"calcAggregations",value:function(e){var t=this;return It(this).aggregations.aggregationList.map((function(n){return{columnId:n.ColumnName,type:n.AggregationType,value:t.calcAggregation(n,e)}}))}},{key:"calcAggregation",value:function(e,t){var n=this.findDataIndex(e.ColumnName),r=t.map((function(e){return e[n]}));switch(e.AggregationType){case Zs.SUM:return r.reduce((function(e,t){return e+t}),0);case Zs.AVG:return r.reduce((function(e,t){return e+t}),0)/t.length;case Zs.MIN:return Math.min.apply(Math,Object(gt.a)(r));case Zs.MAX:return Math.max.apply(Math,Object(gt.a)(r));default:throw new Error("Aggregation type not implemented: "+e.AggregationType)}}},{key:"findDataIndex",value:function(e){var t=ur(this).getPropertyById(e);return t?t.dataIndex:0}},{key:"loadChildren",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadChildrenInternal(t);case 1:case"end":return e.stop()}}),e,this)}))},{key:"loadChildrenInternal",value:function(e){var t=vi(this).nextColumnToGroupBy(e.columnId);t&&(e.childGroups=this.makeGroups(e,e.childRows,t))}},{key:"notifyGroupClosed",value:function(e){}},{key:"start",value:function(){}}]),e}(),Object($.a)(bl.prototype,"topLevelGroups",[c.computed],Object.getOwnPropertyDescriptor(bl.prototype,"topLevelGroups"),bl.prototype),bl),Ol=n(354);!function(e){e[e.PerDependency=0]="PerDependency",e[e.PerLifetimeScope=1]="PerLifetimeScope",e[e.Single=2]="Single"}(vl||(vl={}));var jl=function e(){Object(q.a)(this,e),this.regCreator=void 0,this.regCreatorEx=void 0,this.regClass=void 0,this.typeSymbol=void 0,this.instancePerDependency=void 0,this.instancePerLifetimeScope=void 0,this.instancePerNamedLifetimeScope=void 0,this.instancePerSwitchedLifetimeScope=void 0,this.singleInstance=void 0,this.onPreparing=[],this.onActivating=[],this.onActivated=[],this.onRelease=[]},kl=function(){function e(t){Object(q.a)(this,e),this.registration=t}return Object(Q.a)(e,[{key:"transientInstance",value:function(){return this.registration.instancePerDependency=!0,this}},{key:"singleInstance",value:function(){return this.registration.singleInstance=!0,this}},{key:"scopedInstance",value:function(e){return e?"function"===typeof e?this.registration.instancePerSwitchedLifetimeScope=e:this.registration.instancePerNamedLifetimeScope=e:this.registration.instancePerLifetimeScope=!0,this}},{key:"onActivated",value:function(e){return this.registration.onActivated.push(e),this}},{key:"onActivating",value:function(e){return this.registration.onActivating.push(e),this}},{key:"onPreparing",value:function(e){return this.registration.onPreparing.push(e),this}},{key:"onRelease",value:function(e){return this.registration.onRelease.push(e),this}},{key:"forward",value:function(e){return e(this)}}]),e}(),xl=function(){function e(t){Object(q.a)(this,e),this.options=t,this.registrations=new Map,this.instances=new Map,this.transientInstances=[],this.disposeEvents=new WeakMap,this.parent=void 0,this.children=[],this.scopeName=void 0,this.isDisposed=!1,this.scheduledOnActivated=[],this._onThisScopeDisposed=[],this._onThisScopeWillDispose=[]}return Object(Q.a)(e,[{key:"register",value:function(e,t,n){var r=new jl;r.typeSymbol=e,r.regCreator=t,r.regCreatorEx=n,this.registrations.has(e)||this.registrations.set(e,[]);var o=this.registrations.get(e);return o&&o.push(r),new kl(r)}},{key:"registerClass",value:function(e,t){var n=new jl;n.typeSymbol=e,n.regClass=t,this.registrations.has(e)||this.registrations.set(e,[]);var r=this.registrations.get(e);return r&&r.push(n),new kl(n)}},{key:"checkDisposed",value:function(){if(this.isDisposed)throw new Error("Trying to resolve from a disposed container.")}},{key:"resolveAll",value:function(e,t){var n=this;this.checkDisposed(),Rl(this);try{return this.findAllRegistrations(e).map((function(e){return n.resolveByRegistration(e,t||[])}))}finally{Tl()}}},{key:"resolve",value:function(e){this.checkDisposed(),Rl(this);try{var t=this.findRegistration(e);if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.resolveByRegistration(t,r||[])}throw new Error("No registration for symbol "+e.symName)}finally{Tl()}}},{key:"resolveOptional",value:function(e){this.checkDisposed(),Rl(this);try{var t=this.findRegistration(e);if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.resolveByRegistration(t,r||[])}return}finally{Tl()}}},{key:"resolveByRegistration",value:function(e,t){var n,r=Object(le.a)(e.onPreparing);try{for(r.s();!(n=r.n()).done;){(0,n.value)({container:this})}}catch(o){r.e(o)}finally{r.f()}return e.instancePerDependency?this.providePerDependency(e,t):e.singleInstance?this.provideSingle(e,t):e.instancePerLifetimeScope?this.providePerLifetimeScope(e,t):e.instancePerSwitchedLifetimeScope?this.providePerSwitchedLifetimeScope(e,t):e.instancePerNamedLifetimeScope?this.providePerNamedLifetimeScope(e,t):this.options.defaultLifetime===vl.PerDependency?this.providePerDependency(e,t):this.options.defaultLifetime===vl.PerLifetimeScope?this.providePerLifetimeScope(e,t):this.options.defaultLifetime===vl.Single?this.provideSingle(e,t):this.providePerDependency(e,t)}},{key:"resolveFromCreator",value:function(e){this.checkDisposed(),Rl(this);try{var t=e();return El(t,this),t}finally{Tl()}}},{key:"newFromRegistration",value:function(e,t){try{if(e.regClass)return Fl(e.regClass),Object(Ol.a)(e.regClass,Object(gt.a)(t));if(e.regCreator)return Fl(e.regCreator),e.regCreator.apply(e,Object(gt.a)(t));if(e.regCreatorEx)return Fl(e.regCreatorEx),e.regCreatorEx.apply(e,[this].concat(Object(gt.a)(t)));throw new Error("Neither class nor creator registered.")}finally{_l[Pl]=void 0,Pl--}}},{key:"providePerDependency",value:function(e,t){var n=this,r=this.newFromRegistration(e,t);El(r,this),e.onRelease.length>0&&this.disposeEvents.set(r,e.onRelease);var o,i=Object(le.a)(e.onActivating);try{for(i.s();!(o=i.n()).done;){(0,o.value)({container:this,instance:r,replaceInstance:function(e){r=e}})}}catch(u){i.e(u)}finally{i.f()}var a,s=Object(le.a)(e.onActivated);try{var c=function(){var e=a.value;Dl().scheduledOnActivated.push((function(){return e({container:n,instance:r})}))};for(s.s();!(a=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}return this.transientInstances.push(r),r}},{key:"provideSingle",value:function(e,t){var n=this.findRootContainer();return this.provideFromContainer(n,e,t)}},{key:"providePerLifetimeScope",value:function(e,t){return this.provideFromContainer(this,e,t)}},{key:"providePerSwitchedLifetimeScope",value:function(e,t){var n=e.instancePerSwitchedLifetimeScope(this);if(n)return this.provideFromContainer(n,e,t);throw new Error("Scope named ".concat(e.instancePerNamedLifetimeScope," not opened."))}},{key:"providePerNamedLifetimeScope",value:function(e,t){var n=this.findFirstNamedContainer(e.instancePerNamedLifetimeScope);if(n)return this.provideFromContainer(n,e,t);throw new Error("Scope named ".concat(e.instancePerNamedLifetimeScope," not opened."))}},{key:"provideFromContainer",value:function(e,t,n){var r=this;if(e.instances.has(t.typeSymbol))return e.instances.get(t.typeSymbol);var o=function(){var o=r.newFromRegistration(t,n);El(o,r),t.onRelease.length>0&&r.disposeEvents.set(o,t.onRelease);var i,a=Object(le.a)(t.onActivating);try{for(a.s();!(i=a.n()).done;){(0,i.value)({container:r,instance:o,replaceInstance:function(e){o=e}})}}catch(l){a.e(l)}finally{a.f()}e.instances.set(t.typeSymbol,o);var s,c=Object(le.a)(t.onActivated);try{var u=function(){var e=s.value;Dl().scheduledOnActivated.push((function(){return e({container:r,instance:o})}))};for(c.s();!(s=c.n()).done;)u()}catch(l){c.e(l)}finally{c.f()}return{v:o}}();return"object"===typeof o?o.v:void 0}},{key:"beginLifetimeScope",value:function(t,n){var r=new e(this.options);return r.scopeName=t,r.parent=this,n||this.children.push(r),r}},{key:"dispose",value:function(){var e=this;this.triggerOnThisScopeWillDispose(),Rl(this);try{var t,n=this.parent,r=Object(le.a)(this.instances.values());try{for(r.s();!(t=r.n()).done;){var o=t.value,i=this.disposeEvents.get(o);if(i){var a,s=Object(le.a)(i);try{for(s.s();!(a=s.n()).done;){(0,a.value)({instance:o,container:this})}}catch(b){s.e(b)}finally{s.f()}}o.dispose&&o.dispose()}}catch(b){r.e(b)}finally{r.f()}this.instances.clear();var c,u=Object(le.a)(this.transientInstances);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=this.disposeEvents.get(l);if(d){var p,h=Object(le.a)(d);try{for(h.s();!(p=h.n()).done;){(0,p.value)({instance:l,container:this})}}catch(b){h.e(b)}finally{h.f()}}l.dispose&&l.dispose()}}catch(b){u.e(b)}finally{u.f()}if(this.transientInstances.length=0,this.isDisposed=!0,this.parent){var f=this.parent.children.findIndex((function(t){return t===e}));f>-1&&this.parent.children.splice(f,1),this.parent=void 0}return n}finally{Tl(),this.triggerOnThisScopeDisposed()}}},{key:"disposeWithChildren",value:function(){for(var e=0,t=Object(gt.a)(this.children);e<t.length;e++){t[e].disposeWithChildren()}this.dispose()}},{key:"findAllRegistrations",value:function(e){var t=[];return this.parent&&t.push.apply(t,Object(gt.a)(this.parent.findAllRegistrations(e))),this.registrations.has(e)&&t.push.apply(t,Object(gt.a)(this.registrations.get(e))),t}},{key:"findRegistration",value:function(e){return this.registrations.has(e)?this.registrations.get(e).slice(-1)[0]:this.parent?this.parent.findRegistration(e):void 0}},{key:"findRootContainer",value:function(){return this.parent?this.parent.findRootContainer():this}},{key:"findFirstNamedContainer",value:function(e){return this.scopeName===e?this:this.parent?this.parent.findFirstNamedContainer(e):void 0}},{key:"findFirstContainer",value:function(e){return e(this)?this:this.parent?this.parent.findFirstContainer(e):void 0}},{key:"resolveFlowFinished",value:function(){var e,t=Object(le.a)(this.scheduledOnActivated);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}this.scheduledOnActivated.length=0}},{key:"onThisScopeDisposed",value:function(e){this._onThisScopeDisposed.push(e)}},{key:"triggerOnThisScopeDisposed",value:function(){var e,t=Object(le.a)(this._onThisScopeDisposed);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this)}}catch(n){t.e(n)}finally{t.f()}}},{key:"onThisScopeWillDispose",value:function(e){this._onThisScopeWillDispose.push(e)}},{key:"triggerOnThisScopeWillDispose",value:function(){var e,t=Object(le.a)(this._onThisScopeWillDispose);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this)}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),Cl=new Array(10),Il=-1;function Sl(){return Cl[Il]}function Dl(){return Cl[0]}function Rl(e){Il++,Cl[Il]=e}function Tl(){var e=Cl[Il];return Cl[Il]=void 0,-1===--Il&&e.resolveFlowFinished(),e}var _l=new Array(10),Pl=-1;function Fl(e){Pl++,_l[Pl]=e}function Ml(e){var t=function e(){var t=Sl();if(!t)throw new Error("No resolution flow active.");return t.resolve(e)};return t.symName=e,t.toString=function(){return"TypeSymbol <".concat(e,">")},t.enumerationCacheKey={},t}var Ll=new Map;function El(e,t){try{Ll.set(e,t)}catch(n){}}function Al(e){return Ll.get(e)}var Vl,Nl,Bl,Ul,Gl,Wl,Hl,zl,Yl=function(){function e(){Object(q.a)(this,e),this.contrib=new Ru}return Object(Q.a)(e,[{key:"render",value:function(){var e=this;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:e.contrib.asArray().map((function(e){return e.render()}))})}})}}]),e}(),Kl=Ml("DataViewBodyUI"),ql=function(){function e(){Object(q.a)(this,e),this.contrib=new Ru}return Object(Q.a)(e,[{key:"renderSection",value:function(e){var t=this;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:t.contrib.asArray().filter((function(t){return t.section===e})).map((function(e){return e.render()}))})}})}}]),e}(),Ql=Ml("DataViewToolbarUI"),Xl="SectionViewSwitchers",Zl=Ml("IDataView"),$l=n(240),Jl=n.n($l),ed=n(241),td=n.n(ed),nd=(Vl=c.action.bound,Nl=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).elmDropdown=null,e.refDropdown=function(t){e.elmDropdown=t,e.props.dropdownRef(t)},e.isStillMounted=!1,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.isStillMounted=!0,setTimeout((function(){e.isStillMounted&&(window.addEventListener("mousedown",e.handleMaybeClose),window.addEventListener("mousewheel",e.handleMaybeClose))}))}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1,window.removeEventListener("mousedown",this.handleMaybeClose),window.removeEventListener("mousewheel",this.handleMaybeClose)}},{key:"handleMaybeClose",value:function(e){var t,n;this.elmDropdown&&!this.elmDropdown.contains(e.target)&&(null===(t=(n=this.props).onOutsideInteraction)||void 0===t||t.call(n,e),this.props.onCloseRequest&&this.props.onCloseRequest(e))}},{key:"calcPosition",value:function(){var e={},t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=this.props.triggerRect.bounds,o=this.props.dropdownRect.bounds;return r.top+r.height+o.height+20<n?e.top=r.top+r.height||0:e.top=r.top-o.height||0,r.left+o.width+20<t?e.left=r.left||0:r.left+r.width-o.width<0?e.left=t/2-o.width/2:e.left=r.left+r.width-o.width||0,e}},{key:"render",value:function(){var e=this.props.openEvent?{left:this.props.openEvent.clientX,top:this.props.openEvent.clientY}:this.calcPosition();return Y.a.createPortal(Object(re.jsx)("div",{ref:this.refDropdown,style:e,className:td.a.droppedBox,children:this.props.children}),document.getElementById("dropdown-portal"))}}]),n}(H.a.Component),Object($.a)(Nl.prototype,"handleMaybeClose",[Vl],Object.getOwnPropertyDescriptor(Nl.prototype,"handleMaybeClose"),Nl.prototype),Nl),rd=(Bl=c.action.bound,Ul=c.action.bound,Gl=c.action.bound,Object(K.observer)((Hl=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refMeasTrigger=function(t){return e.elmMeasTrigger=t},e.elmMeasTrigger=null,e.refMeasDropdown=function(t){return e.elmMeasDropdown=t},e.elmMeasDropdown=null,Object(de.a)(e,"_isDropped",zl,Object(pe.a)(e)),e.openEvent=void 0,e}return Object(Q.a)(n,[{key:"isDropped",get:function(){return this._isDropped},set:function(e){window.localStorage.getItem("debugKeepDropdownOpen")&&!e||(this._isDropped=e)}},{key:"setDropped",value:function(e,t){null===t||void 0===t||t.persist(),this.openEvent=t,!this.isDropped&&e?(this.isDropped=e,this.reMeasure(),this.props.onDroppedDown&&this.props.onDroppedDown()):this.isDropped&&!e&&(this.isDropped=e,this.props.onDroppedUp&&this.props.onDroppedUp())}},{key:"windowMouseWheel",value:function(e){this.setDropped(!1)}},{key:"reMeasure",value:function(){this.elmMeasTrigger&&this.elmMeasTrigger.measure()}},{key:"componentDidUpdate",value:function(){this.isDropped&&this.elmMeasDropdown&&this.elmMeasDropdown.measure()}},{key:"render",value:function(){var e=this;return e.isDropped,Object(re.jsx)(ve.default,{bounds:!0,ref:this.refMeasTrigger,children:function(t){var n=t.measureRef,r=t.contentRect;t.measure;return Object(re.jsx)(ve.default,{bounds:!0,ref:e.refMeasDropdown,children:function(t){var o=t.measureRef,i=t.contentRect;t.measure;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)("div",{className:td.a.dropdownerContainer+(e.props.className?" ".concat(e.props.className):""),style:e.props.style,onMouseDown:e.props.onContainerMouseDown,children:[e.props.trigger({refTrigger:n,measure:e.reMeasure,setDropped:e.setDropped,isDropped:e.isDropped}),e.isDropped&&Object(re.jsx)(nd,{openEvent:e.openEvent,triggerRect:r,dropdownRect:i,dropdownRef:o,onCloseRequest:function(){var t,n;e.setDropped(!1),null===(t=(n=e.props).onDroppedUp)||void 0===t||t.call(n)},onOutsideInteraction:e.props.onOutsideInteraction,children:e.props.content({setDropped:e.setDropped})})]})}})}})}})}}]),n}(H.a.Component),zl=Object($.a)(Hl.prototype,"_isDropped",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Hl.prototype,"setDropped",[Bl],Object.getOwnPropertyDescriptor(Hl.prototype,"setDropped"),Hl.prototype),Object($.a)(Hl.prototype,"windowMouseWheel",[Ul],Object.getOwnPropertyDescriptor(Hl.prototype,"windowMouseWheel"),Hl.prototype),Object($.a)(Hl.prototype,"reMeasure",[Gl],Object.getOwnPropertyDescriptor(Hl.prototype,"reMeasure"),Hl.prototype),Wl=Hl))||Wl),od=n(242),id=n.n(od),ad=function(e){return Object(re.jsx)("div",{className:ne()(id.a.root,"dataViewHeader",{isVisible:e.isVisible}),children:Object(re.jsx)("div",{ref:e.domRef,className:id.a.inner,children:e.children})})},sd=n(355),cd=n.n(sd),ud=n(191),ld=n.n(ud),dd=function(e){return Object(re.jsx)("button",{title:e.title,ref:e.domRef,className:ne()(e.disabled?ld.a.disabled:ld.a.enabled,ld.a.root,{hidden:e.isHidden}),onClick:e.onClick,disabled:e.disabled,children:e.children})};function pd(e){return Ut(e).isEnabled}var hd,fd,bd,vd,yd,gd=n(356),md=n.n(gd),wd=function(e){return Object(re.jsx)("div",{className:md.a.root,children:e.children})},Od=n(243),jd=n.n(Od),kd=function(e){return Object(re.jsx)("div",{id:e.id,onClick:e.onClick,className:ne()(jd.a.root,e.isDisabled?"isDisabled":e.isSelected?jd.a.isSelected:"",e.className,"dropdownItem"),children:e.children})},xd=function(e){return Object(re.jsx)("div",{onClick:e.onClick,children:e.children})},Cd=new ps,Id={onActionClick:function(e){return Object(c.flow)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Cd.runGenerator(o.a.mark((function t(){var n,i,a,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.isEnabled){t.next=2;break}return t.abrupt("return");case 2:Be(e).formFocusManager.stopAutoFocus(),n=Ae(e),i=ln(e),a=En(e),s=Vn(e),t.t0=r.mode,t.next=t.t0===At.Always?10:t.t0===At.ActiveRecord?12:t.t0===At.MultipleCheckboxes?15:18;break;case 10:return t.delegateYield(n.onExecuteAction(i,a,r,[]),"t1",11);case 11:case 14:case 17:return t.abrupt("break",18);case 12:if(!s){t.next=14;break}return t.delegateYield(n.onExecuteAction(i,a,r,[s]),"t2",14);case 15:return c=Qe.getSelectedRowIds(e),t.delegateYield(n.onExecuteAction(i,a,r,Array.from(c)),"t3",17);case 18:case"end":return t.stop()}}),t)}))),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}},Sd={onCloseClick:function(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Ae(e),t.delegateYield(r.onWorkflowCloseClick(n),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))},onRepeatClick:function(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Ae(e),t.delegateYield(r.onWorkflowRepeatClick(n),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}},Dd=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"renderActions",value:function(){var e=this;return this.props.actions.map((function(t,n){return e.renderAction(t,e.props.actions)}))}},{key:"renderAction",value:function(e,t){if(e.type===Lt.Dropdown){var n=t.filter((function(t){return t.groupId===e.id}));return Object(re.jsx)(rd,{style:{width:"auto"},trigger:function(t){var n=t.refTrigger,r=t.setDropped;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(dd,{title:e.caption,disabled:!pd(e),onClick:function(){return r(!0)},domRef:n,children:e.caption})}},e.id)},content:function(){return Object(re.jsx)(wd,{children:n.map((function(e){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(kd,{isDisabled:!pd(e),children:Object(re.jsx)(xd,{onClick:function(t){return Id.onActionClick(e)(t,e)},children:e.caption})})}},e.id)}))})}})}return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(dd,{title:e.caption,onClick:function(t){return Id.onActionClick(e)(t,e)},disabled:!pd(e),children:e.caption})}},e.id)}},{key:"render",value:function(){return Object(re.jsx)("div",{className:cd.a.root,children:this.renderActions()})}}]),n}(H.a.Component),Rd=n(357),Td=n.n(Rd),_d=function(e){return Object(re.jsx)("div",{className:ne()(Td.a.root,e.className,{isHidden:e.isHidden,noDivider:e.noDivider,grovable:e.grovable,noShrink:e.noShrink}),ref:e.domRef,children:e.children})},Pd=n(71),Fd=n.n(Pd),Md=Object(K.observer)((fd=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"filterName",bd,Object(pe.a)(e)),Object(de.a)(e,"isGlobal",vd,Object(pe.a)(e)),e.refInput=H.a.createRef(),e}return Object(Q.a)(n,[{key:"onNameChanged",value:function(e){this.filterName=e.target.value}},{key:"onIsGlobalClicked",value:function(e){this.isGlobal=e.target.checked}},{key:"componentDidMount",value:function(){var e;null===(e=this.refInput.current)||void 0===e||e.focus()}},{key:"onKeydown",value:function(e){"Enter"===e.key&&this.props.onOkClick(this.filterName,this.isGlobal)}},{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:bt("New Filter","new_filter_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,onClick:function(){return e.props.onOkClick(e.filterName,e.isGlobal)},children:bt("Ok","button_ok")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:Object(re.jsxs)("div",{className:Fd.a.inpuContainer,children:[Object(re.jsxs)("div",{className:Fd.a.row,children:[Object(re.jsx)("div",{className:Fd.a.label,children:bt("Name:","new_filter_name")}),Object(re.jsx)("input",{ref:this.refInput,className:Fd.a.textInput,value:this.filterName,onChange:function(t){return e.onNameChanged(t)},onKeyDown:function(t){return e.onKeydown(t)}})]}),Object(re.jsxs)("div",{className:Fd.a.row,children:[Object(re.jsx)("div",{className:Fd.a.label,children:bt("Global:","new_filter_global")}),Object(re.jsx)("input",{className:Fd.a.chcekBoxinput,type:"checkbox",checked:this.isGlobal,onChange:function(t){return e.onIsGlobalClicked(t)}})]})]})})})}}]),n}(H.a.Component),bd=Object($.a)(fd.prototype,"filterName",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vd=Object($.a)(fd.prototype,"isGlobal",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hd=fd))||hd;var Ld=Object(K.observer)(yd=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).filterManager=void 0,r.filterManager=It(e.ctx).filterGroupManager,r}return Object(Q.a)(n,[{key:"onDropItemClick",value:function(e){this.filterManager.setFilterGroup(e)}},{key:"onSaveFilterClick",value:function(){var e=this,t=Rn(Ae(this.props.ctx),"",Object(re.jsx)(Md,{onOkClick:function(n,r){In({ctx:e.filterManager,action:function(){return e.filterManager.saveActiveFiltersAsNewFilterGroup(n,r)}}),t()},onCancelClick:function(){t()}}))}},{key:"render",value:function(){var e,t=this,n=null!==(e=this.filterManager.filterGroups)&&void 0!==e?e:[];return Object(re.jsx)(rd,{trigger:function(e){var t=e.refTrigger,n=e.setDropped;return Object(re.jsx)(qO,{refDom:t,onMouseDown:function(){return n(!0)},isActive:!1,children:Object(re.jsx)("i",{className:"fas fa-caret-down"})})},content:function(e){var r=e.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{isDisabled:t.filterManager.filtersHidden,onClick:function(e){r(!1),In({ctx:t.filterManager,action:function(){return t.filterManager.clearFiltersAndClose(e)}})},children:bt("Cancel and Hide Filter","filter_menu_filter_off")}),Object(re.jsx)(kd,{isDisabled:t.filterManager.noFilterActive,onClick:function(e){r(!1),In({ctx:t.filterManager,action:function(){return t.filterManager.setSelectedFilterGroupAsDefault()}})},children:bt("Remember The Current Filter","filter_menu_set_default_filter")}),Object(re.jsx)(kd,{isDisabled:!t.filterManager.defaultFilter||t.filterManager.filtersHidden,onClick:function(e){r(!1),In({ctx:t.filterManager,action:function(){return t.filterManager.resetDefaultFilterGroup()}})},children:bt("Cancel Default Filter","filter_menu_cancel_default_filter")}),Object(re.jsx)(kd,{isDisabled:t.filterManager.noFilterActive,onClick:function(e){r(!1),t.onSaveFilterClick()},children:bt("Save Current Filter","filter_menu_save_filter")}),Object(re.jsx)(kd,{isDisabled:!t.filterManager.selectedFilterGroup||t.filterManager.isSelectedFilterGroupDefault,onClick:function(e){r(!1),In({ctx:t.filterManager,action:function(){return t.filterManager.deleteFilterGroup()}})},children:bt("Delete","filter_menu_delete")}),Object(re.jsx)(kd,{isDisabled:!t.filterManager.selectedFilterGroup||t.filterManager.isSelectedFilterGroupDefault,onClick:function(e){r(!1),In({ctx:t.filterManager,action:function(){return t.filterManager.cancelSelectedFilter()}})},children:bt("Cancel Filter","filter_menu_cancel")}),n.map((function(e){var n;return Object(re.jsx)(kd,{isDisabled:!1,isSelected:(null===(n=t.filterManager.selectedFilterGroup)||void 0===n?void 0:n.id)===e.id,onClick:function(n){r(!1),In({ctx:t.filterManager,action:function(){return t.onDropItemClick(e)}})},children:e.name},e.id)}))]})}})}}]),n}(H.a.Component))||yd;function Ed(e){return Be(e).dataTable.addedRowPositionLocked}function Ad(e){return It(e).columnConfigurationModel}function Vd(e){return Nd.apply(this,arguments)}function Nd(){return(Nd=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee(t).isDirty){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,Ou(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bd=n(78),Ud=n.n(Bd),Gd=n(114);function Wd(){var e,t=!1;function n(){if(t)return e;throw new Error("Value not set.")}return n.get=n,n.set=function(n){if(t)throw new Error("Value already set.");e=n,t=!0},n.clear=function(){e=void 0,t=!1},n}function Hd(e){var t,n=!1;function r(){return n?t:(n=!0,t=e())}return r.get=r,r.clear=function(){t=void 0,n=!1},r}var zd=[],Yd=[],Kd=[],qd=Wd();zd.push((function(){return qd.clear()}));var Qd=Wd();zd.push((function(){return Qd.clear()}));var Xd=Wd();Yd.push((function(){return Xd.clear()}));var Zd=!1;function $d(e){Zd=e}var Jd=function(){return bi(qd())},ep=Wd();Kd.push((function(){return ep.clear()}));var tp=Wd();zd.push((function(){return tp.clear()}));var np=Wd();zd.push((function(){return np.clear()}));var rp=Wd();zd.push((function(){return rp.clear()}));var op=Wd();zd.push((function(){return op.clear()}));var ip=Wd();zd.push((function(){return ip.clear()}));var ap=op,sp=ip,cp=Hd((function(){return wp().slice(-1)[0].right}));zd.push((function(){return cp.clear()}));var up=Hd((function(){return jp()*lp()}));zd.push((function(){return up.clear()}));var lp=Wd();zd.push((function(){return lp.clear()}));var dp=Wd();zd.push((function(){return dp.clear()}));var pp=Wd();zd.push((function(){return pp.clear()}));var hp=function(){return pp().length};function fp(){return tp()[Xd()]}function bp(){return fp()}var vp=Wd();zd.push(vp.clear);var yp=Wd();zd.push(yp.clear);var gp=Wd();zd.push(gp.clear);var mp=function(){return vp()?yp()+1:yp()},wp=Wd();zd.push(wp.clear);var Op=Wd();zd.push(Op.clear);var jp=function(){return tp().length},kp=Wd();zd.push((function(){kp.clear()}));var xp=Wd();zd.push((function(){xp.clear()}));var Cp=Wd();zd.push(Cp.clear);var Ip=function(){return It(qd())},Sp=function(){return ur(Ip())},Dp=function(){return Sp().getRowId(bp())};function Rp(e,t,n){var r=to(e,t),o=r?r.columns.get(n):void 0,i=o?o.allowRead:void 0;return void 0===i||i}function Tp(e,t){var n=to(e,t),r=n?n.foregroundColor:void 0;return r||(n?n.foregroundColor:void 0)}function _p(e,t){if(void 0!==t){var n=to(e,t);return n?n.backgroundColor:void 0}}var Pp=document.createElement("canvas").getContext("2d");var Fp=function(){return(window.devicePixelRatio||1)/(Pp.webkitBackingStorePixelRatio||Pp.mozBackingStorePixelRatio||Pp.msBackingStorePixelRatio||Pp.oBackingStorePixelRatio||Pp.backingStorePixelRatio||1)};function Mp(e,t){if(void 0!==e){var n=parseInt(e.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,i=n>>16,a=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-s)*o)+s)).toString(16).slice(1)}}function Lp(e){kp().push(e)}function Ep(e){var t=Be(e).modelInstanceId,n=window;n.tableDebugMonitor&&n.tableDebugMonitor[t]&&(n.tableDebugMonitor[t].data=[])}var Ap=ge.a.debounce((function(e){var t=Be(e).modelInstanceId,n=window;Vp(n,t),n.tableDebugMonitor[t].rendered=!0}),200);function Vp(e,t){e.tableDebugMonitor||(e.tableDebugMonitor={}),e.tableDebugMonitor[t]||(e.tableDebugMonitor[t]={data:[],rendered:!1})}function Np(e,t,n,r){if(null!=t){var o=Be(e).modelInstanceId,i=window;Vp(i,o),i.tableDebugMonitor[o].data[n]||(i.tableDebugMonitor[o].data[n]={}),i.tableDebugMonitor[o].data[n][t]=r}}var Bp=function e(t,n,r){if(Object(q.a)(this,e),this.paddingRight=void 0,this.paddingLeft=void 0,this.alignment=void 0,null===r||void 0===r?void 0:r.textAlign)if("center"===r.textAlign)this.paddingRight=0,this.paddingLeft=0,this.alignment="center";else if("left"===r.textAlign)this.paddingRight=Jh,this.paddingLeft=Qp(t),this.alignment="left";else{if("right"!==r.textAlign)throw new Error("textAlign ".concat(r.textAlign," not implemented"));this.paddingRight=Zh,this.paddingLeft=$h,this.alignment="right"}else if("Number"===n)this.paddingRight=Zh,this.paddingLeft=$h,this.alignment="right";else this.paddingRight=Jh,this.paddingLeft=Qp(t),this.alignment="left"};function Up(e){var t=Vh(),n=t.column,r=new Bp(0===ep(),n,t.style);switch(n){case"CheckBox":return new Wp(e);case"Date":return new Hp(e);case"TagInput":return new zp(e);case"ComboBox":case"Checklist":return new Yp(e);default:return new qp(e,t.style,r);case"Image":return new Kp(e);case"Color":return new Gp(e)}}var Gp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t,this.cellText=""}return Object(Q.a)(e,[{key:"drawCellText",value:function(){this.ctx2d.fillStyle=qr(Uh())||"black",this.ctx2d.fillRect((Th()+3)*Fp(),(Lh()+3)*Fp(),(Fh()-6)*Fp(),(Eh()-6)*Fp())}}]),e}(),Wp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t}return Object(Q.a)(e,[{key:"cellText",get:function(){return Nh()}},{key:"drawCellText",value:function(){this.ctx2d.font="".concat(of*Fp(),'px "Font Awesome 5 Free"'),this.ctx2d.textAlign="center",this.ctx2d.textBaseline="middle",this.ctx2d.fillText(this.cellText?"\uf14a":"\uf0c8",Fp()*Zp(),Fp()*(Lh()+tf-5)),Np(qd(),Ah(),Xd(),this.cellText)}}]),e}(),Hp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t}return Object(Q.a)(e,[{key:"cellText",get:function(){if(null!==Nh()&&""!==Nh()){var e=Qn()(Nh());if(!e.isValid())return;return e.format(Vh().formatterPattern)}}},{key:"drawCellText",value:function(){var e=this.cellText;e&&this.ctx2d.fillText(e,Fp()*(Th()+Qp()),Fp()*(Lh()+tf)),Np(qd(),Ah(),Xd(),e)}}]),e}(),zp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t}return Object(Q.a)(e,[{key:"cellText",get:function(){return Nh()}},{key:"drawCellText",value:function(){null!==this.cellText&&this.ctx2d.fillText(""+this.cellText,Fp()*(Th()+Qp()),Fp()*(Lh()+tf)),Np(qd(),Ah(),Xd(),this.cellText)}}]),e}(),Yp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t}return Object(Q.a)(e,[{key:"cellText",get:function(){return Nh()}},{key:"drawCellText",value:function(){var e=!1,t=Vh();t.isLookup&&t.lookupEngine&&(e=Xe.isLinkToForm(Vh())),e&&(this.ctx2d.save(),this.ctx2d.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--foreground1")),null!==Nh()&&this.ctx2d.fillText(""+Nh(),Fp()*(Th()+Qp()),Fp()*(Lh()+tf)),Np(qd(),Ah(),Xd(),Nh()),e&&this.ctx2d.restore()}}]),e}(),Kp=function(){function e(t){Object(q.a)(this,e),this.ctx2d=t}return Object(Q.a)(e,[{key:"cellText",get:function(){return Nh()}},{key:"drawCellText",value:function(){var e=Uh();if(e){var t=Ee(qd()).pictureCache.getImage(e);if(t&&t.complete){var n=Vh(),r=t.width,o=t.height,i=n.width/r,a=n.height/o,s=0,c=(s=Math.abs(1-i)<Math.abs(1-a)?i:a)*r,u=s*o;this.ctx2d.drawImage(t,Fp()*(Zp()-.5*c),Fp()*(Lh()+lp()/2-.5*u),Fp()*c,Fp()*u)}}}}]),e}(),qp=function(){function e(t,n,r){Object(q.a)(this,e),this.ctx2d=t,this.style=n,this.cellAlignment=r}return Object(Q.a)(e,[{key:"cellText",get:function(){return Nh()}},{key:"drawCellText",value:function(){if(null!==Nh())if(Vh().isPassword)this.ctx2d.fillText("*******",Zh*Fp(),15*Fp());else{this.ctx2d.font=function(e,t){if("bold"===(null===e||void 0===e?void 0:e.fontWeight))return"bold "+t.font;return t.font}(this.style,this.ctx2d);var e="center"===(t=this.cellAlignment).alignment?Zp():"right"===t.alignment?Th()+Fh()-t.paddingRight:Th()+t.paddingLeft;this.ctx2d.textAlign=this.cellAlignment.alignment,this.ctx2d.fillText(""+Nh(),Fp()*e,Fp()*(Lh()+tf))}var t;Np(qd(),Ah(),Xd(),Nh())}}]),e}();function Qp(e){return void 0===e&&(e=0===ep()),e?ef:$h}function Xp(){return Jh}function Zp(){return Th()+Fh()/2}function $p(){return dp().map((function(e){return gp().get(e)||100}))}function Jp(){return dp().map((function(e){return function(){Hh(),function(){var e=Qd(),t=qd(),n=Vn(Ip()),r=Dp()===n,o={columnLeft:Th(),columnWidth:Fh(),rowTop:Lh(),rowHeight:Eh()};It(t).setCellRectangle(Xd(),ep(),o),0===ep()&&(It(t).firstColumn=Vh());e.fillStyle=function(){var e=Ip().columnOrderChangingSourceId===Vh().id,t=Vn(Ip()),n=Dp()===t,r=_p(Ip(),Dp());return e?getComputedStyle(document.documentElement).getPropertyValue("--background3"):n?r?Mp(r,-.1):getComputedStyle(document.documentElement).getPropertyValue("--foreground5"):r||(Xd()%2===1?getComputedStyle(document.documentElement).getPropertyValue("--background2"):getComputedStyle(document.documentElement).getPropertyValue("--background1"))}(),e.fillRect(Fp()*Th(),Fp()*Lh(),Fp()*Fh(),Fp()*(Eh()-1)),r&&Yh(af)}(),function(){var e=Qd(),t=!!Gh(),n=Vh(),r=Vn(Ip()),o=Dp()===r,i=!1;n.isLookup&&n.lookupEngine&&(i=Wh());if(t&&!i){var a=0===ep()&&o?af/2:0,s=o?sf:0;e.save(),e.fillStyle="red",e.beginPath(),e.moveTo(a+Th()*Fp(),s+Lh()*Fp()),e.lineTo((a+Th()+5)*Fp(),(Lh()+.5*Eh())*Fp()),e.lineTo(a+Th()*Fp(),(Lh()+Eh()-s)*Fp()),e.fill(),e.restore()}}(),zh(),function(){var e=Qd(),t=Vh(),n=!Rp(Ip(),Dp(),t.id),r=Tp(Ip(),Dp()),o=!1;t.isLookup&&t.lookupEngine&&(o=Wh());if(e.font="".concat(nf*Fp(),'px "IBM Plex Sans", sans-serif'),n)return;o?(e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--background6"),e.fillText("Loading...",Fp()*(Th()+Qp()),Fp()*(Lh()+tf))):(e.fillStyle=r||"black",Up(e).drawCellText())}(),function(e){var t=qd(),n=bp(),r=Vh(),i=eh();if("CheckBox"===r.column){var a=function(){var e=of;return{x:Zp()-e/2,y:Lh()+tf-4-e/2,width:e,height:e}}();Lp({x:a.x,y:a.y,w:a.width,h:a.height,handler:function(r){Object(c.flow)(o.a.mark((function i(){var a;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.isDouble){o.next=8;break}if(It(t).setEditing(!1),!(a=Be(t).firstEnabledDefaultAction)){o.next=6;break}return o.next=6,Id.onActionClick(t)(r,a);case 6:o.next=9;break;case 8:return o.delegateYield(It(t).onCellClick(r,n,e,!0),"t0",9);case 9:case"end":return o.stop()}}),i)})))()}})}Lp({x:i.x,y:i.y,w:i.width,h:i.height,handler:function(r){Object(c.flow)(o.a.mark((function i(){var a;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.isDouble){o.next=8;break}if(It(t).setEditing(!1),!(a=Be(t).firstEnabledDefaultAction)||!a.isEnabled){o.next=6;break}return o.next=6,Id.onActionClick(t)(r,a);case 6:o.next=9;break;case 8:return o.delegateYield(It(t).onCellClick(r,n,e,!1),"t0",9);case 9:case"end":return o.stop()}}),i)})))()}})}(e),function(e){var t=Qd(),n=Vh(),r=Up(t),o=eh(),i=Fh();if("CheckBox"===n.column||"Image"===n.column||"Blob"===n.column)return;if(function(e){var t;return null===(t=_e(e).portalSettings)||void 0===t?void 0:t.showToolTipsForMemoFieldsOnly}(n)&&("Text"!==n.column||!n.multiline))return;var a=r.cellText,s=t.measureText(a).width/Fp(),c=i-Qp()-Xp()<s,u=It(qd());l={x:o.x,y:o.y,w:o.width,h:o.height,handler:function(e){u.currentTooltipText=c?a:void 0}},xp().push(l);var l}()}}))}function eh(){return{x:_h(),y:Lh(),width:Ph(),height:Eh()}}function th(e,t){return Be(e).hasSelectedRowId(t)}function nh(e){return o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Be(e).setSelectedState(n,r);case 1:case"end":return t.stop()}}),t)}))}function rh(){return vp()?[function(){Hh(),ah();var e=Qd();e.fillStyle="black",e.font="".concat(Fp()*of,'px "Font Awesome 5 Free"');var t=Be(qd()).isSelected(Sp().getRowId(bp()));e.fillText(t?"\uf14a":"\uf0c8",Fp()*(Th()+rf),Fp()*(Lh()+tf)),function(){var e=qd(),t=bp();Lp({x:_h(),y:Lh(),w:Ph(),h:Eh(),handler:function(n){Object(c.flow)(o.a.mark((function n(){var r,i,a,s,c,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!1,i=ur(e),a=i.getRowId(t),!(s=ra(e))){n.next=15;break}if(!(c=pi(e,s))){n.next=13;break}return r=!i.getCellValueByDataSourceField(t,c),i.setDirtyValue(t,s,r),n.delegateYield(Ae(e).onFlushData(),"t0",10);case 10:return u=i.getRowById(a),r=i.getCellValueByDataSourceField(u,c),n.delegateYield(nh(e)(a,r),"t1",13);case 13:n.next=17;break;case 15:return r=!th(e,a),n.delegateYield(nh(e)(a,r),"t2",17);case 17:case"end":return n.stop()}}),n)})))()}})}()}]:[]}function oh(){return vp()?[20]:[]}function ih(){return vp()?[function(){Hh(),ah()}]:[]}function ah(){var e=Qd(),t=Vn(Ip()),n=t&&Dp()===t;e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--background1"),e.fillRect(Fp()*Th(),Fp()*Lh(),Fp()*Fh(),Fp()*Eh()),n&&Yh(af/2)}function sh(){return ch(fp())?dp().map((function(e){return function(){return Hh(),zh(),void function(){var e=Qd();if(Ah()){var t=!Rp(Ip(),Dp(),Vh().id),n=fp();if(!t&&ch(n)){var r=n;if(r.sourceGroup.aggregations){var o=r.sourceGroup.aggregations.find((function(e){return e.columnId===Vh().id}));o&&(e.font="".concat(nf*Fp(),'px "IBM Plex Sans", sans-serif'),e.fillStyle="black",e.textAlign="right",e.fillText(rl(o,Vh()),Fp()*(Th()+Fh()-Zh),Fp()*(Lh()+tf)))}}}}()}})):[]}function ch(e){return void 0!==e.groupLevel}function uh(){return ch(fp())}function lh(e){return Object(c.flow)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(lr(e).loadChildren(r.sourceGroup),"t0",1);case 1:case"end":return t.stop()}}),t)})))}function dh(){return pp().map((function(){return 20}))}function ph(){return pp().map((function(e){return function(){bh()}}))}function hh(){var e=fp();if(ch(e)){for(var t=hp(),n=[],r=0;r<t;r++){if(!(r<e.groupLevel)){n.push(cp()-wp()[r].left);break}n.push(20)}return n}return[]}function fh(){var e=fp();if(ch(e)){for(var t=hp(),n=[],r=0;r<t;r++){if(!(r<e.groupLevel)){n.push(vh);break}n.push(bh)}return n}return[]}function bh(){Hh(),function(){var e=Qd();e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--background1"),e.fillRect(Fp()*Th(),Fp()*Lh(),Fp()*Fh(),Fp()*Eh());var t=Vn(Ip());Dp()===t&&vp()&&function(){var e=Qd();e.beginPath(),e.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--foreground1"),e.lineWidth=sf*Fp(),e.moveTo(Fp()*Th(),Fp()*(Lh()+1.5)),e.lineTo(Fp()*Th()+Fp()*Fh(),Fp()*(Lh()+1.5)),e.moveTo(Fp()*Th(),Fp()*(Lh()+Eh()-1.5)),e.lineTo(Fp()*Th()+Fp()*Fh(),Fp()*(Lh()+Eh()-1.5)),e.stroke()}()}()}function vh(){Hh(),function(){var e=Qd();e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--background4"),e.fillRect(Fp()*Th(),Fp()*Lh(),Fp()*Fh(),Fp()*Eh())}();var e,t=Qd(),n=fp();if(ch(n)){var r=n;t.fillStyle="black",t.font="".concat(15*Fp(),'px "Font Awesome 5 Free"');var i=n.isExpanded;t.fillText(i?"\uf146":"\uf0fe",Fp()*(Th()+6),Fp()*(Lh()+tf+1)),t.font="".concat(Fp()*nf,'px "IBM Plex Sans", Arial, sans-serif'),t.fillText("".concat(n.columnLabel," : ").concat((e=n.columnValue,void 0===e||null===e?"<empty>":e)," [").concat(n.sourceGroup.rowCount,"]"),Fp()*(Th()+$h+20),Fp()*(Lh()+tf));var a=qd();Lp({x:Th(),y:Lh(),w:20,h:20,handler:function(e){Object(c.flow)(o.a.mark((function t(){var i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.sourceGroup.isExpanded||0!==n.sourceGroup.childGroups.length){t.next=3;break}return t.next=3,lh(a)(e,r);case 3:i=lr(a).allGroups,gh(n.sourceGroup,i,a)&&(s=[n.sourceGroup].concat(Object(gt.a)(n.sourceGroup.allParents)),i.filter((function(e){return!s.includes(e)&&e.isExpanded})).forEach((function(e){return e.isExpanded=!1}))),n.sourceGroup.isExpanded=!n.sourceGroup.isExpanded,yh(a,n);case 7:case"end":return t.stop()}}),t)})))()}})}}function yh(e,t){var n=Be(e);!t.sourceGroup.isExpanded&&n.selectedRowId&&(!!t.sourceGroup.getRowById(n.selectedRowId)&&(n.selectedRowId=void 0))}function gh(e,t,n){var r=Array.from(t).remove(e);return Co(n,void 0)&&r.some((function(e){return e.isInfinitelyScrolled}))}var mh=Hd((function(){return[].concat(Object(gt.a)(vp()?[20]:[]),Object(gt.a)(dh()),Object(gt.a)($p()))}));Yd.push(mh.clear);var wh=Hd((function(){return[].concat(Object(gt.a)(rh()),Object(gt.a)(ph()),Object(gt.a)(Jp()))}));Yd.push(wh.clear);var Oh=Hd((function(){return[].concat(Object(gt.a)(rh().map((function(e){return null}))),Object(gt.a)(ph().map((function(e){return null}))),Object(gt.a)(dp()))}));function jh(){return e=fp(),Array.isArray(e);var e}zd.push(Oh.clear);var kh=0;function xh(e){kh=e}function Ch(){return kh}function Ih(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=n,i=e[r],a=o,s=i;if(vp()&&op()>o)if(r>0){var c=e[0];s=i-((a=op()+c)-o)}else 0===r&&(a=op());var u=n+=i;t.push({left:o,width:i,right:u,leftVisible:a,widthVisible:s})}return t}var Sh=Hd((function(){return jh()?Ih(mh()):uh()?Ih([[].concat(Object(gt.a)(oh()),Object(gt.a)(hh())),[].concat(Object(gt.a)(oh()),Object(gt.a)(dh()),Object(gt.a)($p()))][Ch()]):[]}));Yd.push((function(){return Sh.clear()}));var Dh=Hd((function(){return jh()?wh():uh()?[[].concat(Object(gt.a)(ih()),Object(gt.a)(fh())),[].concat(Object(gt.a)(ih().map((function(e){return function(){}}))),Object(gt.a)(sh()))][Ch()]:[]}));Yd.push(Dh.clear);var Rh=n(360);function Th(){return Sh()[ep()].left}function _h(){return Sh()[ep()].leftVisible}function Ph(){return Sh()[ep()].widthVisible}function Fh(){return Sh()[ep()].width}function Mh(){return Sh()[ep()].right}function Lh(){return Xd()*lp()}function Eh(){return lp()}function Ah(){return Oh()[ep()]}var Vh=function(){var e=Op().get(Ah());return"Polymorph"===e.column?e.getPolymophicProperty(fp()):e},Nh=Hd((function(){var e=Uh(),t=Sp().resolveCellText(Vh(),e);return t&&Vh().multiline&&(t=Object(Rh.stripHtml)(t).result),Array.isArray(t)&&(t=t.join(", ")),t}));Kd.push((function(){return Nh.clear()}));var Bh=Hd((function(){var e=Uh(),t=Sp().resolveCellText(Vh(),e);return t&&Vh().multiline&&(t=t.split("\n")),t}));Kd.push((function(){return Bh.clear()}));var Uh=Hd((function(){var e=Op().get(Ah());if("Polymorph"===e.column){var t=Vh();return Sp().getCellValue(bp(),t)}return Sp().getCellValue(bp(),e)}));Kd.push((function(){return Uh.clear()}));var Gh=Hd((function(){return Ac(Vh())(bp(),Vh())}));Kd.push((function(){return Gh.clear()}));var Wh=Hd((function(){return Sp().isCellTextResolving(Vh(),Uh())}));function Hh(){Qd().translate(ep()<mp()?0:-Fp()*op(),-Fp()*ip())}function zh(){var e=Qd();e.beginPath(),e.rect(Fp()*(Th()+Qp()),Fp()*Lh(),Fp()*(Fh()-Qp()-Xp()),Fp()*Eh()),e.clip()}function Yh(e){var t=Qd();t.beginPath(),t.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--foreground1"),t.lineWidth=sf*Fp(),t.moveTo(Fp()*Th(),Fp()*(Lh()+1.5)),t.lineTo(Fp()*Th()+Fp()*Fh(),Fp()*(Lh()+1.5)),t.moveTo(Fp()*Th(),Fp()*(Lh()+Eh()-1.5)),t.lineTo(Fp()*Th()+Fp()*Fh(),Fp()*(Lh()+Eh()-1.5)),t.stroke(),ep()===function(){var e=hp();return Jd()&&e++,e}()&&!Jd()&&(t.beginPath(),t.lineWidth=e*Fp(),t.moveTo(Fp()*Th(),Fp()*(Lh()+1.5)),t.lineTo(Fp()*Th(),Fp()*(Lh()+Eh()-1.5)),t.stroke()),Zd||(t.beginPath(),t.lineWidth=sf*Fp(),t.moveTo(Fp()*Mh(),Fp()*(Lh()+1.5)),t.lineTo(Fp()*Mh(),Fp()*(Lh()+Eh()-1.5)),t.stroke(),$d(!0))}Kd.push((function(){return Wh.clear()}));var Kh,qh,Qh,Xh,Zh=15,$h=6,Jh=6,ef=25,tf=17,nf=12,rf=5,of=12,af=8,sf=1,cf=Object(K.observer)((qh=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).columnOptions=void 0,r.configuration=void 0,Object(de.a)(r,"columnWidths",Qh,Object(pe.a)(r)),r.refGrid=H.a.createRef(),r.configuration=r.props.model.columnsConfiguration,r.columnOptions=r.props.model.columnOptions,r}return Object(Q.a)(n,[{key:"render",value:function(){var e=this;return Object(re.jsxs)(xt,{title:bt("Columns","column_config_title"),titleButtons:Object(re.jsx)(Ie.CloseButton,{onClick:this.props.model.onColumnConfCancel}),buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{id:"columnConfigOk",tabIndex:0,onClick:function(t){var n;return null===(n=e.props.model)||void 0===n?void 0:n.onColumnConfigurationSubmit()},children:bt("OK","button_ok")}),Object(re.jsx)("button",{onClick:function(){return e.props.model.onSaveAsClick()},children:bt("Save As...","column_config_save_as")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.model.onColumnConfCancel,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:[Object(re.jsx)("div",{className:Ud.a.columnTable,children:Object(re.jsx)(Gd.a,{children:function(t){var n=t.width,r=t.height;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(Gd.c,{ref:e.refGrid,fixedRowCount:1,cellRenderer:e.renderCell,columnCount:5,rowCount:1+e.props.model.sortedColumnConfigs.length,columnWidth:function(t){var n=t.index;return e.columnWidths[n]},rowHeight:25,width:n,height:r})}})}})}),Object(re.jsxs)("div",{className:Ud.a.lockedColumns,children:[bt("Locked columns count","column_config_locked_columns_count"),Object(re.jsx)("input",{className:Ud.a.lockedColumnsInput,type:"number",min:0,value:""+this.configuration.fixedColumnCount,onChange:this.props.model.handleFixedColumnsCountChange})]})]})}},{key:"getCell",value:function(e,t){var n=this,r=this.props.model.sortedColumnConfigs[e],o=r.isVisible,i=r.propertyId,a=r.aggregationType,s=r.groupingIndex,c=r.timeGroupingUnit,u=this.columnOptions.get(i),l=u.name,d=u.entity,p=u.canGroup,h=u.canAggregate,f=u.modelInstanceId,b=Cc.find((function(e){return e.value===a})),v=Ic.find((function(e){return e.value===c}));switch(t){case 0:return Object(re.jsx)("input",{type:"checkbox",onChange:function(t){return n.props.model.setVisible(e,t.target.checked)},checked:o},"".concat(e,"@").concat(t));case 1:return l;case 2:return Object(re.jsxs)("label",{id:"group_index_"+f,className:Ud.a.checkBox,children:[Object(re.jsx)("input",{id:"group_by_"+f,type:"checkbox",checked:s>0,onChange:function(t){return n.props.model.setGrouping(e,t.target.checked,d)},disabled:!p},"".concat(e,"@").concat(t)),Object(re.jsx)("div",{children:s>0?s:""})]});case 3:return s>0&&"Date"===d?Object(re.jsx)(Ie.SimpleDropdown,{options:Ic,selectedOption:v,onOptionClick:function(t){return n.props.model.setTimeGroupingUnit(e,t.value)},className:Ud.a.dropdown}):"";case 4:return"Currency"!==d&&"Integer"!==d&&"Float"!==d&&"Long"!==d||!h?"":Object(re.jsx)(Ie.SimpleDropdown,{options:Cc,selectedOption:b,onOptionClick:function(t){return n.props.model.setAggregation(e,t.value)},className:Ud.a.dropdown});default:return""}}},{key:"getCellClass",value:function(e){var t=Ud.a.columnTableCell;return 0!==e&&2!==e||(t+=" "+Ud.a.checkBoxCell),t}},{key:"renderCell",value:function(e){var t=this,n=be.a;if(e.rowIndex>0){var r=e.rowIndex%2===0?"even":"odd";return Object(re.jsx)(n,{style:e.style,children:function(){return Object(re.jsx)("div",{style:e.style,className:t.getCellClass(e.columnIndex)+" "+r,children:t.getCell(e.rowIndex-1,e.columnIndex)})}},e.key)}return Object(re.jsx)(n,{style:e.style,children:function(){return Object(re.jsx)(uf,{columnIndex:e.columnIndex,style:e.style,columnWidth:t.columnWidths[e.columnIndex]})}},e.key)}}]),n}(H.a.Component),Qh=Object($.a)(qh.prototype,"columnWidths",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[70,220,110,150,90]}}),Object($.a)(qh.prototype,"renderCell",[Me.bind],Object.getOwnPropertyDescriptor(qh.prototype,"renderCell"),qh.prototype),Kh=qh))||Kh,uf=Object(K.observer)(Xh=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getHeader",value:function(e){switch(e){case 0:return bt("Visible","column_config_visible");case 1:return bt("Name","column_config_name");case 2:return bt("GroupBy","column_config_group_by");case 3:return bt("Grouping Unit","column_config_time_grouping_unit");case 4:return bt("Aggregation","column_config_aggregation");default:return"?"}}},{key:"render",value:function(){return Object(re.jsxs)("div",{style:this.props.style,className:Ud.a.columnTableCell+" header",children:[this.getHeader(this.props.columnIndex),4!==this.props.columnIndex&&Object(re.jsx)("div",{className:Ud.a.columnWidthHandle})]})}}]),n}(H.a.Component))||Xh;function lf(e,t){return Object(c.flow)(o.a.mark((function n(r){var i,a,s,c,u,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i=Be(e).selectedRowId){n.next=4;break}return n.abrupt("return");case 4:return a=ln(e),s=En(e),c=Ae(e),u=Be(e),n.next=10,Vd(u);case 10:if(n.sent){n.next=12;break}return n.abrupt("return");case 12:return t&&(null===(l=u.activateFormView)||void 0===l||l.call(u,{saveNewState:!1})),n.delegateYield(c.onCopyRow(s,a,i),"t0",14);case 14:n.next=20;break;case 16:return n.prev=16,n.t1=n.catch(0),n.delegateYield(yt(e)(n.t1),"t2",19);case 19:throw n.t1;case 20:case"end":return n.stop()}}),n,null,[[0,16]])})))}function df(e,t){return Object(c.flow)(o.a.mark((function n(r){var i,a,s,c,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=ln(e),a=En(e),s=Ae(e),c=Be(e),n.next=7,Vd(c);case 7:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:return t&&(null===(u=c.activateFormView)||void 0===u||u.call(c,{saveNewState:!1})),n.delegateYield(s.onCreateRow(a,i),"t0",11);case 11:n.next=17;break;case 13:return n.prev=13,n.t1=n.catch(0),n.delegateYield(yt(e)(n.t1),"t2",16);case 16:throw n.t1;case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))}function pf(e){return Object(c.flow)(o.a.mark((function t(n){var r,i,a,s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=Be(e),!(i=li(e))){t.next=9;break}return s=ur(e),c=r.entity,u=Ae(e),t.delegateYield(u.onDeleteRow(c,s.getRowId(i),r),"t0",8);case 8:null===(a=It(e))||void 0===a||a.triggerOnFocusTable();case 9:t.next=15;break;case 11:return t.prev=11,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",14);case 14:throw t.t1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))}function hf(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,Be(e).exportToExcel(),t.next=8;break;case 4:return t.prev=4,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",7);case 7:throw t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function ff(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Be(e).moveSelectedRowDown(),t.delegateYield(Ae(e).onFlushData(),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}function bf(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Be(e).moveSelectedRowUp(),t.delegateYield(Ae(e).onFlushData(),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}function vf(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Be(e).selectNextRow(),It(e).scrollToCurrentRow(),Gn(e)||setTimeout((function(){za(e).focusTableIfNeeded()}));case 3:case"end":return t.stop()}}),t)}))}function yf(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Be(e),t.next=4,Vd(r);case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.delegateYield(vf(e)(),"t0",7);case 7:t.next=13;break;case 9:return t.prev=9,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",12);case 12:throw t.t1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))}function gf(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Be(e).selectPrevRow(),It(e).scrollToCurrentRow(),Gn(e)||setTimeout((function(){za(e).focusTableIfNeeded()}));case 3:case"end":return t.stop()}}),t)}))}function mf(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Be(e),t.next=4,Vd(r);case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.delegateYield(gf(e)(),"t0",7);case 7:t.next=13;break;case 9:return t.prev=9,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",12);case 12:throw t.t1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))}function wf(e){return Object(c.flow)(o.a.mark((function t(n){var r,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Hn(e),i=un(e),!(a=Vn(e))){t.next=5;break}return t.delegateYield(ca(e).onOpenRecordInfoClick(n,r,i,a),"t0",5);case 5:case"end":return t.stop()}}),t)})))}function Of(e){var t=la(e).activeTableConfiguration.name;return t?"".concat(Be(e).name," [").concat(t,"]"):Be(e).name}var jf=function(){function e(t,n){Object(q.a)(this,e),this.saveConfiguration=t,this.getActivePerspectiveTag=n}return Object(Q.a)(e,[{key:"anounceActivePerspective",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.saveConfiguration(t),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"activePerspective",get:function(){return this.getActivePerspectiveTag()}}]),e}(),kf=Ml("IViewConfiguration");function xf(e){var t=Al(Be(e)),n=t&&t.resolve(kf);return null===n||void 0===n?void 0:n.activePerspective}function Cf(e){var t=Be(e);if(xf(e)===ci.Map)return!1;var n=function(e){var t,n=Be(e),r=n.bindingParent;if(null===r||void 0===r?void 0:r.selectedRowId)return null===(t=to(r,r.selectedRowId))||void 0===t?void 0:t.relations.find((function(e){return e.name===n.entity}))}(e);return void 0!==(null===n||void 0===n?void 0:n.allowCreate)?t.showAddButton&&n.allowCreate:t.showAddButton}function If(e){return Cf(e)}function Sf(e){var t=Be(e);if(xf(e)===ci.Map)return!1;if(t.selectedRowId){var n=to(e,t.selectedRowId);if(void 0!==(null===n||void 0===n?void 0:n.allowDelete))return t.showDeleteButton&&n.allowDelete}return t.showDeleteButton}function Df(e){var t=Be(e).orderProperty,n=Vn(e);return!!t&&!(null===t||void 0===t?void 0:t.readOnly)&&n&&Mc(e,n,null===t||void 0===t?void 0:t.id)}function Rf(e){return Be(e).panelViewActions}function Tf(e){return vi(e).isGrouping?lr(e).topLevelGroups.reduce((function(e,t){return e+t.rowCount}),0):Co(e)?Be(e).totalRowCount:Be(e).dataTable.rows.length}function _f(e){return nr(e).isFilterControlsDisplayed}function Pf(e){return o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=Be(e)).infiniteScrollLoader){t.next=3;break}return t.delegateYield(n.infiniteScrollLoader.loadFirstPage(),"t0",3);case 3:n.selectFirstRow(),It(e).scrollToCurrentRow(),Gn(e)||setTimeout((function(){za(e).focusTableIfNeeded()}));case 6:case"end":return t.stop()}}),t)}))}function Ff(e){return o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=Be(e)).infiniteScrollLoader){t.next=3;break}return t.delegateYield(n.infiniteScrollLoader.loadLastPage(),"t0",3);case 3:n.selectLastRow(),It(e).scrollToCurrentRow(),Gn(e)||setTimeout((function(){za(e).focusTableIfNeeded()}));case 6:case"end":return t.stop()}}),t)}))}function Mf(e){return Be(e).panelMenuActions}var Lf,Ef,Af,Vf,Nf=n(361),Bf=n.n(Nf);function Uf(){return Object(re.jsx)("div",{className:Bf.a.root})}function Gf(e){var t=Be(e);return 0===t.parentBindings.length||t.parentBindings.some((function(e){return e.parentDataView.selectedRowId}))}var Wf=Object(K.observer)((Vf=Af=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hiddenActionIds:new Set},e}return Object(Q.a)(n,[{key:"dataView",get:function(){return this.context.dataView}},{key:"shouldBeShown",value:function(e){return pd(e)||e.mode!==At.ActiveRecord}},{key:"relevantActions",get:function(){var e=this;return this.allActions.filter((function(e){return!e.groupId})).filter((function(t){return e.shouldBeShown(t)}))}},{key:"relevantMenuActions",get:function(){var e=this;return this.allMenuActions.filter((function(e){return!e.groupId})).filter((function(t){return e.shouldBeShown(t)}))}},{key:"renderMenuActions",value:function(e){return this.relevantMenuActions.map((function(t){return Object(re.jsx)(kd,{onClick:function(n){e.setMenuDropped(!1),Id.onActionClick(t)(n,t)},children:t.caption},t.id)}))}},{key:"isBarVisible",get:function(){return this.props.isVisible||this.hasSomeRelevantActions}},{key:"isActionsOnly",get:function(){return!this.props.isVisible&&this.hasSomeRelevantActions}},{key:"hasSomeRelevantActions",get:function(){return this.relevantActions.filter((function(e){return e.placement!==Et.PanelMenu})).length>0}},{key:"allActions",get:function(){return Rf(this.dataView)}},{key:"allMenuActions",get:function(){return Mf(this.dataView)}},{key:"render",value:function(){var e,t=this,n=this.dataView,r=Of(n),a=_f(n),s=(e=n,Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vd(e);case 3:if(!t.sent){t.next=7;break}(r=Ad(e)).reset(),Ys(e).pushDialog(Oc,Object(re.jsx)(cf,{model:r}));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",12);case 12:throw t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))),u=hf(n),l=pf(n),d=df(n),p=bf(n),h=Ed(n),f=ff(n),b=lf(n),v=function(e){return Object(c.flow)(o.a.mark((function t(n){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,(r=Be(e)).isFormViewActive()&&(null===(i=r.activateTableView)||void 0===i||i.call(r)),nr(e).onFilterDisplayClick(n),t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",9);case 9:throw t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))}(n),y=function(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Pf(e)(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}(n),g=mf(n),m=yf(n),w=function(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Ff(e)(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}(n),O=Df(n),j=li(n),k=Cf(n),x=Sf(n),C=If(n),I=k||x&&!!j||C&&!!j,S=Gf(n),D=Al(n),R=D&&D.resolve(Ql),T=!!Pe(n).dialogInfo,_=vi(n).isGrouping,P=vi(n).isGrouping,F=la(n),M=F.customTableConfigurations.length>0;return Object(re.jsx)(ve.default,{bounds:!0,children:function(e){var c,D=e.measureRef,L=((null===(c=e.contentRect.bounds)||void 0===c?void 0:c.width)||0)<640;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(ad,{domRef:D,isVisible:t.isBarVisible,children:t.isBarVisible&&(t.isActionsOnly?Object(re.jsxs)(_d,{grovable:!0,noDivider:!0,children:[t.props.extension.render("actions"),Object(re.jsx)(Dd,{actions:t.relevantActions})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("h2",{title:r,children:r}),Object(re.jsxs)("div",{className:"fullspaceBlock",children:[O?Object(re.jsxs)(_d,{isHidden:!1,noShrink:!0,children:[Object(re.jsx)(qO,{onMouseDown:p,isDisabled:h,children:Object(re.jsx)(Ie.Icon,{src:"./icons/move-up.svg",tooltip:bt("Move Up","increase_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:f,isDisabled:h,children:Object(re.jsx)(Ie.Icon,{src:"./icons/move-down.svg",tooltip:bt("Move Down","decrease_tool_tip")})})]}):null,I&&Object(re.jsxs)(_d,{noShrink:!0,children:[k&&Object(re.jsx)(qO,{className:"addRow "+(S?"isGreenHover":""),onClick:d,onShortcut:d,isDisabled:!S,shortcutPredicate:Yf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/add.svg",tooltip:bt("Add","add_tool_tip")})}),x&&!!j&&Object(re.jsx)(qO,{className:"deleteRow isRedHover",onMouseDown:l,onShortcut:l,shortcutPredicate:Kf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/minus.svg",tooltip:bt("Delete","delete_tool_tip")})}),C&&!!j&&Object(re.jsx)(qO,{className:"copyRow isOrangeHover",onMouseDown:b,onShortcut:b,shortcutPredicate:qf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/duplicate.svg",tooltip:bt("Duplicate","add_duplicate_tool_tip")})})]}),Object(re.jsxs)(_d,{grovable:!0,children:[t.props.extension.render("actions"),Object(re.jsx)(Dd,{actions:t.relevantActions})]}),!L&&Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)(_d,{noShrink:!0,children:[Object(re.jsx)(qO,{onMouseDown:y,isDisabled:_,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-first.svg",tooltip:bt("First","move_first_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:g,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-previous.svg",tooltip:bt("Previous","move_prev_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:m,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-next.svg",tooltip:bt("Next","move_next_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:w,isDisabled:P,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-last.svg",tooltip:bt("Last","move_last_tool_tip")})})]}),Object(re.jsx)(_d,{noShrink:!0,className:"rowCount",children:Hf(t.dataView)})]}),Object(re.jsx)(_d,{noShrink:!0,children:R&&R.renderSection(Xl)}),Object(re.jsxs)(_d,{noShrink:!0,children:[Object(re.jsx)(qO,{onMouseDown:v,onShortcut:v,shortcutPredicate:Qf,isActive:a,className:"test-filter-button",children:Object(re.jsx)(Ie.Icon,{src:"./icons/search-filter.svg",tooltip:bt("Filter","filter_tool_tip")})}),Object(re.jsx)(Ld,{ctx:n})]})]}),Object(re.jsx)(_d,{noShrink:!0,children:Object(re.jsx)(rd,{trigger:function(e){var t=e.refTrigger,n=e.setDropped;return Object(re.jsx)(qO,{className:"threeDotMenu",refDom:t,onMouseDown:function(){return n(!0)},isActive:!1,children:Object(re.jsx)(Ie.Icon,{src:"./icons/dot-menu.svg",tooltip:bt("Tools","tools_tool_tip")})})},content:function(e){var r=e.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{onClick:function(e){r(!1),u(e)},children:bt("Export to Excel","excel_tool_tip")}),Object(re.jsx)(kd,{id:"columnConfigItem",onClick:function(e){r(!1),s(e)},children:bt("Column configuration","column_config_tool_tip")}),!T&&Object(re.jsx)(kd,{isDisabled:!1,onClick:function(e){r(!1),wf(n)(e)},children:bt("Show record information","info_button_tool_tip")}),M&&[Object(re.jsx)(kd,{isDisabled:!1,isSelected:F.defaultTableConfiguration.isActive,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),F.activeTableConfiguration=F.defaultTableConfiguration,e.next=4,fc(F);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Default View","default_grid_view_view")})].concat(Object(gt.a)(F.customTableConfigurations.map((function(e){return Object(re.jsx)(kd,{isDisabled:!1,isSelected:e.isActive,onClick:function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!1),F.activeTableConfiguration=e,t.next=4,fc(F);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:e.name},e.id)}))),[Object(re.jsx)(kd,{isDisabled:!1,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,fc(F);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Save View","save_current_column_config")}),Object(re.jsx)(kd,{isDisabled:F.defaultTableConfiguration.isActive,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,F.deleteActiveTableConfiguration();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Delete View","delete_current_column_config")})]),t.relevantMenuActions.length>0&&Object(re.jsx)(Uf,{}),t.renderMenuActions({setMenuDropped:r})]})}})})]}))})}})}})}}]),n}(H.a.Component),Af.contextType=K.MobXProviderContext,Ef=Vf,Object($.a)(Ef.prototype,"relevantActions",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"relevantActions"),Ef.prototype),Object($.a)(Ef.prototype,"relevantMenuActions",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"relevantMenuActions"),Ef.prototype),Object($.a)(Ef.prototype,"isBarVisible",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"isBarVisible"),Ef.prototype),Object($.a)(Ef.prototype,"isActionsOnly",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"isActionsOnly"),Ef.prototype),Object($.a)(Ef.prototype,"hasSomeRelevantActions",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"hasSomeRelevantActions"),Ef.prototype),Object($.a)(Ef.prototype,"allActions",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"allActions"),Ef.prototype),Object($.a)(Ef.prototype,"allMenuActions",[c.computed],Object.getOwnPropertyDescriptor(Ef.prototype,"allMenuActions"),Ef.prototype),Lf=Ef))||Lf;function Hf(e){var t=Be(e).trueSelectedRowIndex,n=Tf(e),r=function(e){if(vi(e).isGrouping&&lr(e).allGroups.some((function(e){return e.isExpanded}))){var t=Be(e);return lr(e).getTotalRowCount(t.selectedRowId)}}(e);return r?Object(re.jsxs)(re.Fragment,{children:[void 0!==t?t+1:" - ","\xa0/\xa0",r,n?" ("+n+")":""]}):Object(re.jsxs)(re.Fragment,{children:[void 0!==t?t+1:" - ","\xa0/\xa0",n]})}function zf(e){var t=Object(W.useContext)(UO);return Object(re.jsx)(Wf,{isVisible:e.isVisible,extension:t})}function Yf(e){return(e.ctrlKey||e.metaKey)&&!e.shiftKey&&"i"===e.key||(e.ctrlKey||e.metaKey)&&e.shiftKey&&"j"===e.key}function Kf(e){return(e.ctrlKey||e.metaKey)&&!e.shiftKey&&"Delete"===e.key}function qf(e){return(e.ctrlKey||e.metaKey)&&!e.shiftKey&&("d"===e.key||"k"===e.key)}function Qf(e){return(e.ctrlKey||e.metaKey)&&"f"===e.key}function Xf(e){return Be(e).isWorking}function Zf(e){return Ae(e).isWorkingDelayed}function $f(e,t){return Pe(e).content.formScreen.dataViews.find((function(e){return e.id===t}))}var Jf,eb,tb,nb,rb,ob,ib,ab,sb,cb,ub=n(192),lb=n.n(ub),db=n(362),pb=n.n(db),hb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:pb.a.container})}}]),n}(H.a.Component),fb=n(117),bb=n.n(fb),vb=(Jf=c.observable.shallow,eb=function(){function e(t,n){Object(q.a)(this,e),this.$type_IDataTable=1,this.$type_TreeDataTable=1,this.properties=[],this.rowsContainer=null,this.rowsAddedSinceSave=0,Object(de.a)(this,"rows",tb,this),this.additionalRowData=new Map,this.parentIdProperty=void 0,this.isEmpty=!1,this.idProperty=void 0,this.rowRemovedListeners=[],this.parent=void 0,this.addedRowPositionLocked=!1,this.parentIdProperty=n,this.idProperty=t}return Object(Q.a)(e,[{key:"allRows",get:function(){return this.rows}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"identifierProperty",get:function(){var e=this;return this.properties.find((function(t){return t.id===e.dataSource.identifier}))}},{key:"identifierDataIndex",get:function(){return this.identifierProperty.dataIndex}},{key:"getTrueIndexById",value:function(e){var t=this,n=this.rows.findIndex((function(n){return t.getRowId(n)===e}));return n>-1?n:void 0}},{key:"deleteAdditionalCellData",value:function(e,t){throw new Error("Method not implemented.")}},{key:"getRowId",value:function(e){return e[this.dataSource.getFieldByName(this.idProperty).index]}},{key:"getCellValue",value:function(e,t){throw new Error("Not implemented")}},{key:"getOriginalCellValue",value:function(e,t){throw new Error("Not implemented")}},{key:"getCellValueByDataSourceField",value:function(e,t){return e[t.index]}},{key:"getCellText",value:function(e,t){throw new Error("Not implemented")}},{key:"getOriginalCellText",value:function(e,t){throw new Error("Not implemented")}},{key:"resolveCellText",value:function(e,t){throw new Error("Not implemented")}},{key:"getRowByExistingIdx",value:function(e){return this.rows[e]}},{key:"getRowById",value:function(e){var t=this;return this.rows.find((function(n){return t.getRowId(n)===e}))}},{key:"getExistingRowIdxById",value:function(e){for(var t=0;t<this.rows.length;t++)if(this.getRowId(this.rows[t])===e)return t}},{key:"getPropertyById",value:function(e){}},{key:"getFirstRow",value:function(){return this.rows.length>0?this.rows[0]:void 0}},{key:"getNearestRow",value:function(e){throw new Error("Not implemented")}},{key:"getNextExistingRowId",value:function(e){throw new Error("Not implemented")}},{key:"getPrevExistingRowId",value:function(e){throw new Error("Not implemented")}},{key:"getDirtyValues",value:function(e){return new Map}},{key:"getDirtyValueRows",value:function(){return[]}},{key:"getAllValuesOfProp",value:function(e){throw new Error("Not implemented")}},{key:"setRecords",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.rows=Object(gt.a)(this.sortTreeRows(t,null));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"appendRecords",value:function(e){this.rows=[].concat(Object(gt.a)(this.rows),Object(gt.a)(this.sortTreeRows(e,null)))}},{key:"sortTreeRows",value:o.a.mark((function e(t,n){var r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getChildren(t,n),!n){e.next=4;break}return e.next=4,n;case 4:i=Object(le.a)(r),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=12;break}return s=a.value,e.delegateYield(this.sortTreeRows(t,s),"t0",10);case 10:e.next=7;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[5,14,17,20]])}))},{key:"getChildren",value:function(e,t){var n=this,r=t?this.getRowId(t):null;return e.filter((function(e){return r===n.getParentId(e)})).sort((function(e,t){return n.compareLabels(e,t)}))}},{key:"setFormDirtyValue",value:function(e,t,n){throw new Error("Not implemented")}},{key:"setDirtyValue",value:function(e,t,n){throw new Error("Not implemented")}},{key:"flushFormToTable",value:function(e){}},{key:"deleteAdditionalRowData",value:function(e){throw new Error("Not implemented")}},{key:"deleteRow",value:function(e){throw new Error("Not implemented")}},{key:"clear",value:function(){throw new Error("Not implemented")}},{key:"clearRecordDirtyValues",value:function(e){}},{key:"substituteRecord",value:function(e){var t=this,n=this.allRows.findIndex((function(n){return t.getRowId(n)===t.getRowId(e)}));n>-1&&this.allRows.splice(n,1,e)}},{key:"insertRecord",value:function(e,t,n){throw new Error("Not implemented")}},{key:"dataSource",get:function(){return sn(this)}},{key:"getLastRow",value:function(){}},{key:"getParentId",value:function(e){var t=this.dataSource.getFieldByName(this.parentIdProperty);return this.getCellValueByDataSourceField(e,t)}},{key:"getLabel",value:function(e){var t=this.dataSource.getFieldByName("Name");return this.getCellValueByDataSourceField(e,t)}},{key:"compareLabels",value:function(e,t){return this.getLabel(e).localeCompare(this.getLabel(t))}},{key:"isCellTextResolving",value:function(e,t){return!1}},{key:"unlockAddedRowPosition",value:function(){}},{key:"updateSortAndFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tb=Object($.a)(eb.prototype,"rows",[Jf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(eb.prototype,"identifierProperty",[c.computed],Object.getOwnPropertyDescriptor(eb.prototype,"identifierProperty"),eb.prototype),Object($.a)(eb.prototype,"dataSource",[c.computed],Object.getOwnPropertyDescriptor(eb.prototype,"dataSource"),eb.prototype),eb),yb=Object(K.observer)((rb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;if(Object(q.a)(this,n),r=t.call(this,e),Object(de.a)(r,"expanded",ob,Object(pe.a)(r)),!r.props.dataView.dataTable.$type_TreeDataTable)throw new Error("TreeView requires TreeDataTable to work properly");return r}return Object(Q.a)(n,[{key:"nodes",get:function(){var e,t=this,n=this.props.dataView.dataTable.rows.map((function(e){return new gb({id:t.getRowId(e),label:t.getLabel(e),row:e,expansionGetter:function(e){return t.expanded.includes(e)}})})),r=Object(le.a)(n);try{var o=function(){var r=e.value,o=t.getParentId(r.row);o&&(r.parent=n.find((function(e){return e.id===o})))};for(r.s();!(e=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getRowId",value:function(e){return this.props.dataView.dataTable.getRowId(e)}},{key:"getParentId",value:function(e){return this.props.dataView.dataTable.getParentId(e)}},{key:"getLabel",value:function(e){return this.props.dataView.dataTable.getLabel(e)}},{key:"onRowClick",value:function(e){this.props.dataView.setSelectedRowId(e.id)}},{key:"onCaretClick",value:function(e){this.expanded.includes(e.id)?this.expanded.remove(e.id):this.expanded.push(e.id)}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:bb.a.treeView,children:this.nodes.filter((function(e){return e.isVisible})).map((function(t){return Object(re.jsx)(mb,{node:t,isSelected:t.id===e.props.dataView.selectedRowId,onRowClick:function(){return e.onRowClick(t)},onCaretClick:function(){return e.onCaretClick(t)}},t.id)}))})}}]),n}(H.a.Component),Object($.a)(rb.prototype,"nodes",[c.computed],Object.getOwnPropertyDescriptor(rb.prototype,"nodes"),rb.prototype),ob=Object($.a)(rb.prototype,"expanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nb=rb))||nb,gb=(ib=function(){function e(t){Object(q.a)(this,e),this.id=void 0,this.label=void 0,this._parent=void 0,this.row=void 0,this.isFolder=!1,this.expansionGetter=void 0,this.id=t.id,this.label=t.label,this.row=t.row,this.expansionGetter=t.expansionGetter}return Object(Q.a)(e,[{key:"isExpanded",get:function(){return this.expansionGetter(this.id)}},{key:"level",get:function(){return this.countParents(this,0)}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,this._parent&&(this._parent.isFolder=!0)}},{key:"isVisible",get:function(){return!this.parent||this.parent.isExpanded}},{key:"countParents",value:function(e,t){return e.parent?(t++,this.countParents(e.parent,t)):t}}]),e}(),Object($.a)(ib.prototype,"isVisible",[c.computed],Object.getOwnPropertyDescriptor(ib.prototype,"isVisible"),ib.prototype),ib),mb=(ab=c.action.bound,sb=c.action.bound,cb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getIndent",value:function(){return 20*this.props.node.level+"px"}},{key:"handleRowClick",value:function(e){var t,n,r,o,i;(null===(t=(n=this.props).onRowClick)||void 0===t||t.call(n),null===(r=this.props.node)||void 0===r?void 0:r.isExpanded)||(e.stopPropagation(),null===(o=(i=this.props).onCaretClick)||void 0===o||o.call(i))}},{key:"handleCaretClick",value:function(e){var t,n;null===(t=(n=this.props).onCaretClick)||void 0===t||t.call(n),e.stopPropagation()}},{key:"render",value:function(){var e=this.props.node.isExpanded;return Object(re.jsxs)("div",{className:bb.a.node+" "+(this.props.isSelected?bb.a.nodeSelected:""),onClick:this.handleRowClick,children:[Object(re.jsx)("div",{className:bb.a.nodeLabel,style:{paddingLeft:this.getIndent()},children:this.props.node.label}),this.props.node.isFolder?Object(re.jsx)("div",{className:bb.a.noSelect+" "+bb.a.expander,onClick:this.handleCaretClick,children:Object(re.jsx)("i",{className:ne()({"fas fa-caret-right":!e,"fas fa-caret-down":e})})}):""]})}}]),n}(H.a.Component),Object($.a)(cb.prototype,"handleRowClick",[ab],Object.getOwnPropertyDescriptor(cb.prototype,"handleRowClick"),cb.prototype),Object($.a)(cb.prototype,"handleCaretClick",[sb],Object.getOwnPropertyDescriptor(cb.prototype,"handleCaretClick"),cb.prototype),cb);var wb,Ob,jb,kb,xb,Cb,Ib,Sb,Db,Rb,Tb,_b,Pb,Fb=function(){function e(){Object(q.a)(this,e),this.newId=0,this.subscribers=new Map}return Object(Q.a)(e,[{key:"subscribe",value:function(e){var t=this,n=this.newId++;return this.subscribers.set(n,e),function(){t.subscribers.delete(n)}}},{key:"trigger",value:function(e){var t,n=Object(le.a)(this.subscribers.values());try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}}]),e}(),Mb=(n(482),n(129)),Lb=n.n(Mb),Eb=(wb=c.action.bound,Ob=c.action.bound,jb=c.action.bound,kb=c.action.bound,xb=c.action.bound,Cb=c.action.bound,Object(K.observer)((Sb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"isDroppedDown",Db,Object(pe.a)(e)),e.refDropdown=H.a.createRef(),e.measureThrottled=ge.a.throttle(e.measureImm,100),e.refMeasure=function(t){return e.elmMeasure=t},e.elmMeasure=void 0,e}return Object(Q.a)(n,[{key:"setDroppedDown",value:function(e){e&&!this.isDroppedDown?(this.measureImm(),this.isDroppedDown=!0,window.addEventListener("click",this.handleWindowClick),window.addEventListener("scroll",this.handleWindowScroll,!0)):!e&&this.isDroppedDown&&(this.isDroppedDown=!1,window.removeEventListener("click",this.handleWindowClick),window.removeEventListener("scroll",this.handleWindowScroll,!0))}},{key:"handleTriggerClick",value:function(e){this.isDroppedDown?this.setDroppedDown(!1):this.setDroppedDown(!0)}},{key:"handleWindowClick",value:function(e){this.refDropdown.current&&this.refDropdown.current.contains(e.target)||this.setDroppedDown(!1)}},{key:"handleWindowScroll",value:function(e){this.setDroppedDown(!1)}},{key:"handleDropdownClick",value:function(e){this.setDroppedDown(!1)}},{key:"measureImm",value:function(){var e;null===(e=this.elmMeasure)||void 0===e||e.measure()}},{key:"render",value:function(){var e=this;return Object(re.jsx)(ve.default,{ref:this.refMeasure,bounds:!0,children:function(t){var n=t.measureRef,r=t.contentRect;return Object(re.jsx)(be.a,{children:function(){var t,o,i;return Object(re.jsxs)("div",{id:e.props.id,className:Lb.a.container,ref:e.refDropdown,children:[Object(re.jsxs)("div",{ref:n,className:Lb.a.trigger,onClick:e.handleTriggerClick,children:[e.props.trigger,Object(re.jsx)("div",{className:Lb.a.dropdownSymbol,children:Object(re.jsx)("i",{className:"fas fa-caret-down"})})]}),e.isDroppedDown&&Object(z.createPortal)(Object(re.jsx)("div",{id:"dropdown_"+e.props.id,className:Lb.a.dropdown,onClick:e.handleDropdownClick,style:{position:"absolute",top:null===(t=r.bounds)||void 0===t?void 0:t.bottom,left:null===(o=r.bounds)||void 0===o?void 0:o.left,minWidth:null===(i=r.bounds)||void 0===i?void 0:i.width},children:e.props.children}),document.getElementById("dropdown-portal"))]})}})}})}}]),n}(H.a.Component),Db=Object($.a)(Sb.prototype,"isDroppedDown",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Sb.prototype,"setDroppedDown",[wb],Object.getOwnPropertyDescriptor(Sb.prototype,"setDroppedDown"),Sb.prototype),Object($.a)(Sb.prototype,"handleTriggerClick",[Ob],Object.getOwnPropertyDescriptor(Sb.prototype,"handleTriggerClick"),Sb.prototype),Object($.a)(Sb.prototype,"handleWindowClick",[jb],Object.getOwnPropertyDescriptor(Sb.prototype,"handleWindowClick"),Sb.prototype),Object($.a)(Sb.prototype,"handleWindowScroll",[kb],Object.getOwnPropertyDescriptor(Sb.prototype,"handleWindowScroll"),Sb.prototype),Object($.a)(Sb.prototype,"handleDropdownClick",[xb],Object.getOwnPropertyDescriptor(Sb.prototype,"handleDropdownClick"),Sb.prototype),Object($.a)(Sb.prototype,"measureImm",[Cb],Object.getOwnPropertyDescriptor(Sb.prototype,"measureImm"),Sb.prototype),Ib=Sb))||Ib),Ab=function(e){return Object(re.jsx)("div",{className:Lb.a.dropdownItem,onClick:e.onClick,children:e.children})},Vb=function(e){return Object(re.jsx)("input",{id:e.id,type:"checkbox",checked:e.checked,onChange:e.onChange,onClick:e.onClick,onClickCapture:e.onClickCapture,ref:function(t){t&&(t.indeterminate=!!e.indeterminate)}})},Nb=(Rb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;Object(q.a)(this,e),Object(de.a)(this,"type",Tb,this),Object(de.a)(this,"val1",_b,this),Object(de.a)(this,"val2",Pb,this),this.isComplete=void 0,this.lookupId=void 0,this.type=t,this.isComplete=n,this.val1=null!==r&&void 0!==r?r:void 0,this.val2=null!==o&&void 0!==o?o:void 0}return Object(Q.a)(e,[{key:"filterValue1",get:function(){return this.val1}},{key:"filterValue2",get:function(){return"between"===this.type||"nbetween"===this.type?this.val2:void 0}},{key:"val1ServerForm",get:function(){return this.val1}},{key:"val2ServerForm",get:function(){return this.val2}}]),e}(),Tb=Object($.a)(Rb.prototype,"type",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_b=Object($.a)(Rb.prototype,"val1",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pb=Object($.a)(Rb.prototype,"val2",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rb),Bb=function(){function e(t,n,r){Object(q.a)(this,e),this.type=t,this.numberValue=n,this.captionGetter=void 0,this._caption=void 0,this.captionGetter=r,e.operators.push(this)}return Object(Q.a)(e,[{key:"caption",get:function(){return void 0===this._caption&&(this._caption=this.captionGetter()),this._caption}}],[{key:"fromNumber",value:function(t){var n=e.operators.find((function(e){return e.numberValue===t}));if(!n)throw new Error("Cannot find string value for filter operator number: "+t);return n}}]),e}();Bb.operators=[],Bb.equals=new Bb("eq",1,(function(){return Object(re.jsx)(re.Fragment,{children:"="})})),Bb.between=new Bb("between",2,(function(){return Object(re.jsx)(re.Fragment,{children:bt("between","filter_operator_between")})})),Bb.startsWith=new Bb("starts",3,(function(){return Object(re.jsx)(re.Fragment,{children:bt("begins with","filter_operator_begins_with")})})),Bb.endsWith=new Bb("ends",4,(function(){return Object(re.jsx)(re.Fragment,{children:bt("ends with","filter_operator_ends_with")})})),Bb.contains=new Bb("contains",5,(function(){return Object(re.jsx)(re.Fragment,{children:bt("contains","filter_operator_contains")})})),Bb.greaterThan=new Bb("gt",6,(function(){return Object(re.jsx)(re.Fragment,{children:">"})})),Bb.lessThan=new Bb("lt",7,(function(){return Object(re.jsx)(re.Fragment,{children:"<"})})),Bb.greaterThanOrEquals=new Bb("gte",8,(function(){return Object(re.jsx)(re.Fragment,{children:"\u2265"})})),Bb.lessThanOrEquals=new Bb("lte",9,(function(){return Object(re.jsx)(re.Fragment,{children:"\u2264"})})),Bb.notEquals=new Bb("neq",10,(function(){return Object(re.jsx)(re.Fragment,{children:"\u2260"})})),Bb.notBetween=new Bb("nbetween",11,(function(){return Object(re.jsx)(re.Fragment,{children:bt("not between","filter_operator_not_between")})})),Bb.notStartsWith=new Bb("nstarts",12,(function(){return Object(re.jsx)(re.Fragment,{children:bt("not begins with","filter_operator_not_begins_with")})})),Bb.notEndsWith=new Bb("nends",13,(function(){return Object(re.jsx)(re.Fragment,{children:bt("not ends with","filter_operator_not_ends_with")})})),Bb.notContains=new Bb("ncontains",14,(function(){return Object(re.jsx)(re.Fragment,{children:bt("not contains","filter_operator_not_contains")})})),Bb.isNull=new Bb("null",15,(function(){return Object(re.jsx)(re.Fragment,{children:bt("is null","filter_operator_is_null")})})),Bb.isNotNull=new Bb("nnull",16,(function(){return Object(re.jsx)(re.Fragment,{children:bt("is not null","filter_operator_not_is_null")})})),Bb.in=new Bb("in",1,(function(){return Object(re.jsx)(re.Fragment,{children:"="})})),Bb.notIn=new Bb("nin",10,(function(){return Object(re.jsx)(re.Fragment,{children:"\u2260"})}));var Ub=new Map([[1,"in"],[10,"nin"]]),Gb=new Map([[0,"none"],[1,"eq"],[2,"between"],[3,"starts"],[4,"ends"],[5,"contains"],[6,"gt"],[7,"lt"],[8,"gte"],[9,"lte"],[10,"neq"],[11,"nbetween"],[12,"nstarts"],[13,"nends"],[14,"ncontains"],[15,"null"],[16,"nnull"]]);function Wb(e){var t,n,r,o=null!==(t=null===(n=Array.from(Gb).find((function(t){return t[1]===e})))||void 0===n?void 0:n[0])&&void 0!==t?t:null===(r=Array.from(Ub).find((function(t){return t[1]===e})))||void 0===r?void 0:r[0];if(!o)throw new Error("Cannot find filter operator number for filter type: "+e);return o}function Hb(e,t){var n,r="ComboBox"===t&&null!==(n=Ub.get(e))&&void 0!==n?n:Gb.get(e);if(!r)throw new Error("Cannot find string value for filter operator number: "+e);return r}var zb,Yb,Kb,qb,Qb,Xb,Zb,$b,Jb,ev,tv,nv,rv,ov,iv,av,sv,cv,uv,lv,dv,pv,hv,fv,bv,vv,yv,gv,mv,wv,Ov,jv,kv,xv,Cv,Iv,Sv,Dv,Rv,Tv,_v,Pv,Fv,Mv,Lv,Ev,Av=n(102),Vv=n.n(Av),Nv=function(e){return Object(re.jsx)("div",{className:Vv.a.root,onClick:function(){e.disabled||e.onChange({target:{checked:!e.checked},type:"click"})},children:Object(re.jsx)("div",{className:Vv.a.slot+" "+(null===e.checked||void 0===e.checked?Vv.a.undefined:e.checked?Vv.a.on:Vv.a.off)+" "+(e.disabled?Vv.a.readOnly:""),children:Object(re.jsx)("div",{className:Vv.a.nob})})})},Bv=n(363),Uv=n.n(Bv),Gv=[Bb.equals],Wv=(zb=c.action.bound,Object(K.observer)((Kb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"handleValueClick",value:function(e){var t=this.props.setting;void 0===t.val1?(t.val1=!1,t.isComplete=!0):!1===t.val1?(t.val1=!0,t.isComplete=!0):!0===t.val1&&(t.val1=void 0,t.isComplete=!1)}},{key:"render",value:function(){return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Eb,{id:"combo_"+this.props.id,trigger:Object(re.jsx)(re.Fragment,{children:"="}),children:Object(re.jsx)(Ab,{children:"="})}),Ot(this.props.ctx)?Object(re.jsx)("div",{className:Uv.a.mobileInputContainer,children:Object(re.jsx)(Nv,{checked:this.props.setting.val1,onChange:this.handleValueClick})}):Object(re.jsx)(Vb,{id:"input_"+this.props.id,indeterminate:void 0===this.props.setting.val1,checked:this.props.setting.val1,onClick:this.handleValueClick})]})}}],[{key:"defaultSettings",get:function(){return new Nb(Gv[0].type)}}]),n}(H.a.Component),Object($.a)(Kb.prototype,"handleValueClick",[zb],Object.getOwnPropertyDescriptor(Kb.prototype,"handleValueClick"),Kb.prototype),Yb=Kb))||Yb),Hv=n(60),zv=n.n(Hv),Yv=n(364),Kv=n.n(Yv),qv=n(365),Qv=n.n(qv),Xv=function(e){return e.visible?Object(re.jsx)("button",{className:Qv.a.root,onClick:e.onClick,children:"X"}):null},Zv=H.a.forwardRef((function(e,t){if(!Ot(Object(W.useContext)(K.MobXProviderContext).application))return Object(re.jsx)("input",{id:e.id,className:e.className,value:e.value,onChange:e.onChange,onBlur:e.onBlur,ref:t});return Object(re.jsxs)("div",{className:Kv.a.root,children:[Object(re.jsx)("input",{id:e.id,className:e.className,value:e.value,onChange:e.onChange,onBlur:e.onBlur,ref:t}),Object(re.jsx)(Xv,{visible:""!==e.value,onClick:function(){var t;null===(t=e.onChange)||void 0===t||t.call(e,{target:{value:""}})}})]})})),$v=[Bb.contains,Bb.startsWith,Bb.notStartsWith,Bb.notContains,Bb.endsWith,Bb.notEndsWith,Bb.equals,Bb.notEquals,Bb.isNull,Bb.isNotNull],Jv=Object(K.observer)((function(e){return Object(re.jsx)(Eb,{id:e.id,trigger:Object(re.jsx)(re.Fragment,{children:($v.find((function(t){return t.type===e.setting.type}))||{}).caption}),children:$v.map((function(t){return Object(re.jsx)(Ab,{onClick:function(){return Object(c.runInAction)((function(){e.setting.type=t.type,e.onChange()}))},children:t.caption},t.type)}))})})),ey=Object(K.observer)(qb=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).inputRef=function(t){return e.inputTag=t},e.inputTag=void 0,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.autoFocus&&setTimeout((function(){var t;null===(t=e.inputTag)||void 0===t||t.focus()}))}},{key:"render",value:function(){var e,t=this;switch(this.props.setting.type){case"eq":case"neq":case"starts":case"nstarts":case"ends":case"nends":case"contains":case"ncontains":return Object(re.jsx)(Zv,{id:this.props.id,className:zv.a.input,value:null!==(e=this.props.currentValue)&&void 0!==e?e:"",onChange:function(e){return t.props.onCurrentValueChanged(e.target.value)},onBlur:this.props.onChange,ref:this.inputRef});default:return null}}}]),n}(H.a.Component))||qb,ty=(Qb=c.action.bound,Xb=c.action.bound,Object(K.observer)(($b=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"currentValue",Jb,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"handleChange",value:function(){var e=this.props.setting;e.isComplete="null"===e.type||"nnull"===e.type||void 0!==e.val1,e.val2=void 0}},{key:"handleFilterTypeChange",value:function(){"null"!==this.props.setting.type&&"nnull"!==this.props.setting.type||(this.currentValue="",this.props.setting.val1=void 0,this.props.setting.val2=void 0),this.handleChange()}},{key:"componentDidUpdate",value:function(e){e.setting.val1!==this.props.setting.val1&&(this.currentValue=this.props.setting.val1)}},{key:"onCurrentValueChanged",value:function(e){var t=this;this.currentValue=e;var n=setTimeout((function(){Object(c.runInAction)((function(){t.props.setting.val1=""===t.currentValue?void 0:t.currentValue,t.handleChange(),t.props.onChange()}))}),500);return function(){clearTimeout(n)}}},{key:"render",value:function(){var e=this;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Jv,{id:"combo_"+this.props.id,setting:this.props.setting,onChange:this.handleFilterTypeChange}),Object(re.jsx)(ey,{id:"input_"+this.props.id,setting:this.props.setting,onChange:this.handleChange,currentValue:this.currentValue,onCurrentValueChanged:function(t){return e.onCurrentValueChanged(t)},autoFocus:this.props.autoFocus})]})}}],[{key:"defaultSettings",get:function(){return new Nb($v[0].type)}}]),n}(H.a.Component),Object($.a)($b.prototype,"handleChange",[Qb],Object.getOwnPropertyDescriptor($b.prototype,"handleChange"),$b.prototype),Object($.a)($b.prototype,"handleFilterTypeChange",[Xb],Object.getOwnPropertyDescriptor($b.prototype,"handleFilterTypeChange"),$b.prototype),Jb=Object($.a)($b.prototype,"currentValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.setting.val1}}),Zb=$b))||Zb),ny=n(85),ry=n.n(ny),oy=n(48),iy=n(61),ay=n.n(iy),sy=(ev=c.observable.ref,tv=c.action.bound,nv=c.action.bound,rv=c.action.bound,ov=c.action.bound,iv=c.action.bound,Object(K.observer)((sv=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"displayedMonth",cv,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var r;this.props.initialDisplayDate!==e.initialDisplayDate&&(null===(r=this.props.initialDisplayDate)||void 0===r?void 0:r.isValid())&&(this.displayedMonth=Qn()(this.props.initialDisplayDate).startOf("month"))}},{key:"getDayHeaders",value:function(){for(var e=[],t=Qn()(this.displayedMonth).startOf("week"),n=0;n<7;t.add({days:1}),n++)e.push(Object(re.jsx)("div",{className:ay.a.dayHeaderCell,title:t.format("dddd"),children:t.format("dd")[0]},t.toISOString()));return e}},{key:"getDates",value:function(e){for(var t=this,n=[],r=Qn()(),o=function(e,o){var i,a=o.month()!==t.displayedMonth.month(),s=o.isSame(t.props.selectedDay,"day"),c=o.isSame(r,"days"),u=Qn()(o);n.push(Object(re.jsx)("div",{className:ne()("calendarWidgetCell",(i={},Object(oy.a)(i,ay.a.neighbourMonthCell,a),Object(oy.a)(i,ay.a.selectedDay,s),Object(oy.a)(i,"isToday",c),i)),onClick:function(e){return t.handleDayClick(e,u)},children:o.format("D")},o.toISOString()))},i=Qn()(this.displayedMonth).startOf("week").add({weeks:e}),a=0;a<7;i.add({days:1}),a++)o(0,i);return n}},{key:"getDateRows",value:function(){for(var e=[],t=0;t<6;t++)e.push(Object(re.jsx)("div",{className:ay.a.row,children:this.getDates(t)},t));return e}},{key:"handleMonthDecClick",value:function(e){this.displayedMonth=Qn()(this.displayedMonth).subtract({months:1})}},{key:"handleMonthIncClick",value:function(e){this.displayedMonth=Qn()(this.displayedMonth).add({months:1})}},{key:"handleYearDecClick",value:function(e){this.displayedMonth=Qn()(this.displayedMonth).subtract({years:1})}},{key:"handleYearIncClick",value:function(e){this.displayedMonth=Qn()(this.displayedMonth).add({years:1})}},{key:"handleDayClick",value:function(e,t){this.props.onDayClick&&this.props.onDayClick(e,t)}},{key:"render",value:function(){return Object(re.jsx)("div",{className:ay.a.container,onMouseDown:function(e){e.preventDefault()},children:Object(re.jsxs)("div",{className:ay.a.dayTable,children:[Object(re.jsx)("div",{className:ay.a.row,children:Object(re.jsxs)("div",{className:ay.a.header,children:[Object(re.jsx)("button",{className:ay.a.controlBtn,onClick:this.handleMonthDecClick,children:Object(re.jsx)("i",{className:"fas fa-caret-left"})}),Object(re.jsx)("button",{className:ay.a.controlBtn,onClick:this.handleMonthIncClick,children:Object(re.jsx)("i",{className:"fas fa-caret-right"})}),Object(re.jsx)("div",{className:ay.a.title,title:this.displayedMonth.format("YYYY MMMM"),children:this.displayedMonth.format("YYYY MMMM")}),Object(re.jsx)("button",{className:ay.a.controlBtn,onClick:this.handleYearDecClick,children:Object(re.jsx)("i",{className:"fas fa-caret-down"})}),Object(re.jsx)("button",{className:ay.a.controlBtn,onClick:this.handleYearIncClick,children:Object(re.jsx)("i",{className:"fas fa-caret-up"})})]})}),Object(re.jsx)("div",{className:ay.a.row,children:this.getDayHeaders()}),this.getDateRows()]})})}}]),n}(W.Component),cv=Object($.a)(sv.prototype,"displayedMonth",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qn()(this.props.initialDisplayDate).startOf("month")}}),Object($.a)(sv.prototype,"handleMonthDecClick",[tv],Object.getOwnPropertyDescriptor(sv.prototype,"handleMonthDecClick"),sv.prototype),Object($.a)(sv.prototype,"handleMonthIncClick",[nv],Object.getOwnPropertyDescriptor(sv.prototype,"handleMonthIncClick"),sv.prototype),Object($.a)(sv.prototype,"handleYearDecClick",[rv],Object.getOwnPropertyDescriptor(sv.prototype,"handleYearDecClick"),sv.prototype),Object($.a)(sv.prototype,"handleYearIncClick",[ov],Object.getOwnPropertyDescriptor(sv.prototype,"handleYearIncClick"),sv.prototype),Object($.a)(sv.prototype,"handleDayClick",[iv],Object.getOwnPropertyDescriptor(sv.prototype,"handleDayClick"),sv.prototype),av=sv))||av),cy=function(){function e(t,n,r,o,i,a){Object(q.a)(this,e),this.dateSequence=void 0,this.expectedFormat=void 0,this.dateSeparator=void 0,this.timeSeparator=void 0,this.dateTimeSeparator=void 0,this.expectedDateFormat=void 0,this.timeNowFunc=void 0,this.expectedFormat=n,this.dateSeparator=r,this.timeSeparator=o,this.dateTimeSeparator=i,this.expectedDateFormat=this.expectedFormat.split(this.dateTimeSeparator)[0],this.timeNowFunc=a,this.dateSequence=t}return Object(Q.a)(e,[{key:"isUSCompletionTriggered",value:function(e){var t=e;return t.match(/^\d\d?\d?$/)||t.match(/^\d\d\d\d\d\d\d\d$/)||t.match(/^\d\d\d\d\d\d$/)||t.match(/^\d\d\d\s+\d\d\d\d$/)||t.match(/^\d\d\d\d?\s+\d\d$/)||t.match(/^\d\d\d\d\d\d\d\d\s+\d\d\d\d\d\d$/)||t.match(/^\d\d?\/\d\d?$/)||t.match(/^\d\d?\/\d\d?\s+\d\d?$/)||t.match(/^\d\d?\/\d\d?\s+\d\d\d\d$/)||t.match(/^\d\d?\/\d\d?\s+\d\d:\d\d$/)||t.match(/^\d\d?\/\d\d?\/\d\d?$/)}},{key:"isEUCompletionTriggered",value:function(e){var t=e;return t.match(/^\d\d\d\d$/)||t.match(/^\d\d\d\d\d\d\d\d$/)||t.match(/^\d\d\d\d\d\d$/)||t.match(/^\d\d\d\d\s+\d\d\d\d$/)||t.match(/^\d\d\d\d\s+\d\d$/)||t.match(/^\d\d\d\d\d\d\d\d \d\d\d\d\d\d$/)||t.match(/^\d\d?$/)}},{key:"autoComplete",value:function(e){if(e){var t=e.trim();if(this.dateSequence===Ke.MonthDayYear){if(!this.isUSCompletionTriggered(t))return}else if(!this.isEUCompletionTriggered(t))return;var n=t.split(this.dateTimeSeparator),r=n[0],o=this.autoCompleteDate(r);if(2===n.length){var i=n[1],a=this.autoCompleteTime(i);o+=this.dateTimeSeparator+a}return Qn()(o,this.expectedFormat)}}},{key:"reformat",value:function(e){var t=Qn()(e,this.expectedFormat);return 0===t.hour()&&0===t.minute()&&0===t.second()?t.format(this.expectedDateFormat):t.format(this.expectedFormat)}},{key:"autoCompleteTime",value:function(e){return e.includes(this.timeSeparator)?this.completeTimeWithSeparators(e):this.completeTimeWithoutSeparators(e)}},{key:"completeTimeWithoutSeparators",value:function(e){switch(e.length){case 1:case 2:return e+this.timeSeparator+"00"+this.timeSeparator+"00";case 3:case 4:return e.substring(0,2)+this.timeSeparator+e.substring(2)+this.timeSeparator+"00";default:return e.substring(0,2)+this.timeSeparator+e.substring(2,4)+this.timeSeparator+e.substring(4)}}},{key:"completeTimeWithSeparators",value:function(e){var t=e.split(this.timeSeparator);return 2===t.length?Qn()([2010,1,1,t[0],t[1],0,0]).format("hh:mm:ss A"):3===t.length?Qn()([2010,1,1,t[0],t[1],t[2],0]).format("hh:mm:ss A"):e}},{key:"autoCompleteDate",value:function(e){return e.includes(this.dateSeparator)?this.completeDateWithSeparators(e):this.completeDateWithoutSeparators(e)}},{key:"completeDateWithSeparators",value:function(e){return 2===e.split(this.dateSeparator).length?e+this.dateSeparator+this.timeNowFunc().year():e}},{key:"completeDateWithoutSeparators",value:function(e){switch(e.length){case 1:case 2:return this.addMonthAndYear(e);case 3:case 4:return this.addYear(e);case 6:return this.addSeparators(e);default:return this.addSeparators(e)}}},{key:"addMonthAndYear",value:function(e){var t=this.timeNowFunc(),n=t.month()+1+"/"+e+"/"+t.year(),r=Qn()(n,"M/D/YYYY");return r?r.format(this.expectedDateFormat):e}},{key:"addYear",value:function(e){return e.substring(0,2)+this.dateSeparator+e.substring(2)+this.dateSeparator+this.timeNowFunc().year()}},{key:"addSeparators",value:function(e){var t=this.getDoubleDayAndMonthFormat(),n=t.indexOf(this.dateSeparator),r=t.lastIndexOf(this.dateSeparator),o=e.length;return n<o&&r>=o?e.substring(0,n)+this.dateSeparator+e.substring(n):n<o&&r<o?e.substring(0,n)+this.dateSeparator+e.substring(n,n+2)+this.dateSeparator+e.substring(r-1):e}},{key:"getDoubleDayAndMonthFormat",value:function(){return 8===this.expectedDateFormat.length?this.expectedFormat.toLowerCase().replace("d","dd").replace("m","mm"):this.expectedFormat}}]),e}(),uy=(uv=c.action.bound,lv=c.action.bound,dv=c.action.bound,pv=c.action.bound,hv=c.action.bound,fv=function(){function e(t,n,r,o,i,a,s){Object(q.a)(this,e),this.editorState=t,this.outputFormat=n,this.onChange=r,this.onClick=o,this.onKeyDown=i,this.onEditorBlur=a,this.onChangeByCalendar=s,Object(de.a)(this,"dirtyTextualValue",bv,this)}return Object(Q.a)(e,[{key:"handleInputBlur",value:function(e){var t,n,r=this.getDateCompleter().autoComplete(this.dirtyTextualValue);if(r)null===(n=this.onChange)||void 0===n||n.call(this,e,Object(Xn.toOrigamServerString)(r));else if(null===(t=this.momentValue)||void 0===t?void 0:t.isValid()){var o;null===(o=this.onChange)||void 0===o||o.call(this,e,Object(Xn.toOrigamServerString)(this.momentValue))}this.dirtyTextualValue=void 0,this.onEditorBlur&&this.onEditorBlur(e)}},{key:"autoCompletedMoment",get:function(){return this.getDateCompleter().autoComplete(this.dirtyTextualValue)}},{key:"autocompletedText",get:function(){var e,t;return this.autoCompletedMoment?(null===(e=this.autoCompletedMoment)||void 0===e?void 0:e.isValid())?this.formatMomentValue(this.autoCompletedMoment):"?":(null===(t=this.momentValue)||void 0===t?void 0:t.isValid())?this.formatMomentValue(this.momentValue):"?"}},{key:"getDateCompleter",value:function(){var e=at();return new cy(e.defaultDateSequence,this.outputFormat,e.defaultDateSeparator,e.defaultTimeSeparator,e.defaultDateTimeSeparator,(function(){return Qn()()}))}},{key:"handleTextFieldChange",value:function(e){this.dirtyTextualValue=e.target.value,""!==this.dirtyTextualValue||this.onChange&&this.onChange(e,null)}},{key:"handleKeyDown",value:function(e){var t;if("Enter"===e.key||"Tab"===e.key){var n,r,o=this.autoCompletedMoment;if(o)null===(r=this.onChange)||void 0===r||r.call(this,e,Object(Xn.toOrigamServerString)(o));else if(null===(n=this.momentValue)||void 0===n?void 0:n.isValid()){var i;null===(i=this.onChange)||void 0===i||i.call(this,e,Object(Xn.toOrigamServerString)(this.momentValue))}this.dirtyTextualValue=void 0}else e.key;null===(t=this.onKeyDown)||void 0===t||t.call(this,e)}},{key:"momentValue",get:function(){return this.dirtyTextualValue?Qn()(this.dirtyTextualValue,this.outputFormat):this.editorState.value?Qn()(this.editorState.value):null}},{key:"formatMomentValue",value:function(e){return e?e.format(this.outputFormat):""}},{key:"formattedMomentValue",get:function(){return this.formatMomentValue(this.momentValue)}},{key:"textFieldValue",get:function(){return void 0!==this.dirtyTextualValue&&""!==this.dirtyTextualValue?this.dirtyTextualValue:this.formattedMomentValue}},{key:"handleDayClick",value:function(e,t){this.dirtyTextualValue=void 0,this.onChangeByCalendar&&this.onChangeByCalendar(e,t.toISOString(!0)),this.onChange&&this.onChange(e,Object(Xn.toOrigamServerString)(t))}},{key:"onClearClick",value:function(e){this.dirtyTextualValue=void 0,this.onChange&&this.onChange(e,null)}}]),e}(),Object($.a)(fv.prototype,"handleInputBlur",[uv],Object.getOwnPropertyDescriptor(fv.prototype,"handleInputBlur"),fv.prototype),Object($.a)(fv.prototype,"getDateCompleter",[lv],Object.getOwnPropertyDescriptor(fv.prototype,"getDateCompleter"),fv.prototype),Object($.a)(fv.prototype,"handleTextFieldChange",[dv],Object.getOwnPropertyDescriptor(fv.prototype,"handleTextFieldChange"),fv.prototype),Object($.a)(fv.prototype,"handleKeyDown",[pv],Object.getOwnPropertyDescriptor(fv.prototype,"handleKeyDown"),fv.prototype),bv=Object($.a)(fv.prototype,"dirtyTextualValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(fv.prototype,"textFieldValue",[c.computed],Object.getOwnPropertyDescriptor(fv.prototype,"textFieldValue"),fv.prototype),Object($.a)(fv.prototype,"handleDayClick",[hv],Object.getOwnPropertyDescriptor(fv.prototype,"handleDayClick"),fv.prototype),fv),ly=(vv=function e(t){Object(q.a)(this,e),Object(de.a)(this,"value",yv,this),this.value=t},yv=Object($.a)(vv.prototype,"value",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vv),dy=(gv=c.action.bound,mv=c.action.bound,wv=c.action.bound,Ov=c.action.bound,jv=c.action.bound,kv=c.action.bound,xv=c.action.bound,Cv=c.action.bound,Iv=c.action.bound,Sv=c.action.bound,Dv=c.action.bound,Rv=c.action.bound,Tv=c.action.bound,_v=c.action.bound,Object(K.observer)((Fv=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"isDroppedDown",Mv,Object(pe.a)(e)),Object(de.a)(e,"isShowFormatHintTooltip",Lv,Object(pe.a)(e)),e.refDropdowner=function(t){return e.elmDropdowner=t},e.elmDropdowner=null,e.editorState=new ly(e.props.value),e.editorModel=new uy(e.editorState,e.props.outputFormat,e.props.onChange,e.props.onClick,e.props.onKeyDown,e.props.onEditorBlur,e.props.onChangeByCalendar),e.disposers=[],e._hLocationInterval=void 0,e.refContainer=function(t){return e.elmContainer=t},e.elmContainer=null,e.refInput=function(t){e.elmInput=t},Object(de.a)(e,"inputRect",Ev,Object(pe.a)(e)),e.elmInput=null,e}return Object(Q.a)(n,[{key:"handleDropperClick",value:function(e){e.stopPropagation(),this.makeDroppedDown()}},{key:"makeDroppedDown",value:function(){this.isDroppedDown||(this.isDroppedDown=!0,window.addEventListener("click",this.handleWindowClick))}},{key:"makeDroppedUp",value:function(){this.isDroppedDown&&(this.isDroppedDown=!1,window.removeEventListener("click",this.handleWindowClick))}},{key:"handleWindowClick",value:function(e){this.elmContainer&&!this.elmContainer.contains(e.target)&&this.makeDroppedUp()}},{key:"componentDidMount",value:function(){this.makeFocusedIfNeeded(),this.elmInput&&this.props.subscribeToFocusManager&&this.props.subscribeToFocusManager(this.elmInput)}},{key:"componentWillUnmount",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"componentDidUpdate",value:function(e){var t=this;Object(c.runInAction)((function(){null!==e.value&&null===t.props.value&&(t.editorModel.dirtyTextualValue="")})),this.editorState.value=this.props.value}},{key:"makeFocusedIfNeeded",value:function(){var e=this;setTimeout((function(){e.props.autoFocus&&e.elmInput&&(e.elmInput.select(),e.elmInput.focus(),e.elmInput.scrollLeft=0)}))}},{key:"handleWindowMouseWheel",value:function(e){this.setShowFormatHint(!1)}},{key:"setShowFormatHint",value:function(e){var t=this;e&&!this.isShowFormatHintTooltip?(this.measureInputElement(),this._hLocationInterval=setInterval((function(){return t.measureInputElement()}),500),window.addEventListener("mousewheel",this.handleWindowMouseWheel)):!e&&this.isShowFormatHintTooltip&&(clearInterval(this._hLocationInterval),window.removeEventListener("mousewheel",this.handleWindowMouseWheel)),this.isShowFormatHintTooltip=e}},{key:"handleInputBlur",value:function(e){this.setShowFormatHint(!1),this.editorModel.handleInputBlur(e)}},{key:"handleKeyDown",value:function(e){"Escape"===e.key&&this.setShowFormatHint(!1),this.editorModel.handleKeyDown(e)}},{key:"handleContainerMouseDown",value:function(e){var t=this;setTimeout((function(){var e;null===(e=t.elmInput)||void 0===e||e.focus()}),30)}},{key:"measureInputElement",value:function(){this.elmInput?this.inputRect=this.elmInput.getBoundingClientRect():this.inputRect=void 0}},{key:"isTooltipShown",get:function(){return void 0!==this.editorModel.textFieldValue&&(!Qn()(this.editorModel.textFieldValue,this.props.outputFormat)||this.editorModel.formattedMomentValue!==this.editorModel.textFieldValue)}},{key:"handleTextFieldChange",value:function(e){this.setShowFormatHint(!0),this.editorModel.handleTextFieldChange(e)}},{key:"handleDayClick",value:function(e,t){this.elmDropdowner&&this.elmDropdowner.setDropped(!1),this.editorModel.handleDayClick(e,t)}},{key:"handleFocus",value:function(e){this.elmInput&&(this.elmInput.select(),this.elmInput.scrollLeft=0)}},{key:"customFormatContainsDate",value:function(){return this.props.outputFormat.includes("D")||this.props.outputFormat.includes("M")||this.props.outputFormat.includes("Y")}},{key:"renderWithCalendarWidget",value:function(){var e=this;return Object(re.jsx)(rd,{ref:this.refDropdowner,onContainerMouseDown:this.handleContainerMouseDown,trigger:function(t){var n=t.refTrigger,r=t.setDropped;return Object(re.jsxs)("div",{className:ry.a.editorContainer,ref:e.refContainer,style:{zIndex:e.isDroppedDown?1e3:void 0},children:[Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)(re.Fragment,{children:[e.isShowFormatHintTooltip&&Object(re.jsx)(py,{boundingRect:e.inputRect,line1:e.editorModel.autocompletedText,line2:e.props.outputFormatToShow}),Object(re.jsx)("input",{id:e.props.id,title:e.editorModel.autocompletedText+"\n"+e.props.outputFormatToShow,style:{color:e.props.foregroundColor,backgroundColor:e.props.backgroundColor},className:ne()(ry.a.input,e.props.className),type:"text",onBlur:e.handleInputBlur,onFocus:e.handleFocus,ref:function(t){e.refInput(t)},value:e.editorModel.textFieldValue,readOnly:e.props.isReadOnly,onChange:e.handleTextFieldChange,onClick:e.props.onClick,onDoubleClick:e.props.onDoubleClick,onKeyDown:e.handleKeyDown})]})}}),!e.props.isReadOnly&&Object(re.jsx)("div",{className:ry.a.dropdownSymbol,onMouseDown:function(){return r(!0)},ref:n,children:Object(re.jsx)("i",{className:"far fa-calendar-alt"})})]})},content:function(){var t,n;return Object(re.jsx)("div",{className:ry.a.droppedPanelContainer,children:Object(re.jsx)(sy,{onDayClick:e.handleDayClick,initialDisplayDate:(null===(t=e.editorModel.momentValue)||void 0===t?void 0:t.isValid())?e.editorModel.momentValue:Qn()(),selectedDay:(null===(n=e.editorModel.momentValue)||void 0===n?void 0:n.isValid())?e.editorModel.momentValue:Qn()()})})}})}},{key:"renderInputFieldOnly",value:function(){return Object(re.jsx)("div",{className:ry.a.editorContainer,ref:this.refContainer,style:{zIndex:this.isDroppedDown?1e3:void 0},children:Object(re.jsx)("input",{id:this.props.id,style:{color:this.props.foregroundColor,backgroundColor:this.props.backgroundColor},title:this.editorModel.autocompletedText+"\n"+this.props.outputFormat,className:ry.a.input,type:"text",onBlur:this.handleInputBlur,onFocus:this.handleFocus,ref:this.refInput,value:this.editorModel.textFieldValue,readOnly:this.props.isReadOnly,onChange:this.handleTextFieldChange,onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onKeyDown:this.handleKeyDown})})}},{key:"render",value:function(){return!this.props.outputFormat||this.customFormatContainsDate()?this.renderWithCalendarWidget():this.renderInputFieldOnly()}}]),n}(W.Component),Mv=Object($.a)(Fv.prototype,"isDroppedDown",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lv=Object($.a)(Fv.prototype,"isShowFormatHintTooltip",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Fv.prototype,"handleDropperClick",[gv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleDropperClick"),Fv.prototype),Object($.a)(Fv.prototype,"makeDroppedDown",[mv],Object.getOwnPropertyDescriptor(Fv.prototype,"makeDroppedDown"),Fv.prototype),Object($.a)(Fv.prototype,"makeDroppedUp",[wv],Object.getOwnPropertyDescriptor(Fv.prototype,"makeDroppedUp"),Fv.prototype),Object($.a)(Fv.prototype,"handleWindowClick",[Ov],Object.getOwnPropertyDescriptor(Fv.prototype,"handleWindowClick"),Fv.prototype),Object($.a)(Fv.prototype,"makeFocusedIfNeeded",[jv],Object.getOwnPropertyDescriptor(Fv.prototype,"makeFocusedIfNeeded"),Fv.prototype),Object($.a)(Fv.prototype,"handleWindowMouseWheel",[kv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleWindowMouseWheel"),Fv.prototype),Object($.a)(Fv.prototype,"setShowFormatHint",[xv],Object.getOwnPropertyDescriptor(Fv.prototype,"setShowFormatHint"),Fv.prototype),Object($.a)(Fv.prototype,"handleInputBlur",[Cv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleInputBlur"),Fv.prototype),Object($.a)(Fv.prototype,"handleKeyDown",[Iv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleKeyDown"),Fv.prototype),Object($.a)(Fv.prototype,"handleContainerMouseDown",[Sv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleContainerMouseDown"),Fv.prototype),Ev=Object($.a)(Fv.prototype,"inputRect",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(Fv.prototype,"measureInputElement",[Dv],Object.getOwnPropertyDescriptor(Fv.prototype,"measureInputElement"),Fv.prototype),Object($.a)(Fv.prototype,"isTooltipShown",[c.computed],Object.getOwnPropertyDescriptor(Fv.prototype,"isTooltipShown"),Fv.prototype),Object($.a)(Fv.prototype,"handleTextFieldChange",[Rv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleTextFieldChange"),Fv.prototype),Object($.a)(Fv.prototype,"handleDayClick",[Tv],Object.getOwnPropertyDescriptor(Fv.prototype,"handleDayClick"),Fv.prototype),Object($.a)(Fv.prototype,"handleFocus",[_v],Object.getOwnPropertyDescriptor(Fv.prototype,"handleFocus"),Fv.prototype),Pv=Fv))||Pv);function py(e){var t=W.useState(0),n=Object(d.a)(t,2),r=n[0],o=n[1];if(!e.boundingRect||!e.line1&&!e.line2)return null;var i=e.boundingRect;return Object(z.createPortal)(Object(re.jsxs)("div",{ref:function(e){e&&o(e.getBoundingClientRect().height)},className:ry.a.formatHintTooltip,style:{top:i.top-1-r,left:i.left},children:[e.line1,e.line2&&Object(re.jsx)("br",{}),e.line2]}),document.getElementById("tooltip-portal"))}var hy,fy,by,vy=n(73),yy=n.n(vy),gy=Object(K.observer)((function(e){var t,n=Object(W.useContext)(K.MobXProviderContext).application.mobileState,r=Object(W.useState)(new uy(null!==(t=e.editorState)&&void 0!==t?t:new wy(e.property),e.outputFormat,e.onChange,e.onClick,e.onKeyDown,e.onEditorBlur,e.onChangeByCalendar)),o=Object(d.a)(r,2),i=o[0];o[1];return Object(re.jsxs)("div",{className:yy.a.root,children:[Object(re.jsxs)("div",{className:ne()(yy.a.input,ry.a.input,e.inputClass),onClick:function(){var t=n.layoutState;n.layoutState=new jn(Object(re.jsx)(my,{id:e.id,editorModel:i,onClick:e.onClick,property:e.property}),e.property.name,t)},children:[Object(re.jsx)("div",{id:e.id,style:{color:e.foregroundColor,backgroundColor:e.backgroundColor},children:i.textFieldValue}),!e.isReadOnly&&Object(re.jsx)("div",{children:Object(re.jsx)("i",{className:"far fa-calendar-alt"})})]}),e.showClearButton&&Object(re.jsx)(Xv,{visible:""!==i.textFieldValue,onClick:function(e){return i.onClearClick(e)}})]})})),my=Object(K.observer)((function(e){var t,n;return Object(re.jsxs)("div",{className:yy.a.fullScreenEditorRoot,children:[Object(re.jsxs)("div",{className:yy.a.fullScreenEditorInputContainer,children:[Object(re.jsxs)("div",{className:yy.a.inputRow,children:[Object(re.jsx)("input",{id:e.id,className:ne()("input",yy.a.input,yy.a.fullScreenEditorInput),type:"text",onBlur:e.editorModel.handleInputBlur,value:e.editorModel.textFieldValue,onChange:e.editorModel.handleTextFieldChange,onClick:e.onClick,onKeyDown:e.editorModel.handleKeyDown}),Object(re.jsx)("button",{className:yy.a.autoCompleteButton,onClick:function(t){return e.editorModel.onClearClick(t)},children:"X"}),Object(re.jsx)("button",{className:yy.a.autoCompleteButton,children:bt("Auto Complete","auto_complete_date")})]}),Object(re.jsx)("div",{className:yy.a.fullScreenEditorInfoRow,children:bt("Format","format")+": "+e.editorModel.outputFormat}),Object(re.jsx)("div",{className:yy.a.fullScreenEditorInfoRow,children:bt("Preview","preview")+": "+e.editorModel.autocompletedText})]}),Object(re.jsx)(sy,{onDayClick:e.editorModel.handleDayClick,initialDisplayDate:(null===(t=e.editorModel.momentValue)||void 0===t?void 0:t.isValid())?e.editorModel.momentValue:Qn()(),selectedDay:(null===(n=e.editorModel.momentValue)||void 0===n?void 0:n.isValid())?e.editorModel.momentValue:Qn()()})]})})),wy=function(){function e(t){Object(q.a)(this,e),this.property=t}return Object(Q.a)(e,[{key:"value",get:function(){var e=ur(this.property),t=li(this.property);return t?e.getCellValue(t,this.property):null}}]),e}(),Oy=[Bb.equals,Bb.notEquals,Bb.lessThanOrEquals,Bb.greaterThanOrEquals,Bb.lessThan,Bb.greaterThan,Bb.between,Bb.notBetween,Bb.isNull,Bb.isNotNull],jy=Object(K.observer)((function(e){return Object(re.jsx)(Eb,{id:e.id,trigger:Object(re.jsx)(re.Fragment,{children:(Oy.find((function(t){return t.type===e.setting.type}))||{}).caption}),children:Oy.map((function(t){return Object(re.jsx)(Ab,{onClick:function(){e.setting.type=t.type,e.onChange(e.setting)},children:t.caption},t.type)}))})})),ky=Object(K.observer)((function(e){var t=e.setting,n=at().defaultLongDateFormat,r=Object(Xn.csToMomentFormat)(n);switch(t.type){case"eq":case"neq":case"lt":case"gt":case"lte":case"gte":var o,i;return Ot(e.property)?Object(re.jsx)(gy,{value:null!==(o=t.val1)&&void 0!==o?o:"",property:e.property,outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val1=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},autoFocus:e.autoFocus,onEditorBlur:function(){},onKeyDown:e.onKeyDown,editorState:new Fg(t),showClearButton:!0,inputClass:zv.a.dateTimeInput}):Object(re.jsx)(dy,{id:e.id,value:null!==(i=t.val1)&&void 0!==i?i:"",outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val1=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},autoFocus:e.autoFocus,onEditorBlur:e.onBlur,onKeyDown:e.onKeyDown,className:zv.a.dateTimeInput});case"between":case"nbetween":return Ot(e.property)?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(gy,{value:t.val1,property:e.property,outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val1=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},autoFocus:e.autoFocus,onEditorBlur:function(){},onKeyDown:e.onKeyDown,editorState:new Fg(t),showClearButton:!0,inputClass:zv.a.dateTimeInput}),Object(re.jsx)(gy,{value:t.val2,property:e.property,outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val2=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},autoFocus:e.autoFocus,onEditorBlur:function(){},onKeyDown:e.onKeyDown,editorState:new Mg(t),showClearButton:!0,inputClass:zv.a.dateTimeInput})]}):Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(dy,{id:"from_"+e.id,value:t.val1,outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val1=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},onEditorBlur:e.onBlur,onKeyDown:e.onKeyDown,className:zv.a.dateTimeInput}),Object(re.jsx)(dy,{id:"to_"+e.id,value:t.val2,outputFormat:r,outputFormatToShow:n,onChange:function(n,r){Object(c.runInAction)((function(){t.val2=null===r?void 0:Cy(r),e.onChange&&e.onChange(t)}))},onEditorBlur:e.onBlur,onKeyDown:e.onKeyDown,className:zv.a.dateTimeInput})]});default:return null}})),xy=(hy=c.action.bound,Object(K.observer)((by=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"handleChange",value:function(e){this.handleSettingChange()}},{key:"handleSettingChange",value:function(){var e=this.props.setting;switch(e.type){case"eq":case"neq":case"lt":case"gt":case"lte":case"gte":e.isComplete=void 0!==e.val1,e.val2=void 0;break;case"between":case"nbetween":e.isComplete=void 0!==e.val1&&void 0!==e.val2;break;default:e.val1=void 0,e.val2=void 0,e.isComplete="null"===e.type||"nnull"===e.type}}},{key:"render",value:function(){return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(jy,{setting:this.props.setting,onChange:this.handleChange,id:"combo_"+this.props.id}),Object(re.jsx)(ky,{id:"input_"+this.props.id,setting:this.props.setting,onChange:this.handleChange,autoFocus:this.props.autoFocus,property:this.props.property})]})}}],[{key:"defaultSettings",get:function(){return new Nb(Oy[0].type)}}]),n}(H.a.Component),Object($.a)(by.prototype,"handleChange",[hy],Object.getOwnPropertyDescriptor(by.prototype,"handleChange"),by.prototype),fy=by))||fy);function Cy(e){return e?e.substring(0,23):e}var Iy,Sy,Dy,Ry,Ty,_y,Py,Fy,My,Ly,Ey,Ay,Vy,Ny,By,Uy,Gy,Wy,Hy,zy,Yy,Ky,qy,Qy,Xy,Zy,$y,Jy,eg,tg,ng,rg,og,ig,ag,sg,cg,ug,lg,dg,pg,hg,fg,bg,vg,yg,gg,mg,wg,Og,jg,kg,xg,Cg,Ig,Sg,Dg,Rg,Tg,_g,Pg,Fg=function(){function e(t){Object(q.a)(this,e),this.setting=t}return Object(Q.a)(e,[{key:"value",get:function(){return this.setting.val1}}]),e}(),Mg=function(){function e(t){Object(q.a)(this,e),this.setting=t}return Object(Q.a)(e,[{key:"value",get:function(){return this.setting.val2}}]),e}(),Lg=[Bb.equals,Bb.notEquals,Bb.lessThanOrEquals,Bb.greaterThanOrEquals,Bb.lessThan,Bb.greaterThan,Bb.between,Bb.notBetween,Bb.isNull,Bb.isNotNull],Eg=Object(K.observer)((function(e){return Object(re.jsx)(Eb,{id:e.id,trigger:Object(re.jsx)(re.Fragment,{children:(Lg.find((function(t){return t.type===e.setting.type}))||{}).caption}),children:Lg.map((function(t){return Object(re.jsx)(Ab,{onClick:function(){e.setting.type=t.type,e.onChange()},children:t.caption},t.type)}))})})),Ag=Object(K.observer)(Iy=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).inputRef=H.a.createRef(),e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.autoFocus&&setTimeout((function(){var t;null===(t=e.inputRef.current)||void 0===t||t.focus()}))}},{key:"onChange",value:function(e){var t=this.removeInvalidCharacters(e);this.props.onCurrentValue1Changed(t)}},{key:"removeInvalidCharacters",value:function(e){var t=No(),n=new RegExp("[^\\d\\-"+(this.props.allowDecimalSeparator?t:"")+"]","g"),r=(e.target.value||"").replace(n,""),o=r.indexOf(t);if(o>-1)for(var i=r.lastIndexOf(t),a=0;a<1e3&&o!==i;a++)r=r.slice(0,i)+r.slice(i+1);return r===t&&(r="0"+t),isNaN(parseFloat(r))?"":r}},{key:"render",value:function(){var e,t,n,r=this;switch(this.props.setting.type){case"eq":case"neq":case"lt":case"gt":case"lte":case"gte":return Object(re.jsx)(Zv,{id:this.props.id,className:zv.a.input,value:null!==(e=this.props.currentValue1)&&void 0!==e?e:"",onChange:function(e){var t=r.removeInvalidCharacters(e);r.props.onCurrentValue1Changed(t)},onBlur:this.props.onBlur,ref:this.inputRef});case"between":case"nbetween":return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Zv,{id:"from_"+this.props.id,className:zv.a.input,value:null!==(t=this.props.currentValue1)&&void 0!==t?t:"",onChange:function(e){var t=r.removeInvalidCharacters(e);r.props.onCurrentValue1Changed(t)},onBlur:this.props.onBlur,ref:this.inputRef}),Object(re.jsx)(Zv,{id:"to_"+this.props.id,className:zv.a.input,value:null!==(n=this.props.currentValue2)&&void 0!==n?n:"",onChange:function(e){var t=r.removeInvalidCharacters(e);r.props.onCurrentValue2Changed(t)},onBlur:this.props.onBlur})]});default:return null}}}]),n}(H.a.Component))||Iy,Vg=(Sy=c.action.bound,Dy=c.action.bound,Ry=c.action.bound,Object(K.observer)((_y=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"currentValue1",Py,Object(pe.a)(e)),Object(de.a)(e,"currentValue2",Fy,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"handleBlur",value:function(){this.handleSettingChange()}},{key:"handleFilterTypeChange",value:function(){"null"!==this.props.setting.type&&"nnull"!==this.props.setting.type||(this.currentValue1="",this.currentValue2="",this.props.setting.val1=void 0,this.props.setting.val2=void 0),this.handleSettingChange()}},{key:"componentDidUpdate",value:function(e){e.setting.val1!==this.props.setting.val1&&(this.currentValue1=this.props.setting.val1),e.setting.val2!==this.props.setting.val2&&(this.currentValue2=this.props.setting.val2)}},{key:"handleSettingChange",value:function(){switch(this.props.setting.type){case"eq":case"neq":case"lt":case"gt":case"lte":case"gte":this.props.setting.isComplete=void 0!==this.props.setting.val1,this.props.setting.val2=void 0;break;case"between":case"nbetween":this.props.setting.isComplete=void 0!==this.props.setting.val1&&void 0!==this.props.setting.val2;break;default:this.props.setting.val1=void 0,this.props.setting.val2=void 0,this.props.setting.isComplete="null"===this.props.setting.type||"nnull"===this.props.setting.type}}},{key:"onCurrentValue1Changed",value:function(e){var t=this;this.currentValue1=e;var n=setTimeout((function(){Object(c.runInAction)((function(){t.props.setting.val1=""===t.currentValue1?void 0:parseFloat(t.currentValue1.replace(No(),".")),t.handleSettingChange(),t.props.onChange()}))}),500);return function(){clearTimeout(n)}}},{key:"onCurrentValue2Changed",value:function(e){var t=this;this.currentValue2=e;var n=setTimeout((function(){Object(c.runInAction)((function(){t.props.setting.val2=""===t.currentValue2?void 0:parseFloat(t.currentValue2.replace(No(),".")),t.handleSettingChange()}))}),500);return function(){clearTimeout(n)}}},{key:"render",value:function(){var e=this;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Eg,{id:"combo_"+this.props.id,setting:this.props.setting,onChange:this.handleFilterTypeChange}),Object(re.jsx)(Ag,{id:"input_"+this.props.id,setting:this.props.setting,onBlur:this.handleBlur,currentValue1:this.currentValue1,currentValue2:this.currentValue2,onCurrentValue1Changed:function(t){return e.onCurrentValue1Changed(t)},onCurrentValue2Changed:function(t){return e.onCurrentValue2Changed(t)},allowDecimalSeparator:this.props.allowDecimalSeparator,autoFocus:this.props.autoFocus})]})}}],[{key:"defaultSettings",get:function(){return new Nb(Lg[0].type)}}]),n}(H.a.Component),Object($.a)(_y.prototype,"handleBlur",[Sy],Object.getOwnPropertyDescriptor(_y.prototype,"handleBlur"),_y.prototype),Object($.a)(_y.prototype,"handleFilterTypeChange",[Dy],Object.getOwnPropertyDescriptor(_y.prototype,"handleFilterTypeChange"),_y.prototype),Object($.a)(_y.prototype,"handleSettingChange",[Ry],Object.getOwnPropertyDescriptor(_y.prototype,"handleSettingChange"),_y.prototype),Py=Object($.a)(_y.prototype,"currentValue1",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.setting.val1}}),Fy=Object($.a)(_y.prototype,"currentValue2",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.setting.val2}}),Ty=_y))||Ty),Ng="EagerlyLoadedGrid",Bg="LazilyLoadedGrid",Ug=(My=c.observable.shallow,Ly=c.action.bound,Ey=c.action.bound,Ay=c.action.bound,Vy=c.action.bound,Ny=function(){function e(t,n){Object(q.a)(this,e),this.setup=t,this.dropdownEditorData=n,Object(de.a)(this,"allRows",By,this),Object(de.a)(this,"filterPhrase",Uy,this)}return Object(Q.a)(e,[{key:"index",get:function(){return new Wg(this.allRows)}},{key:"rowsBeforeRedundancyFilter",get:function(){return this.setup().dropdownType===Ng&&""!==this.filterPhrase?this.index.search(this.filterPhrase):this.allRows}},{key:"rows",get:function(){var e=this;return this.rowsBeforeRedundancyFilter.filter((function(t){return!e.dropdownEditorData.idsInEditor.includes(e.getRowIdentifier(t))}))}},{key:"rowCount",get:function(){return this.rows.length}},{key:"columnIdsWithNoData",get:function(){var e,t=[],n=Object(le.a)(this.setup().visibleColumnNames);try{e:for(n.s();!(e=n.n()).done;){for(var r=e.value,o=0;o<this.allRows.length;o++)if(null!==this.allRows[o][this.setup().columnNameToIndex.get(r)])continue e;t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getValue",value:function(e,t){return this.rows[e][t]}},{key:"getRowByIndex",value:function(e){return this.rows[e]}},{key:"getRowIdentifierByIndex",value:function(e){return this.rows[e][this.setup().identifierIndex]}},{key:"getRowIdentifier",value:function(e){return e[this.setup().identifierIndex]}},{key:"getRowById",value:function(e){var t=this;return this.rows.find((function(n){return t.getRowIdentifier(n)===e}))}},{key:"getRowIndexById",value:function(e){var t=this;return this.rows.findIndex((function(n){return t.getRowIdentifier(n)===e}))}},{key:"getRowAfterId",value:function(e){var t=this.getRowIndexById(e);return t>-1&&t<this.rowCount-1?this.getRowByIndex(t+1):void 0}},{key:"getRowBeforeId",value:function(e){var t=this.getRowIndexById(e);return t>0?this.getRowByIndex(t-1):void 0}},{key:"getRowIdAfterId",value:function(e){var t=this.getRowAfterId(e);if(t)return this.getRowIdentifier(t)}},{key:"getRowIdBeforeId",value:function(e){var t=this.getRowBeforeId(e);if(t)return this.getRowIdentifier(t)}},{key:"setData",value:function(e){this.allRows=e}},{key:"appendData",value:function(e){var t;(t=this.allRows).push.apply(t,Object(gt.a)(e))}},{key:"clearData",value:function(){this.allRows.length=0}},{key:"setFilterPhrase",value:function(e){this.filterPhrase=e}}]),e}(),By=Object($.a)(Ny.prototype,"allRows",[My],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Uy=Object($.a)(Ny.prototype,"filterPhrase",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object($.a)(Ny.prototype,"index",[c.computed],Object.getOwnPropertyDescriptor(Ny.prototype,"index"),Ny.prototype),Object($.a)(Ny.prototype,"rows",[c.computed],Object.getOwnPropertyDescriptor(Ny.prototype,"rows"),Ny.prototype),Object($.a)(Ny.prototype,"columnIdsWithNoData",[c.computed],Object.getOwnPropertyDescriptor(Ny.prototype,"columnIdsWithNoData"),Ny.prototype),Object($.a)(Ny.prototype,"setData",[Ly],Object.getOwnPropertyDescriptor(Ny.prototype,"setData"),Ny.prototype),Object($.a)(Ny.prototype,"appendData",[Ey],Object.getOwnPropertyDescriptor(Ny.prototype,"appendData"),Ny.prototype),Object($.a)(Ny.prototype,"clearData",[Ay],Object.getOwnPropertyDescriptor(Ny.prototype,"clearData"),Ny.prototype),Object($.a)(Ny.prototype,"setFilterPhrase",[Vy],Object.getOwnPropertyDescriptor(Ny.prototype,"setFilterPhrase"),Ny.prototype),Ny),Gg=(Ml("IDropdownDataTable"),Gy=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"allDrivers",Wy,this),this.driversFilter=function(e){return!0}}return Object(Q.a)(e,[{key:"drivers",get:function(){var e=this;return this.allDrivers.filter((function(t){return e.driversFilter(t)}))}},{key:"driverCount",get:function(){return this.drivers.length}},{key:"getDriver",value:function(e){return this.drivers[e]}}]),e}(),Wy=Object($.a)(Gy.prototype,"allDrivers",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(Gy.prototype,"drivers",[c.computed],Object.getOwnPropertyDescriptor(Gy.prototype,"drivers"),Gy.prototype),Gy),Wg=(Ml("IDropdownColumnDrivers"),function(){function e(t){Object(q.a)(this,e),this.items=[],t.length>0&&(this.items=t.map((function(e){return new Hg(e)})))}return Object(Q.a)(e,[{key:"search",value:function(e){var t=e.toLowerCase();return this.items.filter((function(e){return e.matches(t)})).map((function(e){return e.row}))}}]),e}()),Hg=function(){function e(t){Object(q.a)(this,e),this.textInLower=void 0,this.row=void 0,this.row=t,this.textInLower=t.slice(1).join("").toLowerCase()}return Object(Q.a)(e,[{key:"matches",value:function(e){return this.textInLower.includes(e)}}]),e}(),zg=function(){function e(t,n){Object(q.a)(this,e),this.setup=t,this.cache=n}return Object(Q.a)(e,[{key:"lookupId",get:function(){return this.setup().lookupId}},{key:"setCachedListRows",value:function(e){this.cache.setLookupList(this.lookupId,e)}},{key:"getCachedListRows",value:function(){return this.cache.getLookupList(this.lookupId)}},{key:"hasCachedListRows",value:function(){return this.cache.hasLookupList(this.lookupId)}},{key:"clean",value:function(){return this.cache.deleteLookup(this.lookupId)}}]),e}(),Yg=(Ml("IDropdownEditorLookupListCache"),Hy=c.action.bound,zy=c.action.bound,Yy=c.action.bound,Ky=c.action.bound,qy=c.action.bound,Qy=c.action.bound,Xy=c.action.bound,Zy=c.action.bound,$y=c.action.bound,Jy=c.action.bound,eg=c.action.bound,tg=c.action.bound,ng=c.action.bound,rg=c.action.bound,og=c.action.bound,ig=c.action.bound,ag=c.action.bound,sg=c.action.bound,cg=c.action.bound,ug=c.action.bound,lg=c.action.bound,dg=c.action.bound,pg=function(){function e(t){var n=this;Object(q.a)(this,e),this.api=void 0,this.data=void 0,this.dataTable=void 0,this.setup=void 0,this.cache=void 0,this.isReadOnly=void 0,this.onDoubleClick=void 0,this.onClick=void 0,this.subscribeToFocusManager=void 0,this.onKeyDown=void 0,this.autoSort=void 0,this.onTextOverflowChanged=void 0,Object(de.a)(this,"isDropped",hg,this),Object(de.a)(this,"isWorking",fg,this),Object(de.a)(this,"userEnteredValue",bg,this),Object(de.a)(this,"scrollToRowIndex",vg,this),this.dontClearScrollToRow=!0,Object(de.a)(this,"cursorRowId",yg,this),this.willLoadPage=1,this.willLoadNextPage=!0,this.handleInputChangeDeb=ge.a.debounce(this.handleInputChangeImm,300),this.runningPromise=void 0,this._refInputDisposer=void 0,this.refInputElement=function(e){n.elmInputElement=e},this.elmInputElement=void 0,this.refDropdownBody=function(e){return n.elmDropdownBody=e},this.elmDropdownBody=void 0,this.api=t.api,this.data=t.data,this.dataTable=t.dataTable,this.setup=t.setup,this.cache=t.cache,this.isReadOnly=t.isReadOnly,this.onDoubleClick=t.onDoubleClick,this.onClick=t.onClick,this.subscribeToFocusManager=t.subscribeToFocusManager,this.onKeyDown=t.onKeyDown,this.autoSort=t.autoSort,this.onTextOverflowChanged=t.onTextOverflowChanged}return Object(Q.a)(e,[{key:"isBodyDisplayed",get:function(){return this.isDropped&&this.dataTable.rowCount>0}},{key:"chosenRowId",get:function(){return this.data.value}},{key:"inputValue",get:function(){return void 0!==this.userEnteredValue?this.userEnteredValue:this.data.text}},{key:"dropUp",value:function(){this.isDropped&&(this.ensureRequestCancelled(),this.userEnteredValue=void 0,this.dataTable.clearData(),this.isDropped=!1,this.willLoadPage=1,this.willLoadNextPage=!0,this.scrollToRowIndex=0)}},{key:"dropDown",value:function(){var e=this.setup();this.isDropped||(e.dropdownType===Ng&&this.dataTable.setFilterPhrase(this.userEnteredValue||""),e.dropdownType===Ng&&e.cached&&this.cache.hasCachedListRows()?this.dataTable.setData(this.cache.getCachedListRows()):this.ensureRequestRunning(),null===this.chosenRowId||Array.isArray(this.chosenRowId)||(this.cursorRowId=this.chosenRowId)),this.isDropped=!0,this.scrollToChosenRowIfPossible(),this.makeFocused()}},{key:"makeFocused",value:function(){this.elmInputElement&&this.elmInputElement.focus()}},{key:"scrollToChosenRowIfPossible",value:function(){if(this.chosenRowId&&!ge.a.isArray(this.chosenRowId)){var e=this.dataTable.getRowIndexById(this.chosenRowId);e>-1&&(this.dontClearScrollToRow=!0,this.scrollToRowIndex=e+1)}}},{key:"scrollToCursoredRowIfNeeded",value:function(){var e=this.dataTable.getRowIndexById(this.cursorRowId);e>-1&&(this.dontClearScrollToRow=!0,this.scrollToRowIndex=e+1)}},{key:"handleInputFocus",value:function(e){var t=e.target;t&&(t.select(),t.scrollLeft=0)}},{key:"handleInputBlur",value:function(e){this.userEnteredValue&&this.isDropped&&!this.isWorking&&this.cursorRowId?this.data.chooseNewValue(this.cursorRowId):""===this.userEnteredValue&&this.data.chooseNewValue(null),this.dropUp()}},{key:"handleInputBtnClick",value:function(e){this.isDropped?this.dropUp():this.dropDown()}},{key:"handleInputKeyDown",value:function(e){switch(e.key){case"Escape":this.dropUp(),this.userEnteredValue=void 0;break;case"Enter":var t=this.isDropped;if(this.isDropped&&!this.isWorking&&this.cursorRowId&&(this.data.chooseNewValue(this.cursorRowId),this.dropUp()),t)return e.stopPropagation(),void e.preventDefault();break;case"Tab":this.isDropped&&this.cursorRowId&&this.data.chooseNewValue(this.cursorRowId);break;case"Delete":this.userEnteredValue=void 0,this.cursorRowId="",this.data.chooseNewValue(null);break;case"ArrowUp":if(this.isDropped){if(e.preventDefault(),this.dataTable.getRowById(this.cursorRowId)){var n=this.dataTable.getRowIdBeforeId(this.cursorRowId);n&&(this.cursorRowId=n)}else this.trySelectFirstRow(),this.selectChosenRow();this.scrollToCursoredRowIfNeeded()}break;case"ArrowDown":if(this.isDropped){if(e.preventDefault(),this.dataTable.getRowById(this.cursorRowId)){var r=this.dataTable.getRowIdAfterId(this.cursorRowId);r&&(this.cursorRowId=r)}else this.trySelectFirstRow(),this.selectChosenRow();this.scrollToCursoredRowIfNeeded()}else(e.ctrlKey||e.metaKey)&&(this.dropDown(),this.trySelectFirstRow())}this.onKeyDown&&this.onKeyDown(e)}},{key:"handleInputChange",value:function(e){this.userEnteredValue=e.target.value,this.isDropped=!0,this.setup().dropdownType===Ng?(this.dataTable.setFilterPhrase(this.userEnteredValue||""),this.setup().cached&&this.cache.hasCachedListRows()?this.dataTable.setData(this.cache.getCachedListRows()):this.ensureRequestRunning(),!this.dataTable.getRowById(this.cursorRowId)&&this.userEnteredValue&&this.trySelectFirstRow()):this.setup().dropdownType===Bg&&this.handleInputChangeDeb(),this.updateTextOverflowState()}},{key:"handleInputChangeImm",value:function(){this.setup().dropdownType===Bg&&(this.willLoadNextPage=!0,this.willLoadPage=1,this.dataTable.clearData()),this.ensureRequestCancelled(),this.ensureRequestRunning()}},{key:"handleTableCellClicked",value:function(e,t){var n=this.dataTable.getRowIdentifierByIndex(t);this.data.chooseNewValue(n),this.dropUp()}},{key:"handleTriggerContextMenu",value:function(e){this.dropUp()}},{key:"handleControlMouseDown",value:function(e){this.isDropped&&(e.stopPropagation(),e.preventDefault())}},{key:"handleBodyMouseDown",value:function(e){this.isDropped&&(e.stopPropagation(),e.preventDefault())}},{key:"handleWindowMouseDown",value:function(e){""===this.userEnteredValue&&this.data.chooseNewValue(null),this.isDropped&&this.dropUp()}},{key:"handleScroll",value:function(e){this.setup().dropdownType===Bg&&this.willLoadNextPage&&!this.isWorking&&e.scrollTop>e.scrollHeight-e.clientHeight-500&&(this.willLoadPage++,this.ensureRequestRunning()),this.dontClearScrollToRow?this.dontClearScrollToRow=!1:this.scrollToRowIndex=void 0}},{key:"ensureRequestRunning",value:function(){this.isWorking||this.runGetLookupList(this.setup().dropdownType===Ng?"":this.userEnteredValue||"")}},{key:"ensureRequestCancelled",value:function(){this.runningPromise&&this.runningPromise.cancel()}},{key:"trySelectFirstRow",value:function(){this.dataTable.rows.length>0&&(this.cursorRowId=this.dataTable.getRowIdentifierByIndex(0))}},{key:"selectChosenRow",value:function(){this.dataTable.rows.length>0&&this.chosenRowId&&!ge.a.isArray(this.chosenRowId)&&this.dataTable.getRowById(this.chosenRowId)&&(this.cursorRowId=this.chosenRowId)}},{key:"updateTextOverflowState",value:function(){var e;if(this.elmInputElement){var t=this.elmInputElement.offsetWidth<this.elmInputElement.scrollWidth;null===(e=this.onTextOverflowChanged)||void 0===e||e.call(this,t?this.inputValue:void 0)}}},{key:"runGetLookupList",value:function(e){var t=this;this.runningPromise=Object(c.flow)(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.isWorking=!0,r=t.setup(),n.delegateYield(t.api.getLookupList(e),"t0",4);case 4:i=n.t0,t.autoSort&&i.sort((function(e,t){return Kg(e[1],t[1])})),r.dropdownType===Ng?(t.dataTable.setData(i),r.cached&&t.cache.setCachedListRows(i)):r.dropdownType===Bg&&(i.length<100&&(t.willLoadNextPage=!1),t.scrollToRowIndex=void 0,t.dataTable.appendData(i)),!t.dataTable.getRowById(t.cursorRowId)&&t.userEnteredValue&&t.trySelectFirstRow(),t.scrollToChosenRowIfPossible(),t.selectChosenRow();case 10:return n.prev=10,t.isWorking=!1,t.runningPromise=void 0,n.finish(10);case 14:case"end":return n.stop()}}),n,null,[[0,,10,14]])})))()}},{key:"clearCache",value:function(){this.cache.clean()}}]),e}(),hg=Object($.a)(pg.prototype,"isDropped",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fg=Object($.a)(pg.prototype,"isWorking",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bg=Object($.a)(pg.prototype,"userEnteredValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),vg=Object($.a)(pg.prototype,"scrollToRowIndex",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),yg=Object($.a)(pg.prototype,"cursorRowId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object($.a)(pg.prototype,"isBodyDisplayed",[c.computed],Object.getOwnPropertyDescriptor(pg.prototype,"isBodyDisplayed"),pg.prototype),Object($.a)(pg.prototype,"chosenRowId",[c.computed],Object.getOwnPropertyDescriptor(pg.prototype,"chosenRowId"),pg.prototype),Object($.a)(pg.prototype,"inputValue",[c.computed],Object.getOwnPropertyDescriptor(pg.prototype,"inputValue"),pg.prototype),Object($.a)(pg.prototype,"dropUp",[Hy],Object.getOwnPropertyDescriptor(pg.prototype,"dropUp"),pg.prototype),Object($.a)(pg.prototype,"dropDown",[zy],Object.getOwnPropertyDescriptor(pg.prototype,"dropDown"),pg.prototype),Object($.a)(pg.prototype,"scrollToChosenRowIfPossible",[Yy],Object.getOwnPropertyDescriptor(pg.prototype,"scrollToChosenRowIfPossible"),pg.prototype),Object($.a)(pg.prototype,"scrollToCursoredRowIfNeeded",[Ky],Object.getOwnPropertyDescriptor(pg.prototype,"scrollToCursoredRowIfNeeded"),pg.prototype),Object($.a)(pg.prototype,"handleInputFocus",[qy],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputFocus"),pg.prototype),Object($.a)(pg.prototype,"handleInputBlur",[Qy],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputBlur"),pg.prototype),Object($.a)(pg.prototype,"handleInputBtnClick",[Xy],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputBtnClick"),pg.prototype),Object($.a)(pg.prototype,"handleInputKeyDown",[Zy],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputKeyDown"),pg.prototype),Object($.a)(pg.prototype,"handleInputChange",[$y],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputChange"),pg.prototype),Object($.a)(pg.prototype,"handleInputChangeImm",[Jy],Object.getOwnPropertyDescriptor(pg.prototype,"handleInputChangeImm"),pg.prototype),Object($.a)(pg.prototype,"handleTableCellClicked",[eg],Object.getOwnPropertyDescriptor(pg.prototype,"handleTableCellClicked"),pg.prototype),Object($.a)(pg.prototype,"handleTriggerContextMenu",[tg],Object.getOwnPropertyDescriptor(pg.prototype,"handleTriggerContextMenu"),pg.prototype),Object($.a)(pg.prototype,"handleControlMouseDown",[ng],Object.getOwnPropertyDescriptor(pg.prototype,"handleControlMouseDown"),pg.prototype),Object($.a)(pg.prototype,"handleBodyMouseDown",[rg],Object.getOwnPropertyDescriptor(pg.prototype,"handleBodyMouseDown"),pg.prototype),Object($.a)(pg.prototype,"handleWindowMouseDown",[og],Object.getOwnPropertyDescriptor(pg.prototype,"handleWindowMouseDown"),pg.prototype),Object($.a)(pg.prototype,"handleScroll",[ig],Object.getOwnPropertyDescriptor(pg.prototype,"handleScroll"),pg.prototype),Object($.a)(pg.prototype,"ensureRequestRunning",[ag],Object.getOwnPropertyDescriptor(pg.prototype,"ensureRequestRunning"),pg.prototype),Object($.a)(pg.prototype,"ensureRequestCancelled",[sg],Object.getOwnPropertyDescriptor(pg.prototype,"ensureRequestCancelled"),pg.prototype),Object($.a)(pg.prototype,"trySelectFirstRow",[cg],Object.getOwnPropertyDescriptor(pg.prototype,"trySelectFirstRow"),pg.prototype),Object($.a)(pg.prototype,"selectChosenRow",[ug],Object.getOwnPropertyDescriptor(pg.prototype,"selectChosenRow"),pg.prototype),Object($.a)(pg.prototype,"runGetLookupList",[lg],Object.getOwnPropertyDescriptor(pg.prototype,"runGetLookupList"),pg.prototype),Object($.a)(pg.prototype,"clearCache",[dg],Object.getOwnPropertyDescriptor(pg.prototype,"clearCache"),pg.prototype),pg);function Kg(e,t){return"number"===typeof e&&"number"===typeof t?e>t?1:e<t?-1:0:ss(e,t)}Object(c.decorate)(Yg,{isReadOnly:c.observable});var qg=(gg=c.action.bound,mg=c.action.bound,wg=c.action.bound,Og=c.action.bound,jg=c.action.bound,kg=c.action.bound,xg=c.action.bound,Cg=c.action.bound,Ig=c.action.bound,Sg=c.action.bound,Dg=function(){function e(t){var n=this;Object(q.a)(this,e),this.api=void 0,this.data=void 0,this.dataTable=void 0,this.setup=void 0,this.cache=void 0,this.onValueSelected=void 0,this.autoSort=void 0,this.onTextOverflowChanged=void 0,Object(de.a)(this,"isWorking",Rg,this),Object(de.a)(this,"userEnteredValue",Tg,this),Object(de.a)(this,"scrollToRowIndex",_g,this),this.dontClearScrollToRow=!0,Object(de.a)(this,"cursorRowId",Pg,this),this.willLoadPage=1,this.willLoadNextPage=!0,this.handleInputChangeDeb=ge.a.debounce(this.handleInputChangeImm,300),this.runningPromise=void 0,this.refInputElement=function(e){n.elmInputElement=e},this.elmInputElement=void 0,this.api=t.api,this.data=t.data,this.dataTable=t.dataTable,this.setup=t.setup,this.cache=t.cache,this.onValueSelected=t.onValueSelected,this.autoSort=t.autoSort,this.onTextOverflowChanged=t.onTextOverflowChanged}return Object(Q.a)(e,[{key:"chosenRowId",get:function(){return this.data.value}},{key:"inputValue",get:function(){var e;return null!==(e=this.userEnteredValue)&&void 0!==e?e:""}},{key:"makeFocused",value:function(){this.elmInputElement&&this.elmInputElement.focus()}},{key:"scrollToChosenRowIfPossible",value:function(){if(this.chosenRowId&&!ge.a.isArray(this.chosenRowId)){var e=this.dataTable.getRowIndexById(this.chosenRowId);e>-1&&(this.dontClearScrollToRow=!0,this.scrollToRowIndex=e+1)}}},{key:"handleInputChange",value:function(e){this.userEnteredValue=e.target.value,this.setup().dropdownType===Ng?(this.dataTable.setFilterPhrase(this.userEnteredValue||""),this.setup().cached&&this.cache.hasCachedListRows()?this.dataTable.setData(this.cache.getCachedListRows()):this.ensureRequestRunning(),this.trySelectFirstRow()):this.setup().dropdownType===Bg&&this.handleInputChangeDeb(),this.updateTextOverflowState()}},{key:"handleInputChangeImm",value:function(){this.setup().dropdownType===Bg&&(this.willLoadNextPage=!0,this.willLoadPage=1,this.dataTable.clearData()),this.ensureRequestCancelled(),this.ensureRequestRunning()}},{key:"handleTableCellClicked",value:function(e,t){var n,r=this.dataTable.getRowIdentifierByIndex(t);this.data.chooseNewValue(r),this.ensureRequestCancelled(),this.userEnteredValue="",this.dataTable.setFilterPhrase(""),this.willLoadPage=1,this.willLoadNextPage=!0,this.scrollToRowIndex=0,null===(n=this.onValueSelected)||void 0===n||n.call(this)}},{key:"handleScroll",value:function(e){this.setup().dropdownType===Bg&&this.willLoadNextPage&&!this.isWorking&&e.scrollTop>e.scrollHeight-e.clientHeight-500&&(this.willLoadPage++,this.ensureRequestRunning()),this.dontClearScrollToRow?this.dontClearScrollToRow=!1:this.scrollToRowIndex=void 0}},{key:"ensureRequestRunning",value:function(){this.isWorking||this.runGetLookupList(this.setup().dropdownType===Ng?"":this.userEnteredValue||"")}},{key:"ensureRequestCancelled",value:function(){this.runningPromise&&this.runningPromise.cancel()}},{key:"trySelectFirstRow",value:function(){!this.dataTable.getRowById(this.cursorRowId)&&this.userEnteredValue&&this.dataTable.rows.length>0&&(this.cursorRowId=this.dataTable.getRowIdentifierByIndex(0))}},{key:"selectChosenRow",value:function(){this.dataTable.rows.length>0&&this.chosenRowId&&!ge.a.isArray(this.chosenRowId)&&this.dataTable.getRowById(this.chosenRowId)&&(this.cursorRowId=this.chosenRowId)}},{key:"updateTextOverflowState",value:function(){var e;if(this.elmInputElement){var t=this.elmInputElement.offsetWidth<this.elmInputElement.scrollWidth;null===(e=this.onTextOverflowChanged)||void 0===e||e.call(this,t?this.inputValue:void 0)}}},{key:"runGetLookupList",value:function(e){var t=this;this.runningPromise=Object(c.flow)(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.isWorking=!0,r=t.setup(),n.delegateYield(t.api.getLookupList(e),"t0",4);case 4:i=n.t0,t.autoSort&&i.sort((function(e,t){return Kg(e[1],t[1])})),r.dropdownType===Ng?(t.dataTable.setData(i),r.cached&&t.cache.setCachedListRows(i)):r.dropdownType===Bg&&(i.length<100&&(t.willLoadNextPage=!1),t.scrollToRowIndex=void 0,t.dataTable.appendData(i)),t.trySelectFirstRow(),t.scrollToChosenRowIfPossible(),t.selectChosenRow();case 10:return n.prev=10,t.isWorking=!1,t.runningPromise=void 0,n.finish(10);case 14:case"end":return n.stop()}}),n,null,[[0,,10,14]])})))()}}]),e}(),Rg=Object($.a)(Dg.prototype,"isWorking",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tg=Object($.a)(Dg.prototype,"userEnteredValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_g=Object($.a)(Dg.prototype,"scrollToRowIndex",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Pg=Object($.a)(Dg.prototype,"cursorRowId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object($.a)(Dg.prototype,"chosenRowId",[c.computed],Object.getOwnPropertyDescriptor(Dg.prototype,"chosenRowId"),Dg.prototype),Object($.a)(Dg.prototype,"inputValue",[c.computed],Object.getOwnPropertyDescriptor(Dg.prototype,"inputValue"),Dg.prototype),Object($.a)(Dg.prototype,"scrollToChosenRowIfPossible",[gg],Object.getOwnPropertyDescriptor(Dg.prototype,"scrollToChosenRowIfPossible"),Dg.prototype),Object($.a)(Dg.prototype,"handleInputChange",[mg],Object.getOwnPropertyDescriptor(Dg.prototype,"handleInputChange"),Dg.prototype),Object($.a)(Dg.prototype,"handleInputChangeImm",[wg],Object.getOwnPropertyDescriptor(Dg.prototype,"handleInputChangeImm"),Dg.prototype),Object($.a)(Dg.prototype,"handleTableCellClicked",[Og],Object.getOwnPropertyDescriptor(Dg.prototype,"handleTableCellClicked"),Dg.prototype),Object($.a)(Dg.prototype,"handleScroll",[jg],Object.getOwnPropertyDescriptor(Dg.prototype,"handleScroll"),Dg.prototype),Object($.a)(Dg.prototype,"ensureRequestRunning",[kg],Object.getOwnPropertyDescriptor(Dg.prototype,"ensureRequestRunning"),Dg.prototype),Object($.a)(Dg.prototype,"ensureRequestCancelled",[xg],Object.getOwnPropertyDescriptor(Dg.prototype,"ensureRequestCancelled"),Dg.prototype),Object($.a)(Dg.prototype,"trySelectFirstRow",[Cg],Object.getOwnPropertyDescriptor(Dg.prototype,"trySelectFirstRow"),Dg.prototype),Object($.a)(Dg.prototype,"selectChosenRow",[Ig],Object.getOwnPropertyDescriptor(Dg.prototype,"selectChosenRow"),Dg.prototype),Object($.a)(Dg.prototype,"runGetLookupList",[Sg],Object.getOwnPropertyDescriptor(Dg.prototype,"runGetLookupList"),Dg.prototype),Dg),Qg=function(){function e(t){Object(q.a)(this,e),this.name=t}return Object(Q.a)(e,[{key:"render",value:function(){return Object(re.jsx)("div",{className:"header cell",children:this.name})}}]),e}();Ml("IDefaultHeaderCellDriver");function Xg(e,t,n){return ne()("cell",e%2?"ord2":"ord1",{withCursor:n,selected:t})}var Zg=H.a.createContext({visibleRowIndex:0,visibleColumnIndex:0}),$g=function(){function e(t,n,r){Object(q.a)(this,e),this.dataIndex=t,this.dataTable=n,this.driverState=r}return Object(Q.a)(e,[{key:"formattedText",value:function(e){var t;return this.dataTable.rowCount<=e?"":null!==(t=this.dataTable.getValue(e,this.dataIndex))&&void 0!==t?t:""}},{key:"render",value:function(e){var t=this,n=this.dataTable.getRowIdentifierByIndex(e);return Object(re.jsx)("div",{className:Xg(e,this.driverState.chosenRowId===n,this.driverState.cursorRowId===n),onClick:function(n){t.driverState.handleTableCellClicked(n,e)},children:this.formattedText(e)})}}]),e}();Ml("ITextCellDriver");function Jg(e){return"long"===e?at().defaultLongDateFormat:"short"===e?at().defaultShortDateFormat:"time"===e?at().defaultTimeFormat:e}function em(e){var t=e.attributes,n=Jg(t.FormatterPattern),r=Object(Xn.csToMomentFormat)(n);if(!r)throw new Error(bt('CustomFormat "{0}" of the field named: "{1}", id: "{2}" is not valid',"invalid_field_format",t.FormatterPattern,t.Name,t.ModelInstanceId));return r}var tm=n(366),nm=n.n(tm),rm=function(){function e(t,n,r){Object(q.a)(this,e),this.dataIndex=t,this.dataTable=n,this.driverState=r}return Object(Q.a)(e,[{key:"formattedText",value:function(e){var t;return this.dataTable.rowCount<=e?"":null!==(t=this.dataTable.getValue(e,this.dataIndex))&&void 0!==t?t:""}},{key:"render",value:function(e){var t=this,n=this.dataTable.getRowIdentifierByIndex(e);return Object(re.jsx)("div",{className:ne()(Xg(e,this.driverState.chosenRowId===n,this.driverState.cursorRowId===n),nm.a.cell),onClick:function(n){return t.driverState.handleTableCellClicked(n,e)},children:this.formattedText(e)})}}]),e}(),om=(Ml("INumberCellDriver"),n(367)),im=n.n(om),am=function(){function e(t,n,r){Object(q.a)(this,e),this.dataIndex=t,this.dataTable=n,this.driverState=r}return Object(Q.a)(e,[{key:"formattedText",value:function(e){var t;return this.dataTable.rowCount<=e?"":null!==(t=this.dataTable.getValue(e,this.dataIndex))&&void 0!==t?t:""}},{key:"render",value:function(e){var t=this,n=this.dataTable.getRowIdentifierByIndex(e);return Object(re.jsx)("div",{className:ne()(Xg(e,this.driverState.chosenRowId===n,this.driverState.cursorRowId===n),im.a.cell),onClick:function(n){return t.driverState.handleTableCellClicked(n,e)},children:this.formattedText(e)?Object(re.jsx)("i",{className:"far fa-check-square"}):Object(re.jsx)("i",{className:"far fa-square"})})}}]),e}(),sm=(Ml("IBooleanCellDriver"),function(){function e(t,n,r,o){Object(q.a)(this,e),this.dataIndex=t,this.dataTable=n,this.driverState=r,this.formatterPattern=o}return Object(Q.a)(e,[{key:"formattedText",value:function(e){if(this.dataTable.rowCount<=e)return"";var t=this.dataTable.getValue(e,this.dataIndex),n=Qn()(t);return n.isValid()?n.format(this.formatterPattern):""}},{key:"render",value:function(e){var t=this,n=this.dataTable.getRowIdentifierByIndex(e);return Object(re.jsx)("div",{className:Xg(e,this.driverState.chosenRowId===n,this.driverState.cursorRowId===n),onClick:function(n){t.driverState.handleTableCellClicked(n,e)},children:this.formattedText(e)})}}]),e}()),cm=(Ml("ITextCellDriver"),function e(t,n,r,o,i,a,s,c,u,l,d,p,h,f){Object(q.a)(this,e),this.propertyId=t,this.lookupId=n,this.columnNames=r,this.visibleColumnNames=o,this.columnNameToIndex=i,this.showUniqueValues=a,this.identifier=s,this.identifierIndex=c,this.parameters=u,this.dropdownType=l,this.cached=d,this.searchByFirstColumnOnly=p,this.columnDrivers=h,this.isLink=f});function um(e,t,n,r){var o=e.attributes,i=o.LookupId,a=o.Id,s="true"===o.DropDownShowUniqueValues,c=o.Identifier,u=o.DropDownType,l="true"===o.Cached,d="true"===o.SearchByFirstColumnOnly,p=[c],h=[],f=new Map([[c,0]]),b=0,v=new Gg;"true"===o.SuppressEmptyColumns&&(v.driversFilter=function(e){return t.columnIdsWithNoData.indexOf(e.columnId)<0});var y,g=Object(le.a)(_u(e,(function(e){return"Property"===e.name})));try{for(g.s();!(y=g.n()).done;){var m=y.value;b++;var w=m.attributes,O=w.Id;p.push(O),f.set(O,b);var j=w.FormatterPattern?em(m):"";h.push(O);var k=w.Name,x=w.Column,C=void 0;switch(x){case"Text":C=new $g(b,t,n);break;case"Number":C=new rm(b,t,n);break;case"CheckBox":C=new am(b,t,n);break;case"Date":C=new sm(b,t,n,j);break;default:throw new Error("Unknown column type "+x)}v.allDrivers.push({columnId:O,headerCellDriver:new Qg(k),bodyCellDriver:C})}}catch(T){g.e(T)}finally{g.f()}var I,S={},D=Object(le.a)(_u(e,(function(e){return"ComboBoxParameterMapping"===e.name})));try{for(D.s();!(I=D.n()).done;){var R=I.value.attributes;S[R.ParameterName]=R.FieldName}}catch(T){D.e(T)}finally{D.f()}return new cm(a,i,p,h,f,s,c,0,S,u,l,d,v,r)}var lm,dm,pm,hm,fm,bm,vm,ym,gm,mm=n(368),wm=n.n(mm),Om=n(51),jm=n.n(Om),km=n(125),xm=Object(km.bind)(lm=function(){function e(t,n,r,o){Object(q.a)(this,e),this.setup=t,this.rowCursor=n,this.api=r,this.behavior=o}return Object(Q.a)(e,[{key:"getLookupList",value:o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.setup()).dropdownType!==Ng){e.next=6;break}return e.delegateYield(this.api.getLookupList({ColumnNames:n.columnNames,Property:n.propertyId,Id:this.rowCursor.selectedId,LookupId:n.lookupId,Parameters:n.parameters,ShowUniqueValues:n.showUniqueValues,SearchText:t||"",PageSize:-1,PageNumber:1}),"t0",3);case 3:return e.abrupt("return",e.t0);case 6:return e.delegateYield(this.api.getLookupList({ColumnNames:n.columnNames,Property:n.propertyId,Id:this.rowCursor.selectedId,LookupId:n.lookupId,Parameters:n.parameters,ShowUniqueValues:n.showUniqueValues,SearchText:t||"",PageSize:100,PageNumber:this.behavior().willLoadPage}),"t1",7);case 7:return e.abrupt("return",e.t1);case 8:case"end":return e.stop()}}),e,this)}))}]),e}())||lm;function Cm(e){var t=Object(W.useContext)(Um).behavior,n=Object(W.useContext)(Um).editorData,r=Object(W.useContext)(Um).setup,o=Object(W.useMemo)((function(){return function(e){t.refInputElement(e)}}),[t]);return Object(W.useEffect)((function(){t.subscribeToFocusManager&&t.elmInputElement&&t.subscribeToFocusManager(t.elmInputElement),t.updateTextOverflowState()}),[]),Object(W.useEffect)((function(){t.updateTextOverflowState()})),Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("input",{className:ne()("input",jm.a.input,{isLink:r.isLink}),readOnly:t.isReadOnly,ref:o,placeholder:n.isResolving?"Loading...":"",onChange:t.handleInputChange,onKeyDown:t.handleInputKeyDown,onFocus:t.isReadOnly?void 0:t.handleInputFocus,onBlur:t.isReadOnly?void 0:t.handleInputBlur,onDoubleClick:t.onDoubleClick,onClick:t.onClick,value:t.inputValue||"",style:e.customStyle?e.customStyle:{color:e.foregroundColor,backgroundColor:e.backgroundColor},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})}})}function Im(e){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:e.state.isDropped?Object(z.createPortal)(Object(re.jsx)("div",{className:"Dropdowner_droppedBox",style:{top:e.state.top,left:e.state.left},children:Object(re.jsx)("div",{className:"Dropdown_root",children:Object(re.jsx)("div",{className:"DropdownItem_root",onMouseDown:function(e){return e.stopPropagation()},onClick:e.state.handleRefreshClick,children:"Refresh"})})}),document.getElementById("dropdown-portal")):null})}})}var Sm,Dm,Rm,Tm=(dm=c.action.bound,pm=c.action.bound,hm=c.action.bound,fm=c.action.bound,bm=function(){function e(t){Object(q.a)(this,e),this.behaviour=t,Object(de.a)(this,"isDropped",vm,this),Object(de.a)(this,"top",ym,this),Object(de.a)(this,"left",gm,this)}return Object(Q.a)(e,[{key:"handleTriggerContextMenu",value:function(e){e.preventDefault(),this.isDropped?(this.isDropped=!1,window.removeEventListener("mousedown",this.handleScreenMouseDown)):(this.top=e.clientY,this.left=e.clientX,this.isDropped=!0,window.addEventListener("mousedown",this.handleScreenMouseDown))}},{key:"handleScreenContextMenu",value:function(e){e.preventDefault(),this.isDropped=!1}},{key:"handleScreenMouseDown",value:function(e){e.preventDefault(),this.isDropped=!1}},{key:"handleRefreshClick",value:function(e){this.isDropped=!1,this.behaviour.clearCache()}}]),e}(),vm=Object($.a)(bm.prototype,"isDropped",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ym=Object($.a)(bm.prototype,"top",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gm=Object($.a)(bm.prototype,"left",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(bm.prototype,"handleTriggerContextMenu",[dm],Object.getOwnPropertyDescriptor(bm.prototype,"handleTriggerContextMenu"),bm.prototype),Object($.a)(bm.prototype,"handleScreenContextMenu",[pm],Object.getOwnPropertyDescriptor(bm.prototype,"handleScreenContextMenu"),bm.prototype),Object($.a)(bm.prototype,"handleScreenMouseDown",[hm],Object.getOwnPropertyDescriptor(bm.prototype,"handleScreenMouseDown"),bm.prototype),Object($.a)(bm.prototype,"handleRefreshClick",[fm],Object.getOwnPropertyDescriptor(bm.prototype,"handleRefreshClick"),bm.prototype),bm);function _m(e){var t=Object(W.useContext)(Ie.CtxDropdownRefCtrl),n=Object(W.useContext)(Um).behavior,r=Object(W.useState)((function(){return new Tm(n)})),o=Object(d.a)(r,1)[0];return Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)("div",{className:jm.a.control,ref:t,onMouseDown:n.handleControlMouseDown,children:[Object(re.jsx)(Cm,{backgroundColor:e.backgroundColor,foregroundColor:e.foregroundColor,customStyle:e.customStyle}),Object(re.jsx)("div",{className:ne()("inputBtn","lastOne",n.isReadOnly&&"readOnly"),tabIndex:-1,onClick:n.isReadOnly?void 0:n.handleInputBtnClick,onContextMenu:function(e){n.handleTriggerContextMenu(e),o.handleTriggerContextMenu(e)},onMouseDown:n.isReadOnly?void 0:n.handleControlMouseDown,children:n.isWorking?Object(re.jsx)("i",{className:"fas fa-spinner fa-spin"}):Object(re.jsx)("i",{className:"fas fa-caret-down"})}),Object(re.jsx)(Im,{state:o})]})}})}var Pm,Fm,Mm,Lm,Em,Am,Vm,Nm=(Sm=c.action.bound,Object(km.bind)((Rm=function(){function e(t,n,r){Object(q.a)(this,e),this.dataTable=t,this.rowCursor=n,this.setup=r,this.idsInEditor=[]}return Object(Q.a)(e,[{key:"setValue",value:function(e){}},{key:"value",get:function(){return this.rowCursor.selectedId?this.dataTable.getCellValue(this.rowCursor.selectedId,this.setup().propertyId):null}},{key:"text",get:function(){return!this.isResolving&&this.value?this.dataTable.getCellText(this.setup().propertyId,this.value):""}},{key:"isResolving",get:function(){return this.dataTable.getIsCellTextLoading(this.setup().propertyId,this.value)}},{key:"chooseNewValue",value:function(e){this.rowCursor.selectedId&&this.dataTable.setNewValue(this.rowCursor.selectedId,this.setup().propertyId,e)}},{key:"remove",value:function(e){}}]),e}(),Object($.a)(Rm.prototype,"value",[c.computed],Object.getOwnPropertyDescriptor(Rm.prototype,"value"),Rm.prototype),Object($.a)(Rm.prototype,"text",[c.computed],Object.getOwnPropertyDescriptor(Rm.prototype,"text"),Rm.prototype),Object($.a)(Rm.prototype,"chooseNewValue",[Sm],Object.getOwnPropertyDescriptor(Rm.prototype,"chooseNewValue"),Rm.prototype),Dm=Rm))||Dm),Bm=(Pm=c.action.bound,Object(km.bind)((Mm=function(){function e(t,n,r){Object(q.a)(this,e),this.dataTable=t,this.rowCursor=n,this.setup=r,this.dropdownEditorData=void 0,this.dropdownEditorData=new Nm(t,n,r)}return Object(Q.a)(e,[{key:"setValue",value:function(e){}},{key:"value",get:function(){return this.dropdownEditorData.value}},{key:"text",get:function(){return this.dropdownEditorData.text}},{key:"isResolving",get:function(){return this.dropdownEditorData.isResolving}},{key:"chooseNewValue",value:function(e){var t;if(!this.value||!this.value.includes(e)){var n=[].concat(Object(gt.a)(null!==(t=this.value)&&void 0!==t?t:[]),[e]);this.rowCursor.selectedId&&this.dataTable.setNewValue(this.rowCursor.selectedId,this.setup().propertyId,n)}}},{key:"idsInEditor",get:function(){return this.value?this.value:[]}},{key:"remove",value:function(e){}}]),e}(),Object($.a)(Mm.prototype,"value",[c.computed],Object.getOwnPropertyDescriptor(Mm.prototype,"value"),Mm.prototype),Object($.a)(Mm.prototype,"text",[c.computed],Object.getOwnPropertyDescriptor(Mm.prototype,"text"),Mm.prototype),Object($.a)(Mm.prototype,"chooseNewValue",[Pm],Object.getOwnPropertyDescriptor(Mm.prototype,"chooseNewValue"),Mm.prototype),Fm=Mm))||Fm),Um=Object(W.createContext)(null);Ml("IGetDropdownEditorSetup");function Gm(e){var t=Object(W.useContext)(Um).behavior,n=Object(W.useContext)(K.MobXProviderContext).workbench;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(Ie.DropdownLayout,{isDropped:t.isBodyDisplayed,onDropupRequest:t.dropUp,renderCtrl:function(){return e.editor?e.editor:Object(re.jsx)(_m,{backgroundColor:e.backgroundColor,foregroundColor:e.foregroundColor,customStyle:e.customStyle})},renderDropdown:function(){return Object(re.jsx)(Ie.DropdownLayoutBody,{render:function(){return Object(re.jsx)(Km,{})},minSideMargin:Ot(n)?20:50})}})}})}function Wm(e){var t=Object(W.useContext)(K.MobXProviderContext),n=t.dataView,r=n.dataViewRowCursor,o=n.dataViewApi,i=n.dataViewData,a=t.workbench.lookupListCache,s=Object(W.useState)((function(){var t=new xm((function(){return l}),r,o,(function(){return u})),n=e.tagEditor?new Bm(i,r,(function(){return l})):new Nm(i,r,(function(){return l})),s=new Ug((function(){return l}),n),c=new zg((function(){return l}),a),u=new Yg({api:t,data:n,dataTable:s,setup:function(){return l},cache:c,isReadOnly:e.isReadOnly,onDoubleClick:e.onDoubleClick,onClick:e.onClick,subscribeToFocusManager:e.subscribeToFocusManager,onKeyDown:e.onKeyDown,autoSort:e.autoSort,onTextOverflowChanged:e.onTextOverflowChanged}),l=um(e.xmlNode,s,u,e.isLink);return{behavior:u,editorData:n,columnDrivers:l.columnDrivers,editorDataTable:s,setup:l}})),c=Object(d.a)(s,1)[0];return Object(W.useEffect)((function(){c.behavior.isReadOnly=e.isReadOnly}),[e.isReadOnly,c.behavior.isReadOnly]),c.behavior.onClick=e.onClick,c.behavior.onDoubleClick=e.onDoubleClick,Object(re.jsx)(Um.Provider,{value:c,children:Object(re.jsx)(Gm,{editor:e.tagEditor,backgroundColor:e.backgroundColor,foregroundColor:e.foregroundColor,customStyle:e.customStyle})})}function Hm(e,t){var n=(Lm||(Lm=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}function zm(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}function Ym(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=zm(e,"font-weight")||"normal",n=zm(e,"font-size")||"16px",r=zm(e,"font-family")||"Times New Roman";return"".concat(t," ").concat(n," ").concat(r)}function Km(){var e=Object(W.useContext)(Ie.CtxDropdownRefBody),t=Object(W.useContext)(Um).behavior,n=Object(W.useMemo)((function(){return function(n){e(n),t.refDropdownBody(n)}}),[t,e]);Object(W.useEffect)((function(){return window.addEventListener("mousedown",t.handleWindowMouseDown),function(){return window.removeEventListener("mousedown",t.handleWindowMouseDown)}}),[t]);var r=Object(W.useContext)(Um).setup.columnDrivers,o=Object(W.useContext)(Um).editorDataTable,i=Object(W.useContext)(Ie.CtxDropdownCtrlRect);return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",{ref:n,className:jm.a.body,onMouseDown:t.handleBodyMouseDown,children:Object(re.jsx)(qm,{drivers:r,dataTable:o,rectCtrl:i,beh:t,rowHeight:25})})}})}var qm=Object(K.observer)((Am=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).refMultiGrid=Object(W.createRef)(),Object(de.a)(r,"scrollbarSize",Vm,Object(pe.a)(r)),r.hasHeader=void 0,r.hoveredRowIndex=-1,r.columnCount=0,r.cellPadding=20,r.maxHeight=150,r.columnCount=r.props.drivers.driverCount,r.hasHeader=r.columnCount>1,r}return Object(Q.a)(n,[{key:"rowCount",get:function(){return this.props.dataTable.rowCount+(this.hasHeader?1:0)}},{key:"height",get:function(){for(var e=0,t=0;t<this.rowCount;t++)e+=this.props.rowHeight;return Math.min(e,this.maxHeight)+this.scrollbarSize.horiz}},{key:"handleScrollbarPresenceChange",value:function(e){this.scrollbarSize={horiz:e.horizontal?e.size:0,vert:e.vertical?e.size:0}}},{key:"renderTableCell",value:function(e){var t=this,n=e.columnIndex,r=e.key,o=(e.parent,e.rowIndex),i=e.style,a=Zg.Provider;return Object(re.jsx)(a,{value:{visibleColumnIndex:n,visibleRowIndex:o},style:i,children:this.hasHeader&&o>0||!this.hasHeader?Object(re.jsx)("div",{style:i,className:ne()({isHoveredRow:o===this.hoveredRowIndex}),onMouseOver:function(e){t.hoveredRowIndex=o},onMouseOut:function(e){t.hoveredRowIndex=-1},children:Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:t.props.drivers.getDriver(n).bodyCellDriver.render(o-(t.hasHeader?1:0))})}})}):Object(re.jsx)("div",{style:i,children:Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:t.props.drivers.getDriver(n).headerCellDriver.render()})}})})},r)}},{key:"render",value:function(){for(var e=this,t=0,n=0,r=[],o=0;o<this.columnCount;o++){for(var i=100,a=0;a<this.rowCount-1;a++){var s=this.props.drivers.getDriver(o).bodyCellDriver.formattedText(a),c=Math.round(Hm(s,Ym()))+this.cellPadding;c>i&&(i=c)}if(n+=i,r.push(i),t+=i,n>=window.innerWidth-100){n=window.innerWidth-100;break}}n=Math.max(n+this.scrollbarSize.vert,this.props.rectCtrl.width);var u=1;return t>0&&t<this.props.rectCtrl.width&&(u=(n-this.scrollbarSize.vert)/t),r=r.map((function(e){return e*u})),0===n?null:Object(re.jsx)(Gd.c,{ref:this.refMultiGrid,scrollToRow:this.props.beh.scrollToRowIndex,scrollToAlignment:"center",onScrollbarPresenceChange:function(t){return e.handleScrollbarPresenceChange(t)},classNameTopRightGrid:jm.a.table,classNameBottomRightGrid:jm.a.table,columnCount:this.columnCount,rowCount:this.rowCount,columnWidth:function(e){var t=e.index;return r[t]},rowHeight:this.props.rowHeight,fixedRowCount:this.hasHeader?1:0,height:this.height,width:n,cellRenderer:function(t){return e.renderTableCell(t)},onScroll:this.props.beh.handleScroll})}}]),n}(H.a.Component),Vm=Object($.a)(Am.prototype,"scrollbarSize",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{horiz:0,vert:0}}}),Em=Am))||Em;function Qm(e){var t=Object(W.useMemo)((function(){return function(t){e.behavior.refInputElement(t)}}),[e.behavior]);return Object(W.useEffect)((function(){e.behavior.updateTextOverflowState()}),[]),Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("input",{className:ne()("input",jm.a.input,{isLink:e.isLink}),ref:t,placeholder:e.editorData.isResolving?"Loading...":"",onChange:e.behavior.handleInputChange,value:e.behavior.inputValue||"",style:e.customStyle?e.customStyle:{color:e.foregroundColor,backgroundColor:e.backgroundColor},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})}})}var Xm,Zm,$m,Jm=function(e){var t=Object(W.useContext)(Ie.CtxDropdownRefCtrl);return Object(W.useEffect)((function(){e.behavior.handleInputChange({target:{value:""}}),e.behavior.makeFocused()})),Object(re.jsxs)("div",{className:ne()(jm.a.control,wm.a.root),ref:t,children:[Object(re.jsx)(Qm,{backgroundColor:e.backgroundColor,foregroundColor:e.foregroundColor,customStyle:e.customStyle,isLink:e.isLink,behavior:e.behavior,editorData:e.editorData}),Object(re.jsx)(qm,{drivers:e.columnDrivers,dataTable:e.dataTable,rectCtrl:{top:0,left:0,width:window.screen.width,height:0,bottom:0,right:0},beh:e.behavior,rowHeight:30})]})},ew=n(185),tw=n.n(ew),nw=n(144),rw=n.n(nw),ow=n(147),iw=n.n(ow),aw=function(e){return Object(re.jsx)("div",{className:iw.a.tagInputContainer+(e.className?" ".concat(e.className):""),children:e.children})},sw=function(e){return Object(re.jsx)("div",{className:iw.a.tagInputAdd+(e.className?" ".concat(e.className):""),onClick:function(t){return e.onClick(t)},onMouseDown:e.onMouseDown,ref:e.domRef,children:Object(re.jsx)("i",{className:"fas fa-plus"})})},cw=function(e){return Object(re.jsx)("div",{className:iw.a.tagInputItemDelete+(e.className?" ".concat(e.className):""),onClick:e.onClick,children:Object(re.jsx)("i",{className:"fas fa-times"})})},uw=function(e){return Object(re.jsx)("div",{className:iw.a.tagInputItem+(e.className?" ".concat(e.className):""),children:e.children})},lw=Object(K.inject)((function(e,t){var n=e.property,r=t.value,o=ur(n);return{textualValues:null===r||void 0===r?void 0:r.map((function(e){return o.resolveCellText(n,e)}))}}))(Object(K.observer)((function(e){var t,n,r=Object(W.useContext)(Um).behavior,o=Object(W.useContext)(Ie.CtxDropdownRefCtrl),i=Object(W.useContext)(Um).editorData,a=Array.isArray(e.value)?Object(gt.a)(e.value):e.value;function s(t,n){if(!e.isReadOnly){var r=a.indexOf(n);if(r>-1){var o=a.splice(r,1)[0];e.onChange&&e.onChange(t,a),e.onEditorBlur&&e.onEditorBlur(t),i.remove(o)}}}i.setValue(a);var c=Object(W.useState)(void 0),u=Object(d.a)(c,2),l=u[0],p=u[1],h=Object(W.useMemo)((function(){return function(e){r.refInputElement(e),p(e)}}),[r]);Object(W.useEffect)((function(){r.subscribeToFocusManager&&r.elmInputElement&&r.subscribeToFocusManager(r.elmInputElement),e.autoFocus&&setTimeout((function(){return null===l||void 0===l?void 0:l.focus()}))}),[r,l,e.autoFocus]);var f=Object(W.useRef)();return Object(W.useEffect)((function(){var e;(null===(e=f.current)||void 0===e?void 0:e.length)!==(null===a||void 0===a?void 0:a.length)&&(r.elmInputElement.value=""),f.current=a}),[f.current,null===(t=f.current)||void 0===t?void 0:t.length,a,null===a||void 0===a?void 0:a.length,null===(n=r.elmInputElement)||void 0===n?void 0:n.value]),Object(re.jsx)("div",{className:tw.a.editorContainer,ref:o,children:Object(re.jsxs)(aw,{className:"tagInput",children:[a?a.map((function(t,n){return Object(re.jsxs)(uw,{children:[Object(re.jsx)(cw,{onClick:function(e){s(e,t)}}),e.textualValues[n]||""]},t)})):null,e.isReadOnly?null:Object(re.jsx)(sw,{onClick:function(e){r.handleInputBtnClick(e),r.elmInputElement.focus()}}),Object(re.jsx)("input",{id:e.id,disabled:e.isReadOnly,className:rw.a.filterInput+" "+e.customInputClass,ref:h,placeholder:i.isResolving?"Loading...":"",onChange:r.handleInputChange,onKeyDown:function(t){var n;"Backspace"===t.key&&""===t.target.value&&a.length>0&&s(t,a[a.length-1]),r.handleInputKeyDown(t),null===(n=e.onKeyDown)||void 0===n||n.call(e,t)},onFocus:r.handleInputFocus,onBlur:r.handleInputBlur,onDoubleClick:e.onDoubleClick,autoComplete:"off",style:e.customStyle?e.customStyle:{color:e.foregroundColor,backgroundColor:e.backgroundColor},size:1})]})})}))),dw=n(186),pw=n.n(dw);function hw(e){var t=Object(W.useContext)(K.MobXProviderContext).workbench.lookupListCache,n=Object(W.useState)((function(){var n,r,o,i=new fw(e.getOptions),a=new bw(e.onChange),s=new Ug((function(){return f}),a),c=new zg((function(){return f}),t),u=new Yg({api:i,data:a,dataTable:s,setup:function(){return f},cache:c,isReadOnly:!1}),l=new Gg,d=new Map([[e.property.identifier,0]]),p=[];d.set(e.property.name,1),p.push(e.property.name),l.allDrivers.push({columnId:e.property.id,headerCellDriver:new Qg(e.property.name),bodyCellDriver:new $g(1,s,u)});var h=!vi(e.property).isGrouping&&(null===(n=e.property.lookup)||void 0===n?void 0:n.cached),f=new cm(e.property.id,e.lookup.lookupId,[],p,d,!0,e.property.identifier,0,e.property.parameters,null===(r=e.property.lookup)||void 0===r?void 0:r.dropDownType,h,!(null===(o=e.property.lookup)||void 0===o?void 0:o.searchByFirstColumnOnly),l);return{behavior:u,editorData:a,editorDataTable:s,setup:f}})),r=Object(d.a)(n,1)[0];var o=e.values;return Object(re.jsx)(Um.Provider,{value:r,children:Object(re.jsx)(Gm,{editor:Object(re.jsx)(lw,{id:e.id,customInputClass:pw.a.tagInput,value:o,isReadOnly:!1,onChange:function(t,n){e.onChange(n)},onClick:void 0,autoFocus:e.autoFocus})})})}var fw=function(){function e(t){Object(q.a)(this,e),this.getOptions=t}return Object(Q.a)(e,[{key:"getLookupList",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOptions(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))}]),e}(),bw=(Xm=c.action.bound,Zm=function(){function e(t){Object(q.a)(this,e),this.onChange=t,Object(de.a)(this,"_value",$m,this)}return Object(Q.a)(e,[{key:"setValue",value:function(e){e&&(this._value=Array.isArray(e)?e:[e])}},{key:"value",get:function(){return this._value}},{key:"text",get:function(){return""}},{key:"isResolving",get:function(){return!1}},{key:"chooseNewValue",value:function(e){null===e||this._value.includes(e)||(this._value=[].concat(Object(gt.a)(this._value),[e]),this.onChange(this._value))}},{key:"idsInEditor",get:function(){return this._value}},{key:"remove",value:function(e){var t=this._value.indexOf(e);t>-1&&this._value.splice(t,1)}}]),e}(),Object($.a)(Zm.prototype,"value",[c.computed],Object.getOwnPropertyDescriptor(Zm.prototype,"value"),Zm.prototype),$m=Object($.a)(Zm.prototype,"_value",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(Zm.prototype,"text",[c.computed],Object.getOwnPropertyDescriptor(Zm.prototype,"text"),Zm.prototype),Object($.a)(Zm.prototype,"chooseNewValue",[Xm],Object.getOwnPropertyDescriptor(Zm.prototype,"chooseNewValue"),Zm.prototype),Zm),vw=Object(K.observer)((function(e){var t,n=ur(e.property),r=null!==(t=e.values)&&void 0!==t?t:function(e){var t=ur(e),n=li(e);if(!n)return[];var r=t.getCellValue(n,e);return Array.isArray(r)?Object(gt.a)(r):r}(e.property),o=r.map((function(t){return n.resolveCellText(e.property,t)}));return Object(re.jsx)("div",{className:tw.a.editorContainer+" tagEditorContainer",children:Object(re.jsxs)(aw,{className:rw.a.tagInput,children:[r.map((function(t,n){return Object(re.jsxs)(uw,{children:[Object(re.jsx)(cw,{onClick:function(n){!function(t,n){var o;e.isReadOnly||r.indexOf(n)>-1&&(r.remove(n),null===(o=e.onChange)||void 0===o||o.call(e,t,r))}(n,t)}}),o[n]||""]},t)})),e.isReadOnly?null:Object(re.jsx)(sw,{onClick:function(){e.isReadOnly||e.onPlusButtonClick()}}),Object(re.jsx)("input",{id:e.id,disabled:e.isReadOnly,className:rw.a.filterInput+" "+e.customInputClass,autoComplete:"off",style:e.customStyle?e.customStyle:{color:e.foregroundColor,backgroundColor:e.backgroundColor},size:1})]})})}));var yw,gw,mw,ww,Ow,jw,kw,xw,Cw,Iw=Object(K.observer)((function(e){var t;return Object(re.jsx)(vw,{isReadOnly:!1,property:e.property,values:null!==(t=e.setting.val1)&&void 0!==t?t:[],onChange:function(t,n){return e.onChange(n)},onPlusButtonClick:function(){var t,n=fn(e.property),r=n.layoutState;n.layoutState=new jn(Object(re.jsx)(Sw,{id:e.id,lookup:e.lookup,property:e.property,getOptions:e.getOptions,onChange:function(t){e.onChange(t),n.layoutState=r},values:null!==(t=e.setting.val1)&&void 0!==t?t:[],autoFocus:e.autoFocus}),e.property.name,r)}},e.id)}));function Sw(e){var t=Object(W.useContext)(K.MobXProviderContext).workbench.lookupListCache,n=Object(W.useState)((function(){var n,r,o,i=new fw(e.getOptions),a=new bw(e.onChange);a.setValue(e.values);var s=new Ug((function(){return f}),a),c=new zg((function(){return f}),t),u=new qg({api:i,data:a,dataTable:s,setup:function(){return f},cache:c}),l=new Gg,d=new Map([[e.property.identifier,0]]),p=[];d.set(e.property.name,1),p.push(e.property.name),l.allDrivers.push({columnId:e.property.id,headerCellDriver:new Qg(e.property.name),bodyCellDriver:new $g(1,s,u)});var h=!vi(e.property).isGrouping&&(null===(n=e.property.lookup)||void 0===n?void 0:n.cached),f=new cm(e.property.id,e.lookup.lookupId,[],p,d,!0,e.property.identifier,0,e.property.parameters,null===(r=e.property.lookup)||void 0===r?void 0:r.dropDownType,h,!(null===(o=e.property.lookup)||void 0===o?void 0:o.searchByFirstColumnOnly),l);return{behavior:u,editorData:a,editorDataTable:s,setup:f}})),r=Object(d.a)(n,1)[0];return Object(re.jsx)(Jm,Object(Fe.a)(Object(Fe.a)({},e),{},{behavior:r.behavior,dataTable:r.editorDataTable,columnDrivers:r.setup.columnDrivers,editorData:r.editorData}))}var Dw=[Bb.in,Bb.notIn,Bb.startsWith,Bb.notStartsWith,Bb.contains,Bb.notContains,Bb.isNull,Bb.isNotNull],Rw=[Bb.startsWith,Bb.notStartsWith,Bb.contains,Bb.notContains];var Tw=Object(K.observer)((function(e){return Object(re.jsx)(Eb,{id:e.id,trigger:Object(re.jsx)(re.Fragment,{children:(Dw.find((function(t){return t.type===e.setting.type}))||{}).caption}),children:Dw.filter((function(t){return e.enableLookupTypeFilters||!Rw.includes(t)})).map((function(t){return Object(re.jsx)(Ab,{onClick:function(){Object(c.runInAction)((function(){(function(e,t){var n=Rw.map((function(e){return e.type}));return"null"===t||"nnull"===t||n.includes(t)&&!n.includes(e)})(e.setting.type,t.type)&&(e.setting.val1=void 0,e.setting.val2=void 0),e.setting.type=t.type,e.setting.isComplete="null"===t.type||"nnull"===t.type||void 0!==e.setting.val1||void 0!==e.setting.val2}))},children:t.caption},t.type)}))})})),_w=(yw=c.action.bound,gw=c.action.bound,Object(K.observer)((ww=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"handleSelectedItemsChange",value:function(e){this.props.setting.val1=Object(gt.a)(e),this.props.setting.val2=void 0,this.props.setting.isComplete=void 0!==this.props.setting.val1&&this.props.setting.val1.length>0}},{key:"handleTermChange",value:function(e){this.props.setting.val1=void 0,this.props.setting.val2=e.target.value,this.props.setting.isComplete=!!this.props.setting.val2}},{key:"render",value:function(){var e,t=this.props.setting;switch(null===t||void 0===t?void 0:t.type){case"in":case"nin":var n,r;return Ot(this.props.property)?Object(re.jsx)(Iw,{id:this.props.id,lookup:this.props.lookup,property:this.props.property,getOptions:this.props.getOptions,onChange:this.handleSelectedItemsChange,values:null!==(n=this.props.setting.val1)&&void 0!==n?n:[],autoFocus:this.props.autoFocus,setting:this.props.setting}):Object(re.jsx)(hw,{id:this.props.id,lookup:this.props.lookup,property:this.props.property,getOptions:this.props.getOptions,onChange:this.handleSelectedItemsChange,values:null!==(r=this.props.setting.val1)&&void 0!==r?r:[],autoFocus:this.props.autoFocus});case"starts":case"nstarts":case"contains":case"ncontains":return Object(re.jsx)("input",{id:this.props.id,value:null!==(e=this.props.setting.val2)&&void 0!==e?e:"",className:zv.a.input,onChange:this.handleTermChange});default:return null}}}]),n}(H.a.Component),Object($.a)(ww.prototype,"handleSelectedItemsChange",[yw],Object.getOwnPropertyDescriptor(ww.prototype,"handleSelectedItemsChange"),ww.prototype),Object($.a)(ww.prototype,"handleTermChange",[gw],Object.getOwnPropertyDescriptor(ww.prototype,"handleTermChange"),ww.prototype),mw=ww))||mw),Pw=Object(K.observer)(Ow=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.setting;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Tw,{id:"combo_"+this.props.id,setting:e,enableLookupTypeFilters:this.props.property.supportsServerSideSorting}),Object(re.jsx)(_w,{id:"input_"+this.props.id,setting:e,getOptions:this.props.getOptions,lookup:this.props.lookup,property:this.props.property,autoFocus:this.props.autoFocus})]})}}],[{key:"defaultSettings",get:function(){return new Fw(Dw[0].type)}}]),n}(H.a.Component))||Ow,Fw=(jw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;Object(q.a)(this,e),Object(de.a)(this,"type",kw,this),Object(de.a)(this,"val1",xw,this),Object(de.a)(this,"val2",Cw,this),this.isComplete=void 0,this._lookupId=void 0,this.type=t,this.isComplete=n,Array.isArray(r)?this.val1=Object(gt.a)(new Set(r)):void 0!==r&&null!==r&&(this.val1=Object(gt.a)(new Set(r.split(",")))),this.val2=null!==o&&void 0!==o?o:void 0}return Object(Q.a)(e,[{key:"lookupId",get:function(){if(Rw.map((function(e){return e.type})).includes(this.type))return this._lookupId},set:function(e){this._lookupId=e}},{key:"filterValue1",get:function(){if(!this.val1)return this.val1;switch(this.type){case"contain":case"ncontain":return this.val2;case"in":case"nin":return this.val1;default:return}}},{key:"filterValue2",get:function(){return this.val2}},{key:"val1ServerForm",get:function(){return this.val1?this.val1.join(","):this.val1}},{key:"val2ServerForm",get:function(){return this.val2}}]),e}(),kw=Object($.a)(jw.prototype,"type",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xw=Object($.a)(jw.prototype,"val1",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cw=Object($.a)(jw.prototype,"val2",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jw);var Mw,Lw,Ew,Aw=o.a.mark(Vw);function Vw(e){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Be(e).isLazyLoading){n.next=7;break}return n.next=4,Nw(e);case 4:case 10:return n.abrupt("return",n.sent);case 7:return t=ur(e),n.next=10,t.getAllValuesOfProp(e);case 11:case"end":return n.stop()}}),Aw)}function Nw(e){return Bw.apply(this,arguments)}function Bw(){return(Bw=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(t),e.next=3,n.getFilterListValues({MenuId:Hn(t),SessionFormIdentifier:Wn(t),DataStructureEntityId:un(t),Property:t.id,Filter:"TagInput"===t.column?"":rr({ctx:t,excludePropertyId:t.id}),FilterLookups:br(t)});case 3:return r=e.sent,e.abrupt("return",new Set(r.map((function(e){return e})).filter((function(e){return e}))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uw(e){var t=Object(W.useContext)(K.MobXProviderContext).workbench.lookupListCache,n=Object(W.useState)((function(){var n,r,o,i=new fw(e.getOptions),a=new qw(e.setting),s=new Ug((function(){return h}),a),c=new zg((function(){return h}),t),u=new Yg({api:i,data:a,dataTable:s,setup:function(){return h},cache:c,isReadOnly:!1,onDoubleClick:function(t){return cs(e.property,t)}}),l=new Gg,d=new Map([[e.property.identifier,0]]),p=[];d.set(e.property.name,1),p.push(e.property.name),l.allDrivers.push({columnId:e.property.id,headerCellDriver:new Qg(e.property.name),bodyCellDriver:new $g(1,s,u)});var h=new cm(e.property.id,e.lookup.lookupId,[],p,d,!0,e.property.identifier,0,e.property.parameters,null===(n=e.property.lookup)||void 0===n?void 0:n.dropDownType,null===(r=e.property.lookup)||void 0===r?void 0:r.cached,!(null===(o=e.property.lookup)||void 0===o?void 0:o.searchByFirstColumnOnly),l);return{behavior:u,editorData:a,editorDataTable:s,setup:h}})),r=Object(d.a)(n,1)[0];r.editorData.setting=e.setting;var o=e.values;return Object(re.jsx)(Um.Provider,{value:r,children:Object(re.jsx)(Gm,{editor:Object(re.jsx)(lw,{id:e.id,customInputClass:pw.a.tagInput,value:o,isReadOnly:!1,autoFocus:e.autoFocus,onClick:void 0})})})}var Gw,Ww,Hw,zw,Yw,Kw,qw=(Mw=c.action.bound,Lw=c.action.bound,Ew=function(){function e(t,n){Object(q.a)(this,e),this.setting=t,this.onChange=n}return Object(Q.a)(e,[{key:"setValue",value:function(e){}},{key:"value",get:function(){return this.setting.val1}},{key:"text",get:function(){return""}},{key:"isResolving",get:function(){return!1}},{key:"onValueChanged",value:function(){var e;this.setting.val2=void 0,this.setting.isComplete=void 0!==this.setting.val1&&this.setting.val1.length>0,null===(e=this.onChange)||void 0===e||e.call(this)}},{key:"chooseNewValue",value:function(e){var t;null===e||(null===(t=this.setting.val1)||void 0===t?void 0:t.includes(e))||(void 0===this.setting.val1?this.setting.val1=[e]:this.setting.val1=[].concat(Object(gt.a)(this.setting.val1),[e]),this.onValueChanged())}},{key:"idsInEditor",get:function(){var e;return null!==(e=this.setting.val1)&&void 0!==e?e:[]}},{key:"remove",value:function(e){var t,n=this.setting.val1.indexOf(e);n>-1&&this.setting.val1.splice(n,1),0===(null===(t=this.setting.val1)||void 0===t?void 0:t.length)?this.setting.val1=void 0:this.setting.val1=Object(gt.a)(this.setting.val1),this.onValueChanged()}}]),e}(),Object($.a)(Ew.prototype,"value",[c.computed],Object.getOwnPropertyDescriptor(Ew.prototype,"value"),Ew.prototype),Object($.a)(Ew.prototype,"text",[c.computed],Object.getOwnPropertyDescriptor(Ew.prototype,"text"),Ew.prototype),Object($.a)(Ew.prototype,"chooseNewValue",[Mw],Object.getOwnPropertyDescriptor(Ew.prototype,"chooseNewValue"),Ew.prototype),Object($.a)(Ew.prototype,"remove",[Lw],Object.getOwnPropertyDescriptor(Ew.prototype,"remove"),Ew.prototype),Ew),Qw=function(e){var t;return Object(re.jsx)(vw,{isReadOnly:!1,property:e.property,values:null!==(t=e.setting.val1)&&void 0!==t?t:[],onPlusButtonClick:function(){var t,n=fn(e.property),r=n.layoutState;n.layoutState=new jn(Object(re.jsx)(Xw,{id:e.id,lookup:e.lookup,property:e.property,getOptions:e.getOptions,onChange:function(){n.layoutState=r},setting:e.setting,values:null!==(t=e.setting.val1)&&void 0!==t?t:[],autoFocus:e.autoFocus}),e.property.name,r)}},e.id)};function Xw(e){var t=Object(W.useContext)(K.MobXProviderContext).workbench.lookupListCache,n=Object(W.useState)((function(){var n,r,o,i=new fw(e.getOptions),a=new qw(e.setting,e.onChange),s=new Ug((function(){return h}),a),c=new zg((function(){return h}),t),u=new qg({api:i,data:a,dataTable:s,setup:function(){return h},cache:c}),l=new Gg,d=new Map([[e.property.identifier,0]]),p=[];d.set(e.property.name,1),p.push(e.property.name),l.allDrivers.push({columnId:e.property.id,headerCellDriver:new Qg(e.property.name),bodyCellDriver:new $g(1,s,u)});var h=new cm(e.property.id,e.lookup.lookupId,[],p,d,!0,e.property.identifier,0,e.property.parameters,null===(n=e.property.lookup)||void 0===n?void 0:n.dropDownType,null===(r=e.property.lookup)||void 0===r?void 0:r.cached,!(null===(o=e.property.lookup)||void 0===o?void 0:o.searchByFirstColumnOnly),l);return{behavior:u,editorData:a,editorDataTable:s,setup:h}})),r=Object(d.a)(n,1)[0];return r.editorData.setting=e.setting,Object(re.jsx)(Jm,Object(Fe.a)(Object(Fe.a)({},e),{},{behavior:r.behavior,dataTable:r.editorDataTable,columnDrivers:r.setup.columnDrivers,editorData:r.editorData}))}var Zw=[Bb.in,Bb.notIn,Bb.isNull,Bb.isNotNull],$w=Object(K.observer)((function(e){return Object(re.jsx)(Eb,{id:e.id,trigger:Object(re.jsx)(re.Fragment,{children:(Zw.find((function(t){return t.type===e.setting.type}))||{}).caption}),children:Zw.map((function(t){return Object(re.jsx)(Ab,{onClick:function(){Object(c.runInAction)((function(){e.setting.type=t.type,e.setting.isComplete="null"===t.type||"nnull"===t.type||void 0!==e.setting.val1,"null"!==t.type&&"nnull"!==t.type||(e.setting.val1=void 0,e.setting.val2=void 0)}))},children:t.caption},t.type)}))})})),Jw=Object(K.observer)(Gw=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.setting;switch(null===e||void 0===e?void 0:e.type){case"in":case"nin":return Ot(this.props.property)?Object(re.jsx)(Qw,{id:this.props.id,lookup:this.props.lookup,property:this.props.property,getOptions:this.props.getOptions,setting:e,autoFocus:this.props.autoFocus}):Object(re.jsx)(Uw,{id:this.props.id,lookup:this.props.lookup,property:this.props.property,getOptions:this.props.getOptions,values:null!==(t=e.val1)&&void 0!==t?t:[],setting:e,autoFocus:this.props.autoFocus});var t;default:return null}}}]),n}(H.a.Component))||Gw,eO=Object(K.observer)(Ww=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.setting;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)($w,{setting:e,id:"combo_"+this.props.id}),Object(re.jsx)(Jw,{id:"input_"+this.props.id,setting:e,getOptions:this.props.getOptions,lookup:this.props.lookup,property:this.props.property,autoFocus:this.props.autoFocus})]})}}],[{key:"defaultSettings",get:function(){return new tO(Zw[0].type)}}]),n}(H.a.Component))||Ww,tO=(Hw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;Object(q.a)(this,e),Object(de.a)(this,"type",zw,this),Object(de.a)(this,"val1",Yw,this),Object(de.a)(this,"val2",Kw,this),this.isComplete=void 0,this.lookupId=void 0,this.type=t,this.isComplete=n,void 0!==r&&null!==r&&(this.val1=Object(gt.a)(new Set(r.split(",")))),this.val2=null!==o&&void 0!==o?o:void 0}return Object(Q.a)(e,[{key:"filterValue1",get:function(){if(!this.val1)return this.val1;switch(this.type){case"in":case"nin":return this.val1;default:return}}},{key:"filterValue2",get:function(){return"between"===this.type||"nbetween"===this.type?this.val2:void 0}},{key:"val1ServerForm",get:function(){return this.val1?this.val1.join(","):this.val1}},{key:"val2ServerForm",get:function(){return this.val2}}]),e}(),zw=Object($.a)(Hw.prototype,"type",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yw=Object($.a)(Hw.prototype,"val1",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kw=Object($.a)(Hw.prototype,"val2",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hw),nO=Object(be.c)((function(e){var t=Object(W.useContext)(K.MobXProviderContext).property;function n(e){var n=function(e,t){var n=nr(e).getSettingByPropertyId(t);return n?n.setting:void 0}(t,t.id);return n||(n=e,function(e){var t=We(e);return Object(c.flow)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,nr(e).setFilter({propertyId:t.id,dataType:t.column,setting:r}),n.next=8;break;case 4:return n.prev=4,n.t0=n.catch(0),n.delegateYield(yt(e)(n.t0),"t1",7);case 7:throw n.t0;case 8:case"end":return n.stop()}}),n,null,[[0,4]])})))}(t)(n)),n}function r(){za(e.ctx).focusTableOnReload=!1}switch(t.column){case"Text":return Object(re.jsx)(ty,{id:t.modelInstanceId,setting:n(ty.defaultSettings),onChange:r,autoFocus:e.autoFocus});case"CheckBox":return Object(re.jsx)(Wv,{id:t.modelInstanceId,setting:n(Wv.defaultSettings),ctx:t});case"Date":return Object(re.jsx)(xy,{id:t.modelInstanceId,setting:n(xy.defaultSettings),autoFocus:e.autoFocus,property:t});case"Number":return Object(re.jsx)(Vg,{id:t.modelInstanceId,allowDecimalSeparator:"Integer"!==t.entity&&"Long"!==t.entity,setting:n(Vg.defaultSettings),onChange:r,autoFocus:e.autoFocus});case"ComboBox":var i=n(Pw.defaultSettings);return i.lookupId=t.lookupId,Object(re.jsx)(Pw,{id:t.modelInstanceId,setting:i,property:t,lookup:t.lookup,autoFocus:e.autoFocus,getOptions:Object(c.flow)(o.a.mark((function e(n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Vw(t),"t0",1);case 1:return i=e.t0,e.next=4,null===(r=t.lookupEngine)||void 0===r?void 0:r.lookupResolver.resolveList(i);case 4:return a=e.sent,e.abrupt("return",Array.from(i.values()).map((function(e){return[e,a.get(e)]})).filter((function(e){return e[1]&&e[1].toLocaleLowerCase().includes((n||"").toLocaleLowerCase())})).sort((function(e,t){return e[1]>t[1]?1:-1})));case 6:case"end":return e.stop()}}),e)})))});case"TagInput":return Object(re.jsx)(eO,{id:t.modelInstanceId,setting:n(eO.defaultSettings),property:t,lookup:t.lookup,autoFocus:e.autoFocus,getOptions:Object(c.flow)(o.a.mark((function e(n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Vw(t),"t0",1);case 1:return i=e.t0,e.next=4,null===(r=t.lookupEngine)||void 0===r?void 0:r.lookupResolver.resolveList(i);case 4:return a=e.sent,e.abrupt("return",Array.from(a.entries()).filter((function(e){return e[1]&&e[1].toLocaleLowerCase().includes((n||"").toLocaleLowerCase())})).sort((function(e,t){return e[1]>t[1]?1:-1})));case 6:case"end":return e.stop()}}),e)})))});default:return Object(re.jsx)(re.Fragment,{children:t.column})}})),rO=n(118),oO=n.n(rO),iO=Object(K.observer)((function(e){var t=fi(e.dataView).filter((function(e){return"Image"!==e.column})),n=Tf(e.dataView);return Object(re.jsxs)("div",{className:oO.a.root,children:[Object(re.jsx)("div",{className:oO.a.rowContainer,children:t.map((function(t){return Object(re.jsx)("div",{className:oO.a.filterRow,children:Object(re.jsxs)(K.Provider,{property:t,children:[Object(re.jsx)("div",{className:oO.a.label,children:t.name}),Object(re.jsx)("div",{className:oO.a.filterSettingContainer,children:Object(re.jsx)(nO,{autoFocus:!1,ctx:e.dataView},"filter-settings-".concat(t.id))})]})})}))}),Object(re.jsx)("div",{className:oO.a.rowCount,children:bt("Rows","row_count")+": "+n})]})})),aO=n(47),sO=n.n(aO),cO=n(59);function uO(e,t,n){Sn({ctx:e,generator:o.a.mark((function r(){var i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null===(i=It(e))||void 0===i||i.swapColumns(t,n),r.delegateYield(la(e).onColumnOrderChanged(),"t0",3);case 3:case"end":return r.stop()}}),r)}))()})}var lO,dO,pO,hO,fO,bO,vO,yO=n(244),gO=n.n(yO),mO=Object(K.observer)((function(e){var t=fi(e.dataView);return Object(re.jsx)(cO.a,{onDragEnd:function(t){return function(t){if(t.destination){var n=It(e.dataView);uO(n,n.tablePropertyIds[t.source.index],n.tablePropertyIds[t.destination.index])}}(t)},children:Object(re.jsx)(cO.c,{droppableId:"mobileHeaders",direction:"vertical",children:function(e){return Object(re.jsxs)("div",Object(Fe.a)(Object(Fe.a)({className:gO.a.root},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(re.jsx)(cO.b,{draggableId:e.id,index:t,children:function(t){return function(e,t){return Object(re.jsx)("div",Object(Fe.a)(Object(Fe.a)(Object(Fe.a)({className:gO.a.row,ref:null===t||void 0===t?void 0:t.innerRef},null===t||void 0===t?void 0:t.draggableProps),t.dragHandleProps),{},{children:e}))}(e.name,t)}},e.id)})),e.placeholder]}))}})})})),wO=n(193),OO=n.n(wO),jO=function(e){return Object(re.jsx)("div",{className:OO.a.root,onClick:e.onClick,children:e.iconPath&&Object(re.jsx)("div",{className:OO.a.icon,children:Object(re.jsx)(Ie.Icon,{src:e.iconPath,className:e.className+" "+(e.hidden?OO.a.hidden:"")})})})},kO=n(84),xO=n.n(kO),CO=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:xO.a.navigationButton,onClick:e.onClick,children:[Object(re.jsx)("div",{className:xO.a.label,children:e.label}),Object(re.jsx)(Ie.Icon,{src:e.isOpen?"./icons/noun-chevron-933246.svg":"./icons/noun-chevron-933251.svg",className:xO.a.navigationIcon})]}),e.children]})},IO=Object(K.observer)((function(e){var t=Ad(e.dataView),n=Object(W.useContext)(K.MobXProviderContext).application.mobileState;return Object(re.jsxs)("div",{className:sO.a.root,children:[Object(re.jsx)("div",{className:sO.a.content,children:Object(re.jsx)("div",{className:sO.a.columnConfigs,children:t.sortedColumnConfigs.map((function(e,n){return Object(re.jsx)(SO,{index:n,config:e,model:t})}))})}),Object(re.jsxs)("div",{className:sO.a.lockedColumnsRow,children:[bt("Locked columns count","column_config_locked_columns_count"),Object(re.jsx)("input",{className:sO.a.input,type:"number",min:0,value:""+t.columnsConfiguration.fixedColumnCount,onChange:t.handleFixedColumnsCountChange})]}),Object(re.jsxs)("div",{className:sO.a.buttonRow,children:[Object(re.jsx)(Ie.Button,{label:bt("OK","button_ok"),onClick:function(){t.onColumnConfigurationSubmit(),n.layoutState=new xn}}),Object(re.jsx)(Ie.Button,{label:bt("Save As...","column_config_save_as"),onClick:function(){return t.onSaveAsClick()}}),Object(re.jsx)(Ie.Button,{label:bt("Order","order_columns_button"),onClick:function(){var t=n.layoutState;n.layoutState=new jn(Object(re.jsx)(mO,{dataView:e.dataView}),bt("Order Columns","order_columns_title"),t,!0)}}),Object(re.jsx)(jO,{iconPath:"./icons/noun-close-25798.svg",onClick:Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.onColumnConfCancel(),n.layoutState=new xn;case 2:case"end":return e.stop()}}),e)})))},"close")]})]})})),SO=Object(K.observer)((function(e){var t=Cc.find((function(t){return t.value===e.config.aggregationType})),n=Ic.find((function(t){return t.value===e.config.timeGroupingUnit})),r=e.model.columnOptions.get(e.config.propertyId),o=r.name,i=r.entity,a=r.canGroup,s=r.canAggregate,c=(r.modelInstanceId,0===e.config.groupingIndex&&e.config.isVisible&&!e.config.aggregationType),u=Object(W.useState)(!c),l=Object(d.a)(u,2),p=l[0],h=l[1];return Object(re.jsx)(CO,{label:o,onClick:function(){return h(!p)},isOpen:p,children:p&&Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{className:sO.a.row,children:[Object(re.jsx)("div",{className:sO.a.label,children:bt("Visible","column_config_visible")}),Object(re.jsx)(Nv,{onChange:function(t){return e.model.setVisible(e.index,t.target.checked)},checked:e.config.isVisible})]},"Visible"),a&&Object(re.jsxs)("div",{className:sO.a.row,children:[Object(re.jsx)("div",{className:sO.a.label,children:bt("GroupBy","column_config_group_by")}),Object(re.jsx)(Nv,{checked:e.config.groupingIndex>0,onChange:function(t){return e.model.setGrouping(e.index,t.target.checked,i)},disabled:!a})]},"GroupBy"),e.config.groupingIndex>0&&"Date"===i&&Object(re.jsxs)("div",{className:sO.a.row,children:[Object(re.jsx)("div",{className:sO.a.label,children:bt("Grouping Unit","column_config_time_grouping_unit")}),Object(re.jsx)(Ie.SimpleDropdown,{className:sO.a.dropdown,options:Ic,selectedOption:n,onOptionClick:function(t){return e.model.setTimeGroupingUnit(e.index,t.value)}})]},"Grouping Unit"),("Currency"===i||"Integer"===i||"Float"===i||"Long"===i)&&s&&Object(re.jsxs)("div",{className:sO.a.row,children:[Object(re.jsx)("div",{className:sO.a.label,children:bt("Aggregation","column_config_aggregation")}),Object(re.jsx)(Ie.SimpleDropdown,{className:sO.a.dropdown,options:Cc,selectedOption:t,onOptionClick:function(t){return e.model.setAggregation(e.index,t.value)}})]},"Aggregation"),Object(re.jsxs)("div",{className:sO.a.row,children:[Object(re.jsx)("div",{className:sO.a.label,children:bt("Width","column_width")}),Object(re.jsx)("input",{className:sO.a.input,type:"number",onChange:function(t){return e.model.setWidth(e.index,t.target.value)},value:e.config.width})]},"Width")]})})})),DO=n(369),RO=n.n(DO),TO=n(370),_O=n.n(TO),PO=function(e){return Object(re.jsx)("div",{className:_O.a.root,children:e.lines.map((function(e,t){return Object(re.jsx)("p",{dangerouslySetInnerHTML:{__html:e}},t)}))})},FO=function(e){return Object(re.jsx)("div",{className:RO.a.root,children:e.recordInfo.info.length>0&&Object(re.jsx)(PO,{lines:e.recordInfo.info})})},MO=Object(K.observer)((hO=pO=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hiddenActionIds:new Set},e}return Object(Q.a)(n,[{key:"dataView",get:function(){return this.context.dataView}},{key:"shouldBeShown",value:function(e){return pd(e)||e.mode!==At.ActiveRecord}},{key:"relevantMenuActions",get:function(){var e=this;return this.allMenuActions.filter((function(e){return!e.groupId})).filter((function(t){return e.shouldBeShown(t)}))}},{key:"renderMenuActions",value:function(e){return this.relevantMenuActions.map((function(t){return Object(re.jsx)(kd,{onClick:function(n){e.setMenuDropped(!1),Id.onActionClick(t)(n,t)},children:t.caption},t.id)}))}},{key:"mobileState",get:function(){return fn(this.dataView)}},{key:"isBarVisible",get:function(){return this.props.isVisible}},{key:"allMenuActions",get:function(){return Mf(this.dataView)}},{key:"onFilterButtonClick",value:function(){this.mobileState.layoutState=new jn(Object(re.jsx)(iO,{dataView:this.dataView}),bt("Filter","filter_tool_tip"),new xn,!0)}},{key:"onColumnConfigurationClick",value:function(){var e=Ad(this.dataView);e.reset(),this.mobileState.layoutState=new jn(Object(re.jsx)(IO,{dataView:this.dataView}),e.columnsConfiguration.name?e.columnsConfiguration.name:bt("Default View","default_grid_view_view"),new xn,!1)}},{key:"onRecordInfoClick",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wf(t)(null);case 2:n=this.mobileState.layoutState,this.mobileState.layoutState=new jn(Object(re.jsx)(FO,{recordInfo:ca(t)}),bt("Record Info","infopanel_title"),n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.dataView,n=_f(t),r=hf(t),a=pf(t),s=df(t,!0),c=bf(t),u=Ed(t),l=ff(t),d=lf(t,!0),p=mf(t),h=yf(t),f=Df(t),b=li(t),v=Cf(t),y=Sf(t),g=If(t),m=v||y&&!!b||g&&!!b,w=Gf(t),O=!!Pe(t).dialogInfo,j=la(t),k=j.customTableConfigurations.length>0;return Object(re.jsx)(ve.default,{bounds:!0,children:function(x){var C=x.measureRef;x.contentRect;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(ad,{domRef:C,isVisible:e.isBarVisible,children:e.isBarVisible&&Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{className:"fullspaceBlock",children:[Object(re.jsx)(_d,{noShrink:!0,className:"rowCount",noDivider:!0,children:Hf(e.dataView)}),f?Object(re.jsxs)(_d,{isHidden:!1,noShrink:!0,className:"noDivider",children:[Object(re.jsx)(qO,{onMouseDown:c,isDisabled:u,children:Object(re.jsx)(Ie.Icon,{src:"./icons/move-up.svg",tooltip:bt("Move Up","increase_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:l,isDisabled:u,children:Object(re.jsx)(Ie.Icon,{src:"./icons/move-down.svg",tooltip:bt("Move Down","decrease_tool_tip")})})]}):null,m&&Object(re.jsxs)(_d,{noShrink:!0,className:"noDivider",children:[v&&Object(re.jsx)(qO,{className:"addRow "+(w?"isGreenHover":""),onClick:s,onShortcut:s,isDisabled:!w,shortcutPredicate:Yf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/add.svg",tooltip:bt("Add","add_tool_tip")})}),y&&!!b&&Object(re.jsx)(qO,{className:"deleteRow isRedHover",onMouseDown:a,onShortcut:a,shortcutPredicate:Kf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/minus.svg",tooltip:bt("Delete","delete_tool_tip")})}),g&&!!b&&Object(re.jsx)(qO,{className:"copyRow isOrangeHover",onMouseDown:d,onShortcut:d,shortcutPredicate:qf,children:Object(re.jsx)(Ie.Icon,{src:"./icons/duplicate.svg",tooltip:bt("Duplicate","add_duplicate_tool_tip")})})]})]}),t.isFormViewActive()&&Object(re.jsxs)(_d,{noShrink:!0,children:[Object(re.jsx)(qO,{onMouseDown:p,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-previous.svg",tooltip:bt("Previous","move_prev_tool_tip")})}),Object(re.jsx)(qO,{onMouseDown:h,children:Object(re.jsx)(Ie.Icon,{src:"./icons/list-arrow-next.svg",tooltip:bt("Next","move_next_tool_tip")})})]}),t.isTableViewActive()&&Object(re.jsxs)(_d,{noShrink:!0,children:[Object(re.jsx)(qO,{onMouseDown:function(){return e.onFilterButtonClick()},shortcutPredicate:Qf,isActive:n,className:"test-filter-button",children:Object(re.jsx)(Ie.Icon,{src:"./icons/search-filter.svg",tooltip:bt("Filter","filter_tool_tip")})}),Object(re.jsx)(Ld,{ctx:t})]}),Object(re.jsx)(_d,{noShrink:!0,children:Object(re.jsx)(rd,{trigger:function(e){var t=e.refTrigger,n=e.setDropped;return Object(re.jsx)(qO,{className:"threeDotMenu",refDom:t,onMouseDown:function(){return n(!0)},isActive:!1,children:Object(re.jsx)(Ie.Icon,{src:"./icons/dot-menu.svg",tooltip:bt("Tools","tools_tool_tip")})})},content:function(n){var a=n.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{onClick:function(e){a(!1),r(e)},children:bt("Export to Excel","excel_tool_tip")}),Object(re.jsx)(kd,{id:"columnConfigItem",onClick:function(t){a(!1),e.onColumnConfigurationClick()},children:bt("Column configuration","column_config_tool_tip")}),!O&&Object(re.jsx)(kd,{isDisabled:!1,onClick:function(n){a(!1),e.onRecordInfoClick(t)},children:bt("Show record information","info_button_tool_tip")}),k&&[Object(re.jsx)(kd,{isDisabled:!1,isSelected:j.defaultTableConfiguration.isActive,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),j.activeTableConfiguration=j.defaultTableConfiguration,e.next=4,fc(j);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Default View","default_grid_view_view")})].concat(Object(gt.a)(j.customTableConfigurations.map((function(e){return Object(re.jsx)(kd,{isDisabled:!1,isSelected:e.isActive,onClick:function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!1),j.activeTableConfiguration=e,t.next=4,fc(j);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:e.name},e.id)}))),[Object(re.jsx)(kd,{isDisabled:!1,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,fc(j);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Save View","save_current_column_config")}),Object(re.jsx)(kd,{isDisabled:j.defaultTableConfiguration.isActive,onClick:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,j.deleteActiveTableConfiguration();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:bt("Delete View","delete_current_column_config")})]),e.relevantMenuActions.length>0&&Object(re.jsx)(Uf,{}),e.renderMenuActions({setMenuDropped:a})]})}})})]})})}})}})}}]),n}(H.a.Component),pO.contextType=K.MobXProviderContext,dO=hO,Object($.a)(dO.prototype,"relevantMenuActions",[c.computed],Object.getOwnPropertyDescriptor(dO.prototype,"relevantMenuActions"),dO.prototype),Object($.a)(dO.prototype,"isBarVisible",[c.computed],Object.getOwnPropertyDescriptor(dO.prototype,"isBarVisible"),dO.prototype),Object($.a)(dO.prototype,"allMenuActions",[c.computed],Object.getOwnPropertyDescriptor(dO.prototype,"allMenuActions"),dO.prototype),Object($.a)(dO.prototype,"onFilterButtonClick",[c.action],Object.getOwnPropertyDescriptor(dO.prototype,"onFilterButtonClick"),dO.prototype),Object($.a)(dO.prototype,"onColumnConfigurationClick",[c.action],Object.getOwnPropertyDescriptor(dO.prototype,"onColumnConfigurationClick"),dO.prototype),lO=dO))||lO;function LO(e){var t=Object(W.useContext)(UO);return Object(re.jsx)(MO,{isVisible:e.isVisible,extension:t})}var EO,AO,VO,NO,BO=(fO=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"items",bO,this)}return Object(Q.a)(e,[{key:"put",value:function(e){this.items.set(e.$iid,e)}},{key:"del",value:function(e){this.items.delete(e.$iid)}},{key:"render",value:function(e){var t=this;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:Array.from(t.items).filter((function(t){var n=Object(d.a)(t,2);n[0];return n[1].group===e})).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:r.render()})}},n)}))})}})}}]),e}(),bO=Object($.a)(fO.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),fO),UO=Object(W.createContext)(new BO),GO=Object(K.inject)((function(e,t){return{dataView:$f(e.formScreen,t.id)}}))(vO=Object(K.observer)(vO=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).dataViewHeaderExtension=new BO,e}return Object(Q.a)(n,[{key:"getDataViewStyle",value:function(){return void 0!==this.props.height||void 0!==this.props.width?{flexGrow:0,minHeight:this.props.height,minWidth:this.props.width}:{flexGrow:1,flexShrink:0}}},{key:"renderUiBodyWithHeader",value:function(){var e,t=Al(this.props.dataView),n=t&&t.resolve(Kl),r=Xf(e=this.props.dataView)||Ae(e).isWorking;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)("div",{className:lb.a.overlayContainer,children:[Ot(this.props.dataView)?Object(re.jsx)(LO,{isVisible:!this.props.isHeadless}):Object(re.jsx)(zf,{isVisible:!this.props.isHeadless}),r&&Object(re.jsx)(hb,{})]}),Object(re.jsx)("div",{className:lb.a.dataViewContentContainer,children:n&&n.render()})]})}},{key:"render",value:function(){var e;if(!this.props.dataView)return null;var t,n=Xf(t=this.props.dataView)||Zf(t);return Object(re.jsx)(UO.Provider,{value:this.dataViewHeaderExtension,children:Object(re.jsx)(K.Provider,{dataView:this.props.dataView,children:Object(re.jsxs)("div",{className:lb.a.dataView,style:this.getDataViewStyle(),id:"dataView_"+this.props.modelInstanceId,children:["TreePanel"===(null===(e=this.props.dataView)||void 0===e?void 0:e.type)?Object(re.jsx)(yb,{dataView:this.props.dataView}):this.renderUiBodyWithHeader(),n&&Object(re.jsx)(hb,{})]})})})}}]),n}(H.a.Component))||vO)||vO,WO=function(){function e(){Object(q.a)(this,e),this.tableKeyDownChannel=new Fb}return Object(Q.a)(e,[{key:"subscribeTableKeyDownHandler",value:function(e){return this.tableKeyDownChannel.subscribe(e)}},{key:"handleTableKeyDown",value:function(e){this.tableKeyDownChannel.trigger(e)}}]),e}(),HO=Object(W.createContext)(void 0);function zO(e){var t=Object(W.useState)((function(){return new WO})),n=Object(d.a)(t,1)[0];return Object(re.jsx)(HO.Provider,{value:n,children:Object(re.jsx)(GO,Object(Fe.a)({},e))})}var YO,KO=(EO=c.action.bound,AO=c.action.bound,VO=c.action.bound,NO=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._disposer=void 0,e}return Object(Q.a)(n,[{key:"handleMouseDown",value:function(e){!this.props.isDisabled&&this.props.onMouseDown&&this.props.onMouseDown(e)}},{key:"handleClick",value:function(e){!this.props.isDisabled&&this.props.onClick&&this.props.onClick(e)}},{key:"handleTriggerAreaKeyDown",value:function(e){var t,n,r,o;(null===(t=(n=this.props).shortcutPredicate)||void 0===t?void 0:t.call(n,e))&&(e.preventDefault(),null===(r=(o=this.props).onShortcut)||void 0===r||r.call(o,e))}},{key:"kbdHandlerUp",value:function(){var e;null===(e=this._disposer)||void 0===e||e.call(this),this.props.dataViewContext&&(this._disposer=this.props.dataViewContext.subscribeTableKeyDownHandler(this.handleTriggerAreaKeyDown))}},{key:"kbdHandlerDown",value:function(){var e;null===(e=this._disposer)||void 0===e||e.call(this)}},{key:"componentDidMount",value:function(){this.props.onShortcut&&this.props.shortcutPredicate&&this.kbdHandlerUp()}},{key:"componentDidUpdate",value:function(e){e.onShortcut&&e.shortcutPredicate||!this.props.onShortcut||!this.props.shortcutPredicate?!e.onShortcut||!e.shortcutPredicate||this.props.onShortcut&&this.props.shortcutPredicate||this.kbdHandlerDown():this.kbdHandlerUp()}},{key:"componentWillUnmount",value:function(){this.kbdHandlerDown()}},{key:"render",value:function(){return Object(re.jsx)("div",{className:ne()(Jl.a.root,this.props.className,{isActive:this.props.isActive},this.props.isDisabled?Jl.a.isDisabled:""),onMouseDown:this.handleMouseDown,onClick:this.handleClick,ref:this.props.refDom,children:this.props.children})}}]),n}(H.a.Component),Object($.a)(NO.prototype,"handleMouseDown",[EO],Object.getOwnPropertyDescriptor(NO.prototype,"handleMouseDown"),NO.prototype),Object($.a)(NO.prototype,"handleClick",[AO],Object.getOwnPropertyDescriptor(NO.prototype,"handleClick"),NO.prototype),Object($.a)(NO.prototype,"handleTriggerAreaKeyDown",[VO],Object.getOwnPropertyDescriptor(NO.prototype,"handleTriggerAreaKeyDown"),NO.prototype),NO);function qO(e){var t=Object(W.useContext)(HO);return Object(re.jsx)(KO,Object(Fe.a)(Object(Fe.a)({},e),{},{dataViewContext:t}))}var QO,XO,ZO,$O,JO,ej,tj,nj=(YO=function(){function e(){Object(q.a)(this,e),this.contrib=new Ru}return Object(Q.a)(e,[{key:"deactivate",value:o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(le.a)(this.contrib),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=8;break}return r=n.value,e.delegateYield(r.deactivate(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))},{key:"activateDefault",value:o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(le.a)(this.contrib),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=8;break}return r=n.value,e.delegateYield(r.activateDefault(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))}]),e}(),Object($.a)(YO.prototype,"deactivate",[Le.a],Object.getOwnPropertyDescriptor(YO.prototype,"deactivate"),YO.prototype),Object($.a)(YO.prototype,"activateDefault",[Le.a],Object.getOwnPropertyDescriptor(YO.prototype,"activateDefault"),YO.prototype),YO),rj=Ml("IPerspective"),oj=(QO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rj(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kf();Object(q.a)(this,e),this.perspective=t,this.viewConfiguration=n,this.$iid=Du(),Object(de.a)(this,"isActive",XO,this)}return Object(Q.a)(e,[{key:"handleToolbarBtnClick",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isActive){e.next=2;break}return e.abrupt("return");case 2:return e.delegateYield(this.perspective.deactivate(),"t0",3);case 3:return this.isActive=!0,e.delegateYield(this.viewConfiguration.anounceActivePerspective(ci.Map),"t1",5);case 5:case"end":return e.stop()}}),e,this)}))},{key:"deactivate",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isActive=!1;case 1:case"end":return e.stop()}}),e,this)}))},{key:"activateDefault",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.viewConfiguration.activePerspective===ci.Map&&(this.isActive=!0);case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),XO=Object($.a)(QO.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(QO.prototype,"handleToolbarBtnClick",[Le.a],Object.getOwnPropertyDescriptor(QO.prototype,"handleToolbarBtnClick"),QO.prototype),Object($.a)(QO.prototype,"deactivate",[Le.a],Object.getOwnPropertyDescriptor(QO.prototype,"deactivate"),QO.prototype),Object($.a)(QO.prototype,"activateDefault",[Le.a],Object.getOwnPropertyDescriptor(QO.prototype,"activateDefault"),QO.prototype),QO),ij=Ml("IMapPerspective"),aj=n(28),sj=n.n(aj),cj=(n(511),n(512),n(513),n(187)),uj=n.n(cj),lj=n(96),dj=n.n(lj),pj=n(126),hj=(ZO=c.action.bound,$O=c.action.bound,JO=c.action.bound,ej=function(){function e(t){Object(q.a)(this,e),this.root=t}return Object(Q.a)(e,[{key:"dataView",get:function(){return this.root.dataView}},{key:"setup",get:function(){return this.root.mapSetupStore}},{key:"search",get:function(){return this.root.mapSearchStore}},{key:"navigationStore",get:function(){return this.root.mapNavigationStore}},{key:"fldLocationIndex",get:function(){return this.setup.mapLocationMember?aa(this.dataView,this.setup.mapLocationMember):void 0}},{key:"fldNameIndex",get:function(){return this.setup.mapTextMember?aa(this.dataView,this.setup.mapTextMember):void 0}},{key:"fldIconIndex",get:function(){return this.setup.mapIconMember?aa(this.dataView,this.setup.mapIconMember):void 0}},{key:"fldIconAzimuth",get:function(){return this.setup.mapAzimuthMember?aa(this.dataView,this.setup.mapAzimuthMember):void 0}},{key:"fldColorIndex",get:function(){return this.setup.mapColorMember?aa(this.dataView,this.setup.mapColorMember):void 0}},{key:"fldIdentifier",get:function(){return aa(this.dataView,"Id")}},{key:"mapObjects",get:function(){if(void 0===this.fldIdentifier)return[];var e=[];if(this.setup.isReadOnlyView){var t,n=this.dataView.tableRows,r=Object(le.a)(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(ge.a.isArray(o)&&void 0!==this.fldLocationIndex&&o[this.fldLocationIndex]){var i=Object(pj.parse)(o[this.fldLocationIndex]);i&&e.push(Object(Fe.a)(Object(Fe.a)({},i),{},{id:o[this.fldIdentifier],name:void 0!==this.fldNameIndex?o[this.fldNameIndex]:"",icon:void 0!==this.fldIconIndex?o[this.fldIconIndex]:void 0,color:void 0!==this.fldColorIndex?o[this.fldColorIndex]:void 0,azimuth:void 0!==this.fldIconAzimuth?o[this.fldIconAzimuth]:void 0}))}}}catch(u){r.e(u)}finally{r.f()}}else{var a=li(this.dataView);if(a){var s=a;if(ge.a.isArray(s)&&this.fldLocationIndex&&s[this.fldLocationIndex]){var c;try{c=Object(pj.parse)(s[this.fldLocationIndex])}catch(l){console.error(l)}c&&e.push(Object(Fe.a)(Object(Fe.a)({},c),{},{id:s[this.fldIdentifier],name:void 0!==this.fldNameIndex?s[this.fldNameIndex]:"",icon:this.fldIconIndex&&s[this.fldIconIndex],color:void 0!==this.fldColorIndex?s[this.fldColorIndex]:void 0,azimuth:this.fldIconAzimuth&&s[this.fldIconAzimuth]}))}}}return e}},{key:"handleGeometryChange",value:function(e){var t=this;return Object(c.flow)(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Mo(t.dataView,t.setup.mapLocationMember),i=li(t.dataView),!r||!i){n.next=6;break}return n.delegateYield(Dc(t.dataView)({event:void 0,row:i,property:r,value:e?Object(pj.stringify)(e):null}),"t0",4);case 4:return ur(t.dataView).flushFormToTable(i),n.delegateYield(Ae(t.dataView).onFlushData(),"t1",6);case 6:case"end":return n.stop()}}),n)})))()}},{key:"handleLayerClick",value:function(e){this.setup.isReadOnlyView&&(Be(this.dataView).setSelectedRowId(e),this.search.selectSearchResultById(e),this.navigationStore.highlightSelectedSearchResult())}},{key:"handleMapMounted",value:function(){var e=this;return Object(c.reaction)((function(){return Vn(e.dataView)}),(function(t){e.setup.isReadOnlyView&&t&&(e.search.selectSearchResultById(t),e.navigationStore.highlightSelectedSearchResult())}),{fireImmediately:!0})}}]),e}(),Object($.a)(ej.prototype,"fldLocationIndex",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldLocationIndex"),ej.prototype),Object($.a)(ej.prototype,"fldNameIndex",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldNameIndex"),ej.prototype),Object($.a)(ej.prototype,"fldIconIndex",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldIconIndex"),ej.prototype),Object($.a)(ej.prototype,"fldIconAzimuth",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldIconAzimuth"),ej.prototype),Object($.a)(ej.prototype,"fldColorIndex",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldColorIndex"),ej.prototype),Object($.a)(ej.prototype,"fldIdentifier",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"fldIdentifier"),ej.prototype),Object($.a)(ej.prototype,"mapObjects",[c.computed],Object.getOwnPropertyDescriptor(ej.prototype,"mapObjects"),ej.prototype),Object($.a)(ej.prototype,"handleGeometryChange",[ZO],Object.getOwnPropertyDescriptor(ej.prototype,"handleGeometryChange"),ej.prototype),Object($.a)(ej.prototype,"handleLayerClick",[$O],Object.getOwnPropertyDescriptor(ej.prototype,"handleLayerClick"),ej.prototype),Object($.a)(ej.prototype,"handleMapMounted",[JO],Object.getOwnPropertyDescriptor(ej.prototype,"handleMapMounted"),ej.prototype),ej);!function(e){e.POINT="Point",e.POLYGON="Polygon",e.LINESTRING="LineString"}(tj||(tj={}));var fj,bj,vj,yj,gj,mj,wj,Oj,jj,kj,xj,Cj,Ij,Sj,Dj,Rj,Tj,_j=n(371);delete sj.a.Icon.Default.prototype._getIconUrl,sj.a.Icon.Default.mergeOptions({iconRetinaUrl:n(517),iconUrl:n(518),shadowUrl:n(519)});var Pj={animate:!0,duration:1.1};function Fj(e){var t;if("EPSG4326"===(null===(t=e.crs)||void 0===t?void 0:t.toUpperCase()))return sj.a.CRS.EPSG4326}var Mj,Lj,Ej,Aj,Vj,Nj,Bj,Uj,Gj,Wj,Hj,zj,Yj,Kj,qj,Qj,Xj,Zj,$j,Jj,ek,tk,nk,rk,ok,ik,ak,sk,ck,uk,lk,dk,pk,hk,fk,bk,vk,yk,gk,mk,wk,Ok,jk=(fj=c.action.bound,bj=c.action.bound,vj=c.action.bound,yj=c.action.bound,gj=c.action.bound,mj=c.action.bound,wj=c.action.bound,Oj=c.action.bound,jj=c.action.bound,kj=c.action.bound,xj=c.action.bound,Cj=c.action.bound,Ij=c.action.bound,Sj=c.observable.ref,Dj=c.action.bound,Rj=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).elmMapDiv=null,e.refMapDiv=function(t){return e.elmMapDiv=t},e.leafletMap=void 0,e.leafletMapObjects=new sj.a.FeatureGroup,e.leafletMapRoute=new sj.a.FeatureGroup,e.editingObjectsRepaintDisabled=!1,e._disposers=[],e._isCancelAction=!1,e.mapControl=void 0,e.mapControlDisposers=[],e.mapFittedToLayers=!1,e._isMounted=!1,Object(de.a)(e,"contentRect",Tj,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"panToCenter",value:function(){var e,t;this.props.mapCenter?null===(e=this.leafletMap)||void 0===e||e.panTo([this.props.mapCenter.coordinates[1],this.props.mapCenter.coordinates[0]],Object(Fe.a)({},Pj)):null===(t=this.leafletMap)||void 0===t||t.panTo([0,0],Object(Fe.a)({},Pj))}},{key:"panToLoc",value:function(e){var t;null===(t=this.leafletMap)||void 0===t||t.panTo(e,Object(Fe.a)({},Pj))}},{key:"panToSelectedObject",value:function(){var e,t=Object(le.a)(this.mapDrawnObjectLayers);try{for(t.s();!(e=t.n()).done;){var n,r=Object(d.a)(e.value,2),o=r[0],i=r[1];if(o.id===(null===(n=this.props.lastDetailedObject)||void 0===n?void 0:n.id))return void this.panToLayer(i)}}catch(a){t.e(a)}finally{t.f()}}},{key:"panToLayer",value:function(e){if(e.getBounds){var t,n=e.getBounds();null===(t=this.leafletMap)||void 0===t||t.fitBounds(n.pad(.1),Object(Fe.a)({},Pj))}else if(e.getLatLng){var r,o=e.getLatLng();null===(r=this.leafletMap)||void 0===r||r.panTo(o,Object(Fe.a)({},Pj))}}},{key:"panToFirstObject",value:function(){this.mapDrawnObjectLayers.length>0&&this.panToLayer(this.mapDrawnObjectLayers[0][1])}},{key:"isPropMapCenterDifferent",value:function(e){var t,n,r,o;return(null===(t=this.props.mapCenter)||void 0===t?void 0:t.coordinates[0])!==(null===(n=e.mapCenter)||void 0===n?void 0:n.coordinates[0])||(null===(r=this.props.mapCenter)||void 0===r?void 0:r.coordinates[1])!==(null===(o=e.mapCenter)||void 0===o?void 0:o.coordinates[1])}},{key:"isPropActiveDifferent",value:function(e){return this.props.isActive!==e.isActive}},{key:"componentDidUpdate",value:function(e){var t=this;Object(c.runInAction)((function(){t.isPropActiveDifferent(e)&&t.props.isActive&&t.mountLeaflet(),t.isPropMapCenterDifferent(e)&&t.panToCenter()}))}},{key:"highlightLayer",value:function(e,t){t.setStyle&&t.setStyle({color:"yellow"}),t.setIcon&&t.setIcon(sj.a.divIcon(Object(Fe.a)(Object(Fe.a)({},t.getIcon().options),{},{className:"markerHighlighted"})))}},{key:"unHighlightLayer",value:function(e,t){t.setStyle&&t.setStyle({color:void 0!==e.color&&0!==e.color&&null!==e.color?qr(e.color):"blue"}),t.setIcon&&t.setIcon(sj.a.divIcon(Object(Fe.a)(Object(Fe.a)({},t.getIcon().options),{},{className:""})))}},{key:"highlightSelectedLayer",value:function(){var e,t=Object(le.a)(this.mapDrawnObjectLayers);try{for(t.s();!(e=t.n()).done;){var n,r=Object(d.a)(e.value,2),o=r[0],i=r[1];o.id===(null===(n=this.props.lastDetailedObject)||void 0===n?void 0:n.id)?this.highlightLayer(o,i):this.unHighlightLayer(o,i)}}catch(a){t.e(a)}finally{t.f()}}},{key:"layerList",get:function(){return this.props.mapLayers.map((function(e,t){return"OSM"===e.type?[e,sj.a.tileLayer(e.getUrl(),Object(Fe.a)(Object(Fe.a)({},e.getOptions()),{},{zIndex:t}))]:"WMS"===e.type?[e,sj.a.tileLayer.wms(e.getUrl(),Object(Fe.a)(Object(Fe.a)({},e.getOptions()),{},{zIndex:t,crs:Fj(e.getOptions())}))]:void 0})).filter((function(e){return e}))}},{key:"leafletlayersDescriptor",get:function(){return Object.fromEntries(this.layerList.map((function(e){return[e[0].getTitle(),e[1]]})))}},{key:"mapDrawnObjectLayers",get:function(){return this.props.getMapObjects().map((function(e){var t;switch(e.type){case tj.POINT:var n=e.icon||"img/map/marker-icon.png#anchor=[12,41]",r=n?uj.a.parse(n.split("#")[1]||""):null,o=(null===r||void 0===r?void 0:r.anchor)?JSON.parse(r.anchor):[0,0],i=e.azimuth||0,a=sj.a.divIcon({html:'<img src="'.concat(n,'" style="\n                transform: rotate3d(0,0,1,').concat(i,"deg);\n                transform-origin: ").concat(o[0],"px ").concat(o[1],'px;" />'),iconAnchor:o,className:""});t=[e,sj.a.marker([e.coordinates[1],e.coordinates[0]],{icon:a}).bindTooltip(e.name)];break;case tj.POLYGON:t=[e,sj.a.polygon(e.coordinates[0].map((function(e){return[e[1],e[0]]})),{color:void 0!==e.color&&0!==e.color&&null!==e.color?qr(e.color):"blue"}).bindTooltip(e.name)];break;case tj.LINESTRING:t=[e,sj.a.polyline(e.coordinates.map((function(e){return[e[1],e[0]]})),{color:void 0!==e.color&&0!==e.color&&null!==e.color?qr(e.color):"blue"}).bindTooltip(e.name)]}return t})).filter((function(e){return e}))}},{key:"mapRoutefinderRoute",get:function(){return this.props.getRoutefinderRoute().map((function(e){if("LineString"===e.type)return sj.a.polyline(e.coordinates.map((function(e){return[e[1],e[0]]})),{color:"blue"})})).filter((function(e){return e}))}},{key:"mapRoutefinderEditables",get:function(){return this.props.getRoutefinderEditables().map((function(e){if("LineString"===e.type)return sj.a.polyline(e.coordinates.map((function(e){return[e[1],e[0]]})),{color:"green",dashArray:"10 5 3 5",opacity:1,weight:1.5})})).filter((function(e){return e}))}},{key:"handleOjectCreated",value:function(e){var t,n,r=e.layer;this.leafletMapObjects.clearLayers(),this.leafletMapObjects.addLayer(r);var o=r.toGeoJSON(),i="Polygon"===o.geometry.type?this.getCounterClockWisePolygonPoints(o.geometry):o.geometry;null===(t=(n=this.props).onChange)||void 0===t||t.call(n,i)}},{key:"getCounterClockWisePolygonPoints",value:function(e){var t;return e&&1===(null===(t=e.coordinates)||void 0===t?void 0:t.length)?Object(_j.ring)(e.coordinates[0])>0?{type:"Polygon",coordinates:[e.coordinates[0].reverse()]}:e:(console.warn("Failed to check polygonGeometry:"),console.warn(e),e)}},{key:"handleObjectEdited",value:function(e){var t,n,r,o,i=null===(t=e.layers.toGeoJSON().features)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.geometry;i&&(null===(r=(o=this.props).onChange)||void 0===r||r.call(o,i))}},{key:"handleObjectDeleted",value:function(e){var t,n;null===(t=(n=this.props).onChange)||void 0===t||t.call(n,void 0)}},{key:"handleRoutefinderOjectCreated",value:function(e){var t,n,r=e.layer;this.leafletMapObjects.clearLayers(),this.leafletMapObjects.addLayer(r);var o=null===(t=this.leafletMapObjects.toGeoJSON().features)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.geometry;this.routefinderUpdate(o)}},{key:"handleRoutefinderObjectEdited",value:function(e){var t,n,r=null===(t=this.leafletMapObjects.toGeoJSON().features)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.geometry;this.routefinderUpdate(r)}},{key:"handleRoutefinderObjectDeleted",value:function(e){this.routefinderUpdate(void 0)}},{key:"handleRoutefinderVertexDrawn",value:function(e){var t={type:"LineString",coordinates:e.layers.getLayers().map((function(e){return[e.getLatLng().lng,e.getLatLng().lat]}))};this.routefinderUpdate(t)}},{key:"handleRoutefinderVertexEdited",value:function(e){var t,n,r=null===(t=this.leafletMapObjects.toGeoJSON().features)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.geometry;this.routefinderUpdate(r)}},{key:"routefinderUpdate",value:function(e){var t,n;null===(t=(n=this.props).onRoutefinderGeometryChange)||void 0===t||t.call(n,e)}},{key:"handleRoutefinderEditStart",value:function(){var e,t;this.editingObjectsRepaintDisabled=!0,null===(e=(t=this.props).onRoutefinderGeometryEditStart)||void 0===e||e.call(t)}},{key:"handleRoutefinderDrawStart",value:function(){this.handleRoutefinderEditStart()}},{key:"handleRoutefinderEditStop",value:function(){var e,t,n,r;(this.editingObjectsRepaintDisabled=!1,this._isCancelAction)?null===(e=(t=this.props).onRoutefinderGeometryEditCancel)||void 0===e||e.call(t):null===(n=(r=this.props).onRoutefinderGeometryEditSave)||void 0===n||n.call(r)}},{key:"handleRoutefinderDrawStop",value:function(){this.handleRoutefinderEditStop()}},{key:"setMapControlCancelHack",value:function(){var e=this,t=this.mapControl._toolbars.edit,n=t.disable;this.mapControl._toolbars.edit.disable=function(){e._isCancelAction=!0,n.apply(t,arguments),e._isCancelAction=!1};var r=this.mapControl._toolbars.draw,o=r.disable;this.mapControl._toolbars.draw.disable=function(){e._isCancelAction=!0,o.apply(r,arguments),e._isCancelAction=!1}}},{key:"initLeafletDrawControls",value:function(){this.activateNormalControls()}},{key:"activateRoutingControls",value:function(){var e,t,n,r,o,i,a,s,c,u,l,d=this,p=Object(le.a)(this.mapControlDisposers);try{for(p.s();!(l=p.n()).done;){(0,l.value)()}}catch(h){p.e(h)}finally{p.f()}this.mapControlDisposers=[],this.leafletMapObjects.clearLayers(),this.leafletMapRoute.clearLayers(),null===(e=this.leafletMap)||void 0===e||e.addControl(this.mapControl=new sj.a.Control.Draw({edit:{featureGroup:this.leafletMapObjects,poly:{allowIntersection:!0},circle:!1,circlemarker:!1},draw:{polygon:!1,point:!1,marker:!1,circle:!1,circlemarker:!1,rectangle:!1}})),this.setMapControlCancelHack(),null===(t=this.leafletMap)||void 0===t||t.on(sj.a.Draw.Event.CREATED,this.handleRoutefinderOjectCreated),null===(n=this.leafletMap)||void 0===n||n.on(sj.a.Draw.Event.EDITED,this.handleRoutefinderObjectEdited),null===(r=this.leafletMap)||void 0===r||r.on(sj.a.Draw.Event.DELETED,this.handleRoutefinderObjectDeleted),null===(o=this.leafletMap)||void 0===o||o.on(sj.a.Draw.Event.DRAWVERTEX,this.handleRoutefinderVertexDrawn),null===(i=this.leafletMap)||void 0===i||i.on(sj.a.Draw.Event.EDITVERTEX,this.handleRoutefinderVertexEdited),null===(a=this.leafletMap)||void 0===a||a.on(sj.a.Draw.Event.EDITSTART,this.handleRoutefinderEditStart),null===(s=this.leafletMap)||void 0===s||s.on(sj.a.Draw.Event.EDITSTOP,this.handleRoutefinderEditStop),null===(c=this.leafletMap)||void 0===c||c.on(sj.a.Draw.Event.DRAWSTART,this.handleRoutefinderDrawStart),null===(u=this.leafletMap)||void 0===u||u.on(sj.a.Draw.Event.DRAWSTOP,this.handleRoutefinderDrawStop),this.mapControlDisposers.push((function(){var e,t,n,r,o,i,a,s,c,u;null===(e=d.leafletMap)||void 0===e||e.off(sj.a.Draw.Event.CREATED,d.handleRoutefinderOjectCreated),null===(t=d.leafletMap)||void 0===t||t.off(sj.a.Draw.Event.EDITED,d.handleRoutefinderObjectEdited),null===(n=d.leafletMap)||void 0===n||n.off(sj.a.Draw.Event.DELETED,d.handleRoutefinderObjectDeleted),null===(r=d.leafletMap)||void 0===r||r.off(sj.a.Draw.Event.DRAWVERTEX,d.handleRoutefinderVertexDrawn),null===(o=d.leafletMap)||void 0===o||o.off(sj.a.Draw.Event.EDITVERTEX,d.handleRoutefinderVertexEdited),null===(i=d.leafletMap)||void 0===i||i.off(sj.a.Draw.Event.EDITSTART,d.handleRoutefinderEditStart),null===(a=d.leafletMap)||void 0===a||a.off(sj.a.Draw.Event.EDITSTOP,d.handleRoutefinderEditStop),null===(s=d.leafletMap)||void 0===s||s.off(sj.a.Draw.Event.DRAWSTART,d.handleRoutefinderDrawStart),null===(c=d.leafletMap)||void 0===c||c.off(sj.a.Draw.Event.DRAWSTOP,d.handleRoutefinderDrawStop),d.mapControl&&(null===(u=d.leafletMap)||void 0===u||u.removeControl(d.mapControl)),d.mapControl=void 0}))}},{key:"activateNormalControls",value:function(){var e,t,n,r,o,i=this,a=Object(le.a)(this.mapControlDisposers);try{for(a.s();!(o=a.n()).done;){(0,o.value)()}}catch(s){a.e(s)}finally{a.f()}this.mapControlDisposers=[],this.leafletMapObjects.clearLayers(),this.leafletMapRoute.clearLayers(),null===(e=this.leafletMap)||void 0===e||e.addControl(this.mapControl=new sj.a.Control.Draw({edit:{featureGroup:this.leafletMapObjects,poly:{allowIntersection:!0},circle:!1,circlemarker:!1},draw:{polygon:{allowIntersection:!1,showArea:!0},circle:!1,circlemarker:!1}})),null===(t=this.leafletMap)||void 0===t||t.on(sj.a.Draw.Event.CREATED,this.handleOjectCreated),null===(n=this.leafletMap)||void 0===n||n.on(sj.a.Draw.Event.EDITED,this.handleObjectEdited),null===(r=this.leafletMap)||void 0===r||r.on(sj.a.Draw.Event.DELETED,this.handleObjectDeleted),this.mapControlDisposers.push((function(){var e,t,n,r;null===(e=i.leafletMap)||void 0===e||e.off(sj.a.Draw.Event.CREATED,i.handleOjectCreated),null===(t=i.leafletMap)||void 0===t||t.off(sj.a.Draw.Event.EDITED,i.handleObjectEdited),null===(n=i.leafletMap)||void 0===n||n.off(sj.a.Draw.Event.DELETED,i.handleObjectDeleted),i.mapControl&&(null===(r=i.leafletMap)||void 0===r||r.removeControl(i.mapControl)),i.mapControl=void 0}))}},{key:"initLeaflet",value:function(){var e=this,t=sj.a.map(this.elmMapDiv,{layers:this.layerList.filter((function(e){var t=Object(d.a)(e,2),n=t[0];t[1];return n.defaultEnabled})).map((function(e){var t=Object(d.a)(e,2);t[0];return t[1]}))});this.leafletMap=t,t.setZoom(this.props.initialZoom||0),this.panToCenter(),sj.a.control.layers({},this.leafletlayersDescriptor,{position:"topleft",collapsed:!0}).addTo(t),sj.a.control.scale().addTo(t),t.addLayer(this.leafletMapObjects),t.addLayer(this.leafletMapRoute),this._disposers.push(Object(c.reaction)((function(){return e.mapDrawnObjectLayers}),(function(n){e.leafletMapObjects.clearLayers();var r,o=sj.a.latLngBounds([]),i=Object(le.a)(n);try{var a=function(){var t=r.value;e.leafletMapObjects.addLayer(t[1]),t[1].getBounds?o.extend(t[1].getBounds()):t[1].getLatLng&&o.extend(t[1].getLatLng()),t[1].on("click",(function(){var n,r;return null===(n=(r=e.props).onLayerClick)||void 0===n?void 0:n.call(r,t[0].id)}))};for(i.s();!(r=i.n()).done;)a()}catch(c){i.e(c)}finally{i.f()}if(!e.props.mapCenter&&o.isValid()&&!e.mapFittedToLayers){var s=(o=o.pad(.1)).getCenter();t.panTo(s),e.mapFittedToLayers=!0}e.highlightSelectedLayer(),1===n.length&&e.panToFirstObject()}),{delay:100,fireImmediately:!0}),Object(c.reaction)((function(){return e.mapRoutefinderRoute}),(function(t){e.leafletMapRoute.clearLayers();var n,r=Object(le.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.leafletMapRoute.addLayer(o)}}catch(i){r.e(i)}finally{r.f()}})),Object(c.reaction)((function(){return e.mapRoutefinderEditables}),(function(t){if(!e.editingObjectsRepaintDisabled){e.leafletMapObjects.clearLayers();var n,r=Object(le.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.leafletMapObjects.addLayer(o)}}catch(i){r.e(i)}finally{r.f()}}})))}},{key:"mountLeaflet",value:function(){this._isMounted||(this.initLeaflet(),this.props.isReadOnly||this.initLeafletDrawControls(),this._isMounted=!0)}},{key:"componentDidMount",value:function(){var e=this;Object(c.autorun)((function(){var t,n,r,o;((null===(t=e.contentRect)||void 0===t||null===(n=t.bounds)||void 0===n?void 0:n.width)||0)>40&&((null===(r=e.contentRect)||void 0===r||null===(o=r.bounds)||void 0===o?void 0:o.height)||0)>40&&e.props.isActive&&e.mountLeaflet()}),{delay:500})}},{key:"componentWillUnmount",value:function(){this._disposers.forEach((function(e){return e()}))}},{key:"handleResize",value:function(e){this.contentRect=e}},{key:"render",value:function(){var e=this;return Object(re.jsx)(ve.default,{bounds:!0,onResize:this.handleResize,children:function(t){var n=t.measureRef;return Object(re.jsx)("div",{ref:n,style:{width:"100%",height:"100%"},children:Object(re.jsx)("div",{className:ne()(dj.a.mapDiv,{isHidden:!e.props.isActive}),ref:function(t){e.refMapDiv(t)}})})}})}}]),n}(H.a.Component),Object($.a)(Rj.prototype,"layerList",[c.computed],Object.getOwnPropertyDescriptor(Rj.prototype,"layerList"),Rj.prototype),Object($.a)(Rj.prototype,"leafletlayersDescriptor",[c.computed],Object.getOwnPropertyDescriptor(Rj.prototype,"leafletlayersDescriptor"),Rj.prototype),Object($.a)(Rj.prototype,"mapDrawnObjectLayers",[c.computed],Object.getOwnPropertyDescriptor(Rj.prototype,"mapDrawnObjectLayers"),Rj.prototype),Object($.a)(Rj.prototype,"mapRoutefinderRoute",[c.computed],Object.getOwnPropertyDescriptor(Rj.prototype,"mapRoutefinderRoute"),Rj.prototype),Object($.a)(Rj.prototype,"mapRoutefinderEditables",[c.computed],Object.getOwnPropertyDescriptor(Rj.prototype,"mapRoutefinderEditables"),Rj.prototype),Object($.a)(Rj.prototype,"handleOjectCreated",[fj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleOjectCreated"),Rj.prototype),Object($.a)(Rj.prototype,"handleObjectEdited",[bj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleObjectEdited"),Rj.prototype),Object($.a)(Rj.prototype,"handleObjectDeleted",[vj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleObjectDeleted"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderOjectCreated",[yj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderOjectCreated"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderObjectEdited",[gj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderObjectEdited"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderObjectDeleted",[mj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderObjectDeleted"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderVertexDrawn",[wj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderVertexDrawn"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderVertexEdited",[Oj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderVertexEdited"),Rj.prototype),Object($.a)(Rj.prototype,"routefinderUpdate",[jj],Object.getOwnPropertyDescriptor(Rj.prototype,"routefinderUpdate"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderEditStart",[kj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderEditStart"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderDrawStart",[xj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderDrawStart"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderEditStop",[Cj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderEditStop"),Rj.prototype),Object($.a)(Rj.prototype,"handleRoutefinderDrawStop",[Ij],Object.getOwnPropertyDescriptor(Rj.prototype,"handleRoutefinderDrawStop"),Rj.prototype),Tj=Object($.a)(Rj.prototype,"contentRect",[Sj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(Rj.prototype,"handleResize",[Dj],Object.getOwnPropertyDescriptor(Rj.prototype,"handleResize"),Rj.prototype),Rj),kk=n(372),xk=n.n(kk),Ck=(Mj=c.action.bound,Lj=c.action.bound,Ej=c.action.bound,Aj=c.action.bound,Vj=c.action.bound,Nj=c.action.bound,Bj=function(){function e(t){var n=this;Object(q.a)(this,e),this.root=t,this.refMapComponent=function(e){return n.elmMapComponent=e},this.elmMapComponent=null}return Object(Q.a)(e,[{key:"setupStore",get:function(){return this.root.mapSetupStore}},{key:"searchStore",get:function(){return this.root.mapSearchStore}},{key:"highlightSelectedSearchResult",value:function(){var e=this;setTimeout((function(){var t;return null===(t=e.elmMapComponent)||void 0===t?void 0:t.highlightSelectedLayer()}),100)}},{key:"fitToSelectedSearchResult",value:function(){var e=this;setTimeout((function(){var t;return null===(t=e.elmMapComponent)||void 0===t?void 0:t.panToSelectedObject()}),100)}},{key:"handleCenterMapClick",value:function(e){var t;null===(t=this.elmMapComponent)||void 0===t||t.panToCenter()}},{key:"activateRoutingControls",value:function(){var e;null===(e=this.elmMapComponent)||void 0===e||e.activateRoutingControls()}},{key:"activateNormalControls",value:function(){var e;null===(e=this.elmMapComponent)||void 0===e||e.activateNormalControls()}},{key:"handleLookupObjectClick",value:function(e){var t,n;this.setupStore.isReadOnlyView?this.searchStore.selectedSearchResult&&(null===(t=this.elmMapComponent)||void 0===t||t.panToSelectedObject()):null===(n=this.elmMapComponent)||void 0===n||n.panToFirstObject()}}]),e}(),Object($.a)(Bj.prototype,"highlightSelectedSearchResult",[Mj],Object.getOwnPropertyDescriptor(Bj.prototype,"highlightSelectedSearchResult"),Bj.prototype),Object($.a)(Bj.prototype,"fitToSelectedSearchResult",[Lj],Object.getOwnPropertyDescriptor(Bj.prototype,"fitToSelectedSearchResult"),Bj.prototype),Object($.a)(Bj.prototype,"handleCenterMapClick",[Ej],Object.getOwnPropertyDescriptor(Bj.prototype,"handleCenterMapClick"),Bj.prototype),Object($.a)(Bj.prototype,"activateRoutingControls",[Aj],Object.getOwnPropertyDescriptor(Bj.prototype,"activateRoutingControls"),Bj.prototype),Object($.a)(Bj.prototype,"activateNormalControls",[Vj],Object.getOwnPropertyDescriptor(Bj.prototype,"activateNormalControls"),Bj.prototype),Object($.a)(Bj.prototype,"handleLookupObjectClick",[Nj],Object.getOwnPropertyDescriptor(Bj.prototype,"handleLookupObjectClick"),Bj.prototype),Bj),Ik=(Uj=c.observable.shallow,Gj=c.observable.shallow,Wj=c.observable.shallow,Hj=c.action.bound,zj=c.action.bound,Yj=c.action.bound,Kj=c.action.bound,qj=c.action.bound,Qj=c.action.bound,Xj=c.action.bound,Zj=c.action.bound,$j=function(){function e(t){Object(q.a)(this,e),this.root=t,Object(de.a)(this,"isActive",Jj,this),Object(de.a)(this,"routeLatLngs",ek,this),Object(de.a)(this,"driveThruPointsEditing",tk,this),Object(de.a)(this,"driveThruPoints",nk,this)}return Object(Q.a)(e,[{key:"navigation",get:function(){return this.root.mapNavigationStore}},{key:"objects",get:function(){return this.root.mapObjectsStore}},{key:"mapObjectsRoute",get:function(){return[{type:"LineString",coordinates:this.routeLatLngs.map((function(e){return e}))}]}},{key:"mapObjectsEditable",get:function(){return[{type:"LineString",coordinates:this.driveThruPoints.map((function(e){return e}))}]}},{key:"handleRoutefinderButtonClick",value:function(e){this.isActive?(this.isActive=!1,this.navigation.activateNormalControls()):(this.isActive=!0,this.navigation.activateRoutingControls())}},{key:"handleResultsReceived",value:function(e){this.routeLatLngs=e.geometry.map((function(e){return[e.x,e.y]}))}},{key:"handleEditingFinished",value:function(){this.driveThruPoints=this.driveThruPointsEditing,this.routeLatLngs.length>0&&this.objects.handleGeometryChange(this.mapObjectsRoute[0])}},{key:"handleEditingCancelled",value:function(){this.driveThruPointsEditing=[],this.driveThruPoints.length>1?this.calculateRoute(this.driveThruPoints):this.routeLatLngs=[]}},{key:"handleEditingStarted",value:function(){this.driveThruPointsEditing=this.driveThruPoints}},{key:"handleResultsError",value:function(){console.error("Route lookup failed.")}},{key:"handleGeometryChange",value:function(e){if(e){var t=e.coordinates;this.driveThruPointsEditing=t,this.calculateRoute(t)}}},{key:"calculateRoute",value:function(e){var t=this;if(e.length>1){var n=e.map((function(e){return window.SMap.Coords.fromWGS84(e[0],e[1])}));new window.SMap.Route(n,(function(e){var n=e.getResults();n.error?t.handleResultsError():t.handleResultsReceived(n)}))}}}]),e}(),Jj=Object($.a)($j.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ek=Object($.a)($j.prototype,"routeLatLngs",[Uj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tk=Object($.a)($j.prototype,"driveThruPointsEditing",[Gj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nk=Object($.a)($j.prototype,"driveThruPoints",[Wj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)($j.prototype,"mapObjectsRoute",[c.computed],Object.getOwnPropertyDescriptor($j.prototype,"mapObjectsRoute"),$j.prototype),Object($.a)($j.prototype,"mapObjectsEditable",[c.computed],Object.getOwnPropertyDescriptor($j.prototype,"mapObjectsEditable"),$j.prototype),Object($.a)($j.prototype,"handleRoutefinderButtonClick",[Hj],Object.getOwnPropertyDescriptor($j.prototype,"handleRoutefinderButtonClick"),$j.prototype),Object($.a)($j.prototype,"handleResultsReceived",[zj],Object.getOwnPropertyDescriptor($j.prototype,"handleResultsReceived"),$j.prototype),Object($.a)($j.prototype,"handleEditingFinished",[Yj],Object.getOwnPropertyDescriptor($j.prototype,"handleEditingFinished"),$j.prototype),Object($.a)($j.prototype,"handleEditingCancelled",[Kj],Object.getOwnPropertyDescriptor($j.prototype,"handleEditingCancelled"),$j.prototype),Object($.a)($j.prototype,"handleEditingStarted",[qj],Object.getOwnPropertyDescriptor($j.prototype,"handleEditingStarted"),$j.prototype),Object($.a)($j.prototype,"handleResultsError",[Qj],Object.getOwnPropertyDescriptor($j.prototype,"handleResultsError"),$j.prototype),Object($.a)($j.prototype,"handleGeometryChange",[Xj],Object.getOwnPropertyDescriptor($j.prototype,"handleGeometryChange"),$j.prototype),Object($.a)($j.prototype,"calculateRoute",[Zj],Object.getOwnPropertyDescriptor($j.prototype,"calculateRoute"),$j.prototype),$j),Sk=(rk=c.action.bound,ok=c.action.bound,ik=c.action.bound,ak=c.action.bound,sk=c.action.bound,ck=c.action.bound,uk=c.action.bound,lk=c.action.bound,dk=c.action.bound,pk=c.action.bound,hk=c.action.bound,fk=c.action.bound,bk=c.action.bound,vk=function(){function e(t){var n=this;Object(q.a)(this,e),this.root=t,Object(de.a)(this,"selectedSearchResult",yk,this),Object(de.a)(this,"isDropped",gk,this),this.refSearchField=function(e){return n.elmSearchField=e},this.elmSearchField=null,this.refDropdown=function(e){return n.elmDropdown=e},this.elmDropdown=null,Object(de.a)(this,"searchPhrase",mk,this),Object(de.a)(this,"rect",wk,this)}return Object(Q.a)(e,[{key:"navigationStore",get:function(){return this.root.mapNavigationStore}},{key:"allMapObjects",get:function(){return this.root.mapObjectsStore.mapObjects}},{key:"searchResults",get:function(){var e=this;return this.searchPhrase?this.allMapObjects.filter((function(t){return t.name.toLocaleLowerCase().includes(e.searchPhrase.toLocaleLowerCase())})):this.allMapObjects}},{key:"measureSearchField",value:function(){this.elmSearchField&&(this.rect=this.elmSearchField.getBoundingClientRect())}},{key:"dropDown",value:function(){this.measureSearchField(),this.isDropped=!0,window.addEventListener("mousedown",this.handleWindowMouseDown)}},{key:"dropUp",value:function(){this.isDropped=!1,window.removeEventListener("mousedown",this.handleWindowMouseDown)}},{key:"handleSearchInputChange",value:function(e){this.searchPhrase=e.target.value,this.isDropped||this.dropDown()}},{key:"handleSearchInputFocus",value:function(e){var t,n;null===(t=(n=e.target).select)||void 0===t||t.call(n)}},{key:"handleSearchInputBlur",value:function(e){this.searchPhrase||(this.selectedSearchResult=void 0,this.navigationStore.fitToSelectedSearchResult(),this.navigationStore.highlightSelectedSearchResult())}},{key:"handleSearchInputKeyDown",value:function(e){switch(e.key){case"Escape":this.isDropped&&this.dropUp();break;case"Enter":this.searchPhrase||(this.selectedSearchResult=void 0,this.navigationStore.fitToSelectedSearchResult(),this.navigationStore.highlightSelectedSearchResult())}}},{key:"searchInputValue",get:function(){return this.searchPhrase}},{key:"handleCaretMouseDown",value:function(e){e.stopPropagation(),e.preventDefault(),this.isDropped?this.dropUp():(this.searchPhrase="",this.dropDown())}},{key:"handleClearClick",value:function(e){this.searchPhrase="",this.selectedSearchResult=void 0,this.navigationStore.fitToSelectedSearchResult(),this.navigationStore.highlightSelectedSearchResult()}},{key:"handleClearMouseDown",value:function(e){}},{key:"selectSearchResultById",value:function(e){var t;this.selectedSearchResult=this.allMapObjects.find((function(t){return t.id===e})),this.searchPhrase=(null===(t=this.selectedSearchResult)||void 0===t?void 0:t.name)||""}},{key:"handleSearchResultClick",value:function(e,t){this.selectSearchResultById(t),this.navigationStore.fitToSelectedSearchResult(),this.navigationStore.highlightSelectedSearchResult(),this.dropUp()}},{key:"handleWindowMouseDown",value:function(e){var t,n;(null===(t=this.elmDropdown)||void 0===t?void 0:t.contains(e.target))||(null===(n=this.elmSearchField)||void 0===n?void 0:n.contains(e.target))||this.dropUp()}},{key:"dropdownTop",get:function(){return this.rect.bottom}},{key:"dropdownLeft",get:function(){return this.rect.left}},{key:"dropdownWidth",get:function(){return this.rect.width}}]),e}(),Object($.a)(vk.prototype,"searchResults",[c.computed],Object.getOwnPropertyDescriptor(vk.prototype,"searchResults"),vk.prototype),yk=Object($.a)(vk.prototype,"selectedSearchResult",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gk=Object($.a)(vk.prototype,"isDropped",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mk=Object($.a)(vk.prototype,"searchPhrase",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wk=Object($.a)(vk.prototype,"rect",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{top:0,left:0,right:0,bottom:0,height:0,width:0}}}),Object($.a)(vk.prototype,"measureSearchField",[rk],Object.getOwnPropertyDescriptor(vk.prototype,"measureSearchField"),vk.prototype),Object($.a)(vk.prototype,"dropDown",[ok],Object.getOwnPropertyDescriptor(vk.prototype,"dropDown"),vk.prototype),Object($.a)(vk.prototype,"dropUp",[ik],Object.getOwnPropertyDescriptor(vk.prototype,"dropUp"),vk.prototype),Object($.a)(vk.prototype,"handleSearchInputChange",[ak],Object.getOwnPropertyDescriptor(vk.prototype,"handleSearchInputChange"),vk.prototype),Object($.a)(vk.prototype,"handleSearchInputFocus",[sk],Object.getOwnPropertyDescriptor(vk.prototype,"handleSearchInputFocus"),vk.prototype),Object($.a)(vk.prototype,"handleSearchInputBlur",[ck],Object.getOwnPropertyDescriptor(vk.prototype,"handleSearchInputBlur"),vk.prototype),Object($.a)(vk.prototype,"handleSearchInputKeyDown",[uk],Object.getOwnPropertyDescriptor(vk.prototype,"handleSearchInputKeyDown"),vk.prototype),Object($.a)(vk.prototype,"handleCaretMouseDown",[lk],Object.getOwnPropertyDescriptor(vk.prototype,"handleCaretMouseDown"),vk.prototype),Object($.a)(vk.prototype,"handleClearClick",[dk],Object.getOwnPropertyDescriptor(vk.prototype,"handleClearClick"),vk.prototype),Object($.a)(vk.prototype,"handleClearMouseDown",[pk],Object.getOwnPropertyDescriptor(vk.prototype,"handleClearMouseDown"),vk.prototype),Object($.a)(vk.prototype,"selectSearchResultById",[hk],Object.getOwnPropertyDescriptor(vk.prototype,"selectSearchResultById"),vk.prototype),Object($.a)(vk.prototype,"handleSearchResultClick",[fk],Object.getOwnPropertyDescriptor(vk.prototype,"handleSearchResultClick"),vk.prototype),Object($.a)(vk.prototype,"handleWindowMouseDown",[bk],Object.getOwnPropertyDescriptor(vk.prototype,"handleWindowMouseDown"),vk.prototype),vk),Dk=function(){function e(){Object(q.a)(this,e),this.id="",this.title="",this.defaultEnabled=!1,this.type="",this.mapLayerParameters=new Map}return Object(Q.a)(e,[{key:"getUrl",value:function(){return this.mapLayerParameters.get("url")}},{key:"getTitle",value:function(){return this.title}},{key:"getOptions",value:function(){var e=Object.fromEntries(this.mapLayerParameters);return delete e.url,delete e.title,Object(Fe.a)(Object(Fe.a)({},e),{},{id:this.id,minZoom:void 0!==e.minZoom?parseInt(e.minZoom):void 0,maxZoom:void 0!==e.maxZoom?parseInt(e.maxZoom):void 0})}}]),e}(),Rk=(Ok=function(){function e(t){Object(q.a)(this,e),this.rootStore=t,this.mapLocationMember="",this.mapAzimuthMember="",this.mapColorMember="",this.mapIconMember="",this.mapTextMember="",this.mapResolutionRaw="",this.textColorMember="",this.textLocationMember="",this.textRotationMember="",this.mapCenterRaw="",this.isReadOnlyView=!1,this.layers=[]}return Object(Q.a)(e,[{key:"mapZoom",get:function(){var e=this.mapResolutionRaw?parseInt(this.mapResolutionRaw):0;if(e<0||e>15)throw new Error("Map zoom must be between 0 and 15. The value is: "+e);return e}},{key:"mapCenter",get:function(){try{return this.mapCenterRaw?Object(pj.parse)(this.mapCenterRaw):void 0}catch(e){return void console.error(e)}}}]),e}(),Object($.a)(Ok.prototype,"mapCenter",[c.computed],Object.getOwnPropertyDescriptor(Ok.prototype,"mapCenter"),Ok.prototype),Ok),Tk=function e(t){Object(q.a)(this,e),this.dataView=t,this.mapSearchStore=new Sk(this),this.mapObjectsStore=new hj(this),this.mapSetupStore=new Rk(this),this.mapNavigationStore=new Ck(this),this.mapRoutefinderStore=new Ik(this)},_k=Object(W.createContext)(null);function Pk(){var e=Object(W.useContext)(_k),t=e.mapSearchStore,n=e.mapSetupStore;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(re.Fragment,{children:n.isReadOnlyView?Object(re.jsxs)("div",{className:dj.a.mapSearch,ref:t.refSearchField,children:[Object(re.jsx)("input",{className:"input",value:t.searchInputValue,onChange:t.handleSearchInputChange,onKeyDown:t.handleSearchInputKeyDown,onFocus:t.handleSearchInputFocus}),Object(re.jsxs)("div",{className:"inputActions",children:[Object(re.jsx)("button",{className:"inputClear",onClick:t.handleClearClick,onMouseDown:t.handleClearMouseDown,children:Object(re.jsx)("i",{className:"fas fa-times"})}),Object(re.jsx)("button",{className:"inputCaret",onMouseDown:t.handleCaretMouseDown,children:Object(re.jsx)("i",{className:"fas fa-caret-down"})})]}),t.isDropped&&Object(z.createPortal)(Object(re.jsx)(Fk,{domRef:t.refDropdown,top:t.dropdownTop+2,left:t.dropdownLeft,width:t.dropdownWidth}),document.getElementById("dropdown-portal"))]}):null})}})}function Fk(e){return Object(re.jsx)("div",{ref:e.domRef,style:{top:e.top,left:e.left,width:e.width},className:dj.a.mapSearchDropdown,children:Object(re.jsx)(Ak,{width:e.width-4})})}var Mk,Lk,Ek;function Ak(e){var t=Object(W.useContext)(_k).mapSearchStore,n=t.searchResults.length;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(Gd.b,{width:e.width,height:Math.min(25*n,250),rowHeight:25,columnWidth:e.width,rowCount:n,columnCount:1,cellRenderer:function(e){var n=e.key,r=e.style,o=e.rowIndex,i=(e.columnIndex,t.searchResults[o]);return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",{className:ne()("cell",{c1:o%2===0,c2:o%2===1}),style:r,onClick:function(e){return t.handleSearchResultClick(e,i.id)},children:Object(re.jsx)(xk.a,{searchWords:[t.searchPhrase],textToHighlight:i.name})})}},n)}})}})}var Vk=(Mk=c.action.bound,Lk=c.action.bound,Ek=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ql(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl(),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ij(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rj();Object(q.a)(this,e),this.dataViewToolbarUI=n,this.dataViewBodyUI=r,this.mapPerspective=o,this.perspective=i,this.$iid=Du(),this.rootStore=null,this.toolbarActionsExtension=new Uk(this.mapPerspective,(function(){return t.rootStore}))}return Object(Q.a)(e,[{key:"setup",value:function(){var e=this;this.dataViewBodyUI.contrib.put({$iid:this.$iid,render:function(){return Object(re.jsx)(_k.Provider,{value:e.rootStore,children:Object(re.jsx)(Gk,{mapPerspective:e.mapPerspective,toolbarActionsExtension:e.toolbarActionsExtension})},e.$iid)}}),this.dataViewToolbarUI.contrib.put({$iid:this.$iid,section:Xl,render:function(){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(qO,{onMouseDown:Object(c.flow)(e.mapPerspective.handleToolbarBtnClick),isActive:e.mapPerspective.isActive,children:Object(re.jsx)(Ie.Icon,{src:"./icons/geo-coordinates.svg"})})}},e.$iid)}}),this.perspective.contrib.put(this.mapPerspective)}},{key:"teardown",value:function(){this.dataViewBodyUI.contrib.del(this),this.dataViewToolbarUI.contrib.del(this),this.perspective.contrib.del(this.mapPerspective)}},{key:"dispose",value:function(){this.teardown()}}]),e}(),Object($.a)(Ek.prototype,"setup",[Mk],Object.getOwnPropertyDescriptor(Ek.prototype,"setup"),Ek.prototype),Object($.a)(Ek.prototype,"teardown",[Lk],Object.getOwnPropertyDescriptor(Ek.prototype,"teardown"),Ek.prototype),Ek),Nk=Ml("IMapPerspectiveDirector");function Bk(e){var t=Object(W.useContext)(UO);return Object(W.useEffect)((function(){return t.put(e.toolbarActionsExtension),function(){return t.del(e.toolbarActionsExtension)}}),[]),Object(re.jsx)(re.Fragment,{children:e.children})}var Uk=function(){function e(t,n){Object(q.a)(this,e),this.mapPerspective=t,this.getRootStore=n,this.$iid=Du(),this.group="actions"}return Object(Q.a)(e,[{key:"rootStore",get:function(){return this.getRootStore()}},{key:"render",value:function(){return this.mapPerspective.isActive?Object(re.jsxs)(_k.Provider,{value:this.rootStore,children:[Object(re.jsx)(Wk,{}),Object(re.jsx)(Pk,{})]},this.$iid):null}}]),e}();function Gk(e){var t=Object(W.useContext)(_k),n=t.mapSetupStore,r=t.mapObjectsStore,o=t.mapSearchStore,i=t.mapNavigationStore,a=t.mapRoutefinderStore;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(Bk,{toolbarActionsExtension:e.toolbarActionsExtension,children:Object(re.jsx)(jk,{ref:i.refMapComponent,lastDetailedObject:o.selectedSearchResult,mapCenter:n.mapCenter||void 0,initialZoom:n.mapZoom,getMapObjects:function(){return a.isActive?[]:r.mapObjects},getRoutefinderRoute:function(){return a.mapObjectsRoute},getRoutefinderEditables:function(){return a.mapObjectsEditable},mapLayers:n.layers,isReadOnly:n.isReadOnlyView,isActive:e.mapPerspective.isActive,onChange:function(e){r.handleGeometryChange(e)},onRoutefinderGeometryChange:a.handleGeometryChange,onRoutefinderGeometryEditStart:a.handleEditingStarted,onRoutefinderGeometryEditSave:a.handleEditingFinished,onRoutefinderGeometryEditCancel:a.handleEditingCancelled,onLayerClick:r.handleLayerClick})})}})}function Wk(){var e=Object(W.useContext)(_k),t=e.mapObjectsStore,n=e.mapNavigationStore;return Object(W.useEffect)((function(){return t.handleMapMounted()}),[]),Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{className:ne()(dj.a.mapToolbarButton),onClick:n.handleCenterMapClick,children:Object(re.jsx)("i",{className:"fas fa-crosshairs fa-lg"})}),Object(re.jsx)("button",{className:ne()(dj.a.mapToolbarButton),onClick:n.handleLookupObjectClick,children:Object(re.jsx)("i",{className:"fas fa-search-location fa-lg"})})]})}})}var Hk,zk,Yk="MapPerspective";var Kk,qk,Qk,Xk,Zk=(Hk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rj(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kf();Object(q.a)(this,e),this.perspective=t,this.viewConfiguration=n,this.$iid=Du(),Object(de.a)(this,"isActive",zk,this)}return Object(Q.a)(e,[{key:"handleClick",value:function(e){var t=this;return Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isActive){n.next=2;break}return n.abrupt("return");case 2:return n.delegateYield(t.perspective.deactivate(),"t0",3);case 3:if(t.isActive=!0,!(null===e||void 0===e?void 0:e.saveNewState)){n.next=6;break}return n.delegateYield(t.viewConfiguration.anounceActivePerspective(ci.Form),"t1",6);case 6:case"end":return n.stop()}}),n)})))()}},{key:"deactivate",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isActive=!1;case 1:case"end":return e.stop()}}),e,this)}))},{key:"activateDefault",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.viewConfiguration.activePerspective===ci.Form&&(this.isActive=!0);case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),zk=Object($.a)(Hk.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(Hk.prototype,"handleClick",[Le.a],Object.getOwnPropertyDescriptor(Hk.prototype,"handleClick"),Hk.prototype),Object($.a)(Hk.prototype,"deactivate",[Le.a],Object.getOwnPropertyDescriptor(Hk.prototype,"deactivate"),Hk.prototype),Object($.a)(Hk.prototype,"activateDefault",[Le.a],Object.getOwnPropertyDescriptor(Hk.prototype,"activateDefault"),Hk.prototype),Hk),$k=Ml("IFormPerspective"),Jk=n(246),ex=n.n(Jk),tx=Object(K.inject)((function(e){return{formPanelView:e.dataView.formPanelView}}))(Kk=Object(K.observer)(Kk=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)(K.Provider,{formPanelView:this.props.formPanelView,children:Object(re.jsx)("div",{className:ne()(ex.a.formView,"isFormView"),children:Object(re.jsx)("form",{className:ex.a.formViewForm,onSubmit:function(e){return e.preventDefault()},children:this.props.children})})})}}]),n}(H.a.Component))||Kk)||Kk,nx=n(373),rx=n.n(nx),ox=(qk=c.action.bound,Object(K.observer)((Xk=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).elmFormRoot=null,e.refFormRoot=function(t){return e.elmFormRoot=t},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleWindowClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleWindowClick)}},{key:"handleWindowClick",value:function(e){this.elmFormRoot&&this.elmFormRoot.contains(e.target)}},{key:"render",value:function(){return Object(re.jsx)("div",{ref:this.refFormRoot,className:ne()(this.props.className,rx.a.formRoot),style:this.props.style,children:this.props.children})}}]),n}(H.a.Component),Object($.a)(Xk.prototype,"handleWindowClick",[qk],Object.getOwnPropertyDescriptor(Xk.prototype,"handleWindowClick"),Xk.prototype),Qk=Xk))||Qk),ix=n(98),ax=n.n(ix);function sx(e,t,n){var r=to(e,t),o=r?r.columns.get(n):void 0;return o?o.dynamicLabel:void 0}var cx=n(86),ux=n.n(cx);function lx(e){return e?"function"!==typeof e.split?[e.toString()]:e.split(/\\r\\n|\\n|<br\/>|<BR\/>/):[]}var dx,px,hx,fx,bx,vx,yx,gx,mx,wx,Ox,jx,kx,xx,Cx,Ix,Sx,Dx,Rx,Tx,_x,Px,Fx=n(87),Mx=n.n(Fx),Lx=(dx=Object(K.inject)((function(e,t){var n,r=e.property;t.value;return{api:l(r),processCRUDResult:function(e){return en(r,e)},changeManyFields:(n=r,o.a.mark((function e(t){var r,i,a,s,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ur(n),i=li(n)){a=Object(le.a)(t);try{for(a.s();!(s=a.n()).done;)c=s.value,u=c.fieldId,l=c.value,r.setDirtyValue(i,u,l)}catch(o){a.e(o)}finally{a.f()}}case 3:case"end":return e.stop()}}),e)}))),flushCurrentRowData:Fc(r),handleError:yt(r),dialogStack:Ys(r),DataStructureEntityId:un(r),Property:r.id,RowId:Vn(r),menuItemId:Hn(r),Entity:En(r),SessionFormIdentifier:Wn(r),parameters:r.parameters}})),px=c.observable.ref,dx(hx=Object(K.observer)((fx=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).elmInput=null,e.refInput=function(t){e.elmInput=t},Object(de.a)(e,"focused",bx,Object(pe.a)(e)),Object(de.a)(e,"fileList",vx,Object(pe.a)(e)),Object(de.a)(e,"progressValue",yx,Object(pe.a)(e)),Object(de.a)(e,"speedValue",gx,Object(pe.a)(e)),Object(de.a)(e,"isUploading",mx,Object(pe.a)(e)),Object(de.a)(e,"displayImageEditor",wx,Object(pe.a)(e)),e.imageObjectUrl=void 0,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.elmInput&&this.props.subscribeToFocusManager&&this.props.subscribeToFocusManager(this.elmInput)}},{key:"handleFileChange",value:function(e){this.fileList=e.target.files,Object(c.flow)(this.upload.bind(this))()}},{key:"download",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.getDownloadToken({SessionFormIdentifier:this.props.SessionFormIdentifier,MenuId:this.props.menuItemId,DataStructureEntityId:this.props.DataStructureEntityId,Entity:this.props.Entity,RowId:this.props.RowId,Property:this.props.Property,FileName:this.props.value,parameters:this.props.parameters,isPreview:t.isPreview});case 2:return n=e.sent,e.next=5,this.props.api.getBlob({downloadToken:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"upload",value:o.a.mark((function e(){var t,n,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.progressValue=0,this.speedValue=0,this.isUploading=!0,e.prev=3,!(this.fileList&&this.fileList.length>0)){e.next=21;break}t=Object(le.a)(this.fileList),e.prev=6,r=o.a.mark((function e(){var t,r,a,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,i.props.api.getUploadToken({SessionFormIdentifier:i.props.SessionFormIdentifier,MenuId:i.props.menuItemId,DataStructureEntityId:i.props.DataStructureEntityId,Entity:i.props.Entity,RowId:i.props.RowId,Property:i.props.Property,FileName:i.props.value,parameters:i.props.parameters,DateCreated:"2010-01-01",DateLastModified:"2010-01-01"});case 3:return r=e.sent,a=void 0,s=0,e.next=8,i.props.api.putBlob({uploadToken:r,fileName:t.name,file:t},Object(c.action)((function(e){i.progressValue=e.loaded/e.total,void 0!==a&&(i.speedValue=(e.loaded-s)/(e.timeStamp-a)*1e3),a=e.timeStamp,s=e.loaded})));case 8:return e.next=10,i.props.api.changes({SessionFormIdentifier:i.props.SessionFormIdentifier,Entity:i.props.Entity,RowId:i.props.RowId});case 10:return u=e.sent,e.delegateYield(i.props.processCRUDResult(u),"t0",12);case 12:case"end":return e.stop()}}),e)})),t.s();case 9:if((n=t.n()).done){e.next=13;break}return e.delegateYield(r(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),t.e(e.t1);case 18:return e.prev=18,t.f(),e.finish(18);case 21:e.next=26;break;case 23:return e.prev=23,e.t2=e.catch(3),e.delegateYield(this.props.handleError(e.t2),"t3",26);case 26:return e.prev=26,this.isUploading=!1,this.elmInput&&(this.elmInput.value=""),e.finish(26);case 30:case"end":return e.stop()}}),e,this,[[3,23,26,30],[6,15,18,21]])}))},{key:"delete",value:o.a.mark((function e(){var t,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(Object(c.action)((function(e){var t=r.props.dialogStack.pushDialog("",Object(re.jsx)(xt,{title:bt("Question","question_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,onClick:function(){t(),e(!0)},children:bt("Yes","button_yes")}),Object(re.jsx)("button",{tabIndex:0,onClick:function(){t(),e(!1)},children:bt("No","button_no")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:Mx.a.dialogContent,children:bt("Do you wish to delete {0}?","blob_delete_confirmation",r.props.value)})}))})));case 2:if(!e.sent){e.next=17;break}return t=this.props.parameters,(n=[]).push({fieldId:this.props.Property,value:null}),t.AuthorMember&&n.push({fieldId:t.AuthorMember,value:null}),t.BlobMember&&n.push({fieldId:t.BlobMember,value:null}),t.CompressionStateMember&&n.push({fieldId:t.CompressionStateMember,value:null}),t.DateCreatedMember&&n.push({fieldId:t.DateCreatedMember,value:null}),t.DateLastModifiedMember&&n.push({fieldId:t.DateLastModifiedMember,value:null}),t.FileSizeMember&&n.push({fieldId:t.FileSizeMember,value:null}),t.OriginalPathMember&&n.push({fieldId:t.OriginalPathMember,value:null}),t.RemarkMember&&n.push({fieldId:t.RemarkMember,value:null}),t.ThumbnailMember&&n.push({fieldId:t.ThumbnailMember,value:null}),e.delegateYield(this.props.changeManyFields(n),"t0",16);case 16:return e.delegateYield(this.props.flushCurrentRowData(),"t1",17);case 17:case"end":return e.stop()}}),e,this)}))},{key:"render",value:function(){return Object(re.jsx)("div",{className:Mx.a.editorContainer,children:this.renderInput()})}},{key:"onFocus",value:function(){this.focused=!0}},{key:"onBlur",value:function(){this.focused=!1}},{key:"renderInput",value:function(){var e=this;return this.props.isReadOnly&&!this.props.value?Object(re.jsx)("div",{className:Mx.a.blobEditor,children:Object(re.jsx)("input",{readOnly:!0,className:"fileName "+(this.focused?Mx.a.focusedBorder:Mx.a.standardBorder),value:this.props.value||""})}):this.props.value?Object(re.jsxs)("div",{className:Mx.a.blobEditor+" "+jm.a.control,children:[Object(re.jsx)("input",{className:"input "+(this.focused?Mx.a.focusedBorder:Mx.a.standardBorder),value:this.props.value||"",disabled:this.props.isReadOnly,onChange:function(t){return!e.props.isReadOnly&&e.props.onChange&&e.props.onChange(t,t.target.value)},onBlur:function(t){return!e.props.isReadOnly&&e.props.onEditorBlur&&e.props.onEditorBlur(t)}}),Object(re.jsx)("div",{children:Object(re.jsx)(rd,{trigger:function(e){var t=e.refTrigger,n=e.setDropped,r=e.isDropped;return Object(re.jsx)("div",{className:jm.a.control,ref:t,children:Object(re.jsx)("div",{className:ne()("inputBtn","lastOne"),onClick:function(e){return n(!0)},children:r?Object(re.jsx)("i",{className:"fas fa-caret-up"}):Object(re.jsx)("i",{className:"fas fa-caret-down"})})})},content:function(t){var n=t.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{onClick:function(t){n(!1),In({ctx:e.props.Property,action:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.download({isPreview:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},children:bt("Download","blob_download")}),Object(re.jsx)(kd,{isDisabled:e.props.isReadOnly,onClick:function(t){n(!1),Sn({ctx:e.props.Property,generator:e.delete.bind(e)()})},children:bt("Delete","blob_delete")}),Object(re.jsx)(kd,{onClick:function(t){n(!1),In({ctx:e.props.Property,action:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.download({isPreview:!0});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},children:bt("Preview","blob_preview")})]})}})})]}):Object(re.jsxs)("div",{className:Mx.a.blobEditor,children:[Object(re.jsxs)("label",{className:"customBtnChoose",title:"Upload new file.",children:[Object(re.jsx)("input",{className:"btnChooseFile",name:"file",type:"file",multiple:!1,onChange:function(t){return e.handleFileChange(t)},ref:this.refInput,onFocus:function(){return e.onFocus()},onBlur:function(){return e.onBlur()},onKeyDown:function(t){return e.props.onKeyDown&&e.props.onKeyDown(t)}}),bt("Upload","blob_upload")]}),this.isUploading&&Object(re.jsx)("div",{className:"progress",children:Object(re.jsx)("div",{className:"progressBar",style:{width:"".concat(100*this.progressValue,"%")},children:Object(re.jsxs)("div",{className:"progressBar",style:{width:"".concat(100*this.progressValue,"%")},children:[(100*this.progressValue).toFixed(0),"%"]})})})]})}}]),n}(H.a.Component),bx=Object($.a)(fx.prototype,"focused",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vx=Object($.a)(fx.prototype,"fileList",[px],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yx=Object($.a)(fx.prototype,"progressValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gx=Object($.a)(fx.prototype,"speedValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),mx=Object($.a)(fx.prototype,"isUploading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wx=Object($.a)(fx.prototype,"displayImageEditor",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hx=fx))||hx)||hx),Ex=n(119),Ax=n.n(Ex),Vx=(Ox=c.action.bound,jx=c.action.bound,kx=c.observable.ref,xx=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"lookupList",Cx,this),Object(de.a)(this,"props",Ix,this)}return Object(Q.a)(e,[{key:"items",get:function(){return this.lookupList.map((function(e){return{value:e[0],label:e[1]}}))}},{key:"loadLookupList",value:function(){var e=this;Object(c.flow)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.api.getLookupList({Entity:e.props.Entity,SessionFormIdentifier:e.props.SessionFormIdentifier,DataStructureEntityId:e.props.DataStructureEntityId,ColumnNames:[e.props.Identifier||"Id"].concat(Object(gt.a)(e.props.ColumnNames)),Property:e.props.Property,Id:e.props.RowId,LookupId:e.props.LookupId,Parameters:e.props.Parameters,MenuId:e.props.menuItemId,ShowUniqueValues:!1,SearchText:"",PageSize:1e4,PageNumber:1});case 2:n=t.sent,e.lookupList=n;case 4:case"end":return t.stop()}}),t)})))()}},{key:"handleClick",value:function(e,t){e.preventDefault();var n=this.props.value.findIndex((function(e){return t.value===e}));if(n>-1){var r=Object(gt.a)(this.props.value);return r.splice(n,1),void(this.props.onChange&&this.props.onChange(r))}var o=[].concat(Object(gt.a)(this.props.value),[t.value]);this.props.onChange&&this.props.onChange(o)}}]),e}(),Cx=Object($.a)(xx.prototype,"lookupList",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(xx.prototype,"items",[c.computed],Object.getOwnPropertyDescriptor(xx.prototype,"items"),xx.prototype),Object($.a)(xx.prototype,"loadLookupList",[Ox],Object.getOwnPropertyDescriptor(xx.prototype,"loadLookupList"),xx.prototype),Object($.a)(xx.prototype,"handleClick",[jx],Object.getOwnPropertyDescriptor(xx.prototype,"handleClick"),xx.prototype),Ix=Object($.a)(xx.prototype,"props",[kx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),xx),Nx=Object(K.observer)((function(e){var t=Object(W.useContext)(K.MobXProviderContext).property;return Object(re.jsx)(Bx,{value:e.value,onChange:e.isReadonly?void 0:e.onChange,api:l(t),DataStructureEntityId:un(t),ColumnNames:t.lookup.dropDownColumns.map((function(e){return e.id})),Property:t.id,Parameters:t.lookup.parameters,RowId:Vn(t),Identifier:t.identifier,LookupId:t.lookup.lookupId,menuItemId:Hn(t),Entity:En(t),SessionFormIdentifier:Wn(t),isReadonly:e.isReadonly,subscribeToFocusManager:e.subscribeToFocusManager,onKeyDown:e.onKeyDown,onClick:e.onClick})})),Bx=Object(K.observer)((function(e){var t=Object(W.useState)((function(){return new Vx})),n=Object(d.a)(t,1)[0];n.props=e,Object(W.useEffect)(n.loadLookupList,[e.RowId]);var r=[];function o(e,t){var n=r.filter((function(n){return n.hasYEqualTo(t)&&n.isOnTheLeftOf(e)})).sort((function(e,t){return t.x-e.x}));n.length>0&&n[0].focus()}function i(e,t){var n=r.filter((function(n){return n.hasYEqualTo(t)&&n.isOnTheRightOf(e)})).sort((function(e,t){return e.x-t.x}));n.length>0&&n[0].focus()}function a(e,t){var n=r.filter((function(n){return n.hasXEqualTo(e)&&n.isAbove(t)})).sort((function(e,t){return t.y-e.y}));n.length>0&&n[0].focus()}function s(e,t){var n=r.filter((function(n){return n.hasXEqualTo(e)&&n.isBelow(t)})).sort((function(e,t){return e.y-t.y}));n.length>0&&n[0].focus()}return Object(re.jsx)("div",{className:Ax.a.editorContainer,children:Object(re.jsx)("div",{className:ne()(Ax.a.root,{isReadonly:e.isReadonly}),children:n.items.map((function(t,c){return Object(re.jsx)(Ux,{checked:e.value&&!!e.value.find((function(e){return e===t.value})),onClick:function(r){e.onClick(),e.isReadonly||n.handleClick(r,t)},subscribeToFocusManager:0===c?e.subscribeToFocusManager:void 0,inputSetter:function(e){return r.push(e)},focusLeft:o,focusRight:i,focusUp:a,focusDown:s,onKeyDown:e.isReadonly?void 0:e.onKeyDown,label:t.label},t.value)}))})})})),Ux=function(e){var t=Object(W.useState)(!1),n=Object(d.a)(t,2),r=n[0],o=n[1],i=Object(W.useRef)(null);return e.inputSetter(new Gx(i)),Object(W.useEffect)((function(){e.subscribeToFocusManager&&i.current&&e.subscribeToFocusManager(i.current)}),[]),Object(re.jsxs)("div",{className:Ax.a.item,onClick:function(t){var n;e.onClick&&e.onClick(t),null===i||void 0===i||null===(n=i.current)||void 0===n||n.focus()},children:[Object(re.jsx)("input",{ref:i,type:"checkbox",className:"checkbox "+Ax.a.input,checked:e.checked,tabIndex:e.tabIndex?e.tabIndex:void 0,onKeyDown:function(t){var n,r,o=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect();switch(t.key){case"Tab":null===(r=e.onKeyDown)||void 0===r||r.call(e,t);break;case"ArrowUp":t.preventDefault(),e.focusUp(o.x,o.y);break;case"ArrowDown":t.preventDefault(),e.focusDown(o.x,o.y);break;case"ArrowRight":t.preventDefault(),e.focusRight(o.x,o.y);break;case"ArrowLeft":t.preventDefault(),e.focusLeft(o.x,o.y)}},onFocus:function(){o(!0)},onBlur:function(){o(!1)}}),Object(re.jsx)("div",{className:"content "+(r?Ax.a.focusedLabel:Ax.a.unFocusedLabel),children:e.label})]})},Gx=function(){function e(t){Object(q.a)(this,e),this.inputRef=t}return Object(Q.a)(e,[{key:"x",get:function(){var e;return(null===(e=this.inputRef.current)||void 0===e?void 0:e.getBoundingClientRect().x)||0}},{key:"y",get:function(){var e;return(null===(e=this.inputRef.current)||void 0===e?void 0:e.getBoundingClientRect().y)||0}},{key:"hasXEqualTo",value:function(e){return Math.abs(this.x-e)<1}},{key:"hasYEqualTo",value:function(e){return Math.abs(this.y-e)<1}},{key:"isOnTheLeftOf",value:function(e){return this.x<e}},{key:"isOnTheRightOf",value:function(e){return this.x>e}},{key:"isAbove",value:function(e){return this.y<e}},{key:"isBelow",value:function(e){return this.y>e}},{key:"focus",value:function(){var e;null===(e=this.inputRef.current)||void 0===e||e.focus()}}]),e}(),Wx=n(374),Hx=n.n(Wx),zx=Object(K.inject)((function(e,t){var n=e.property;t.value;return{api:l(n),DataStructureEntityId:un(n),Property:n.id,RowId:Vn(n),Identifier:n.identifier,MenuId:Hn(n),Entity:En(n),SessionFormIdentifier:Wn(n)}}))(Sx=Object(K.observer)(Sx=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=ys(this.props.value).value;return e?Object(re.jsx)("img",{className:Hx.a.image,src:e,alt:""}):null}}]),n}(H.a.Component))||Sx)||Sx,Yx=n(247),Kx=n.n(Yx),qx=(Dx=c.action.bound,Rx=c.action.bound,Tx=c.action.bound,_x=c.action.bound,Px=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.formatForDisplay(e.props.value),cursorPosition:0},e.disposer=void 0,e.inputRef=W.createRef(),e}return Object(Q.a)(n,[{key:"formatForDisplay",value:function(e){var t,n,r=null===e?"0":e;return"string"===typeof e&&(r=e.replaceAll(Bo(),"").replaceAll(No(),"."),""===e.trim()&&(r="0")),Go(this.props.customNumberFormat,null!==(t=null===(n=this.props.property)||void 0===n?void 0:n.entity)&&void 0!==t?t:"",Number(r))}},{key:"formatForOnChange",value:function(e){return this.formatForDisplay(e).replaceAll(Bo(),"").replaceAll(No(),".")}},{key:"componentDidMount",value:function(){this.inputRef.current&&this.props.subscribeToFocusManager&&this.props.subscribeToFocusManager(this.inputRef.current),this.updateTextOverflowState()}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({value:this.formatForDisplay(this.props.value)}),this.updateTextOverflowState()}},{key:"componentWillUnmount",value:function(){var e;this.handleBlur(null),null===(e=this.disposer)||void 0===e||e.call(this)}},{key:"handleFocus",value:function(e){this.inputRef.current&&(this.inputRef.current.select(),this.inputRef.current.scrollLeft=0)}},{key:"updateTextOverflowState",value:function(){var e,t;if(this.inputRef.current){var n=this.inputRef.current.offsetWidth<this.inputRef.current.scrollWidth;null===(e=(t=this.props).onTextOverflowChanged)||void 0===e||e.call(t,n?this.state.value:void 0)}}},{key:"handleBlur",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In({ctx:this.props.property,action:function(){var e=Object(i.a)(o.a.mark((function e(){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.formatForOnChange(n.state.value),n.formatForOnChange(n.props.value)===a){e.next=6;break}if(e.t0=n.props.onChange,!e.t0){e.next=6;break}return e.next=6,n.props.onChange(null,a);case 6:null===(r=(i=n.props).onEditorBlur)||void 0===r||r.call(i,t),n.setState({value:n.formatForDisplay(n.state.value)});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=this,n=function(e){for(var t=[],n=0,r=0;r<e.target.value.length;r++){var o=e.target.value[r];Qx(o)?t.push(o):r<e.target.selectionStart&&n++}return{cleanValue:t.join(""),invalidCharactersBeforeCursor:n}}(e),r=n.cleanValue,o=n.invalidCharactersBeforeCursor,i=function(e){var t=e.replaceAll(Bo(),"").replaceAll(No(),".");return!isNaN(Number(t))}(r)?{value:r,cursorPosition:e.target.selectionStart-o}:{value:this.state.value,cursorPosition:e.target.selectionStart-1};this.setState(i,(function(){t.inputRef.current&&(t.inputRef.current.selectionStart=t.state.cursorPosition,t.inputRef.current.selectionEnd=t.state.cursorPosition)})),this.updateTextOverflowState()}},{key:"handleKeyDown",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In({ctx:this.props.property,action:function(){var e=Object(i.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key&&"Tab"!==t.key){e.next=7;break}if(r=n.formatForOnChange(n.state.value),n.formatForOnChange(n.props.value)===r){e.next=7;break}if(e.t0=n.props.onChange,!e.t0){e.next=7;break}return e.next=7,n.props.onChange(null,r);case 7:n.props.onKeyDown&&n.props.onKeyDown(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStyle",value:function(){return this.props.customStyle?this.props.customStyle:{color:this.props.foregroundColor,backgroundColor:this.props.backgroundColor}}},{key:"render",value:function(){var e=(0===this.props.maxLength?void 0:this.props.maxLength)||void 0;return Object(re.jsx)("div",{className:Kx.a.editorContainer,children:Object(re.jsx)("input",{id:this.props.id,style:this.getStyle(),title:this.props.customNumberFormat||void 0,className:ne()(Kx.a.input),type:this.props.isPassword?"password":"text",autoComplete:this.props.isPassword?"new-password":void 0,value:this.state.value,maxLength:e,readOnly:this.props.isReadOnly,ref:this.inputRef,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onBlur:this.handleBlur,onFocus:this.handleFocus})})}}]),n}(W.Component),Object($.a)(Px.prototype,"handleFocus",[Dx],Object.getOwnPropertyDescriptor(Px.prototype,"handleFocus"),Px.prototype),Object($.a)(Px.prototype,"handleBlur",[Rx],Object.getOwnPropertyDescriptor(Px.prototype,"handleBlur"),Px.prototype),Object($.a)(Px.prototype,"handleChange",[Tx],Object.getOwnPropertyDescriptor(Px.prototype,"handleChange"),Px.prototype),Object($.a)(Px.prototype,"handleKeyDown",[_x],Object.getOwnPropertyDescriptor(Px.prototype,"handleKeyDown"),Px.prototype),Px);function Qx(e){return e===No()||e===Bo()||!isNaN(parseInt(e,10))}var Xx,Zx,$x,Jx=n(52),eC=n.n(Jx),tC=n(111),nC=n(375),rC=n(376),oC=n.n(rC),iC=n(377),aC=n.n(iC),sC=(n(614),Xx=c.action.bound,Object(K.observer)(($x=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).disposers=[],e.currentValue=e.props.value,e.lastAutoUpdatedValue=e.props.value,e.updateInterval=void 0,e.elmInput=null,e.refInput=function(t){e.elmInput=t,e.elmInput&&e.props.subscribeToFocusManager&&e.props.subscribeToFocusManager(e.elmInput)},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.isMultiline&&this.disposers.push(this.startAutoUpdate()),this.updateTextOverflowState()}},{key:"componentDidUpdate",value:function(){this.updateTextOverflowState()}},{key:"updateTextOverflowState",value:function(){var e,t;if(!this.props.isMultiline&&this.elmInput){var n=this.elmInput.offsetWidth<this.elmInput.scrollWidth;null===(e=(t=this.props).onTextOverflowChanged)||void 0===e||e.call(t,n?this.props.value:void 0)}}},{key:"startAutoUpdate",value:function(){var e=this;return this.updateInterval=setInterval((function(){var t,n,r;e.lastAutoUpdatedValue!==e.currentValue&&(null===(t=(n=e.props).onAutoUpdate)||void 0===t||t.call(n,null!==(r=e.currentValue)&&void 0!==r?r:""),e.lastAutoUpdatedValue=e.currentValue)}),6e4),function(){return e.updateInterval&&clearTimeout(e.updateInterval)}}},{key:"componentWillUnmount",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"handleFocus",value:function(e){this.elmInput&&(this.props.maxLength&&this.props.maxLength>0&&this.elmInput.select(),this.elmInput.scrollLeft=0)}},{key:"getStyle",value:function(){return this.props.customStyle?this.props.customStyle:{color:this.props.foregroundColor,backgroundColor:this.props.backgroundColor}}},{key:"render",value:function(){return Object(re.jsx)("div",{className:eC.a.editorContainer,children:this.renderValueTag()})}},{key:"getMultilineDivClass",value:function(){return this.props.wrapText?eC.a.readonlyDiv+" "+eC.a.input+" "+eC.a.wrapText:eC.a.readonlyDiv+" "+eC.a.input+" "+(function(e){if(null===e||void 0===e)return!1;return e.includes("\n")||e.includes("\r")}(this.props.value)?eC.a.scrollY:eC.a.noScrollY)}},{key:"renderValueTag",value:function(){var e,t,n=this,r=0===this.props.maxLength?void 0:this.props.maxLength;return this.props.isRichText?this.props.isReadOnly?Object(re.jsx)("div",{className:eC.a.editorContainer,children:Object(re.jsx)("div",{id:this.props.id,style:this.getStyle(),className:eC.a.input,dangerouslySetInnerHTML:{__html:null!==(e=this.props.value)&&void 0!==e?e:""},onKeyDown:this.props.onKeyDown,onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onBlur:this.props.onEditorBlur,onFocus:this.handleFocus})}):Object(re.jsx)("div",{className:eC.a.richTextWrappContainer,children:Object(re.jsx)(cC,{value:null!==(t=this.props.value)&&void 0!==t?t:"",onChange:function(e){var t,r;n.currentValue=e,null===(t=(r=n.props).onChange)||void 0===t||t.call(r,void 0,e)},refInput:this.refInput,onBlur:this.props.onEditorBlur,onFocus:this.handleFocus})}):this.props.isMultiline?this.props.isReadOnly?Object(re.jsx)("div",{id:this.props.id,className:this.getMultilineDivClass(),onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onBlur:this.props.onEditorBlur,onFocus:this.handleFocus,children:Object(re.jsx)("span",{style:this.getStyle(),className:eC.a.multiLine,children:this.props.value||""})}):Object(re.jsx)("textarea",{id:this.props.id,style:this.getStyle(),className:eC.a.input,value:this.props.value||"",readOnly:this.props.isReadOnly,ref:this.refInput,maxLength:r,onChange:function(e){n.currentValue=e.target.value,n.props.onChange&&n.props.onChange(e,e.target.value)},onKeyDown:this.props.onKeyDown,onDoubleClick:this.props.onDoubleClick,onClick:this.props.onClick,onBlur:this.props.onEditorBlur,onFocus:this.handleFocus}):Object(re.jsx)("input",{id:this.props.id,style:this.getStyle(),className:eC.a.input,type:this.props.isPassword?"password":"text",autoComplete:this.props.isPassword?"new-password":void 0,value:this.props.value||"",readOnly:this.props.isReadOnly,maxLength:r,ref:this.refInput,onChange:function(e){n.props.onChange&&n.props.onChange(e,e.target.value),n.updateTextOverflowState()},onKeyDown:this.props.onKeyDown,onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onBlur:this.props.onEditorBlur,onFocus:this.handleFocus})}}]),n}(W.Component),Object($.a)($x.prototype,"handleFocus",[Xx],Object.getOwnPropertyDescriptor($x.prototype,"handleFocus"),$x.prototype),Zx=$x))||Zx);function cC(e){var t=Object(W.useState)((function(){return tC.EditorState.createEmpty()})),n=Object(d.a)(t,2),r=n[0],o=n[1],i=Object(W.useState)(""),a=Object(d.a)(i,2),s=a[0],c=a[1],u=Object(W.useCallback)((function(t){var n;o(t);var r=oC()(Object(tC.convertToRaw)(t.getCurrentContent()));c(r),null===(n=e.onChange)||void 0===n||n.call(e,r)}),[o,c,e.onChange]);return Object(W.useEffect)((function(){e.refInput&&e.refInput(document.querySelector("[role='textbox']"))})),Object(W.useEffect)((function(){if(e.value!==s){var t=aC()(e.value),n=t.contentBlocks,r=t.entityMap,i=tC.ContentState.createFromBlockArray(n,r),a=tC.EditorState.createWithContent(i);c(e.value),o(a)}}),[e.value,s]),Object(re.jsx)(nC.Editor,{editorState:r,wrapperClassName:eC.a.richTextWrappStyle,editorClassName:eC.a.richTextEditorStyle,onEditorStateChange:u,onBlur:e.onBlur})}function uC(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Cd.runGenerator(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(Fc(e)(),"t0",1);case 1:case"end":return t.stop()}}),t)}))),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}var lC,dC=n(378),pC=n.n(dC),hC=Object(K.observer)(lC=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).elmInput=null,e.refInput=function(t){e.elmInput=t},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.elmInput&&this.props.subscribeToFocusManager&&this.props.subscribeToFocusManager(this.elmInput)}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:ne()(pC.a.editorContainer),children:Object(re.jsx)("input",{id:this.props.id?this.props.id:void 0,className:"editor",type:"checkbox",checked:this.props.value||!1,readOnly:!this.props.readOnlyNoGrey&&this.props.isReadOnly,disabled:!this.props.readOnlyNoGrey&&this.props.isReadOnly,onChange:function(t){e.props.onChange&&!e.props.isReadOnly&&e.props.onChange(t,t.target.checked)},onKeyDown:this.props.onKeyDown,onClick:this.props.onClick,onBlur:this.props.onBlur,onFocus:this.props.onFocus,ref:this.refInput,tabIndex:0})})}}]),n}(W.Component))||lC;var fC,bC,vC,yC,gC,mC,wC,OC,jC,kC,xC,CC,IC,SC,DC=n(148),RC=n.n(DC),TC=n(434),_C=n(751),PC=n(752),FC=(fC=c.action.bound,bC=c.action.bound,vC=c.action.bound,yC=c.action.bound,gC=c.action.bound,mC=c.action.bound,wC=c.action.bound,Object(K.observer)((jC=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).refContainer=function(e){return r.elmContainer=e},r.elmContainer=void 0,r.refDropdowner=function(e){return r.elmDropdowner=e},r.elmDropdowner=null,r.refDroppedPanelContainer=function(e){return r.elmDroppedPanelContainer=e},r.elmDroppedPanelContainer=void 0,r.elmInput=null,r.refInput=function(e){r.elmInput=e,r.elmInput&&r.props.subscribeToFocusManager&&r.props.subscribeToFocusManager(r.elmInput)},r.machine=Object(_C.a)(Object(PC.a)({id:"colorEditor",type:"parallel",states:{UI:{initial:"CLOSED_INACTIVE",states:{CLOSED_INACTIVE:{on:{DROPDOWN_SYMBOL_MOUSE_DOWN:{actions:"setDroppedDown"},PICKER_DROPPED_DOWN:"OPEN",INPUT_FIELD_FOCUS:"CLOSED_ACTIVE"}},CLOSED_ACTIVE:{on:{DROPDOWN_SYMBOL_MOUSE_DOWN:{actions:"setDroppedDown"},PICKER_DROPPED_DOWN:"OPEN",INPUT_FIELD_BLUR:{actions:["signalComponentBlur","commitAppliedValue"],target:"CLOSED_INACTIVE"},INPUT_FIELD_KEY_DOWN:[{actions:"commitAppliedValue",cond:"eventKeyIsEnter"},{actions:"revertAppliedValue",cond:"eventKeyIsEscape"}]}},OPEN:{entry:"pickValueFromApplied",on:{PICKER_KEY_DOWN:[{actions:["applyPickedValue","commitAppliedValue","setDroppedUp"],cond:"eventKeyIsEnter"},{cond:"eventKeyIsEscape",actions:["setDroppedUp"]}],PICKER_OUTSIDE_INTERACTION:{target:"CLOSED_INACTIVE",actions:["applyPickedValue","commitAppliedValue","signalComponentBlur","setDroppedUp"]},PICKER_DROPPED_UP:{target:"CLOSED_ACTIVE"}},after:{100:{actions:"focusPickerContainer"}}}}}}},{actions:{applyPickedValue:function(e,t){r.applyPickedValue()},commitAppliedValue:function(e,t){r.commitAppliedValue()},revertAppliedValue:function(e,t){r.revertAppliedValue()},pickValueFromApplied:function(e,t){r.pickValueFromApplied()},setDroppedDown:function(e,t){r.setDropped(!0)},setDroppedUp:function(e,t){r.setDropped(!1)},focusPickerContainer:function(e,t){var n;null===(n=r.elmDroppedPanelContainer)||void 0===n||n.focus()},focusInputField:function(e,t){var n;null===(n=r.elmInput)||void 0===n||n.select()},signalComponentBlur:function(e,t){var n,o;null===(n=(o=r.props).onBlur)||void 0===n||n.call(o)}},guards:{eventKeyIsEnter:function(e,t){return"Enter"===t.payload.event.key},eventKeyIsEscape:function(e,t){return"Escape"===t.payload.event.key}}})).onTransition((function(e,t){e.changed&&(r.machineState=e)})).start(),Object(de.a)(r,"machineState",kC,Object(pe.a)(r)),Object(de.a)(r,"pickedColor",xC,Object(pe.a)(r)),Object(de.a)(r,"appliedValue",CC,Object(pe.a)(r)),r.revertAppliedValue(),r}return Object(Q.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;Object(c.runInAction)((function(){e.value!==t.props.value&&t.revertAppliedValue()}))}},{key:"setDropped",value:function(e){var t;null===(t=this.elmDropdowner)||void 0===t||t.setDropped(e)}},{key:"isDroppedDown",get:function(){return this.machineState.matches("UI.OPEN")}},{key:"handleColorChange",value:function(e,t){this.pickedColor=e.hex.toUpperCase()}},{key:"applyPickedValue",value:function(){this.appliedValue=this.pickedColor}},{key:"commitAppliedValue",value:function(){var e,t;this.appliedValue!==this.props.value&&(null===(e=(t=this.props).onChange)||void 0===e||e.call(t,this.appliedValue))}},{key:"revertAppliedValue",value:function(){this.appliedValue=this.props.value}},{key:"pickValueFromApplied",value:function(){this.pickedColor=this.appliedValue}},{key:"send",value:function(e){this.machine.send(e)}},{key:"render",value:function(){var e=this;return Object(re.jsx)(rd,{ref:this.refDropdowner,onContainerMouseDown:void 0,onDroppedUp:function(){return e.send({type:"PICKER_DROPPED_UP"})},onDroppedDown:function(){return e.send({type:"PICKER_DROPPED_DOWN"})},onOutsideInteraction:function(){return e.send({type:"PICKER_OUTSIDE_INTERACTION"})},trigger:function(t){var n=t.refTrigger;t.setDropped;return Object(re.jsx)("div",{className:RC.a.editorContainer,ref:e.refContainer,style:{zIndex:e.isDroppedDown?1e3:void 0},children:Object(re.jsx)("div",{className:RC.a.colorDiv,tabIndex:0,ref:function(t){n(t),e.refInput(t)},onMouseDown:function(){return e.send({type:"DROPDOWN_SYMBOL_MOUSE_DOWN"})},onFocus:function(){return e.send({type:"INPUT_FIELD_FOCUS"})},onBlur:function(){return e.send({type:"INPUT_FIELD_BLUR"})},onKeyDown:function(t){var n,r;return null===(n=(r=e.props).onKeyDown)||void 0===n?void 0:n.call(r,t)},children:Object(re.jsx)("div",{className:RC.a.colorRect,style:{backgroundColor:(e.isDroppedDown?e.pickedColor:e.appliedValue)||"#000000"}})})})},content:function(t){t.setDropped;return Object(re.jsx)("div",{tabIndex:0,ref:e.refDroppedPanelContainer,className:RC.a.droppedPanelContainer,onKeyDown:function(t){e.send({type:"PICKER_KEY_DOWN",payload:{event:t}})},children:Object(re.jsx)(TC.a,{color:e.pickedColor||"#000000",onChange:e.handleColorChange,disableAlpha:!0})})}})}}]),n}(H.a.Component),kC=Object($.a)(jC.prototype,"machineState",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.machine.state}}),Object($.a)(jC.prototype,"setDropped",[fC],Object.getOwnPropertyDescriptor(jC.prototype,"setDropped"),jC.prototype),xC=Object($.a)(jC.prototype,"pickedColor",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#000000"}}),CC=Object($.a)(jC.prototype,"appliedValue",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#000000"}}),Object($.a)(jC.prototype,"handleColorChange",[bC],Object.getOwnPropertyDescriptor(jC.prototype,"handleColorChange"),jC.prototype),Object($.a)(jC.prototype,"applyPickedValue",[vC],Object.getOwnPropertyDescriptor(jC.prototype,"applyPickedValue"),jC.prototype),Object($.a)(jC.prototype,"commitAppliedValue",[yC],Object.getOwnPropertyDescriptor(jC.prototype,"commitAppliedValue"),jC.prototype),Object($.a)(jC.prototype,"revertAppliedValue",[gC],Object.getOwnPropertyDescriptor(jC.prototype,"revertAppliedValue"),jC.prototype),Object($.a)(jC.prototype,"pickValueFromApplied",[mC],Object.getOwnPropertyDescriptor(jC.prototype,"pickValueFromApplied"),jC.prototype),Object($.a)(jC.prototype,"send",[wC],Object.getOwnPropertyDescriptor(jC.prototype,"send"),jC.prototype),OC=jC))||OC);var MC,LC,EC,AC,VC=(IC=Object(K.inject)((function(e){var t=e.property,n=e.formPanelView;return{property:t,onEditorBlur:function(e){return uC(n)(e)},onChange:function(){var e=Object(i.a)(o.a.mark((function e(r,i){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=li(t))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Sc(n)({event:r,row:a,property:t,value:i});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),IC(SC=Object(K.observer)(SC=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).focusManager=void 0,r.focusManager=Be(r.props.property).formFocusManager,r}return Object(Q.a)(n,[{key:"getEditor",value:function(){var e,t,n,r,a,s,u,d,p,h,f,b=this,v=Vn(this.props.property),y=li(this.props.property),g=Tp(this.props.property,v||""),m=!y||Lc(this.props.property,v),w=m?Mp(this.props.backgroundColor,-.1):this.props.backgroundColor;switch(this.props.property.column){case"Number":return Object(re.jsx)(qx,{id:"editor_"+(null===(e=this.props.property)||void 0===e?void 0:e.modelInstanceId),value:this.props.value,isReadOnly:m,isPassword:this.props.property.isPassword,property:this.props.property,maxLength:null===(t=this.props.property)||void 0===t?void 0:t.maxLength,backgroundColor:w,foregroundColor:g,customNumberFormat:this.props.property.customNumericFormat,customStyle:NC(null===(n=this.props.property)||void 0===n?void 0:n.style),onChange:this.props.onChange,onKeyDown:this.makeOnKeyDownCallBack(),onEditorBlur:this.props.onEditorBlur,onTextOverflowChanged:this.props.onTextOverflowChanged,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)}});case"Text":return Object(re.jsx)(sC,{id:"editor_"+(null===(r=this.props.property)||void 0===r?void 0:r.modelInstanceId),value:this.props.value,isReadOnly:m,isMultiline:this.props.property.multiline,isPassword:this.props.property.isPassword,customStyle:null===(a=this.props.property)||void 0===a?void 0:a.style,maxLength:null===(s=this.props.property)||void 0===s?void 0:s.maxLength,backgroundColor:w,foregroundColor:g,onChange:this.props.onChange,onKeyDown:this.makeOnKeyDownCallBack(),wrapText:!0,onEditorBlur:this.props.onEditorBlur,onAutoUpdate:function(e){return function(e,t){var n=Be(e);if(n.selectedRowId){var r=Wn(n),a=l(n),s={};s[e.id]=t;var c=[{RowId:n.selectedRowId,Values:s}];In({ctx:n,action:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.updateObject({SessionFormIdentifier:r,Entity:n.entity,UpdateData:c});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}}(b.props.property,e)},isRichText:this.props.isRichText,onTextOverflowChanged:this.props.onTextOverflowChanged,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},dock:this.props.dock});case"Date":return Object(re.jsx)(dy,{value:this.props.value,outputFormat:this.props.property.formatterPattern,outputFormatToShow:this.props.property.modelFormatterPattern,isReadOnly:m,backgroundColor:w,foregroundColor:g,onChange:this.props.onChange,onEditorBlur:this.props.onEditorBlur,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},onKeyDown:this.makeOnKeyDownCallBack()});case"CheckBox":return Object(re.jsx)(hC,{value:this.props.value,isReadOnly:m,onChange:this.props.onChange,onClick:function(e){return b.focusManager.stopAutoFocus()},onKeyDown:void 0,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)}});case"ComboBox":return Object(re.jsx)(Wm,{onTextOverflowChanged:this.props.onTextOverflowChanged,xmlNode:this.props.xmlNode,isReadOnly:m,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},autoSort:null===(u=this.props.property)||void 0===u?void 0:u.autoSort,backgroundColor:w,foregroundColor:g,customStyle:null===(d=this.props.property)||void 0===d?void 0:d.style,isLink:null===(p=this.props.property)||void 0===p?void 0:p.isLink,onClick:function(e){var t;(t=b.props.property,Object(c.flow)(o.a.mark((function e(n,r,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!(null===r||void 0===r?void 0:r.isLink)||!n.ctrlKey&&!n.metaKey){e.next=2;break}return e.delegateYield(Be(t).navigateLookupLink(r,i),"t0",2);case 2:case"end":return e.stop()}}),e)}))))(e,b.props.property,y)},onKeyDown:this.makeOnKeyDownCallBack()},this.props.xmlNode.$iid);case"TagInput":return Object(re.jsx)(Wm,{xmlNode:this.props.xmlNode,isReadOnly:m,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},autoSort:null===(h=this.props.property)||void 0===h?void 0:h.autoSort,tagEditor:Object(re.jsx)(lw,{value:this.props.value,isReadOnly:m,backgroundColor:w,foregroundColor:g,customStyle:null===(f=this.props.property)||void 0===f?void 0:f.style,onChange:this.props.onChange,onKeyDown:this.makeOnKeyDownCallBack(),onEditorBlur:this.props.onEditorBlur})},this.props.xmlNode.$iid);case"Checklist":return Object(re.jsx)(Nx,{value:this.props.value,onChange:function(e){return b.props.onChange&&b.props.onChange({},e)},isReadonly:m,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},onKeyDown:this.makeOnKeyDownCallBack(),onClick:function(){return b.focusManager.stopAutoFocus()}});case"Color":return Object(re.jsx)(FC,{value:qr(this.props.value)||null,onChange:function(e){var t,n;return null===(t=(n=b.props).onChange)||void 0===t?void 0:t.call(n,void 0,Qr(e))},onBlur:function(){var e,t;return null===(e=(t=b.props).onEditorBlur)||void 0===e?void 0:e.call(t,void 0)},onKeyDown:this.makeOnKeyDownCallBack(),isReadOnly:m,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)}});case"Image":return Object(re.jsx)(zx,{value:this.props.value});case"Blob":var O=pn(this.props.property);return Object(re.jsx)(Lx,{isReadOnly:m,value:this.props.value,onKeyDown:this.makeOnKeyDownCallBack(),canUpload:!O,subscribeToFocusManager:function(e){var t,n;return b.focusManager.subscribe(e,null===(t=b.props.property)||void 0===t?void 0:t.id,null===(n=b.props.property)||void 0===n?void 0:n.tabIndex)},onChange:this.props.onChange,onEditorBlur:this.props.onEditorBlur});case"Polymorph":return console.warn("Type of polymorphic column was not determined, no editor was rendered"),"";default:return console.warn('Unknown column type "'.concat(this.props.property.column,'", no editor was rendered')),""}}},{key:"makeOnKeyDownCallBack",value:function(){var e=this,t=Be(this.props.property);return function(n){In({ctx:e.props.property,action:function(){var r=Object(i.a)(o.a.mark((function r(){var i,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.formFocusManager.stopAutoFocus(),"Tab"!==n.key){r.next=5;break}return aj.DomEvent.preventDefault(n),n.shiftKey?e.focusManager.focusPrevious(document.activeElement):e.focusManager.focusNext(document.activeElement),r.abrupt("return");case 5:if(!e.props.property.multiline){r.next=7;break}return r.abrupt("return");case 7:if("Enter"!==n.key){r.next=11;break}return r.next=10,null===(i=(a=e.props).onEditorBlur)||void 0===i?void 0:i.call(a,null);case 10:t.firstEnabledDefaultAction&&Id.onActionClick(t.firstEnabledDefaultAction)(n,t.firstEnabledDefaultAction);case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()})}}},{key:"render",value:function(){return this.getEditor()}}]),n}(H.a.Component))||SC)||SC);function NC(e){var t=new Bp(!1,"Number",e),n=e?Object.assign({},e):{};return n.paddingLeft=t.paddingLeft+"px",n.textAlign=t.alignment,n}!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.None="None"}(AC||(AC={}));var BC=Object(K.inject)((function(e,t){var n=e.property,r=t.caption,o=sx(n,Vn(n)||"",n.id);return{caption:o||r,property:n}}))(MC=Object(K.observer)((LC=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"toolTip",EC,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"render",value:function(){var e=this,t=li(this.props.property),n=t?Ac(this.props.property)(t,this.props.property):void 0;return Object(re.jsxs)(re.Fragment,{children:[this.props.captionPosition!==AC.None&&!this.props.hideCaption&&Object(re.jsx)("label",{className:ax.a.caption,style:UC(this.props),title:WC(this.props,this.toolTip),children:this.props.caption}),Object(re.jsxs)("div",{className:ax.a.editor,style:GC(this.props),title:WC(this.props,this.toolTip),children:[Object(re.jsx)(VC,{value:this.props.value,isRichText:this.props.isRichText,textualValue:this.props.textualValue,xmlNode:this.props.xmlNode,backgroundColor:this.props.backgroundColor,onTextOverflowChanged:function(t){return e.toolTip=t},dock:this.props.dock}),n&&Object(re.jsx)("div",{className:ax.a.notification,title:n,children:Object(re.jsx)("i",{className:"fas fa-exclamation-circle red"})})]})]})}}]),n}(H.a.Component),EC=Object($.a)(LC.prototype,"toolTip",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MC=LC))||MC)||MC;function UC(e){var t,n,r=e.fieldDimensions,o=Object(Fe.a)({},null!==(t=null===(n=e.property)||void 0===n?void 0:n.style)&&void 0!==t?t:{});if(r.isUnset)return Object(Fe.a)(Object(Fe.a)({},r.asStyle()),o);if(e.isHidden)return o.display="none",o;switch(e.captionPosition){default:case AC.Left:return o.top=r.top,o.left=r.left-e.captionLength,o.color=e.captionColor,o;case AC.Right:return o.top=r.top,o.left=e.isCheckbox?r.left+20:r.left+r.width+4,o.color=e.captionColor,o;case AC.Top:return o.top=r.top-20,o.left=r.left,o.color=e.captionColor,o}}function GC(e){var t=e.fieldDimensions;return t.isUnset?t.asStyle():e.isHidden?{display:"none"}:e.dock===Ue.Fill?{top:0,left:0,width:"100%",height:"100%"}:{left:t.left,top:t.top,width:t.width,height:t.height}}function WC(e,t){var n,r=null!==(n=e.toolTip)&&void 0!==n?n:"";return t&&(r=t+"\n\n"+r),function(e){if(e)return function(e){var t=e;return(t.length>10?t.slice(0,9).concat(["..."]):t).join("\n")}(Array.isArray(e)?e.flatMap((function(e){return lx(e)})):lx(e))}(r)}n(719);var HC,zC,YC,KC=n(384),qC=n.n(KC),QC=function(e){return Object(re.jsx)("h1",{className:qC.a.root,style:{color:e.foreGroundColor},title:e.tooltip,children:e.children})},XC=function(e){var t=!!e.title;return Object(re.jsxs)("div",{className:ne()("formSection",{hasTitle:t}),style:function(){var t=e.dimensions.asStyle();return t.backgroundColor=e.backgroundColor,t}(),children:[t&&Object(re.jsx)(QC,{foreGroundColor:e.foreGroundColor,tooltip:e.title,children:e.title}),e.children]})},ZC=n(385),$C=n.n(ZC),JC=function(e){return Object(re.jsx)("div",{className:$C.a.root,style:function(){var t=e.fieldDimensions.asStyle();return t.color=e.foregroundColor,t}(),children:e.title})},eI=n(194),tI=n.n(eI),nI=n(266),rI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).inputId=Object(nI.a)(),e.elmInput=null,e.refInput=function(t){e.elmInput=t},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.elmInput&&this.props.subscribeToFocusManager&&this.props.subscribeToFocusManager(this.elmInput)}},{key:"onChange",value:function(e){e.target.value===this.props.value&&this.props.onSelected(this.props.value)}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{className:ne()(tI.a.root,this.props.className),style:this.props.fieldDimensions.asStyle(),children:[Object(re.jsx)("input",{ref:this.refInput,className:tI.a.input,type:"radio",onClick:function(){return e.props.onClick()},id:this.inputId,name:this.props.name,value:this.props.value,checked:this.props.checked,onKeyDown:function(t){return e.props.onKeyDown(t)},onChange:function(t){return e.onChange(t)}}),Object(re.jsx)("label",{className:tI.a.label,htmlFor:this.inputId,style:{color:this.props.labelColor},children:this.props.caption})]})}}]),n}(H.a.Component),oI=n(151),iI=n.n(oI),aI=Object(K.inject)((function(e){var t=e.property,n=e.formPanelView,r=li(n);return{property:t,onEditorBlur:function(e){return uC(n)(e)},onChange:function(e,o){return Sc(n)({event:e,row:r,property:t,value:o})}}}))((function(e){var t,n,r=Object(W.useState)(!1),o=Object(d.a)(r,2),i=o[0],a=o[1],s=e.property.name,c=null===(t=e.fieldDimensions)||void 0===t?void 0:t.left,u=null===(n=e.fieldDimensions)||void 0===n?void 0:n.top;return Object(re.jsxs)("div",{children:[Object(re.jsx)("div",{className:iI.a.editor,style:e.isHidden?{display:"none"}:e.fieldDimensions.asStyle(),children:Object(re.jsx)(hC,{id:e.property.modelInstanceId,value:e.checked,isReadOnly:e.readOnly,onBlur:function(){a(!1)},onFocus:function(){a(!0)},onChange:function(t,n){var r;e.readOnly||null===(r=e.onChange)||void 0===r||r.call(e,t,n)},onKeyDown:function(t){return e.onKeyDown(t)},subscribeToFocusManager:e.subscribeToFocusManager,onClick:e.onClick})}),Object(re.jsx)("label",{htmlFor:e.property.modelInstanceId,className:iI.a.caption+" "+(i?iI.a.focusedLabel:iI.a.unFocusedLabel),style:function(){if(e.isHidden)return{display:"none"};if(e.fieldDimensions.isUnset){var t=e.fieldDimensions.asStyle();return t.color=e.labelColor,t}return{top:u,left:c+20,color:e.labelColor}}(),children:s})]})})),sI=H.a.createContext({isVisible:!1}),cI=function(){function e(t){Object(q.a)(this,e),this.top=void 0,this.left=void 0,this.width=void 0,this.height=void 0,t&&(this.top=t.top,this.left=t.left,this.width=t.width,this.height=t.height)}return Object(Q.a)(e,[{key:"isUnset",get:function(){return!this.top||!this.left||!this.width||!this.height}},{key:"asStyle",value:function(){return this.isUnset?{top:"unset",left:"unset",height:"unset",width:"unset",position:"relative"}:{top:this.top,left:this.left,height:this.height,width:this.width}}}]),e}();function uI(e){return new cI({left:parseInt(e.attributes.X,10),top:parseInt(e.attributes.Y,10),width:parseInt(e.attributes.Width,10),height:parseInt(e.attributes.Height,10)})}function lI(e){return new cI({height:e.height,width:e.width,left:e.x,top:e.y})}var dI=Object(K.inject)((function(e){var t=e.dataView;return{dataView:t,xmlFormRootObject:t.formViewUI}}))(HC=Object(K.observer)((YC=zC=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",(function(t){return e.notifyClick(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("click",(function(t){return e.notifyClick(t)}))}},{key:"notifyClick",value:function(e){this.props.dataView.formFocusManager.setLastFocused(e.target)}},{key:"onKeyDown",value:function(e){if("Tab"===e.key)return aj.DomEvent.preventDefault(e),void(e.shiftKey?this.props.dataView.formFocusManager.focusPrevious(document.activeElement):this.props.dataView.formFocusManager.focusNext(document.activeElement))}},{key:"buildForm",value:function(){var e,t,n,r=this,i=li(this.props.dataView),a=Vn(this.props.dataView),s=ur(this.props.dataView);i&&a&&(t=_p(r.props.dataView,a),n=Tp(r.props.dataView,a||""));var u=r.props.dataView.formFocusManager;var l=function e(l){if("FormRoot"===l.name)return Object(re.jsx)(ox,{style:{backgroundColor:t},children:l.elements.map((function(t){return e(t)}))},l.$iid);if("FormElement"===l.name&&"FormSection"===l.attributes.Type)return Object(re.jsx)(XC,{dimensions:uI(l),title:l.attributes.Title,backgroundColor:t,foreGroundColor:n,children:l.elements.map((function(t){return e(t)}))},l.$iid);if("FormElement"===l.name&&"Label"===l.attributes.Type)return Object(re.jsx)(JC,{title:l.attributes.Title,fieldDimensions:uI(l),foregroundColor:n},l.$iid);if("Control"===l.name&&"RadioButton"===l.attributes.Column){var d=pi(r.props.dataView,l.attributes.Id),p=!!i&&String(s.getCellValueByDataSourceField(i,d))===l.attributes.Value;return Object(re.jsx)(rI,{caption:l.attributes.Name,fieldDimensions:uI(l),name:l.attributes.Id,value:l.attributes.Value,checked:p,onKeyDown:function(e){return r.onKeyDown(e)},subscribeToFocusManager:function(e){return u.subscribe(e,l.attributes.Id,l.attributes.TabIndex)},labelColor:n,onClick:function(){var e,t;return null===r||void 0===r||null===(e=r.props)||void 0===e||null===(t=e.dataView)||void 0===t?void 0:t.formFocusManager.stopAutoFocus()},onSelected:function(e){var t=Ae(r.props.dataView);Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t.updateRadioButtonValue(r.props.dataView,i,l.attributes.Id,e),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},l.$iid)}return"PropertyNames"===l.name?Qu(l).map((function(e){return Object(re.jsx)(be.a,{children:function(){var o,c,l=Mo(r.props.dataView,e);i&&"Polymorph"===(null===(o=l)||void 0===o?void 0:o.column)&&(l=l.getPolymophicProperty(i));var d=c;if(i&&l&&(c=s.getCellValue(i,l),l.isLookup&&(d=s.getCellText(i,l))),!l)return Object(re.jsx)(re.Fragment,{});var p=(!Rp(l,a||"",l.id)||hi(l))&&!!i;return"CheckBox"===l.column?Object(re.jsx)(K.Provider,{property:l,children:Object(re.jsx)(aI,{fieldDimensions:lI(l),isHidden:p,checked:c,readOnly:!i||Lc(l,a),onKeyDown:function(e){return r.onKeyDown(e)},subscribeToFocusManager:function(e){return u.subscribe(e,l.id,l.tabIndex)},onClick:function(){var e,t;return null===r||void 0===r||null===(e=r.props)||void 0===e||null===(t=e.dataView)||void 0===t?void 0:t.formFocusManager.stopAutoFocus()},labelColor:n})}):Object(re.jsx)(K.Provider,{property:l,children:Object(re.jsx)(BC,{isHidden:p,caption:l.name,hideCaption:"Image"===l.column,captionLength:l.captionLength,captionPosition:l.captionPosition,captionColor:n,dock:l.dock,fieldDimensions:lI(l),toolTip:l.toolTip,value:c,isRichText:l.isRichText,textualValue:d,xmlNode:l.xmlNode,backgroundColor:t})},l.id)}},e)})):l.elements.map((function(t){return e(t)}))}(this.props.xmlFormRootObject);return(null===(e=this.props.dataView)||void 0===e?void 0:e.isFirst)&&this.context.isVisible&&u.autoFocus(),l}},{key:"render",value:function(){return this.buildForm()}}]),n}(H.a.Component),zC.contextType=sI,HC=YC))||HC)||HC,pI=n(386),hI=n.n(pI),fI=(n(339),n(152)),bI=n.n(fI);var vI=Object(K.observer)((function(e){var t=Object(W.useContext)(K.MobXProviderContext).application.mobileState,n=li(e.property),r=n&&e.dataView.dataTable.getCellText(n,e.property);return Object(re.jsxs)("div",{className:ne()(jm.a.control,bI.a.mobileInput,e.isReadOnly?bI.a.readOnly:""),children:[Object(re.jsx)("div",{className:ne()("input",bI.a.input,e.isLink?bI.a.link:""),onClick:function(){var t,r;e.isLink&&(t=e.property,(r=n)&&(null===t||void 0===t?void 0:t.isLink)&&Be(t).dataTable.getCellValue(r,t)&&Sn({ctx:t,generator:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Be(t).navigateLookupLink(t,r),"t0",1);case 1:case"end":return e.stop()}}),e)}))()}))},children:r}),Object(re.jsx)("div",{className:ne()("inputBtn","lastOne"),onClick:function(){e.isReadOnly||(t.layoutState=new jn(Object(re.jsx)(yI,Object(Fe.a)(Object(Fe.a)({},e),{},{onValueSelected:function(){return t.layoutState=new xn}})),e.property.name))},children:Object(re.jsx)("i",{className:"fas fa-caret-down"})})]})}));function yI(e){var t=Object(W.useContext)(K.MobXProviderContext),n=e.dataView,r=n.dataViewRowCursor,o=n.dataViewApi,i=n.dataViewData,a=t.workbench.lookupListCache,s=Object(W.useState)((function(){var t=new xm((function(){return l}),r,o,(function(){return u})),n=e.editingTags?new Bm(i,r,(function(){return l})):new Nm(i,r,(function(){return l})),s=new Ug((function(){return l}),n),c=new zg((function(){return l}),a),u=new qg({api:t,data:n,dataTable:s,setup:function(){return l},cache:c,autoSort:e.autoSort,onTextOverflowChanged:e.onTextOverflowChanged,onValueSelected:e.onValueSelected}),l=um(e.xmlNode,s,u,e.isLink);return{behavior:u,editorData:n,columnDrivers:l.columnDrivers,editorDataTable:s,setup:l}})),c=Object(d.a)(s,1)[0];return Object(re.jsx)(Jm,Object(Fe.a)(Object(Fe.a)({},e),{},{behavior:c.behavior,dataTable:c.editorDataTable,columnDrivers:c.setup.columnDrivers,editorData:c.editorData}))}var gI,mI,wI,OI,jI,kI,xI,CI,II,SI=function(e){var t=Object(W.useContext)(K.MobXProviderContext).application.mobileState,n=Vn(e.property),r=li(e.property),o=Tp(e.property,n||""),i=!r||Lc(e.property,n),a=i?Mp(e.backgroundColor,-.1):e.backgroundColor;function s(t,n){var r=li(e.property);r&&Sc(e.property)({event:t,row:r,property:e.property,value:n})}var c,u,l;return"ComboBox"===e.property.column?Object(re.jsx)(vI,{onTextOverflowChanged:e.onTextOverflowChanged,xmlNode:e.xmlNode,isReadOnly:i,autoSort:null===(c=e.property)||void 0===c?void 0:c.autoSort,backgroundColor:a,foregroundColor:o,customStyle:null===(u=e.property)||void 0===u?void 0:u.style,isLink:null===(l=e.property)||void 0===l?void 0:l.isLink,dataView:Be(e.property),property:e.property},e.xmlNode.$iid):"TagInput"===e.property.column?Object(re.jsx)(vw,{isReadOnly:i,backgroundColor:a,foregroundColor:o,customStyle:e.property.style,property:e.property,onChange:s,onPlusButtonClick:function(){t.layoutState=new jn(Object(re.jsx)(yI,Object(Fe.a)(Object(Fe.a)({},e),{},{isReadOnly:i,dataView:Be(e.property),property:e.property,editingTags:!0,onValueSelected:function(){return t.layoutState=new xn}})),e.property.name)}},e.xmlNode.$iid):"Date"===e.property.column?Object(re.jsx)(gy,{value:e.value,property:e.property,outputFormat:e.property.formatterPattern,outputFormatToShow:e.property.modelFormatterPattern,isReadOnly:i,backgroundColor:a,foregroundColor:o,onChange:s,onEditorBlur:function(t){return uC(e.property)(t)}}):Object(re.jsx)(VC,{value:e.value,isRichText:e.isRichText,textualValue:e.textualValue,xmlNode:e.xmlNode,backgroundColor:e.backgroundColor,onTextOverflowChanged:e.onTextOverflowChanged})},DI=Object(K.inject)((function(e,t){var n=e.property,r=t.caption,o=sx(n,Vn(n)||"",n.id);return{caption:o||r,property:n}}))(gI=Object(K.observer)((mI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"toolTip",wI,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"render",value:function(){var e=this,t=li(this.props.property),n=t?Ac(this.props.property)(t,this.props.property):void 0;return Object(re.jsxs)("div",{className:"formItem",children:[this.props.captionPosition!==AC.None&&!this.props.hideCaption&&Object(re.jsx)("label",{className:ax.a.caption,style:UC(this.props),title:WC(this.props,this.toolTip),children:this.props.caption}),Object(re.jsxs)("div",{className:ax.a.editor,style:GC(this.props),title:WC(this.props,this.toolTip),children:[Object(re.jsx)(SI,{value:this.props.value,isRichText:this.props.isRichText,textualValue:this.props.textualValue,xmlNode:this.props.xmlNode,backgroundColor:this.props.backgroundColor,onTextOverflowChanged:function(t){return e.toolTip=t},property:this.props.property}),n&&Object(re.jsx)("div",{className:ax.a.notification,title:n,children:Object(re.jsx)("i",{className:"fas fa-exclamation-circle red"})})]})]})}}]),n}(H.a.Component),wI=Object($.a)(mI.prototype,"toolTip",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gI=mI))||gI)||gI,RI=(n(720),function(e){return Object(re.jsx)("div",{className:"mobileFormSection",children:Object(re.jsx)(XC,{title:e.title,backgroundColor:e.backgroundColor,foreGroundColor:e.foreGroundColor,dimensions:new cI,children:e.children})})}),TI=Object(K.inject)((function(e){var t=e.property,n=e.formPanelView,r=li(n);return{property:t,onEditorBlur:function(e){return uC(n)(e)},onChange:function(e,o){return Sc(n)({event:e,row:r,property:t,value:o})}}}))((function(e){var t=e.property.name,n=new cI;return Object(re.jsxs)("div",{children:[Object(re.jsx)("label",{htmlFor:e.property.modelInstanceId,style:function(){if(e.isHidden)return{display:"none"};var t=n.asStyle();return t.color=e.labelColor,t}(),children:t}),Object(re.jsx)("div",{style:e.isHidden?{display:"none"}:n.asStyle(),children:Object(re.jsx)(Nv,{checked:e.checked,disabled:e.readOnly,onChange:function(t){var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,t,t.target.checked)}})})]})})),_I=Object(K.inject)((function(e){var t=e.dataView;return{dataView:t,xmlFormRootObject:t.formViewUI}}))(OI=Object(K.observer)((kI=jI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",(function(t){return e.notifyClick(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("click",(function(t){return e.notifyClick(t)}))}},{key:"notifyClick",value:function(e){this.props.dataView.formFocusManager.setLastFocused(e.target)}},{key:"onKeyDown",value:function(e){if("Tab"===e.key)return aj.DomEvent.preventDefault(e),void(e.shiftKey?this.props.dataView.formFocusManager.focusPrevious(document.activeElement):this.props.dataView.formFocusManager.focusNext(document.activeElement))}},{key:"buildForm",value:function(){var e,t,n,r=this,i=li(this.props.dataView),a=Vn(this.props.dataView),s=ur(this.props.dataView);i&&a&&(t=_p(r.props.dataView,a),n=Tp(r.props.dataView,a||""));var u=r.props.dataView.formFocusManager;var l=function e(l,d){if("FormRoot"===l.name)return[new PI("-1",Object(re.jsx)(ox,{style:{backgroundColor:t},className:"formRootMobile",children:l.elements.flatMap((function(t,n){return e(t,n)})).flat().filter((function(e){return e})).sort($i).map((function(e){return e.element}))},l.$iid))];var p;if("FormElement"===l.name&&"FormSection"===l.attributes.Type)return[new PI(null===(p=l.attributes.TabIndex)||void 0===p?void 0:p.toString(),Object(re.jsx)(RI,{title:l.attributes.Title,backgroundColor:t,foreGroundColor:n,children:l.elements.flatMap((function(t,n){return e(t,n)})).flat().filter((function(e){return e})).sort($i).map((function(e){return e.element}))},l.$iid))];if("FormElement"!==l.name||"Label"!==l.attributes.Type){if("Control"===l.name&&"RadioButton"===l.attributes.Column){var h=pi(r.props.dataView,l.attributes.Id),f=!!i&&String(s.getCellValueByDataSourceField(i,h))===l.attributes.Value;return[new PI(l.attributes.TabIndex,Object(re.jsx)(rI,{caption:l.attributes.Name,className:"formItem",fieldDimensions:new cI,name:l.attributes.Id,value:l.attributes.Value,checked:f,onKeyDown:function(e){return r.onKeyDown(e)},subscribeToFocusManager:function(e){return u.subscribe(e,l.attributes.Id,l.attributes.TabIndex)},labelColor:n,onClick:function(){var e,t;return null===r||void 0===r||null===(e=r.props)||void 0===e||null===(t=e.dataView)||void 0===t?void 0:t.formFocusManager.stopAutoFocus()},onSelected:function(e){var t=Ae(r.props.dataView);Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t.updateRadioButtonValue(r.props.dataView,i,l.attributes.Id,e),"t0",1);case 1:case"end":return n.stop()}}),n)})))()}},l.$iid))]}return"PropertyNames"===l.name?function(e,t){if("PropertyNames"!==e.name)throw new Error("Nor a property node");if(!t)return[];var n=li(t);return Qu(e).map((function(e){var r,o=Mo(t,e);return n&&"Polymorph"===(null===(r=o)||void 0===r?void 0:r.column)&&(o=o.getPolymophicProperty(n)),o}))}(l,r.props.dataView).map((function(e){return new PI(e.tabIndex,Object(re.jsx)(be.a,{children:function(){var r,o=r;if(i&&e&&(r=s.getCellValue(i,e),e.isLookup&&(o=s.getCellText(i,e))),!e)return Object(re.jsx)(re.Fragment,{});var c=(!Rp(e,a||"",e.id)||hi(e))&&!!i;return"CheckBox"===e.column?Object(re.jsx)(K.Provider,{property:e,children:Object(re.jsx)(TI,{isHidden:c,checked:r,readOnly:!i||Lc(e,a),labelColor:n})}):Object(re.jsx)(K.Provider,{property:e,children:Object(re.jsx)(DI,{isHidden:c,caption:e.name,hideCaption:"Image"===e.column,captionLength:e.captionLength,captionColor:n,dock:e.dock,toolTip:e.toolTip,value:r,isRichText:e.isRichText,textualValue:o,xmlNode:e.xmlNode,backgroundColor:t,fieldDimensions:new cI})},e.id)}},e.id))})):l.elements.map((function(t,n){return e(t,n)}))}}(this.props.xmlFormRootObject).filter((function(e){return e})).sort($i).map((function(e){return e.element}));return(null===(e=this.props.dataView)||void 0===e?void 0:e.isFirst)&&this.context.isVisible&&u.autoFocus(),l}},{key:"render",value:function(){return this.buildForm()}}]),n}(H.a.Component),jI.contextType=sI,OI=kI))||OI)||OI,PI=function e(t,n){Object(q.a)(this,e),this.tabIndex=t,this.element=n};var FI,MI,LI=(xI=c.action.bound,CI=c.action.bound,II=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ql(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$k(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rj();Object(q.a)(this,e),this.dataViewToolbarUI=t,this.dataViewBodyUI=n,this.formPerspective=r,this.perspective=o,this.$iid=Du()}return Object(Q.a)(e,[{key:"setup",value:function(){var e=this;this.dataViewBodyUI.contrib.put({$iid:this.$iid,render:function(){return Object(re.jsx)(EI,{formPerspectiveActive:e.formPerspective.isActive},e.$iid)}}),this.dataViewToolbarUI.contrib.put({$iid:this.$iid,section:Xl,render:function(){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(qO,{className:"formPerspectiveButton",onMouseDown:function(){return e.formPerspective.handleClick({saveNewState:!0})},isActive:e.formPerspective.isActive,children:Object(re.jsx)(Ie.Icon,{src:"./icons/detail-view.svg",tooltip:bt("Grid","form_tool_tip")})})}},e.$iid)}}),this.perspective.contrib.put(this.formPerspective)}},{key:"teardown",value:function(){this.dataViewBodyUI.contrib.del(this),this.dataViewToolbarUI.contrib.del(this),this.perspective.contrib.del(this.formPerspective)}},{key:"dispose",value:function(){this.teardown()}}]),e}(),Object($.a)(II.prototype,"setup",[xI],Object.getOwnPropertyDescriptor(II.prototype,"setup"),II.prototype),Object($.a)(II.prototype,"teardown",[CI],Object.getOwnPropertyDescriptor(II.prototype,"teardown"),II.prototype),II),EI=Object(K.observer)((function(e){var t=Object(W.useContext)(K.MobXProviderContext).application;return e.formPerspectiveActive?Object(re.jsx)("div",{className:ne()(hI.a.root,{isActive:e.formPerspectiveActive}),children:Object(re.jsx)(tx,{children:Ot(t)?Object(re.jsx)(_I,{}):Object(re.jsx)(dI,{})})}):Object(re.jsx)(re.Fragment,{})})),AI=Ml("IFormPerspectiveDirector"),VI="FormPerspective";var NI=(FI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rj(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kf();Object(q.a)(this,e),this.perspective=t,this.viewConfiguration=n,this.$iid=Du(),Object(de.a)(this,"isActive",MI,this),this.onTablePerspectiveShown=void 0}return Object(Q.a)(e,[{key:"handleToolbarBtnClick",value:o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isActive){e.next=2;break}return e.abrupt("return");case 2:return e.delegateYield(this.perspective.deactivate(),"t0",3);case 3:return this.isActive=!0,e.delegateYield(this.viewConfiguration.anounceActivePerspective(ci.Table),"t1",5);case 5:null===(t=this.onTablePerspectiveShown)||void 0===t||t.call(this);case 6:case"end":return e.stop()}}),e,this)}))},{key:"deactivate",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isActive=!1;case 1:case"end":return e.stop()}}),e,this)}))},{key:"activateDefault",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.viewConfiguration.activePerspective===ci.Table&&(this.isActive=!0);case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),MI=Object($.a)(FI.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(FI.prototype,"handleToolbarBtnClick",[Le.a],Object.getOwnPropertyDescriptor(FI.prototype,"handleToolbarBtnClick"),FI.prototype),Object($.a)(FI.prototype,"deactivate",[Le.a],Object.getOwnPropertyDescriptor(FI.prototype,"deactivate"),FI.prototype),Object($.a)(FI.prototype,"activateDefault",[Le.a],Object.getOwnPropertyDescriptor(FI.prototype,"activateDefault"),FI.prototype),FI),BI=Ml("ITablePerspective");function UI(e){return function(t){It(e).selectPrevColumn(t)}}function GI(e){return function(t){It(e).selectNextColumn(t)}}function WI(e){return Object(c.flow)(o.a.mark((function t(n,r){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"Blob"!==(null===(i=Vs(e).find((function(e){return e.id===r})))||void 0===i?void 0:i.column)&&"TagInput"!==(null===i||void 0===i?void 0:i.column)){t.next=4;break}return t.abrupt("return");case 4:n.ctrlKey||n.metaKey?or(e).addOrdering(r):or(e).setOrdering(r),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",10);case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))}var HI,zI,YI,KI,qI,QI,XI,ZI,$I,JI,eS,tS,nS,rS,oS,iS,aS,sS,cS,uS,lS,dS,pS,hS,fS,bS,vS,yS,gS,mS,wS,OS,jS,kS,xS,CS,IS,SS,DS,RS,TS,_S,PS,FS,MS,LS,ES,AS,VS,NS,BS,US,GS,WS,HS,zS=n(88),YS=n.n(zS),KS=(HI=c.action.bound,zI=c.action.bound,YI=c.action.bound,Object(K.observer)((qI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).width0=0,e.mouseX0=0,e.mouseY0=0,Object(de.a)(e,"isMouseIn",QI,Object(pe.a)(e)),e.width1=0,e}return Object(Q.a)(n,[{key:"handleHeaderWidthHandleMouseDown",value:function(e){e.preventDefault(),this.width0=this.props.width,this.width1=this.props.width,this.mouseX0=e.screenX,this.mouseY0=e.screenY,window.addEventListener("mousemove",this.handleWindowMouseMoveForColumnWidthChange),window.addEventListener("mouseup",this.handleWindowMouseUpForColumnWidthChange)}},{key:"handleWindowMouseMoveForColumnWidthChange",value:function(e){var t=e.screenX-this.mouseX0;this.width1=this.width0+t,this.width1>=30&&this.props.onColumnWidthChange&&this.props.onColumnWidthChange(this.props.id,this.width1)}},{key:"handleWindowMouseUpForColumnWidthChange",value:function(e){window.removeEventListener("mousemove",this.handleWindowMouseMoveForColumnWidthChange),window.removeEventListener("mouseup",this.handleWindowMouseUpForColumnWidthChange),this.props.onColumnWidthChangeFinished&&this.props.onColumnWidthChangeFinished(this.props.id,this.width1)}},{key:"makeHeaderStyle",value:function(){var e=this.props.isLast?3:5,t={minWidth:this.props.width-e,maxWidth:this.props.width-e};return this.props.isFirst&&(t.paddingLeft="1.9em"),t}},{key:"render",value:function(){var e=this;return this.props.isFixed?this.renderHeader():Object(re.jsx)(cO.b,{draggableId:this.props.id,index:this.props.columnIndex,isDragDisabled:this.props.isDragDisabled,children:function(t){return e.renderHeader(t)}},this.props.id)}},{key:"renderHeader",value:function(e){var t=this;return Object(re.jsxs)("div",Object(Fe.a)(Object(Fe.a)({className:YS.a.root,ref:null===e||void 0===e?void 0:e.innerRef},null===e||void 0===e?void 0:e.draggableProps),{},{children:[Object(re.jsxs)("div",Object(Fe.a)(Object(Fe.a)({},null===e||void 0===e?void 0:e.dragHandleProps),{},{className:YS.a.header,style:this.makeHeaderStyle(),title:this.props.label,children:[Object(re.jsxs)("div",{className:YS.a.inHeaderRow,children:[Object(re.jsx)("div",{className:YS.a.label,onClick:function(e){return t.props.onClick&&t.props.onClick(e,t.props.id)},children:this.props.label}),this.props.orderingDirection!==zn.NONE&&Object(re.jsxs)("div",{className:YS.a.order,children:[this.props.orderingOrder>0&&Object(re.jsx)("span",{children:this.props.orderingOrder}),this.props.orderingDirection===zn.ASC&&Object(re.jsx)("i",{className:"fas fa-caret-up"}),this.props.orderingDirection===zn.DESC&&Object(re.jsx)("i",{className:"fas fa-caret-down"})]})]}),this.props.additionalHeaderContent&&Object(re.jsx)("div",{className:YS.a.additionalContentsRow,children:this.props.additionalHeaderContent()})]})),Object(re.jsx)("div",{onMouseDown:this.handleHeaderWidthHandleMouseDown,className:YS.a.columnWidthHandle+" "+(this.props.isLast?YS.a.rightSeparator:YS.a.middleSeparator)})]}))}}]),n}(H.a.Component),QI=Object($.a)(qI.prototype,"isMouseIn",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(qI.prototype,"handleHeaderWidthHandleMouseDown",[HI],Object.getOwnPropertyDescriptor(qI.prototype,"handleHeaderWidthHandleMouseDown"),qI.prototype),Object($.a)(qI.prototype,"handleWindowMouseMoveForColumnWidthChange",[zI],Object.getOwnPropertyDescriptor(qI.prototype,"handleWindowMouseMoveForColumnWidthChange"),qI.prototype),Object($.a)(qI.prototype,"handleWindowMouseUpForColumnWidthChange",[YI],Object.getOwnPropertyDescriptor(qI.prototype,"handleWindowMouseUpForColumnWidthChange"),qI.prototype),KI=qI))||KI),qS=n(387),QS=n.n(qS),XS=(XI=c.action.bound,ZI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).firstVisibleRowIndex=0,e.lastVisibleRowIndex=0,e.ctxCanvas=null,e}return Object(Q.a)(n,[{key:"refCanvas",value:function(e){this.props.refCanvasElement(e),this.ctxCanvas=e?e.getContext("2d"):null}},{key:"canvasWidthPX",get:function(){return Math.ceil(this.props.width*Fp())||0}},{key:"canvasHeightPX",get:function(){return Math.ceil(this.props.height*Fp())||0}},{key:"canvasWidthCSS",get:function(){return Math.ceil(this.props.width*Fp())/Fp()||0}},{key:"canvasHeightCSS",get:function(){return Math.ceil(this.props.height*Fp())/Fp()||0}},{key:"canvasProps",get:function(){return{width:this.canvasWidthPX,height:this.canvasHeightPX,style:{minWidth:this.canvasWidthCSS+1,maxWidth:this.canvasWidthCSS+1,minHeight:this.canvasHeightCSS,maxHeight:this.canvasHeightCSS}}}},{key:"render",value:function(){return Object(re.jsx)("canvas",Object(Fe.a)(Object(Fe.a)({className:QS.a.canvas},this.canvasProps),{},{ref:this.refCanvas}))}}]),n}(H.a.Component),Object($.a)(ZI.prototype,"refCanvas",[XI],Object.getOwnPropertyDescriptor(ZI.prototype,"refCanvas"),ZI.prototype),Object($.a)(ZI.prototype,"canvasWidthPX",[c.computed],Object.getOwnPropertyDescriptor(ZI.prototype,"canvasWidthPX"),ZI.prototype),Object($.a)(ZI.prototype,"canvasHeightPX",[c.computed],Object.getOwnPropertyDescriptor(ZI.prototype,"canvasHeightPX"),ZI.prototype),Object($.a)(ZI.prototype,"canvasWidthCSS",[c.computed],Object.getOwnPropertyDescriptor(ZI.prototype,"canvasWidthCSS"),ZI.prototype),Object($.a)(ZI.prototype,"canvasHeightCSS",[c.computed],Object.getOwnPropertyDescriptor(ZI.prototype,"canvasHeightCSS"),ZI.prototype),Object($.a)(ZI.prototype,"canvasProps",[c.computed],Object.getOwnPropertyDescriptor(ZI.prototype,"canvasProps"),ZI.prototype),ZI),ZS=n(388),$S=n.n(ZS),JS=Object(K.observer)($I=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:$S.a.headerRow,style:{zIndex:this.props.zIndex||0},children:this.props.headerElements})}}]),n}(W.Component))||$I,eD=n(389),tD=n.n(eD),nD=Object(K.observer)(JI=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props,t=e.columnIndex,n=e.worldBounds,r=e.cellRectangle,o=r.columnLeft,i=r.columnWidth,a=r.rowTop,s=this.props.scrollOffsetSource,c=s.scrollTop,u=s.scrollLeft;return z.createPortal(Object(re.jsx)("div",{className:ne()(tD.a.positionedField,{isFirstColumn:0===t}),onClick:function(e){return e.stopPropagation()},onMouseEnter:this.props.onMouseEnter,style:{top:n.top+a-c,left:t<this.props.fixedColumnsCount?n.left+o:n.left+o-u,width:i,height:25},children:this.props.children}),document.getElementById("form-field-portal"))}}]),n}(W.Component))||JI,rD=n(251),oD=n.n(rD),iD=Object(K.observer)(eS=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:oD.a.scrollee,style:{width:this.props.width,height:this.props.height,zIndex:this.props.zIndex||0},children:Object(re.jsx)("div",{className:oD.a.scrolleeShifted,style:{top:(this.props.fixedVert?0:-this.props.scrollOffsetSource.scrollTop)+(this.props.offsetTop||0),left:(this.props.fixedHoriz?0:-this.props.scrollOffsetSource.scrollLeft)+(this.props.offsetLeft||0)},children:this.props.children})})}}]),n}(W.Component))||eS,aD=n(252),sD=n.n(aD),cD=(rS=c.observable.ref,oS=c.action.bound,iS=c.action.bound,aS=c.action.bound,sS=c.action.bound,cS=c.action.bound,Object(K.observer)((lS=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"elmScrollerDiv",dS,Object(pe.a)(e)),e.lastScrollLeft=0,e.lastScrollTop=0,e.clickHandler=new uD((function(t){return e.runOnclick(t)})),e.lastMouseX=0,e.lastMouseY=0,e.timeout=void 0,e}return Object(Q.a)(n,[{key:"scrollTo",value:function(e){this.elmScrollerDiv&&(void 0!==e.scrollTop&&(this.elmScrollerDiv.scrollTop=e.scrollTop),void 0!==e.scrollLeft&&(this.forceScrollLeft(e.scrollLeft),this.elmScrollerDiv.scrollLeft=e.scrollLeft))}},{key:"handleScroll",value:function(e){this.props.scrollingDisabled?(e.target.scrollLeft=this.lastScrollLeft,e.target.scrollTop=this.lastScrollTop):(this.lastScrollLeft=e.target.scrollLeft,this.lastScrollTop=e.target.scrollTop),this.props.onScroll(e,e.target.scrollLeft,e.target.scrollTop)}},{key:"forceScrollLeft",value:function(e){this.lastScrollLeft=e}},{key:"scrollTop",get:function(){return this.elmScrollerDiv?this.elmScrollerDiv.scrollTop:0},set:function(e){this.elmScrollerDiv&&(this.elmScrollerDiv.scrollTop=e)}},{key:"scrollLeft",get:function(){return this.elmScrollerDiv?this.elmScrollerDiv.scrollLeft:0},set:function(e){this.elmScrollerDiv&&(this.elmScrollerDiv.scrollLeft=e)}},{key:"horizontalScrollbarSize",get:function(){return this.elmScrollerDiv?this.elmScrollerDiv.offsetHeight-this.elmScrollerDiv.clientHeight:0}},{key:"verticalScrollbarSize",get:function(){return this.elmScrollerDiv?this.elmScrollerDiv.offsetWidth-this.elmScrollerDiv.clientWidth:0}},{key:"focus",value:function(){this.elmScrollerDiv&&this.elmScrollerDiv.focus()}},{key:"refScrollerDiv",value:function(e){this.elmScrollerDiv=e}},{key:"runOnclick",value:function(e){var t=this.elmScrollerDiv.getBoundingClientRect();this.props.onClick&&this.props.onClick(e,e.clientX-t.left,e.clientY-t.top)}},{key:"handleMouseMove",value:function(e){var t,n,r=this;e.persist();var o=this.elmScrollerDiv.getBoundingClientRect();null===(t=(n=this.props).onMouseMove)||void 0===t||t.call(n,e,e.clientX-o.left,e.clientY-o.top);var i=Math.sqrt(Math.pow(e.clientX-this.lastMouseX,2)+Math.pow(e.clientY-this.lastMouseY,2));if(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,i>1){this.timeout&&clearTimeout(this.timeout);var a=this.elmScrollerDiv.getBoundingClientRect();this.timeout=setTimeout((function(){r.props.onMouseOver(e,a)}),500)}}},{key:"handleMouseLeave",value:function(e){this.timeout&&clearTimeout(this.timeout),this.props.onMouseLeave(e)}},{key:"handleWindowClick",value:function(e){this.elmScrollerDiv&&!this.elmScrollerDiv.contains(e.target)&&this.props.onOutsideClick&&this.props.onOutsideClick(e)}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleWindowClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleWindowClick)}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:sD.a.scroller+" horiz-scrollbar vert-scrollbar"+(this.props.isVisible?"":" hidden"),tabIndex:1,style:{width:this.props.width,height:this.props.height},onScroll:this.handleScroll,onClick:function(t){return e.clickHandler.handleClick(t)},onMouseMove:function(t){return e.handleMouseMove(t)},onMouseLeave:function(t){return e.handleMouseLeave(t)},onKeyDown:function(t){var n,r;return null===(n=(r=e.props).onKeyDown)||void 0===n?void 0:n.call(r,t)},onFocus:function(){return e.props.onFocus()},ref:this.refScrollerDiv,children:Object(re.jsx)("div",{className:sD.a.fakeContent,style:{width:this.props.contentWidth+this.horizontalScrollbarSize,height:this.props.contentHeight+this.verticalScrollbarSize}})})}}]),n}(W.Component),dS=Object($.a)(lS.prototype,"elmScrollerDiv",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($.a)(lS.prototype,"scrollTo",[oS],Object.getOwnPropertyDescriptor(lS.prototype,"scrollTo"),lS.prototype),Object($.a)(lS.prototype,"handleScroll",[iS],Object.getOwnPropertyDescriptor(lS.prototype,"handleScroll"),lS.prototype),Object($.a)(lS.prototype,"refScrollerDiv",[aS],Object.getOwnPropertyDescriptor(lS.prototype,"refScrollerDiv"),lS.prototype),Object($.a)(lS.prototype,"handleMouseMove",[sS],Object.getOwnPropertyDescriptor(lS.prototype,"handleMouseMove"),lS.prototype),Object($.a)(lS.prototype,"handleWindowClick",[cS],Object.getOwnPropertyDescriptor(lS.prototype,"handleWindowClick"),lS.prototype),uS=lS))||uS),uD=(tS=c.action.bound,nS=function(){function e(t){Object(q.a)(this,e),this.timer=null,this.runOnclick=void 0,this.singleClickIsRunning=!1,this.firstEvent=void 0,this.doubleClickDelayMillis=500,this.runOnclick=t}return Object(Q.a)(e,[{key:"sleep",value:function(e){var t=this;return new Promise((function(n){return t.timer=setTimeout(n,e)}))}},{key:"handleClick",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),t.preventDefault(),this.singleClickIsRunning){e.next=10;break}return this.singleClickIsRunning=!0,this.singleClick(t),e.next=7,this.sleep(this.doubleClickDelayMillis);case 7:this.singleClickIsRunning=!1,e.next=13;break;case 10:n=this.firstEvent,r=t,Math.sqrt(Math.pow(n.screenX-r.screenX,2)+Math.pow(n.screenY-r.screenY,2))<5&&this.doubleClick(t),this.firstEvent=void 0,this.singleClickIsRunning=!1;case 13:case"end":return e.stop()}var n,r}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"singleClick",value:function(e){this.firstEvent=e,e.isDouble=!1,this.runOnclick(e)}},{key:"doubleClick",value:function(e){e.isDouble=!0,this.runOnclick(e)}}]),e}(),Object($.a)(nS.prototype,"handleClick",[tS],Object.getOwnPropertyDescriptor(nS.prototype,"handleClick"),nS.prototype),nS);function lD(){return Math.ceil((sp()+rp())/lp())}function dD(){for(var e=Sh(),t=ap()+np(),n=e.length-1;n>=0;n--)if(e[n].left<=t)return n}function pD(e,t,n,r,o,i,a,s,c,u,l,d,p,h,f,b,v,y){qd.set(e),Qd.set(t),tp.set(n),pp.set(r),dp.set(o),Op.set(i),op.set(a),ip.set(s),np.set(c),rp.set(u),vp.set(l),wp.set(d),lp.set(y),gp.set(p),yp.set(h),kp.set(f),xp.set(b),Cp.set(v);try{Ep(qd()),kp().length=0,Cp().length=0,xp().length=0;var g=Qd();g.fillStyle="white",g.fillRect(0,0,Fp()*np(),Fp()*rp());var m=Math.floor(sp()/lp()),w=lD();if(void 0===m||void 0===w)return;for(var O=m;O<=w;O++)fD(O);Ap(qd())}finally{var j,k=Object(le.a)(zd);try{for(k.s();!(j=k.n()).done;){(0,j.value)()}}catch(x){k.e(x)}finally{k.f()}}}function hD(){0===Xd()&&Ep(qd());var e=mp(),t=function(){for(var e=Sh(),t=ap(),n=0;n<e.length;n++)if(e[n].right>=t)return n}(),n=dD();if(void 0!==t&&void 0!==n)for(var r=Math.max(e,t),o=n;o>=r;o--)bD(o);for(var i=0;i<e;i++)bD(i)}function fD(e){Xd.set(e),$d(!1);try{if(!fp())return;hD(),2===(uh()?2:1)&&(xh(1),Sh.clear(),Dh.clear(),hD(),xh(0))}finally{var t,n=Object(le.a)(Yd);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(r){n.e(r)}finally{n.f()}}}function bD(e){ep.set(e);try{var t=Qd();t.save(),ep()>=Dh().length||Dh()[ep()](),t.restore()}finally{var n,r=Object(le.a)(Kd);try{for(r.s();!(n=r.n()).done;){(0,n.value)()}}catch(o){r.e(o)}finally{r.f()}}}function vD(e,t){var n=Object(c.computed)((function(){return vi(e).orderedGroupingColumnSettings})),r=Object(c.observable)(Vs(e)),o=Object(c.computed)((function(){return new Map(r.map((function(e){return[e.id,e]})))})),i=Object(c.computed)((function(){return fi(e).map((function(e){return e.id}))})),a=c.observable.box(0),s=c.observable.box(0),u=c.observable.box(500),l=c.observable.box(300),d=[],p=[],h=[],f=bi(e);return{drawTable:function(r,c,b){pD(e,r,b,n.get().map((function(e){return e.columnId})),i.get(),o.get(),s.get(),a.get(),u.get(),l.get(),f,t.displayedColumnDimensionsCom,t.columnWidths,c,d,h,p,t.rowHeight)},setScroll:function(e,t){Object(c.runInAction)((function(){a.set(t),s.set(e)}))},handleClick:function(e){var t=e.target.getBoundingClientRect(),n=function(e,t,n,r,o,i){var a,s=!1,c=Object(le.a)(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u.x<=t&&u.x+u.w>=t&&u.y<=n&&u.y+u.h>=n){u.handler(e,t,n,t,n),s=!0;break}}}catch(l){c.e(l)}finally{c.f()}return{handled:s}}(e,e.clientX-t.x,e.clientY-t.y,s.get(),a.get(),d);return n},handleMouseMove:function(e){var t=e.target.getBoundingClientRect(),n=function(e,t,n,r,o,i){var a,s=!1,c=Object(le.a)(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u.x<=t&&u.x+u.w>=t&&u.y<=n&&u.y+u.h>=n){u.handler(e,t,n,t,n),s=!0;break}}}catch(l){c.e(l)}finally{c.f()}return{handled:s}}(e,e.clientX-t.x,e.clientY-t.y,s.get(),a.get(),h);return n},setViewportSize:function(e,t){Object(c.runInAction)((function(){u.set(e),l.set(t)}))},getToolTipContent:function(e,t){return function(e,t,n){var r,o=Object(le.a)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.x<=e&&i.x+i.w>=e&&i.y<=t&&i.y+i.h>=t)return i.toolTipGetter(e,t,e,t)}}catch(a){o.e(a)}finally{o.f()}}(e.clientX-t.x+s.get(),e.clientY-t.y+a.get(),p)}}}var yD,gD,mD=function(e){var t=W.useContext(sI);return Object(re.jsx)(wD,Object(Fe.a)(Object(Fe.a)({},e),{},{isVisible:t.isVisible,ref:e.refTable}))},wD=(pS=Object(c.computed)({equals:c.comparer.structural}),hS=c.observable.ref,fS=c.observable.ref,bS=c.observable.ref,vS=c.observable.ref,yS=c.observable.ref,gS=c.action.bound,mS=c.action.bound,wS=c.action.bound,OS=c.action.bound,jS=c.action.bound,kS=c.action.bound,xS=c.action.bound,CS=c.action.bound,IS=c.action.bound,SS=c.action.bound,DS=c.action.bound,RS=c.action.bound,TS=c.action.bound,_S=c.action.bound,PS=c.action.bound,Object(K.observer)((HS=WS=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).tableRenderer=vD(e.context.tablePanelView,e.props.gridDimensions),Object(de.a)(e,"_contentBounds",LS,Object(pe.a)(e)),Object(de.a)(e,"elmCanvasFixed",ES,Object(pe.a)(e)),Object(de.a)(e,"elmCanvasMoving",AS,Object(pe.a)(e)),Object(de.a)(e,"elmCanvasElement",VS,Object(pe.a)(e)),Object(de.a)(e,"ctxCanvas",NS,Object(pe.a)(e)),Object(de.a)(e,"elmScroller",BS,Object(pe.a)(e)),e.elmMeasure=null,e.disposers=[],Object(de.a)(e,"toolTipData",US,Object(pe.a)(e)),Object(de.a)(e,"mouseInToolTipEnabledArea",GS,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"contentBounds",get:function(){return this._contentBounds},set:function(e){this._contentBounds=e}},{key:"handleWindowClick",value:function(e){var t=Y.a.findDOMNode(this.elmScroller);t&&!t.contains(e.target)&&this.props.onOutsideTableClick&&this.props.onOutsideTableClick(e)}},{key:"refCanvasFixed",value:function(e){this.elmCanvasFixed=e}},{key:"refCanvasMoving",value:function(e){this.elmCanvasMoving=e,this.props.refCanvasMovingComponent&&this.props.refCanvasMovingComponent(e)}},{key:"refCanvasElement",value:function(e){this.elmCanvasElement=e,this.ctxCanvas=e?e.getContext("2d"):null}},{key:"refMeasure",value:function(e){this.elmMeasure=e}},{key:"refScroller",value:function(e){this.elmScroller=e,e?(this.props.scrollState.scrollToFunction=e.scrollTo,window.addEventListener("click",this.handleWindowClick)):window.removeEventListener("click",this.handleWindowClick)}},{key:"componentDidMount",value:function(){var e=this;this.disposers.push(Object(c.autorun)((function(){e.ctxCanvas&&e.tableRenderer.drawTable(e.ctxCanvas,e.props.fixedColumnCount,e.props.tableRows)}),{scheduler:function(e){requestAnimationFrame(e)}})),this.props.listenForScrollToCell&&this.disposers.push(this.props.listenForScrollToCell((function(t,n){e.scrollToCellShortest(t,n)})))}},{key:"componentDidUpdate",value:function(e){this.props.isVisible!==e.isVisible&&this.remeasureCellArea()}},{key:"componentWillUnmount",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"remeasureCellArea",value:function(){this.elmMeasure&&this.elmMeasure.measure&&this.elmMeasure.measure()}},{key:"focusTable",value:function(){this.elmScroller&&this.elmScroller.focus()}},{key:"scrollToCellShortest",value:function(e,t){var n=this.props.gridDimensions;if(this.elmScroller){var r=n.getRowTop(e),o=n.getRowBottom(e),i=n.getColumnLeft(t),a=n.getColumnRight(t);i-this.elmScroller.scrollLeft<this.fixedColumnsWidth&&this.elmScroller.scrollTo({scrollLeft:i-this.fixedColumnsWidth}),a-this.elmScroller.scrollLeft>this.contentBounds.width-20&&this.elmScroller.scrollTo({scrollLeft:a-this.contentBounds.width+20}),r-this.elmScroller.scrollTop<0&&this.elmScroller.scrollTo({scrollTop:r}),o-this.elmScroller.scrollTop>this.contentBounds.height-20&&this.elmScroller.scrollTo({scrollTop:o-this.contentBounds.height+20})}}},{key:"fixedColumnCount",get:function(){return this.fixedHeaderContainers.length}},{key:"hasFixedColumns",get:function(){return 0!==this.fixedHeaderContainers.length}},{key:"fixedColumnsWidth",get:function(){return this.fixedHeaderContainers.map((function(e){return e.width})).reduce((function(e,t){return e+t}),0)}},{key:"freeHeaderContainers",get:function(){return this.props.headerContainers.filter((function(e){return!e.isFixed}))}},{key:"freeHeaders",get:function(){return this.freeHeaderContainers.map((function(e){return e.header}))}},{key:"fixedHeaderContainers",get:function(){return this.props.headerContainers.filter((function(e){return e.isFixed}))}},{key:"fixedHeaders",get:function(){return this.fixedHeaderContainers.map((function(e){return e.header}))}},{key:"tablePanelView",get:function(){return this.context.tablePanelView}},{key:"onMouseOver",value:function(e,t){var n=this;this.toolTipData=void 0,setTimeout((function(){Object(c.runInAction)((function(){n.mouseInToolTipEnabledArea=!0}))}))}},{key:"handleScrollerMouseMove",value:function(e){this.tableRenderer.handleMouseMove(e)}},{key:"onMouseLeaveToolTipEnabledArea",value:function(e){this.tablePanelView.currentTooltipText=void 0,this.mouseInToolTipEnabledArea=!1}},{key:"handleScrollerClick",value:function(e){var t,n;this.tableRenderer.handleClick(e).handled||null===(t=(n=this.props).onOutsideTableClick)||void 0===t||t.call(n,e)}},{key:"handleResize",value:function(e){this.contentBounds=e.bounds,this.props.onContentBoundsChanged(e.bounds),this.tableRenderer.setViewportSize(this.contentBounds.width,this.contentBounds.height)}},{key:"handleScroll",value:function(e,t,n){this.context.tablePanelView.handleTableScroll(e,n,t),this.props.scrollState.setScrollOffset(e,n,t),this.tableRenderer.setScroll(t,n)}},{key:"onColumnDragEnd",value:function(e){if(e.destination){var t=Math.floor(e.destination.index);uO(this.context.tablePanelView,this.context.tablePanelView.tablePropertyIds[e.source.index],this.context.tablePanelView.tablePropertyIds[t])}}},{key:"render",value:function(){var e=this,t=void 0!==this.props.editingRowIndex&&void 0!==this.props.editingColumnIndex?this.tablePanelView.getCellRectangle(this.props.editingRowIndex,this.props.editingColumnIndex):void 0;return Object(re.jsxs)("div",{className:ux.a.table,children:[this.props.isLoading&&Object(re.jsx)("div",{className:ux.a.loadingOverlay,children:Object(re.jsx)("div",{className:ux.a.loadingIcon,children:Object(re.jsx)("i",{className:"far fa-clock fa-7x blink"})})}),Object(re.jsx)(ve.default,{ref:this.refMeasure,bounds:!0,onResize:this.handleResize,children:function(n){var r=n.measureRef,o=n.contentRect;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)(re.Fragment,{children:[e.props.headerContainers&&(o.bounds.width?Object(re.jsxs)("div",{className:ux.a.headers,children:[e.hasFixedColumns?Object(re.jsx)(iD,{scrollOffsetSource:e.props.scrollState,fixedHoriz:!0,fixedVert:!0,width:e.fixedColumnsWidth,zIndex:101,children:Object(re.jsx)(JS,{headerElements:e.fixedHeaders,zIndex:100})}):null,Object(re.jsx)(iD,{scrollOffsetSource:e.props.scrollState,fixedVert:!0,zIndex:100,width:o.bounds.width-10-e.fixedColumnsWidth,children:Object(re.jsx)(cO.a,{onDragEnd:function(t){return e.onColumnDragEnd(t)},children:Object(re.jsx)(cO.c,{droppableId:"headers",direction:"horizontal",children:function(t){return Object(re.jsx)("div",Object(Fe.a)(Object(Fe.a)({style:{width:"10000%"}},t.droppableProps),{},{ref:t.innerRef,children:Object(re.jsx)(JS,{headerElements:[].concat(Object(gt.a)(e.freeHeaders),[Object(re.jsx)("div",{children:t.placeholder},"placeholder")])})}))}})})})]}):null),Object(re.jsx)("div",{ref:r,className:ux.a.cellAreaContainer,title:e.tablePanelView.currentTooltipText,children:Object(re.jsxs)(re.Fragment,{children:[o.bounds.height?Object(re.jsx)("div",{className:ux.a.canvasRow,children:Object(re.jsx)(XS,{refCanvasElement:e.refCanvasElement,width:o.bounds.width,height:o.bounds.height})}):null,e.props.isEditorMounted&&t&&Object(re.jsx)(nD,{fixedColumnsCount:e.fixedColumnCount,rowIndex:e.props.editingRowIndex,columnIndex:e.props.editingColumnIndex,scrollOffsetSource:e.props.scrollState,worldBounds:o.bounds,cellRectangle:t,onMouseEnter:function(t){return e.onMouseLeaveToolTipEnabledArea(t)},children:e.props.renderEditor&&e.props.renderEditor()}),Object(re.jsx)(cD,{ref:e.refScroller,width:o.bounds.width,height:o.bounds.height,isVisible:!0,scrollingDisabled:!1,contentWidth:e.props.gridDimensions.contentWidth+20,contentHeight:e.props.gridDimensions.contentHeight+30,onScroll:e.handleScroll,onClick:e.handleScrollerClick,onMouseMove:e.handleScrollerMouseMove,onMouseOver:e.onMouseOver,onMouseLeave:function(t){return e.onMouseLeaveToolTipEnabledArea(t)},onKeyDown:e.props.onKeyDown,onFocus:e.props.onFocus})]})})]})}})}})]})}}]),n}(W.Component),WS.contextType=K.MobXProviderContext,MS=HS,LS=Object($.a)(MS.prototype,"_contentBounds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{top:0,left:0,bottom:0,right:0,width:0,height:0}}}),Object($.a)(MS.prototype,"contentBounds",[pS],Object.getOwnPropertyDescriptor(MS.prototype,"contentBounds"),MS.prototype),ES=Object($.a)(MS.prototype,"elmCanvasFixed",[hS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),AS=Object($.a)(MS.prototype,"elmCanvasMoving",[fS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),VS=Object($.a)(MS.prototype,"elmCanvasElement",[bS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),NS=Object($.a)(MS.prototype,"ctxCanvas",[vS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),BS=Object($.a)(MS.prototype,"elmScroller",[yS],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object($.a)(MS.prototype,"handleWindowClick",[gS],Object.getOwnPropertyDescriptor(MS.prototype,"handleWindowClick"),MS.prototype),Object($.a)(MS.prototype,"refCanvasFixed",[mS],Object.getOwnPropertyDescriptor(MS.prototype,"refCanvasFixed"),MS.prototype),Object($.a)(MS.prototype,"refCanvasMoving",[wS],Object.getOwnPropertyDescriptor(MS.prototype,"refCanvasMoving"),MS.prototype),Object($.a)(MS.prototype,"refCanvasElement",[OS],Object.getOwnPropertyDescriptor(MS.prototype,"refCanvasElement"),MS.prototype),Object($.a)(MS.prototype,"refMeasure",[jS],Object.getOwnPropertyDescriptor(MS.prototype,"refMeasure"),MS.prototype),Object($.a)(MS.prototype,"refScroller",[kS],Object.getOwnPropertyDescriptor(MS.prototype,"refScroller"),MS.prototype),Object($.a)(MS.prototype,"remeasureCellArea",[xS],Object.getOwnPropertyDescriptor(MS.prototype,"remeasureCellArea"),MS.prototype),Object($.a)(MS.prototype,"focusTable",[CS],Object.getOwnPropertyDescriptor(MS.prototype,"focusTable"),MS.prototype),Object($.a)(MS.prototype,"scrollToCellShortest",[IS],Object.getOwnPropertyDescriptor(MS.prototype,"scrollToCellShortest"),MS.prototype),Object($.a)(MS.prototype,"fixedColumnsWidth",[c.computed],Object.getOwnPropertyDescriptor(MS.prototype,"fixedColumnsWidth"),MS.prototype),Object($.a)(MS.prototype,"freeHeaderContainers",[c.computed],Object.getOwnPropertyDescriptor(MS.prototype,"freeHeaderContainers"),MS.prototype),Object($.a)(MS.prototype,"freeHeaders",[c.computed],Object.getOwnPropertyDescriptor(MS.prototype,"freeHeaders"),MS.prototype),Object($.a)(MS.prototype,"fixedHeaderContainers",[c.computed],Object.getOwnPropertyDescriptor(MS.prototype,"fixedHeaderContainers"),MS.prototype),Object($.a)(MS.prototype,"fixedHeaders",[c.computed],Object.getOwnPropertyDescriptor(MS.prototype,"fixedHeaders"),MS.prototype),US=Object($.a)(MS.prototype,"toolTipData",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object($.a)(MS.prototype,"onMouseOver",[SS],Object.getOwnPropertyDescriptor(MS.prototype,"onMouseOver"),MS.prototype),Object($.a)(MS.prototype,"handleScrollerMouseMove",[DS],Object.getOwnPropertyDescriptor(MS.prototype,"handleScrollerMouseMove"),MS.prototype),GS=Object($.a)(MS.prototype,"mouseInToolTipEnabledArea",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object($.a)(MS.prototype,"onMouseLeaveToolTipEnabledArea",[RS],Object.getOwnPropertyDescriptor(MS.prototype,"onMouseLeaveToolTipEnabledArea"),MS.prototype),Object($.a)(MS.prototype,"handleScrollerClick",[TS],Object.getOwnPropertyDescriptor(MS.prototype,"handleScrollerClick"),MS.prototype),Object($.a)(MS.prototype,"handleResize",[_S],Object.getOwnPropertyDescriptor(MS.prototype,"handleResize"),MS.prototype),Object($.a)(MS.prototype,"handleScroll",[PS],Object.getOwnPropertyDescriptor(MS.prototype,"handleScroll"),MS.prototype),FS=MS))||FS);var OD=(yD=Object(K.inject)((function(e){var t=e.tablePanelView,n=li(t),r=It(t).selectedProperty,a="Polymorph"===r.column?r.getPolymophicProperty(n):r;return{property:a,getCellValue:function(){return Tc(t,n,a)},onChange:function(){var e=Object(i.a)(o.a.mark((function e(r,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc(t)({event:r,row:n,property:a,value:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onEditorBlur:function(e){return uC(t)(e)},onEditorKeyDown:function(e){e.persist(),function(e){return Object(c.flow)(o.a.mark((function t(n){var r,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=Be(e),i=It(e),t.t0=n.key,t.next="Tab"===t.t0?6:"Enter"===t.t0?29:"F2"===t.t0?43:"Escape"===t.t0?46:50;break;case 6:if(s=n,!(It(e).isFirstColumnSelected()&&s.shiftKey||It(e).isLastColumnSelected()&&!s.shiftKey)){t.next=22;break}return i.setEditing(!1),t.delegateYield(Fc(e)(),"t1",9);case 9:return t.next=11,Vd(r);case 11:if(t.sent){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,r.lifecycle.runRecordChangedReaction(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.shiftKey){t.next=5;break}return t.next=3,UI(e)(!0);case 3:t.next=7;break;case 5:return t.next=7,GI(e)(!0);case 7:case"end":return t.stop()}}),t)})));case 15:n.preventDefault(),i.dontHandleNextScroll(),i.scrollToCurrentCell(),i.setEditing(!0),i.triggerOnFocusTable(),t.next=28;break;case 22:return n.shiftKey?UI(e)(!0):GI(e)(!0),n.preventDefault(),i.dontHandleNextScroll(),i.scrollToCurrentCell(),t.delegateYield(Fc(e)(),"t2",27);case 27:za(e).focusEditor();case 28:return t.abrupt("break",50);case 29:return i.setEditing(!1),null===(a=n.persist)||void 0===a||a.call(n),n.preventDefault(),t.delegateYield(Fc(e)(),"t3",33);case 33:return t.next=35,Vd(r);case 35:if(t.sent){t.next=37;break}return t.abrupt("return");case 37:return t.next=39,r.lifecycle.runRecordChangedReaction(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.shiftKey){t.next=4;break}return t.delegateYield(gf(e)(),"t0",2);case 2:t.next=5;break;case 4:return t.delegateYield(vf(e)(),"t1",5);case 5:case"end":return t.stop()}}),t)})));case 39:return i.setEditing(!0),i.triggerOnFocusTable(),i.scrollToCurrentCell(),t.abrupt("break",50);case 43:return i.setEditing(!1),i.triggerOnFocusTable(),t.abrupt("break",50);case 46:return i.setEditing(!1),i.clearCurrentCellEditData(),i.triggerOnFocusTable(),t.abrupt("break",50);case 50:t.next=56;break;case 52:return t.prev=52,t.t4=t.catch(0),t.delegateYield(yt(e)(t.t4),"t5",55);case 55:throw t.t4;case 56:case"end":return t.stop()}var s}),t,null,[[0,52]])})))}(t)(e)}}})),yD(gD=Object(K.observer)(gD=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){za(this.props.property).focusEditor()}},{key:"getEditor",value:function(){var e,t,n,r,o,i,a=this,s=Vn(this.props.property),c=Tp(this.props.property,s||""),u=Be(this.props.property),l=Lc(this.props.property,s)||void 0!==u.orderProperty&&(null===(e=this.props.property)||void 0===e?void 0:e.name)===u.orderProperty.name,d=_p(u,s),p=l?Mp(d,-.1):d,h=It(u).firstColumn===this.props.property,f=za(this.props.property);switch(this.props.property.column){case"Number":return Object(re.jsx)(qx,{value:this.props.getCellValue(),isReadOnly:l,isPassword:this.props.property.isPassword,maxLength:null===(t=this.props.property)||void 0===t?void 0:t.maxLength,backgroundColor:p,foregroundColor:c,customNumberFormat:this.props.property.customNumericFormat,onChange:this.props.onChange,onKeyDown:this.props.onEditorKeyDown,onClick:void 0,onDoubleClick:function(e){return a.onDoubleClick(e)},onEditorBlur:this.props.onEditorBlur,customStyle:jD(null===(n=this.props.property)||void 0===n?void 0:n.style,h,"Number"),subscribeToFocusManager:function(e){return f.activeEditor=e}});case"Text":return Object(re.jsx)(sC,{id:"editor_"+(null===(r=this.props.property)||void 0===r?void 0:r.modelInstanceId),value:this.props.getCellValue(),isReadOnly:l,isPassword:this.props.property.isPassword,backgroundColor:p,foregroundColor:c,maxLength:null===(o=this.props.property)||void 0===o?void 0:o.maxLength,onChange:this.props.onChange,onKeyDown:this.props.onEditorKeyDown,onClick:void 0,wrapText:!1,customStyle:jD(null===(i=this.props.property)||void 0===i?void 0:i.style,h,"Text"),onDoubleClick:function(e){return a.onDoubleClick(e)},onEditorBlur:this.props.onEditorBlur,isRichText:!1,isMultiline:this.props.property.multiline,subscribeToFocusManager:function(e){return f.activeEditor=e}});case"Date":return Object(re.jsx)(dy,{value:this.props.getCellValue(),outputFormat:this.props.property.formatterPattern,outputFormatToShow:this.props.property.modelFormatterPattern,isReadOnly:l,backgroundColor:p,foregroundColor:c,onChange:this.props.onChange,onClick:void 0,onDoubleClick:function(e){return a.onDoubleClick(e)},onEditorBlur:this.props.onEditorBlur,onKeyDown:this.props.onEditorKeyDown,subscribeToFocusManager:function(e){return f.activeEditor=e}});case"CheckBox":return Object(re.jsx)(hC,{value:this.props.getCellValue(),isReadOnly:l,readOnlyNoGrey:!0,onChange:this.props.onChange,onClick:void 0,onKeyDown:this.props.onEditorKeyDown,subscribeToFocusManager:function(e){return f.activeEditor=e}});case"ComboBox":return Object(re.jsx)(Wm,{xmlNode:this.props.property.xmlNode,onDoubleClick:function(e){return a.onDoubleClick(e)},isReadOnly:l,foregroundColor:c,backgroundColor:p,autoSort:this.props.property.autoSort,onKeyDown:this.props.onEditorKeyDown,subscribeToFocusManager:function(e){return f.activeEditor=e}},this.props.property.xmlNode.$iid);case"Checklist":return"";case"Color":return Object(re.jsx)(FC,{value:qr(this.props.getCellValue())||null,onChange:function(e){var t,n;return null===(t=(n=a.props).onChange)||void 0===t?void 0:t.call(n,void 0,Qr(e))},onBlur:function(){var e,t;return null===(e=(t=a.props).onEditorBlur)||void 0===e?void 0:e.call(t,void 0)},onKeyDown:this.props.onEditorKeyDown,isReadOnly:l,subscribeToFocusManager:function(e){return f.activeEditor=e}});case"TagInput":return Object(re.jsx)("div",{style:{height:"125px",backgroundColor:"white"},children:Object(re.jsx)(Wm,{xmlNode:this.props.property.xmlNode,isReadOnly:l,autoSort:this.props.property.autoSort,subscribeToFocusManager:function(e){return f.activeEditor=e},tagEditor:Object(re.jsx)(lw,{value:this.props.getCellValue(),isReadOnly:l,backgroundColor:p,foregroundColor:c,onChange:this.props.onChange,onKeyDown:this.props.onEditorKeyDown,onDoubleClick:function(e){return a.onDoubleClick(e)},onEditorBlur:this.props.onEditorBlur})},this.props.property.xmlNode.$iid)});case"Blob":return Object(re.jsx)(Lx,{isReadOnly:l,value:this.props.getCellValue(),canUpload:!0,onChange:this.props.onChange,onEditorBlur:this.props.onEditorBlur,subscribeToFocusManager:function(e){return f.activeEditor=e}});case"Polymorph":return console.warn("Type of polymorphic column was not determined, no editor was rendered"),"";default:return console.warn('Unknown column type "'.concat(this.props.property.column,'", no editor was rendered')),""}}},{key:"onDoubleClick",value:function(e){It(this.props.property).setEditing(!1);var t=Be(this.props.property);t.firstEnabledDefaultAction&&Id.onActionClick(t.firstEnabledDefaultAction)(e,t.firstEnabledDefaultAction)}},{key:"render",value:function(){return Object(re.jsx)(K.Provider,{property:this.props.property,children:this.getEditor()})}}]),n}(H.a.Component))||gD)||gD);function jD(e,t,n){var r=new Bp(t,n,e),o=e?Object.assign({},e):{};return o.paddingRight=r.paddingRight-1+"px",o.paddingLeft=r.paddingLeft+"px",o.textAlign=r.alignment,o}function kD(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(It(e).onNoCellClick(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function xD(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(It(e).onOutsideTableClick(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function CD(e){return ID.apply(this,arguments)}function ID(){return(ID=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be(t),r=n.dataTable.rows.map((function(e){return n.dataTable.getRowId(e)})),e.next=4,eo(t).loadValues(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SD,DD,RD,TD=n(390),_D=n.n(TD),PD=(SD=c.action.bound,Object(K.observer)((RD=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"onClick",value:function(e){var t,n;this.props.dataView.selectAllCheckboxChecked=!this.props.dataView.selectAllCheckboxChecked,t=this.props.dataView,n=this.props.dataView.selectAllCheckboxChecked,Object(c.flow)(o.a.mark((function e(){var r,i,a,s,c,u,l,d,p,h,f,b,v,y,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,CD(t);case 3:if(r=ur(t),!(i=ra(t))){e.next=30;break}a=Object(le.a)(r.rows);try{for(a.s();!(s=a.n()).done;)c=s.value,pi(t,i)&&r.setDirtyValue(c,i,n)}catch(o){a.e(o)}finally{a.f()}return e.delegateYield(Ae(t).onFlushData(),"t0",9);case 9:u=Object(le.a)(r.rows),e.prev=10,u.s();case 12:if((l=u.n()).done){e.next=20;break}return d=l.value,p=pi(t,i),h=r.getCellValueByDataSourceField(d,p),f=r.getRowId(d),e.delegateYield(nh(t)(f,h),"t1",18);case 18:e.next=12;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(10),u.e(e.t2);case 25:return e.prev=25,u.f(),e.finish(25);case 28:e.next=47;break;case 30:b=Object(le.a)(r.rows),e.prev=31,b.s();case 33:if((v=b.n()).done){e.next=39;break}return y=v.value,g=r.getRowId(y),e.delegateYield(nh(t)(g,n),"t3",37);case 37:e.next=33;break;case 39:e.next=44;break;case 41:e.prev=41,e.t4=e.catch(31),b.e(e.t4);case 44:return e.prev=44,b.f(),e.finish(44);case 47:e.next=53;break;case 49:return e.prev=49,e.t5=e.catch(0),e.delegateYield(yt(t)(e.t5),"t6",52);case 52:throw e.t5;case 53:case"end":return e.stop()}}),e,null,[[0,49],[10,22,25,28],[31,41,44,47]])})))()}},{key:"render",value:function(){var e=this.props.dataView.selectAllCheckboxChecked;return Object(re.jsx)("div",{style:{minWidth:this.props.width+"px"},className:_D.a.root,onClick:this.onClick,children:e?Object(re.jsx)("i",{className:"far fa-check-square"}):Object(re.jsx)("i",{className:"far fa-square"})})}}]),n}(H.a.Component),Object($.a)(RD.prototype,"onClick",[SD],Object.getOwnPropertyDescriptor(RD.prototype,"onClick"),RD.prototype),DD=RD))||DD);var FD,MD,LD,ED,AD,VD,ND,BD,UD,GD,WD=n(391),HD=n.n(WD),zD=(FD=Object(K.inject)((function(e){var t,n=e.dataView;return{dataView:n,tablePanelView:n.tablePanelView,onColumnDialogCancel:n.tablePanelView.onColumnConfCancel,onColumnDialogOk:n.tablePanelView.onColumnConfSubmit,onTableKeyDown:(t=n,Object(c.flow)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=Be(t),e.t0=n.key,e.next="ArrowUp"===e.t0?5:"ArrowDown"===e.t0?13:"ArrowLeft"===e.t0?21:"ArrowRight"===e.t0?25:"F2"===e.t0?29:"Tab"===e.t0?33:"Enter"===e.t0?37:"Escape"===e.t0?39:43;break;case 5:return n.preventDefault(),e.next=8,Vd(r);case 8:if(e.sent){e.next=10;break}return e.abrupt("break",43);case 10:return e.delegateYield(gf(t)(),"t1",11);case 11:case 19:return It(t).scrollToCurrentCell(),e.abrupt("break",43);case 13:return n.preventDefault(),e.next=16,Vd(r);case 16:if(e.sent){e.next=18;break}return e.abrupt("break",43);case 18:return e.delegateYield(vf(t)(),"t2",19);case 21:return UI(t)(),n.preventDefault(),It(t).scrollToCurrentCell(),e.abrupt("break",43);case 25:return GI(t)(),n.preventDefault(),It(t).scrollToCurrentCell(),e.abrupt("break",43);case 29:return It(t).setEditing(!0),n.preventDefault(),It(t).scrollToCurrentCell(),e.abrupt("break",43);case 33:return n.shiftKey?UI(t)(!0):GI(t)(!0),n.preventDefault(),It(t).scrollToCurrentCell(),e.abrupt("break",43);case 37:return r.firstEnabledDefaultAction&&Id.onActionClick(r.firstEnabledDefaultAction)(n,r.firstEnabledDefaultAction),e.abrupt("break",43);case 39:return It(t).setEditing(!1),It(t).clearCurrentCellEditData(),It(t).triggerOnFocusTable(),e.abrupt("break",43);case 43:e.next=49;break;case 45:return e.prev=45,e.t3=e.catch(0),e.delegateYield(yt(t)(e.t3),"t4",48);case 48:throw e.t3;case 49:case"end":return e.stop()}}),e,null,[[0,45]])}))))}})),MD=c.action.bound,FD(LD=Object(K.observer)((ED=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r,i;return Object(q.a)(this,n),(i=t.call(this,e)).refTableDisposer=void 0,i.refTable=function(e){if(i.elmTable=e,e){var t=i.props.tablePanelView.subOnFocusTable(e.focusTable),n=i.props.tablePanelView.subOnScrollToCellShortest(e.scrollToCellShortest);i.refTableDisposer=function(){t(),n()}}else i.refTableDisposer&&i.refTableDisposer()},i.elmTable=null,i.headerRenderer=new XD({gridDimensions:i.props.dataView.gridDimensions,tablePanelView:i.props.tablePanelView,getFixedColumnCount:function(){return It(i.props.tablePanelView).fixedColumnCount},getIsSelectionCheckboxes:function(){return bi(i.props.tablePanelView)},dataView:i.props.dataView,getColumnHeaders:function(){return fi(e=i.props.dataView).map((function(t){var n=oa(e,t.id);return{label:t.name,id:t.id,ordering:n.ordering,order:n.order}}));var e},getTableViewProperties:function(){return fi(i.props.dataView)},onColumnWidthChange:function(e,t){return function(e,t,n){Sn({ctx:e,generator:o.a.mark((function r(){var i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(i=Mo(e,t))&&i.setColumnWidth(n);case 2:case"end":return r.stop()}}),r)}))()})}(i.props.tablePanelView,e,t)},onColumnOrderChange:function(e,t){return uO(i.props.tablePanelView,e,t)},onColumnOrderAttendantsChange:function(e,t){return i.onColumnOrderAttendantsChange(e,t)}}),null===(r=i.props.dataView)||void 0===r||r.initializeNewScrollLoader(),vi(i.props.dataView).registerGroupingOnOffHandler((function(){var e;null===(e=i.props.dataView)||void 0===e||e.initializeNewScrollLoader()})),i}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e,t,n,r=Pe(this.props.dataView),o=null===(e=r.content.formScreen)||void 0===e?void 0:e.dataViews,i=o&&o.length>0&&(null===(t=this.props.dataView)||void 0===t?void 0:t.isBindingRoot)||1===(null===o||void 0===o?void 0:o.length);r.isActive&&i&&((null===(n=this.props.dataView)||void 0===n?void 0:n.isFormViewActive())||It(this.props.dataView).triggerOnFocusTable())}},{key:"onColumnOrderAttendantsChange",value:function(e,t){this.props.tablePanelView.setColumnOrderChangeAttendants(e,t),ur(this.props.dataView).unlockAddedRowPosition()}},{key:"handleTableKeyDown",value:function(e){var t,n,r;null===(t=(n=this.props).onTableKeyDown)||void 0===t||t.call(n,e),null===(r=this.props.dataViewContext)||void 0===r||r.handleTableKeyDown(e)}},{key:"render",value:function(){var e=this,t=this,n=bi(this.props.tablePanelView),r=Rc(this.props.tablePanelView),o=Pc(this.props.tablePanelView);void 0!==o&&n&&o++;var i,a=this.props.tablePanelView&&this.props.tablePanelView.fixedColumnCount||0;return Object(re.jsx)(K.Provider,{tablePanelView:this.props.tablePanelView,children:Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(mD,{tableRows:this.props.dataView.tableRows,gridDimensions:t.props.dataView.gridDimensions,scrollState:t.props.dataView.scrollState,editingRowIndex:r,editingColumnIndex:o,isEditorMounted:(i=this.props.tablePanelView,It(i).isEditing),isLoading:!1,fixedColumnCount:a,headerContainers:t.headerRenderer.headerContainers,renderEditor:function(){return Object(re.jsx)(OD,{},"".concat(r,"@").concat(o))},onNoCellClick:kD(this.props.tablePanelView),onOutsideTableClick:xD(this.props.tablePanelView),onContentBoundsChanged:function(t){return e.props.dataView.contentBounds=t},refCanvasMovingComponent:this.props.tablePanelView.setTableCanvas,onKeyDown:this.handleTableKeyDown,refTable:this.refTable,onFocus:function(){var t;return Ae(e.props.dataView).focusedDataViewId=null===(t=e.props.dataView)||void 0===t?void 0:t.id}})})})}}]),n}(H.a.Component),Object($.a)(ED.prototype,"handleTableKeyDown",[MD],Object.getOwnPropertyDescriptor(ED.prototype,"handleTableKeyDown"),ED.prototype),LD=ED))||LD)||LD);function YD(e){var t=Object(W.useContext)(HO);return Object(re.jsx)(zD,Object(Fe.a)(Object(Fe.a)({},e),{},{dataViewContext:t}))}var KD,qD,QD,XD=(AD=c.action.bound,VD=c.action.bound,ND=c.action.bound,BD=c.action.bound,UD=function(){function e(t){Object(q.a)(this,e),this.gridDimensions=null,this.getTableViewProperties=null,this.getIsSelectionCheckboxes=null,this.dataView=null,this.getFixedColumnCount=null,this.getColumnHeaders=null,this.onColumnWidthChange=null,this.onColumnOrderChange=null,this.onColumnOrderAttendantsChange=null,this.tablePanelView=null,this.columnOrderChangeSourceId=void 0,this.columnOrderChangeTargetId=void 0,Object(de.a)(this,"isColumnOrderChanging",GD,this),Object.assign(this,t)}return Object(Q.a)(e,[{key:"tableViewPropertiesOriginal",get:function(){return this.getTableViewProperties()}},{key:"tableViewProperties",get:function(){return this.tableViewPropertiesOriginal}},{key:"columnHeaders",get:function(){return this.getColumnHeaders()}},{key:"isSelectionCheckboxes",get:function(){return this.getIsSelectionCheckboxes()}},{key:"handleStartColumnOrderChanging",value:function(e){this.isColumnOrderChanging=!0,this.columnOrderChangeSourceId=e,this.onColumnOrderAttendantsChange(this.columnOrderChangeSourceId,this.columnOrderChangeTargetId)}},{key:"handleStopColumnOrderChanging",value:function(e){this.isColumnOrderChanging=!1,this.columnOrderChangeSourceId=void 0,this.columnOrderChangeTargetId=void 0,this.onColumnOrderAttendantsChange(this.columnOrderChangeSourceId,this.columnOrderChangeTargetId)}},{key:"handlePossibleColumnOrderChange",value:function(e){this.columnOrderChangeTargetId=e,this.onColumnOrderAttendantsChange(this.columnOrderChangeSourceId,this.columnOrderChangeTargetId)}},{key:"handleColumnOrderDrop",value:function(e){this.onColumnOrderChange(this.columnOrderChangeSourceId,e),this.onColumnOrderAttendantsChange(this.columnOrderChangeSourceId,this.columnOrderChangeTargetId)}},{key:"headerContainers",get:function(){var e=this.gridDimensions.displayedColumnDimensionsCom,t=wi(this.dataView),n=bi(this.dataView),r=t-(n?1:0),o=e.length-t,i=[];n&&i.push(new ZD({header:this.renderSelectionCheckBoxHeader(e[0].width),isFixed:!0,width:e[0].width}));for(var a=this.getFixedColumnCount(),s=0;s<r;s++)i.push(new ZD({header:this.renderDummyHeader(e[s].width,s),isFixed:a>s,width:e[s].width}));a-=r;for(var c=0;c<o;c++){var u=e[c+t].width;i.push(new ZD({header:this.renderDataHeader({columnIndex:c,columnWidth:u,isFirst:0===i.length,isLast:c===o-1,isFixed:a>c}),isFixed:a>c,width:u}))}return i}},{key:"renderDummyHeader",value:function(e,t){return Object(re.jsx)("div",{style:{minWidth:e+"px"}},"dummy-header-key-".concat(t))}},{key:"renderSelectionCheckBoxHeader",value:function(e){return Object(re.jsx)(PD,{width:e,dataView:this.dataView},"checkboxHeader")}},{key:"renderDataHeader",value:function(e){var t,n=this.tableViewProperties[e.columnIndex],r=this.columnHeaders[e.columnIndex];return Object(re.jsx)(K.Provider,{property:n,children:Object(re.jsx)(KS,{id:r.id,isFixed:e.isFixed,columnIndex:e.columnIndex,isLast:e.isLast,isFirst:e.isFirst,width:e.columnWidth,label:r.label,orderingDirection:r.ordering,orderingOrder:r.order+1,onColumnWidthChange:this.onColumnWidthChange,onColumnWidthChangeFinished:(t=this.tablePanelView,function(){var e=Object(i.a)(o.a.mark((function e(n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn({ctx:t,generator:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mo(t,n)){e.next=3;break}return e.delegateYield(It(t).configurationManager.onColumnWidthChanged(n,r),"t0",3);case 3:case"end":return e.stop()}}),e)}))()});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onClick:WI(this.tablePanelView),isDragDisabled:Ot(this.tablePanelView),additionalHeaderContent:this.makeAdditionalHeaderContent(r.id,n,0===e.columnIndex)},r.id)},n.id)}},{key:"makeAdditionalHeaderContent",value:function(e,t,n){var r=this.tablePanelView.filterConfiguration.isFilterControlsDisplayed;if(r||0!==this.dataView.aggregationData.length){var o=[];if(r&&o.push(Object(re.jsx)("div",{className:"filterRow",children:Object(re.jsx)(nO,{autoFocus:n,ctx:this.dataView},"filter-settings-".concat(e))})),0!==this.dataView.aggregationData.length){var i=this.dataView.aggregationData.find((function(t){return t.columnId===e}));i&&o.push(Object(re.jsx)("div",{className:HD.a.aggregationRow,children:rl(i,t)},"aggregation-field-".concat(e)))}return function(){return Object(re.jsx)(re.Fragment,{children:o})}}}}]),e}(),Object($.a)(UD.prototype,"tableViewPropertiesOriginal",[c.computed],Object.getOwnPropertyDescriptor(UD.prototype,"tableViewPropertiesOriginal"),UD.prototype),Object($.a)(UD.prototype,"tableViewProperties",[c.computed],Object.getOwnPropertyDescriptor(UD.prototype,"tableViewProperties"),UD.prototype),Object($.a)(UD.prototype,"columnHeaders",[c.computed],Object.getOwnPropertyDescriptor(UD.prototype,"columnHeaders"),UD.prototype),Object($.a)(UD.prototype,"isSelectionCheckboxes",[c.computed],Object.getOwnPropertyDescriptor(UD.prototype,"isSelectionCheckboxes"),UD.prototype),GD=Object($.a)(UD.prototype,"isColumnOrderChanging",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(UD.prototype,"handleStartColumnOrderChanging",[AD],Object.getOwnPropertyDescriptor(UD.prototype,"handleStartColumnOrderChanging"),UD.prototype),Object($.a)(UD.prototype,"handleStopColumnOrderChanging",[VD],Object.getOwnPropertyDescriptor(UD.prototype,"handleStopColumnOrderChanging"),UD.prototype),Object($.a)(UD.prototype,"handlePossibleColumnOrderChange",[ND],Object.getOwnPropertyDescriptor(UD.prototype,"handlePossibleColumnOrderChange"),UD.prototype),Object($.a)(UD.prototype,"handleColumnOrderDrop",[BD],Object.getOwnPropertyDescriptor(UD.prototype,"handleColumnOrderDrop"),UD.prototype),Object($.a)(UD.prototype,"headerContainers",[c.computed],Object.getOwnPropertyDescriptor(UD.prototype,"headerContainers"),UD.prototype),Object($.a)(UD.prototype,"renderDataHeader",[Le.a],Object.getOwnPropertyDescriptor(UD.prototype,"renderDataHeader"),UD.prototype),UD),ZD=function e(t){Object(q.a)(this,e),this.header=null,this.isFixed=null,this.width=null,Object.assign(this,t)},$D=n(392),JD=n.n($D),eR=(KD=c.action.bound,qD=c.action.bound,QD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ql(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BI(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rj();Object(q.a)(this,e),this.dataViewToolbarUI=t,this.dataViewBodyUI=n,this.tablePerspective=r,this.perspective=o,this.$iid=Du()}return Object(Q.a)(e,[{key:"setup",value:function(){var e=this;this.dataViewBodyUI.contrib.put({$iid:this.$iid,render:function(){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",{className:ne()(JD.a.root,"tablePerspectiveDirector",{isActive:e.tablePerspective.isActive}),children:Object(re.jsx)(YD,{})})}},e.$iid)}}),this.dataViewToolbarUI.contrib.put({$iid:this.$iid,section:Xl,render:function(){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(qO,{className:"tablePerspectiveButton",onMouseDown:Object(c.flow)(e.tablePerspective.handleToolbarBtnClick),isActive:e.tablePerspective.isActive,children:Object(re.jsx)(Ie.Icon,{src:"./icons/table-view.svg",tooltip:bt("Grid","grid_tool_tip")})})}},e.$iid)}}),this.perspective.contrib.put(this.tablePerspective)}},{key:"teardown",value:function(){this.dataViewBodyUI.contrib.del(this),this.dataViewToolbarUI.contrib.del(this),this.perspective.contrib.del(this.tablePerspective)}},{key:"dispose",value:function(){this.teardown()}}]),e}(),Object($.a)(QD.prototype,"setup",[KD],Object.getOwnPropertyDescriptor(QD.prototype,"setup"),QD.prototype),Object($.a)(QD.prototype,"teardown",[qD],Object.getOwnPropertyDescriptor(QD.prototype,"teardown"),QD.prototype),QD),tR=Ml("ITablePerspectiveDirector"),nR="TablePerspective";var rR="DataView";function oR(e){e.registerClass(rj,nj).scopedInstance(rR),function(e){e.registerClass(AI,LI).scopedInstance(VI),e.registerClass($k,Zk).scopedInstance(VI)}(e),function(e){e.registerClass(Nk,Vk).scopedInstance(Yk),e.registerClass(ij,oj).scopedInstance(Yk)}(e),function(e){e.registerClass(tR,eR).scopedInstance(nR),e.registerClass(BI,NI).scopedInstance(nR)}(e)}var iR,aR,sR,cR,uR,lR,dR,pR,hR,fR,bR,vR,yR,gR,mR,wR=function(){function e(){Object(q.a)(this,e)}return Object(Q.a)(e,[{key:"debounce",value:function(e,t){return ge.a.debounce(e,t)}},{key:"getTimeMs",value:function(){return(new Date).getTime()}},{key:"setInterval",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=setInterval(e,t);return function(){return clearInterval(n)}}))}]),e}(),OR=Ml("IClock"),jR=function(){function e(t){Object(q.a)(this,e),this.api=t}return Object(Q.a)(e,[{key:"getLookupLabels",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s,c,u,l,p,h,f,b,v,y,g,m,w,O,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(le.a)(t);try{for(r.s();!(i=r.n()).done;)a=Object(d.a)(i.value,2),s=a[0],c=a[1],n.push({LookupId:s,MenuId:void 0,LabelIds:Array.from(c.keys())})}catch(o){r.e(o)}finally{r.f()}return e.next=5,this.api().getLookupLabelsEx(n);case 5:for(u=e.sent,l=new Map,p=0,h=Object.entries(u);p<h.length;p++)for(f=Object(d.a)(h[p],2),b=f[0],v=f[1],l.has(b)||l.set(b,new Map),y=l.get(b),g=0,m=Object.entries(v);g<m.length;g++)w=Object(d.a)(m[g],2),O=w[0],j=w[1],y.set(O,j);return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kR=(Ml("ILookupApi"),iR=c.action.bound,aR=function(){function e(){Object(q.a)(this,e),this.items=new Map,this.heldLookupIds=new Set}return Object(Q.a)(e,[{key:"putValues",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r,o=Object(d.a)(n[t],2),i=o[0],a=o[1],s=Object(le.a)(a);try{for(s.s();!(r=s.n()).done;){var c=r.value;this.items.has(c)||this.items.set(c,new Set),this.items.get(c).add(i)}}catch(u){s.e(u)}finally{s.f()}this.heldLookupIds.add(i)}}},{key:"getUnhandledLookupIds",value:function(e){var t=this;return new Set(Array.from(e).filter((function(e){return!t.heldLookupIds.has(e)})))}},{key:"getDependencyLookupIdsByCacheKeys",value:function(e){var t,n=new Set,r=Object(le.a)(e);try{for(r.s();!(t=r.n()).done;){var o,i=t.value,a=this.items.get(i)||[],s=Object(le.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;n.add(c)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}return n}}]),e}(),Object($.a)(aR.prototype,"putValues",[iR],Object.getOwnPropertyDescriptor(aR.prototype,"putValues"),aR.prototype),aR),xR=(sR=c.action.bound,cR=function(){function e(t,n){Object(q.a)(this,e),this.lookupId=t,this.cache=n}return Object(Q.a)(e,[{key:"getLookupLabels",value:function(){return this.cache.getLookupLabels(this.lookupId)||new Map}},{key:"addLookupLabels",value:function(e){this.cache.addLookupLabels(this.lookupId,e)}},{key:"clean",value:function(){this.cache.clean(this.lookupId)}}]),e}(),Object($.a)(cR.prototype,"clean",[sR],Object.getOwnPropertyDescriptor(cR.prototype,"clean"),cR.prototype),cR),CR=(Ml("ILookupCacheIndividual"),uR=c.action.bound,lR=c.action.bound,dR=function(){function e(t,n){Object(q.a)(this,e),this.clock=t,this.cleanerReloader=n,this.labels=new Map,this.recordBirthdate=new Map,this.disposers=[]}return Object(Q.a)(e,[{key:"startup",value:function(){this.disposers.push(this.clock.setInterval(this.handleOutdatingTimerTick,6e4))}},{key:"teardown",value:function(){var e,t=Object(le.a)(this.disposers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"handleOutdatingTimerTick",value:function(){var e,t=this.clock.getTimeMs(),n=[],r=Object(le.a)(this.labels.keys());try{for(r.s();!(e=r.n()).done;){var o=e.value;t-this.recordBirthdate.get(o)>=6e5&&n.push(o)}}catch(c){r.e(c)}finally{r.f()}for(var i=0,a=n;i<a.length;i++){var s=a[i];this.cleanerReloader(s).reloadLookupLabels()}}},{key:"getLookupLabels",value:function(e){return this.labels.get(e)}},{key:"addLookupLabels",value:function(e,t){this.labels.has(e)||(this.labels.set(e,new Map),this.recordBirthdate.set(e,this.clock.getTimeMs()));var n,r=this.labels.get(e),o=Object(le.a)(t.entries());try{for(o.s();!(n=o.n()).done;){var i=Object(d.a)(n.value,2),a=i[0],s=i[1];r.set(a,s)}}catch(c){o.e(c)}finally{o.f()}}},{key:"clean",value:function(e){this.labels.delete(e),this.recordBirthdate.delete(e)}}]),e}(),Object($.a)(dR.prototype,"handleOutdatingTimerTick",[uR],Object.getOwnPropertyDescriptor(dR.prototype,"handleOutdatingTimerTick"),dR.prototype),Object($.a)(dR.prototype,"clean",[lR],Object.getOwnPropertyDescriptor(dR.prototype,"clean"),dR.prototype),dR),IR=(Ml("ILookupCacheMulti"),function(){function e(t,n){Object(q.a)(this,e),this.cache=t,this.resolver=n}return Object(Q.a)(e,[{key:"reloadLookupLabels",value:function(){this.cache.clean(),this.resolver.cleanAndReload()}}]),e}()),SR=(Ml("ILookupLabelsCleanerReloader"),Ml("IGetLookupLabelsCleanerReloader"),function(){function e(){Object(q.a)(this,e),this.idGen=1,this.handlers=new Map}return Object(Q.a)(e,[{key:"subscribe",value:function(e){var t=this,n=this.idGen++;return this.handlers.set(n,e),function(){return t.handlers.delete(n)}}},{key:"trigger",value:function(e){var t,n=Object(le.a)(this.handlers.values());try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}}]),e}()),DR=(pR=c.action.bound,hR=function(){function e(t,n){Object(q.a)(this,e),this.lookupId=t,this.loader=n,this.resultListeners=new SR}return Object(Q.a)(e,[{key:"handleResultingLabels",value:function(e){var t,n=Object(le.a)(e.labels.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(d.a)(t.value,2),o=r[0],i=r[1];o===this.lookupId&&this.resultListeners.trigger({labels:i})}}catch(a){n.e(a)}finally{n.f()}}},{key:"setInterrest",value:function(e){this.loader.setInterrest(this.lookupId,e)}},{key:"resetInterrest",value:function(e){this.loader.resetInterrest(this.lookupId,e)}},{key:"loadList",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loader.loadList(this.lookupId,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isWorking",value:function(e){return this.loader.isWorking(this.lookupId,e)}}]),e}(),Object($.a)(hR.prototype,"handleResultingLabels",[pR],Object.getOwnPropertyDescriptor(hR.prototype,"handleResultingLabels"),hR.prototype),hR),RR=(Ml("ILookupLoaderIndividual"),fR=c.action.bound,bR=function(){function e(t,n){Object(q.a)(this,e),this.clock=t,this.api=n,this.interrests=new Map,this.loading=new Map,this.loadingAtom=Object(c.createAtom)("LookupLoading",(function(){}),(function(){})),this.resultListeners=new SR,Object(de.a)(this,"isLoading",vR,this),this.triggerLoadDeb=function(){},this.triggerLoadDeb=t.debounce(this.triggerLoadImm,667)}return Object(Q.a)(e,[{key:"triggerLoadImm",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,i,a,s,c,u,l,p,h,f,b,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}return e.abrupt("return");case 2:e.prev=2;case 3:this.isLoading=!0,t=Object(le.a)(this.interrests.entries());try{for(t.s();!(n=t.n()).done;)r=Object(d.a)(n.value,2),i=r[0],a=r[1],this.loading.set(i,a)}catch(o){t.e(o)}finally{t.f()}return this.interrests.clear(),this.loadingAtom.reportChanged(),e.next=10,this.api.getLookupLabels(this.loading);case 10:s=e.sent,c=Object(le.a)(s.entries()),e.prev=12,c.s();case 14:if((u=c.n()).done){e.next=24;break}if(l=Object(d.a)(u.value,2),p=l[0],h=l[1],p=String(p).toLowerCase(),this.loading.has(p)){e.next=19;break}return e.abrupt("continue",22);case 19:f=Object(le.a)(h.keys());try{for(f.s();!(b=f.n()).done;)v=b.value,v=String(v).toLowerCase(),this.loading.get(p).delete(v)}catch(o){f.e(o)}finally{f.f()}0===this.loading.get(p).size&&this.loading.delete(p);case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),c.e(e.t0);case 29:return e.prev=29,c.f(),e.finish(29);case 32:this.loadingAtom.reportChanged(),this.resultListeners.trigger({labels:s});case 34:if(this.interrests.size>0){e.next=3;break}case 35:return e.prev=35,this.isLoading=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[2,,35,38],[12,26,29,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"setInterrest",value:function(e,t){this.loading.has(e)&&this.loading.get(e).has(t)||(this.interrests.has(e)||this.interrests.set(e,new Map),this.interrests.get(e).set(t,!0),this.triggerLoadDeb())}},{key:"resetInterrest",value:function(e,t){if(this.interrests.has(e)){var n=this.interrests.get(e);n.delete(t),0===n.size&&this.interrests.delete(e)}}},{key:"loadList",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.getLookupLabels(new Map([[t,new Map(Array.from(n.keys()).map((function(e){return[e,!0]})))]])));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isWorking",value:function(e,t){var n;return this.loadingAtom.reportObserved(),(null===(n=this.loading.get(e))||void 0===n?void 0:n.has(t))||!1}}]),e}(),vR=Object($.a)(bR.prototype,"isLoading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(bR.prototype,"triggerLoadImm",[fR],Object.getOwnPropertyDescriptor(bR.prototype,"triggerLoadImm"),bR.prototype),bR),TR=(Ml("ILookupLoaderMulti"),yR=c.action.bound,gR=c.action.bound,mR=function(){function e(t,n){Object(q.a)(this,e),this.cache=t,this.loader=n,this.resolved=new Map,this.atoms=new Map,this.globalAtom=Object(c.createAtom)("LookupGlobal",(function(){}),(function(){}))}return Object(Q.a)(e,[{key:"handleAtomObserved",value:function(e,t){this.atoms.set(e,t),this.resolved.has(e)||this.loader.setInterrest(e)}},{key:"handleAtomUnobserved",value:function(e,t){this.atoms.delete(e),this.loader.resetInterrest(e)}},{key:"cleanAndReload",value:function(){var e,t=[],n=Object(le.a)(this.resolved.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.atoms.has(r)?this.loader.setInterrest(r):t.push(r)}}catch(s){n.e(s)}finally{n.f()}for(var o=0,i=t;o<i.length;o++){var a=i[o];this.resolved.delete(a)}this.globalAtom.reportChanged()}},{key:"handleResultingLabels",value:function(e){var t,n=Object(le.a)(e.labels);try{for(n.s();!(t=n.n()).done;){var r=Object(d.a)(t.value,2),o=r[0],i=r[1];this.resolved.set(o,i)}}catch(a){n.e(a)}finally{n.f()}this.cache.addLookupLabels(this.resolved),this.globalAtom.reportChanged()}},{key:"resolveValue",value:function(e){var t=this;ge.a.isString(e)&&(e=String(e).toLowerCase());var n=null;if(this.globalAtom.reportObserved(),this.resolved.has(e)&&(n=this.resolved.get(e)),null===n){var r=this.cache.getLookupLabels();r.has(e)&&(this.resolved.set(e,r.get(e)),n=this.resolved.get(e))}if(this.atoms.has(e)){this.atoms.get(e).reportObserved()}else{var o=Object(c.createAtom)("ALookup@".concat(e),(function(){return t.handleAtomObserved(e,o)}),(function(){return t.handleAtomUnobserved(e,o)}));o.reportObserved()}return n}},{key:"resolveList",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Set(t),r=this.cache.getLookupLabels(),i=new Map,a=0,s=Array.from(n.keys());a<s.length;a++)c=s[a],this.resolved.has(c)&&(n.delete(c),i.set(c,this.resolved.get(c))),r.has(c)&&(n.delete(c),i.set(c,r.get(c)));return e.next=6,this.loader.loadList(n);case 6:if(u=e.sent,1!==(l=Array.from(u)).length){e.next=13;break}return this.cache.addLookupLabels(u),d=l[0][1],this.resolved=new Map([].concat(Object(gt.a)(d),Object(gt.a)(this.resolved))),e.abrupt("return",new Map([].concat(Object(gt.a)(d),Object(gt.a)(i))));case 13:if(0!==l.length){e.next=15;break}return e.abrupt("return",i);case 15:throw new Error("More that one lookup result maps");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isEmptyAndLoading",value:function(e){return ge.a.isString(e)&&(e=String(e).toLowerCase()),!this.resolved.has(e)&&this.loader.isWorking(e)}}]),e}(),Object($.a)(mR.prototype,"cleanAndReload",[yR],Object.getOwnPropertyDescriptor(mR.prototype,"cleanAndReload"),mR.prototype),Object($.a)(mR.prototype,"handleResultingLabels",[gR],Object.getOwnPropertyDescriptor(mR.prototype,"handleResultingLabels"),mR.prototype),mR);Ml("ILookupResolver"),Ml("ILookupScopeRegistry"),Ml("ILookupId");function _R(e,t){var n=t.lookupCacheMulti,r=t.lookupLoaderMulti,o=t.lookupCleanerReloaderById,i=new xR(e,n),a=new DR(e,r),s=new TR(i,a),c=new IR(i,s);a.resultListeners.subscribe(s.handleResultingLabels);var u=[];return{lookupResolver:s,lookupCleanerReloader:c,startup:function(){o.set(e,c),u.push(t.lookupLoaderMulti.resultListeners.subscribe(a.handleResultingLabels))},teardown:function(){o.delete(e);var t,n=Object(le.a)(u);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(r){n.e(r)}finally{n.f()}},cleanAndReload:function(){c.reloadLookupLabels()}}}var PR=function e(){Object(q.a)(this,e),this.focusField=new Fb},FR=Ml("IScreenEvents"),MR="FormScreen";var LR="Screen";function ER(e){!function(e){e.registerClass(FR,PR).scopedInstance(MR)}(e)}var AR,VR=new xl({defaultLifetime:vl.PerLifetimeScope});(function(e){e.registerClass(Kl,Yl).scopedInstance(rR),e.registerClass(Ql,ql).scopedInstance(rR),oR(e)})(AR=VR),oR(AR),ER(AR);var NR,BR,UR,GR,WR=VR,HR=function(){function e(t,n,r){Object(q.a)(this,e),this.getDataStructureEntityId=t,this.getEntity=n,this.api=r}return Object(Q.a)(e,[{key:"getLookupList",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.api().getLookupList(Object(Fe.a)(Object(Fe.a)({},t),{},{DataStructureEntityId:this.getDataStructureEntityId(),Entity:this.getEntity()})),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))}]),e}(),zR=(Ml("IDataViewAPI"),Ml("IRowCursor")),YR=(NR=function(){function e(t){Object(q.a)(this,e),this.getSelectedRowId=t}return Object(Q.a)(e,[{key:"selectedId",get:function(){return this.getSelectedRowId()}}]),e}(),Object($.a)(NR.prototype,"selectedId",[c.computed],Object.getOwnPropertyDescriptor(NR.prototype,"selectedId"),NR.prototype),NR),KR=(Ml("IColumnCursor"),BR=function(){function e(t){Object(q.a)(this,e),this.getSelectedColumnId=t}return Object(Q.a)(e,[{key:"selectedId",get:function(){return this.getSelectedColumnId()}}]),e}(),Object($.a)(BR.prototype,"selectedId",[c.computed],Object.getOwnPropertyDescriptor(BR.prototype,"selectedId"),BR.prototype),function(){function e(t,n){Object(q.a)(this,e),this.dataTable=t,this.propertyById=n}return Object(Q.a)(e,[{key:"getCellValue",value:function(e,t){var n=this.dataTable(),r=this.propertyById(t),o=n.getRowById(e);return r&&o?n.getCellValue(o,r):null}},{key:"getCellText",value:function(e,t){var n=this.propertyById(e);return n&&t?this.dataTable().resolveCellText(n,t):null}},{key:"getIsCellTextLoading",value:function(e,t){var n=this.propertyById(e);return!(!n||!t)&&this.dataTable().isCellTextResolving(n,t)}},{key:"setNewValue",value:function(e,t,n){var r=this.dataTable().getRowById(e),o=this.propertyById(t);o&&r&&Sc(o)({event:void 0,row:r,property:o,value:n})}}]),e}()),qR=(Ml("IDataViewData"),function(){function e(t,n,r){Object(q.a)(this,e),this.getSessionId=t,this.getMenuItemId=n,this.api=r}return Object(Q.a)(e,[{key:"getLookupList",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api().getLookupList(Object(Fe.a)(Object(Fe.a)({},t),{},{SessionFormIdentifier:this.getSessionId(),MenuId:this.getMenuItemId()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))}]),e}()),QR=(Ml("IScreenAPI"),n(90)),XR=n.n(QR),ZR=n(393),$R=n.n(ZR);!function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop"}(UR||(UR={})),function(e){e[e.Id=0]="Id",e[e.DateTime=1]="DateTime",e[e.UserName=2]="UserName",e[e.FieldName=3]="FieldName",e[e.OldValue=4]="OldValue",e[e.NewValue=5]="NewValue",e[e.ActionType=6]="ActionType"}(GR||(GR={}));var JR,eT,tT,nT,rT,oT,iT,aT,sT,cT=function(){function e(t){Object(q.a)(this,e),this.onApiResponse=new Fb,this.errorHandler=void 0,this.axiosInstance=void 0,this.urlPrefix=void 0,this.chatroomsUrlPrefix=void 0,this.accessToken="",this.urlPrefix="/internalApi",this.chatroomsUrlPrefix="/chatrooms",this.axiosInstance=this.createAxiosInstance(),this.errorHandler=t}return Object(Q.a)(e,[{key:"createAxiosInstance",value:function(){var e=this,t=s.a.create({baseURL:this.urlPrefix,headers:this.httpAuthHeader});return t.interceptors.response.use((function(t){return e.onApiResponse.trigger({}),t}),function(){var t=Object(i.a)(o.a.mark((function t(n){var r,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Blob"!==(null===(r=n.response)||void 0===r||null===(i=r.data)||void 0===i||null===(a=i.constructor)||void 0===a?void 0:a.name)){t.next=4;break}return t.next=3,n.response.data.text();case 3:n.response.data=t.sent;case 4:throw s.a.isCancel(n)||e.errorHandler(n),n;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t}},{key:"setAccessToken",value:function(e){this.accessToken=e,this.axiosInstance=this.createAxiosInstance()}},{key:"resetAccessToken",value:function(){this.accessToken=""}},{key:"httpAuthHeader",get:function(){return{Authorization:"Bearer ".concat(this.accessToken)}}},{key:"createCanceller",value:function(){var e=s.a.CancelToken.source(),t=e.token,n=function(){e.cancel()};return n.token=t,n}},{key:"_getCancelToken",value:function(e){return e.any}},{key:"login",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/User/Login",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/User/Logout",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getScreen",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=XR.a,e.next=3,this.axiosInstance.get("/UI/GetUI",{params:{id:t},headers:this.httpAuthHeader});case 3:return e.t1=e.sent.data,e.t2={addParent:!0,alwaysChildren:!0},e.abrupt("return",e.t0.xml2js.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initUI",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/InitUI",t);case 2:return n=e.sent.data,e.abrupt("return",Object(Fe.a)(Object(Fe.a)({},n),{},{formDefinition:XR.a.xml2js(n.formDefinition,{addParent:!0,alwaysChildren:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroyUI",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/DestroyUI/".concat(t.FormSessionId));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntities",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Data/GetRows",t);case 2:if(n=e.sent.data,!ge.a.isString(n.data)){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLookupLabels",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetLookupLabels",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLookupLabelsEx",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length||0!==t[0].LabelIds.length){e.next=2;break}return e.abrupt("return",{LookupId:{}});case 2:return e.next=4,this.axiosInstance.post("/UIService/GetLookupLabelsEx",t);case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"newEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Data/NewEmptyRow",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.put("/Data/Row",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"postEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Data/Row",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.request({url:"".concat(this.urlPrefix,"/Data/Row"),method:"DELETE",data:t,headers:this.httpAuthHeader});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createSession",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Session/CreateSession",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSession",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSession",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/SaveData/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveSessionQuery",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/SaveDataQuery/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshSession",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/RefreshData/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"revertChanges",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/RevertChanges",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sessionChangeMasterRecord",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Session/ChangeMasterRecord",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sessionDeleteEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Session/DeleteRow",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sessionCreateEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Session/CreateRow",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sessionGetEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/Session/Rows",{params:t,headers:this.httpAuthHeader});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sessionUpdateEntity",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Session/UpdateRow",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLookupList",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetLookupList",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLookupCacheDependencies",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetLookupCacheDependencies",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNotificationBoxContent",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/GetNotificationBoxContent");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"defaultLocalizationCookie",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/DefaultLocalizationCookie");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initPortal",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/InitPortal");case 2:return t=e.sent.data,e.abrupt("return",Object(Fe.a)(Object(Fe.a)({},t),{},{menu:XR.a.xml2js(t.menu,{addParent:!0,alwaysChildren:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMasterRecord",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/MasterRecord",t,{headers:this.httpAuthHeader,cancelToken:n&&n.token});case 2:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.data;case 11:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t5=r,e.next=20;break;case 19:e.t5=[];case 20:return e.abrupt("return",e.t5);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"restoreData",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/RestoreData",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateObject",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/UpdateObject",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createObject",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/CreateObject",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"copyObject",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/CopyObject",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteObject",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/DeleteObject",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteObjectInOrderedList",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/DeleteObjectInOrderedList",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeActionQuery",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/ExecuteActionQuery",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeAction",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/ExecuteAction",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFilterListValues",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetFilterListValues",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGroups",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetGroups",t);case 2:if(!((n=e.sent.data).length>5e4)){e.next=5;break}throw new Error(bt("There are too many groups, choose different grouping options please.","too_many_groups"));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAggregations",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetAggregations",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRows",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetRows",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRow",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetRow",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetData",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReportFromMenu",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/ReportFromMenu/".concat(t.menuId));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRowStates",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/RowStates",t);case 2:n=e.sent.data,r=Object(le.a)(n);try{for(r.s();!(i=r.n()).done;)(a=i.value).id=a.id.toString()}catch(o){r.e(o)}finally{r.f()}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveFavorites",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/SaveFavorites",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWorkQueueList",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/WorkQueueList");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChatroomList",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(this.chatroomsUrlPrefix,"/Chat"),{headers:this.httpAuthHeader});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveObjectConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",t.customConfigurations&&(r=Object.entries(t.customConfigurations).filter((function(e){return e[0]&&e[1]})).map((function(e){var t=window.btoa(decodeURIComponent(encodeURIComponent(e[1])));return"<".concat(e[0],"Configuration>\n").concat(t,"\n</").concat(e[0],"Configuration>")}))).length>0&&(n="<CustomConfigurations>\n".concat(r.join("\n"),"\n</CustomConfigurations>")),i=t.tableConfigurations.map((function(e){var t;return"<TableConfiguration"+' name="'.concat(null!==(t=e.name)&&void 0!==t?t:"",'"')+' fixedColumnCount="'.concat(e.fixedColumnCount,'"')+' isActive="'.concat(e.isActive,'"')+' id="'.concat(e.id,'"')+' layout="'.concat(e.layout===UR.Mobile?"Mobile":"Desktop",'"')+">"+e.columnConfigurations.map((function(e){return"<ColumnConfiguration"+' propertyId="'.concat(e.propertyId,'"')+' width="'.concat(e.width,'"')+(void 0!==e.timeGroupingUnit?' groupingUnit="'.concat(e.timeGroupingUnit,'"'):"")+(e.groupingIndex>0?' groupingIndex="'.concat(e.groupingIndex,'"'):"")+' isVisible="'.concat(e.isVisible,'"')+(e.aggregationType?' aggregationType="'.concat(e.aggregationType,'"'):"")+"/>"})).join("\n")+"</TableConfiguration>"})),e.next=5,this.axiosInstance.post("/UIService/SaveObjectConfig",{ObjectInstanceId:t.instanceId,SectionNameAndData:{tableConfigurations:i.join("\n"),customConfigurations:n,defaultView:'<view id="'.concat(t.defaultView,'" />')}});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetScreenColumnConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/ResetScreenColumnConfiguration",{ObjectInstanceId:t.instanceId});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveSplitPanelConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/SaveSplitPanelConfig",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"workflowAbort",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/WorkflowAbort/".concat(t.sessionFormIdentifier));case 2:return n=e.sent.data,e.abrupt("return",Object(Fe.a)(Object(Fe.a)({},n),{},{formDefinition:XR.a.xml2js(n.formDefinition,{addParent:!0,alwaysChildren:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"workflowRepeat",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/WorkflowRepeat/".concat(t.sessionFormIdentifier));case 2:return n=e.sent.data,e.abrupt("return",Object(Fe.a)(Object(Fe.a)({},n),{},{formDefinition:XR.a.xml2js(n.formDefinition,{addParent:!0,alwaysChildren:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"workflowNext",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/WorkflowNext",{SessionFormIdentifier:t.sessionFormIdentifier,CachedFormIds:t.CachedFormIds});case 2:return n=e.sent.data,e.abrupt("return",Object(Fe.a)(Object(Fe.a)({},n),{},{formDefinition:XR.a.xml2js(n.formDefinition,{addParent:!0,alwaysChildren:!0})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"workflowNextQuery",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/WorkflowNextQuery/".concat(t.sessionFormIdentifier));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecordInfo",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetRecordTooltip",t);case 2:return e.abrupt("return",e.sent.data.tooltip);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecordAudit",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetAudit",t);case 2:return e.abrupt("return",e.sent.data.data.map((function(e){return{id:e[GR.Id],dateTime:e[GR.DateTime],userName:e[GR.UserName],fieldName:e[GR.FieldName],oldValue:e[GR.OldValue],newValue:e[GR.NewValue],actionType:e[GR.ActionType]}})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReport",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get(t.reportUrl);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDownloadToken",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Blob/DownloadToken",{SessionFormIdentifier:t.SessionFormIdentifier,MenuId:t.MenuId,DataStructureEntityId:t.DataStructureEntityId,Entity:t.Entity,RowId:t.RowId,Property:t.Property,IsPreview:t.isPreview,Parameters:t.parameters});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBlob",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat(this.urlPrefix,"/Blob/").concat(t.downloadToken));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUploadToken",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Blob/UploadToken",{SessionFormIdentifier:t.SessionFormIdentifier,MenuId:t.MenuId,DataStructureEntityId:t.DataStructureEntityId,Entity:t.Entity,RowId:t.RowId,Property:t.Property,IsPreview:!1,Parameters:t.parameters,SubmitImmediately:"true"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putBlob",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/Blob/".concat(t.uploadToken,"/").concat(t.fileName),t.file,{headers:Object(Fe.a)(Object(Fe.a)({},this.httpAuthHeader),{},{"content-type":"application/octet-stream"}),onUploadProgress:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"pendingChanges",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/UIService/PendingChanges/".concat(t.sessionFormIdentifier));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changes",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/Changes",{SessionFormIdentifier:t.SessionFormIdentifier,Entity:t.Entity,RowId:t.RowId});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/SaveFilter",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/DeleteFilter",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetDefaultFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/ResetDefaultFilter",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultFilter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/SetDefaultFilter",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/Search/".concat(encodeURIComponent(t)));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAboutInfo",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/About");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMenuId",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/UIService/GetMenuId",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExcelFile",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance({url:"/ExcelExport/GetFile",method:"POST",data:t,responseType:"blob"});case 2:n=e.sent,r=/filename=([^\s;]*)/g,i="export.xls",n.headers["content-disposition"]&&(s=null===(a=r.exec(n.headers["content-disposition"]))||void 0===a?void 0:a[1])&&(i=s),$R()(n.data,i);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMenuIdByReference",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.post("/DeepLink/GetMenuId",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),uT=Ml("IOrigamAPI");function lT(e,t){return{filters:e.details.map((function(e){var n=t.find((function(t){return t.id===e.property}));if(n){var r="ComboBox"===n.column?new Fw(Hb(e.operator,n.column),!0,e.value1,e.value2):new Nb(Hb(e.operator,n.column),!0,e.value1,e.value2);return{propertyId:e.property,dataType:n.column,setting:r}}})),id:e.id,isGlobal:e.isGlobal,name:e.name}}function dT(e,t,n){e.filterGroups=n.filters.map((function(e){return lT(e,t)})).filter((function(e){return e})),n.initialFilter&&(e.defaultFilter=lT(n.initialFilter,t))}var pT,hT,fT,bT,vT,yT,gT,mT,wT,OT,jT,kT,xT,CT,IT,ST,DT,RT=(JR=c.action.bound,eT=c.action.bound,tT=c.action.bound,nT=c.action.bound,rT=c.action.bound,oT=c.action.bound,iT=c.action.bound,aT=function(){function e(t){var n=this;Object(q.a)(this,e),this.filterConfiguration=t,this.ctx=void 0,this.filterGroups=[],this._defaultFilter=void 0,Object(de.a)(this,"selectedFilterGroup",sT,this),this.parent=void 0,this.ctx=t,t.registerFilteringOnOffHandler((function(e){e||(n.selectedFilterGroup=void 0)}))}return Object(Q.a)(e,[{key:"isSelectedFilterGroupDefault",get:function(){var e,t;return!!this.selectedFilterGroup&&(null===(e=this.defaultFilter)||void 0===e?void 0:e.id)===(null===(t=this.selectedFilterGroup)||void 0===t?void 0:t.id)}},{key:"filtersHidden",get:function(){return!this.filterConfiguration.isFilterControlsDisplayed}},{key:"defaultFilter",get:function(){return this._defaultFilter},set:function(e){this._defaultFilter=e,this.setFilterGroup(this._defaultFilter)}},{key:"activeFilters",get:function(){return this.filterConfiguration.activeFilters}},{key:"noFilterActive",get:function(){return 0===this.activeFilters.length||this.activeFilters.every((function(e){return!e.setting.isComplete}))}},{key:"setFilterGroup",value:function(e){var t;this.selectedFilterGroup=function(e){if(e)return{filters:e.filters.map((function(e){return{propertyId:e.propertyId,dataType:e.dataType,setting:"ComboBox"===e.dataType?new Fw(e.setting.type,e.setting.isComplete,e.setting.val1,e.setting.val2):new Nb(e.setting.type,e.setting.isComplete,e.setting.val1,e.setting.val2)}})),id:e.id,isGlobal:e.isGlobal,name:e.name}}(e),this.filterConfiguration.clearFilters(),(null===(t=this.selectedFilterGroup)||void 0===t?void 0:t.filters)&&this.filterConfiguration.setFilters(this.selectedFilterGroup.filters)}},{key:"filterToServerVersion",value:function(e){return{operator:Wb(e.setting.type),property:e.propertyId,value1:e.setting.val1ServerForm,value2:e.setting.val2ServerForm}}},{key:"getFilterGroupServerVersion",value:function(e,t){var n=this;return{details:this.activeFilters.filter((function(e){return e.setting.isComplete})).map((function(e){return n.filterToServerVersion(e)})),id:void 0,isGlobal:t,name:e}}},{key:"clearFiltersAndClose",value:function(e){this.filterConfiguration.onFilterDisplayClick(e)}},{key:"saveActiveFiltersAsNewFilterGroup",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(this.ctx),e.next=3,r.saveFilter({DataStructureEntityId:un(this.ctx),PanelId:Be(this.ctx).modelId,Filter:this.getFilterGroupServerVersion(t,n),IsDefault:!1});case 3:i=e.sent,a={filters:this.activeFilters,id:i,isGlobal:n,name:t},this.filterGroups.push(a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteFilterGroup",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedFilterGroup){e.next=2;break}return e.abrupt("return");case 2:return t=l(this.ctx),e.next=5,t.deleteFilter({filterId:this.selectedFilterGroup.id});case 5:(n=this.filterGroups.findIndex((function(e){var t;return e.id===(null===(t=r.selectedFilterGroup)||void 0===t?void 0:t.id)})))>-1&&this.filterGroups.splice(n,1),this.filterConfiguration.clearFilters(),this.selectedFilterGroup=void 0;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetDefaultFilterGroup",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._defaultFilter){e.next=2;break}return e.abrupt("return");case 2:return t=l(this.ctx),e.next=5,t.resetDefaultFilter({SessionFormIdentifier:Wn(this.ctx),PanelInstanceId:Be(this.ctx).modelInstanceId});case 5:this._defaultFilter=void 0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelSelectedFilter",value:function(){this.filterConfiguration.clearFilters(),this.selectedFilterGroup=void 0}},{key:"setSelectedFilterGroupAsDefault",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(this.ctx),e.next=3,t.setDefaultFilter({SessionFormIdentifier:Wn(this.ctx),PanelInstanceId:Be(this.ctx).modelInstanceId,DataStructureEntityId:un(this.ctx),PanelId:Be(this.ctx).modelId,Filter:this.getFilterGroupServerVersion("DEFAULT",!1),IsDefault:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sT=Object($.a)(aT.prototype,"selectedFilterGroup",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(aT.prototype,"setFilterGroup",[JR],Object.getOwnPropertyDescriptor(aT.prototype,"setFilterGroup"),aT.prototype),Object($.a)(aT.prototype,"clearFiltersAndClose",[eT],Object.getOwnPropertyDescriptor(aT.prototype,"clearFiltersAndClose"),aT.prototype),Object($.a)(aT.prototype,"saveActiveFiltersAsNewFilterGroup",[tT],Object.getOwnPropertyDescriptor(aT.prototype,"saveActiveFiltersAsNewFilterGroup"),aT.prototype),Object($.a)(aT.prototype,"deleteFilterGroup",[nT],Object.getOwnPropertyDescriptor(aT.prototype,"deleteFilterGroup"),aT.prototype),Object($.a)(aT.prototype,"resetDefaultFilterGroup",[rT],Object.getOwnPropertyDescriptor(aT.prototype,"resetDefaultFilterGroup"),aT.prototype),Object($.a)(aT.prototype,"cancelSelectedFilter",[oT],Object.getOwnPropertyDescriptor(aT.prototype,"cancelSelectedFilter"),aT.prototype),Object($.a)(aT.prototype,"setSelectedFilterGroupAsDefault",[iT],Object.getOwnPropertyDescriptor(aT.prototype,"setSelectedFilterGroupAsDefault"),aT.prototype),aT),TT=(pT=function(){function e(t,n){Object(q.a)(this,e),this.propertyId=t,Object(de.a)(this,"aggregationType",hT,this),Object(de.a)(this,"groupingIndex",fT,this),Object(de.a)(this,"isVisible",bT,this),Object(de.a)(this,"timeGroupingUnit",vT,this),Object(de.a)(this,"width",yT,this),this.width=n}return Object(Q.a)(e,[{key:"deepClone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),e}(),hT=Object($.a)(pT.prototype,"aggregationType",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fT=Object($.a)(pT.prototype,"groupingIndex",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bT=Object($.a)(pT.prototype,"isVisible",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vT=Object($.a)(pT.prototype,"timeGroupingUnit",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yT=Object($.a)(pT.prototype,"width",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pT),_T=(kT=jT=function(){function e(){Object(q.a)(this,e),this.name=void 0,Object(de.a)(this,"fixedColumnCount",mT,this),Object(de.a)(this,"columnConfigurations",wT,this),Object(de.a)(this,"isActive",OT,this),this.id="",this.layout=UR.Desktop}return Object(Q.a)(e,[{key:"isGrouping",get:function(){return this.columnConfigurations.some((function(e){return e.groupingIndex>0}))}},{key:"deepClone",value:function(){var t=new e;return t.name=this.name,t.id=this.id,t.fixedColumnCount=this.fixedColumnCount,t.columnConfigurations=this.columnConfigurations.map((function(e){return e.deepClone()})),t.layout=this.layout,t}},{key:"apply",value:function(e){var t=this,n=Vs(e);e.fixedColumnCount=this.fixedColumnCount,e.hiddenPropertyIds.clear(),e.groupingConfiguration.clearGrouping();var r,o=Object(le.a)(this.columnConfigurations);try{var i=function(){var o=r.value;o.isVisible||e.setPropertyHidden(o.propertyId,!0),e.aggregations.setType(o.propertyId,o.aggregationType),o.groupingIndex>0&&e.groupingConfiguration.setGrouping(o.propertyId,o.timeGroupingUnit,o.groupingIndex);var i=n.find((function(e){return e.id===o.propertyId}));i&&o.width>0&&i.setColumnWidth(o.width),e.tablePropertyIds=e.tablePropertyIds.slice().sort((function(e,n){var r=t.columnConfigurations.findIndex((function(t){return t.propertyId===e}));if(-1===r)return 0;var o=t.columnConfigurations.findIndex((function(e){return e.propertyId===n}));return-1===o?0:r-o}))};for(o.s();!(r=o.n()).done;)i()}catch(a){o.e(a)}finally{o.f()}}},{key:"sortColumnConfigurations",value:function(e){this.columnConfigurations=this.columnConfigurations.slice().sort((function(t,n){var r=e.findIndex((function(e){return e===t.propertyId}));if(-1===r)return 0;var o=e.findIndex((function(e){return e===n.propertyId}));return-1===o?0:r-o}))}},{key:"updateColumnWidth",value:function(e,t){var n=this.columnConfigurations.find((function(t){return t.propertyId===e}));n&&(n.width=t)}}],[{key:"create",value:function(t){var n,r=new e;return r.name=t.name,r.id=t.id,r.isActive=t.isActive,r.fixedColumnCount=null!==(n=t.fixedColumnCount)&&void 0!==n?n:0,r.columnConfigurations=t.columnConfigurations,r.layout="Mobile"===t.layout?UR.Mobile:UR.Desktop,r}},{key:"createDefault",value:function(t,n){var r=new e;return r.id=this.DefaultConfigId,r.columnConfigurations=t.map((function(e){return new TT(e.id,e.width)})),r.layout=n,r}}]),e}(),jT.DefaultConfigId="default",gT=kT,mT=Object($.a)(gT.prototype,"fixedColumnCount",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wT=Object($.a)(gT.prototype,"columnConfigurations",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),OT=Object($.a)(gT.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gT),PT=(xT=c.observable.shallow,CT=c.observable.shallow,IT=function(){function e(t,n,r,o){Object(q.a)(this,e),this.layout=o,this.parent=void 0,Object(de.a)(this,"customTableConfigurations",ST,this),Object(de.a)(this,"defaultTableConfiguration",DT,this),this.customConfigurationsMap=void 0,this.defaultTableConfiguration=n,this.customTableConfigurations=t,this.customConfigurationsMap=new Map(r.map((function(e){return[e.name,e.value]})))}return Object(Q.a)(e,[{key:"allTableConfigurations",get:function(){return this.defaultTableConfiguration?[this.defaultTableConfiguration].concat(Object(gt.a)(this.customTableConfigurations)):this.customTableConfigurations}},{key:"activeTableConfiguration",get:function(){var e=this.allTableConfigurations.find((function(e){return e.isActive}));return e||(this.defaultTableConfiguration.isActive=!0,this.defaultTableConfiguration)},set:function(e){var t=this.activeTableConfiguration.isGrouping;this.replace(e);var n,r=Object(le.a)(this.allTableConfigurations);try{for(r.s();!(n=r.n()).done;){n.value.isActive=!1}}catch(i){r.e(i)}finally{r.f()}e.isActive=!0;var o=It(this);e.apply(o),t!==e.isGrouping&&Ae(this).loadInitialData()}},{key:"replace",value:function(e){var t=this.customTableConfigurations.findIndex((function(t){return t.id===e.id}));t>-1?this.customTableConfigurations[t]=e:e.id===_T.DefaultConfigId?this.defaultTableConfiguration=e:this.customTableConfigurations.push(e)}},{key:"cloneAndActivate",value:function(e,t){var n=e.deepClone();n.name=t,n.id=Object(nI.a)(),this.customTableConfigurations.push(n),this.activeTableConfiguration=n}},{key:"getCustomConfiguration",value:function(e){return this.customConfigurationsMap.get(e)}},{key:"setCustomConfiguration",value:function(e,t){this.customConfigurationsMap.set(e,t)}},{key:"deleteActiveTableConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.defaultTableConfiguration.isActive){e.next=2;break}return e.abrupt("return");case 2:this.customTableConfigurations.remove(this.activeTableConfiguration),this.activeTableConfiguration=this.defaultTableConfiguration;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onColumnWidthChanged",value:o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.defaultTableConfiguration.isActive){e.next=2;break}return e.abrupt("return");case 2:this.activeTableConfiguration.updateColumnWidth(t,n);case 3:case"end":return e.stop()}}),e,this)}))},{key:"onColumnOrderChanged",value:o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.defaultTableConfiguration.isActive){e.next=2;break}return e.abrupt("return");case 2:t=It(this),this.activeTableConfiguration.sortColumnConfigurations(t.tablePropertyIds);case 4:case"end":return e.stop()}}),e,this)}))}]),e}(),ST=Object($.a)(IT.prototype,"customTableConfigurations",[xT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DT=Object($.a)(IT.prototype,"defaultTableConfiguration",[CT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IT),FT=function(){function e(t,n){Object(q.a)(this,e),this.desktopConfigurationManager=t,this.mobileConfigurationManager=n,this.parent=void 0,t.parent=this,n.parent=this}return Object(Q.a)(e,[{key:"defaultTableConfiguration",get:function(){return this.activeManager.defaultTableConfiguration},set:function(e){this.activeManager.defaultTableConfiguration=e}},{key:"customTableConfigurations",get:function(){return this.activeManager.customTableConfigurations},set:function(e){this.activeManager.customTableConfigurations=e}},{key:"activeManager",get:function(){return Ot(this)?this.mobileConfigurationManager:this.desktopConfigurationManager}},{key:"allTableConfigurations",get:function(){return[].concat(Object(gt.a)(this.desktopConfigurationManager.allTableConfigurations),Object(gt.a)(this.mobileConfigurationManager.allTableConfigurations))}},{key:"activeTableConfiguration",get:function(){return this.activeManager.activeTableConfiguration},set:function(e){this.activeManager.activeTableConfiguration=e}},{key:"cloneAndActivate",value:function(e,t){this.activeManager.cloneAndActivate(e,t)}},{key:"getCustomConfiguration",value:function(e){return this.desktopConfigurationManager.getCustomConfiguration(e)}},{key:"setCustomConfiguration",value:function(e,t){this.desktopConfigurationManager.setCustomConfiguration(e,t)}},{key:"deleteActiveTableConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activeManager.deleteActiveTableConfiguration();case 2:return e.next=4,fc(this);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onColumnWidthChanged",value:o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.activeManager.onColumnWidthChanged(t,n),"t0",1);case 1:return e.delegateYield(hc(this)(),"t1",2);case 2:case"end":return e.stop()}}),e,this)}))},{key:"onColumnOrderChanged",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.activeManager.onColumnOrderChanged(),"t0",1);case 1:return e.delegateYield(hc(this)(),"t1",2);case 2:case"end":return e.stop()}}),e,this)}))}]),e}();function MT(e,t,n){var r=t.elements.map((function(t){var r;if(null===(r=t.attributes)||void 0===r?void 0:r.propertyId){var o=e.find((function(e){var n;return e.id===(null===(n=t.attributes)||void 0===n?void 0:n.propertyId)}));if(o)return function(e,t,n){var r=new TT(t.id,t.width);r.width=UT(parseInt(e.attributes.width)),("false"===e.attributes.isVisible||r.width<0)&&(r.isVisible=!1);r.aggregationType=gc(e.attributes.aggregationType),n&&"DetachedField"===t.fieldType||(r.groupingIndex=AT(e.attributes.groupingIndex),r.timeGroupingUnit=isNaN(parseInt(e.attributes.groupingUnit))?void 0:parseInt(e.attributes.groupingUnit));return r}(t,o,n)}})).filter((function(e){return e})),o=r.map((function(e){return e.propertyId})),i=e.filter((function(e){return!o.includes(e.id)})).map((function(e){return new TT(e.id,e.width)}));return r.concat(i)}function LT(e,t,n){var r=ET(e,t,n,UR.Desktop),o=ET(e,t,n,UR.Mobile);return new FT(r,o)}function ET(e,t,n,r){var o,i,a,s=_T.createDefault(t,r);if(0===e.length)return new PT([],s,[],r);if(e.length>1)throw new Error("Can not process more than one configuration node");var c=null===(o=_u(e[0],(function(e){return"tableConfigurations"===e.name})))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.elements,u=r===UR.Desktop?function(e){var t,n,r,o,i=null===(t=_u(e,(function(e){return"customConfigurations"===e.name})))||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.elements)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.elements;if(!i)return[];return i.map((function(e){var t,n,r=null!==(t=null===(n=e.elements[0])||void 0===n?void 0:n.text)&&void 0!==t?t:"",o=decodeURIComponent(encodeURIComponent(window.atob(r)));return{name:e.name.replace("Configuration",""),value:o}}))}(e[0]):[];if(!c)return new PT([],s,u,r);var l=c.map((function(e){return _T.create({name:e.attributes.name,id:e.attributes.id,isActive:"true"===e.attributes.isActive,fixedColumnCount:AT(e.attributes.fixedColumnCount),columnConfigurations:MT(t,e,n),layout:e.attributes.layout})})).filter((function(e){return e.layout===r})),d=null!==(a=l.find((function(e){return""===e.name})))&&void 0!==a?a:s;return l.every((function(e){return!e.isActive}))&&(d.isActive=!0),new PT(l.filter((function(e){return e!==d})),d,u,r)}function AT(e){var t=parseInt(e,10);return isNaN(t)?0:t}var VT=o.a.mark(WT);function NT(e){var t,n=qu(e),r={},o=Object(le.a)(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;r[i.attributes.Name]=i.attributes.Value}}catch(a){o.e(a)}finally{o.f()}return r}var BT=new WeakMap;function UT(e){return isNaN(e)?100:Math.abs(e)}function GT(e,t){var n,r,o,i=new zs({xmlNode:e,id:e.attributes.Id,tabIndex:e.attributes.TabIndex,controlPropertyId:e.attributes.ControlPropertyId,controlPropertyValue:e.attributes.ControlPropertyValue,modelInstanceId:e.attributes.ModelInstanceId||"",name:e.attributes.Name,readOnly:"true"===e.attributes.ReadOnly,x:parseInt(e.attributes.X,10),y:parseInt(e.attributes.Y,10),width:parseInt(e.attributes.Width,10),height:parseInt(e.attributes.Height,10),captionLength:parseInt(e.attributes.CaptionLength,10),captionPosition:e.attributes.CaptionPosition,entity:e.attributes.Entity,column:e.attributes.Column,parameters:NT(e),dock:e.attributes.Dock,multiline:"true"===e.attributes.Multiline,isPassword:"true"===e.attributes.IsPassword,isRichText:"true"===e.attributes.IsRichText,autoSort:"true"===e.attributes.AutoSort,maxLength:parseInt(e.attributes.MaxLength,10),modelFormatterPattern:Jg(e.attributes.FormatterPattern),formatterPattern:e.attributes.FormatterPattern?em(e):"",customNumericFormat:e.attributes.CustomNumericFormat,identifier:e.attributes.Identifier,gridColumnWidth:e.attributes.GridColumnWidth?parseInt(e.attributes.GridColumnWidth):100,columnWidth:UT(e.attributes.GridColumnWidth?parseInt(e.attributes.GridColumnWidth):100),suppressEmptyColumns:"true"===e.attributes.SuppressEmptyColumns,lookupId:e.attributes.LookupId,lookup:e.attributes.LookupId?new As({dropDownShowUniqueValues:"true"===e.attributes.DropDownShowUniqueValues,lookupId:e.attributes.LookupId,identifier:e.attributes.Identifier,identifierIndex:parseInt(e.attributes.IdentifierIndex,10),dropDownType:e.attributes.DropDownType,cached:"true"===e.attributes.Cached,searchByFirstColumnOnly:"true"===e.attributes.SearchByFirstColumnOnly,dropDownColumns:_u(e,(function(e){return"Property"===e.name})).map((function(e){return new is({id:e.attributes.Id,name:e.attributes.Name,column:e.attributes.Column,entity:e.attributes.Entity,index:parseInt(e.attributes.Index,10)})})),dropDownParameters:_u(e,(function(e){return"ComboBoxParameterMapping"===e.name})).map((function(e){return{parameterName:e.attributes.ParameterName,fieldName:e.attributes.FieldName}}))}):void 0,allowReturnToForm:"true"===e.attributes.AllowReturnToForm,isTree:"true"===e.attributes.IsTree,isAggregatedColumn:e.attributes.Aggregated||!1,isLookupColumn:e.attributes.IsLookupColumn||!1,style:Pn(e.attributes.Style),toolTip:null===(n=e.elements.find((function(e){return"ToolTip"===e.name})))||void 0===n||null===(r=n.elements)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.text,supportsServerSideSorting:"true"===e.attributes.SupportsServerSideSorting,fieldType:e.attributes.FieldType});return e.elements&&e.elements.length>0&&e.elements.filter((function(e){return"Property"===e.name})).map((function(e,t){return GT(e,t)})).forEach((function(e){e.parent=i,e.x=e.x+i.x,e.y=i.y,i.childProperties.push(e)})),i}function WT(e,t,n,r,i,a,s){var u,d,p,h,f,b,v,y,g,m,w,O,j,k,x,C,I,S,D,R,T,_,P,F,M;return o.a.wrap((function(L){for(;;)switch(L.prev=L.next){case 0:v=function(e){switch(e){default:return ci.Table;case 0:return ci.Form;case 5:return ci.Map}},u=ke(t),d=Al(u),p=new Map(n.map((function(e){return[e.panel.instanceId,{position:e.position,defaultOrdering:ar(e.defaultSort)}]}))),h=_u(e,(function(e){return"DataSources"===e.name}))[0],f=_u(e,(function(e){return"Window"===e.name}))[0],zT(b=_u(e,(function(e){return("UIElement"===e.name||"UIRoot"===e.name)&&("Grid"===e.attributes.Type||"TreePanel"===e.attributes.Type||"SectionLevelPlugin"===e.attributes.Type)})),t,p),y=_u(e,(function(e){return"Binding"===e.name&&"ComponentBindings"===e.parent.name})),g=new qR((function(){return Wn(C)}),(function(){return Hn(C)}),(function(){return l(C)})),m=[],w=Object(le.a)(y);try{for(j=function(){var e=O.value,t=m.find((function(t){return t.parentId===e.attributes.ParentId&&t.childId===e.attributes.ChildId})),n=new wo({parentPropertyId:e.attributes.ParentProperty,childPropertyId:e.attributes.ChildProperty});t?t.bindingPairs.push(n):m.push(new Oo({parentId:e.attributes.ParentId,childId:e.attributes.ChildId,parentEntity:e.attributes.ParentEntity,childEntity:e.attributes.ChildEntity,bindingPairs:[n],childPropertyType:e.attributes.ChildPropertyType}))},w.s();!(O=w.n()).done;)j()}catch(E){w.e(E)}finally{w.f()}k=new Set,x=Hu(f),C=new Ts({title:f.attributes.Title,uiRootType:x.attributes.Type,menuId:f.attributes.MenuId,dynamicTitleSource:e.elements[0].attributes.DynamicFormLabelSource,sessionId:i,autoWorkflowNext:"true"===e.elements[0].attributes.AutoWorkflowNext,openingOrder:0,suppressSave:"true"===f.attributes.SuppressSave,suppressRefresh:"true"===f.attributes.SuppressRefresh,showInfoPanel:"true"===f.attributes.ShowInfoPanel,showWorkflowNextButton:"true"===f.attributes.ShowWorkflowNextButton,showWorkflowCancelButton:"true"===f.attributes.ShowWorkflowCancelButton,autoRefreshInterval:parseInt(f.attributes.AutoRefreshInterval,10),refreshOnFocus:"true"===f.attributes.RefreshOnFocus,cacheOnClient:"true"===f.attributes.CacheOnClient,autoSaveOnListRecordChange:"true"===f.attributes.AutoSaveOnListRecordChange,requestSaveAfterUpdate:"true"===f.attributes.RequestSaveAfterUpdate,screenUI:e,workflowTaskId:a,panelConfigurations:p,formScreenLifecycle:t,dataSources:h.elements.map((function(e){return new jo({rowState:new Xr({}),entity:e.attributes.Entity,dataStructureEntityId:e.attributes.DataStructureEntityId,identifier:e.attributes.Identifier,lookupCacheKey:e.attributes.LookupCacheKey,fields:_u(e,(function(e){return"Field"===e.name})).map((function(e){return new ko({index:parseInt(e.attributes.Index,10),name:e.attributes.Name})}))})})),dataViews:b.map((function(e,o){var i,a,c=_u(e,(function(e){return"Configuration"===e.name})),u=_u(e,(function(e){return"Property"===e.name})).map(GT),l=new Set(_u(e,(function(e){return"string"===e.name&&"PropertyNames"===e.parent.name})).map((function(e){return _u(e,(function(e){return"text"===e.type}))[0].text}))),d=Object(le.a)(u);try{for(d.s();!(a=d.n()).done;){var h=a.value;l.has(h.id)&&(h.isFormField=!0)}}catch(E){d.e(E)}finally{d.f()}var f=Ku(e).map((function(e){return new go({id:e.attributes.Id,caption:e.attributes.Caption,groupId:e.attributes.GroupId,type:e.attributes.Type,iconUrl:e.attributes.IconUrl,mode:e.attributes.Mode,isDefault:"true"===e.attributes.IsDefault,placement:e.attributes.Placement,confirmationMessage:e.attributes.ConfirmationMessage,parameters:qu(e).map((function(e){return new mo({name:e.attributes.Name,fieldName:e.attributes.FieldName})}))})})),b=null===(i=p.get(e.attributes.ModelInstanceId))||void 0===i?void 0:i.defaultOrdering;if(b){var y,m=Object(le.a)(b);try{var w=function(){var e,t=y.value;t.lookupId=null===(e=u.find((function(e){return e.id===t.columnId})))||void 0===e?void 0:e.lookupId};for(m.s();!(y=m.n()).done;)w()}catch(E){m.e(E)}finally{m.f()}}var O=new Hs(b),j=HT(e),k=new ls(j),x=new RT(k);n.filter((function(t){return t.panel.instanceId===e.attributes.ModelInstanceId})).forEach((function(e){return dT(x,u,e)}));var C=new os({isFirst:0===o,id:e.attributes.Id,attributes:e.attributes,type:e.attributes.Type,modelInstanceId:e.attributes.ModelInstanceId,name:e.attributes.Name,modelId:e.attributes.ModelId,newRecordView:e.attributes.NewRecordView,defaultPanelView:v(parseInt(e.attributes.DefaultPanelView)),activePanelView:v(parseInt(e.attributes.DefaultPanelView)),isMapSupported:"true"===e.attributes.IsMapSupported,isHeadless:"true"===e.attributes.IsHeadless,disableActionButtons:"true"===e.attributes.DisableActionButtons,showAddButton:"true"===e.attributes.ShowAddButton,showDeleteButton:"true"===e.attributes.ShowDeleteButton,showSelectionCheckboxesSetting:"true"===e.attributes.ShowSelectionCheckboxes,isGridHeightDynamic:"true"===e.attributes.IsGridHeightDynamic,selectionMember:e.attributes.SelectionMember,orderMember:e.attributes.OrderMember,isDraggingEnabled:"true"===e.attributes.IsDraggingEnabled,entity:e.attributes.Entity,dataMember:e.attributes.DataMember,isRootGrid:"true"===e.attributes.IsRootGrid,isRootEntity:"true"===e.attributes.IsRootEntity,isPreloaded:"true"===e.attributes.IsPreloaded,requestDataAfterSelectionChange:"true"===e.attributes.RequestDataAfterSelectionChange,confirmSelectionChange:"true"===e.attributes.ConfirmSelectionChange,formViewUI:Xu(e),dataTable:"TreePanel"===e.attributes.Type?new vb(e.attributes.IdProperty,e.attributes.ParentIdProperty):new ui({formScreenLifecycle:t,dataViewAttributes:e.attributes,orderingConfiguration:O,filterConfiguration:k}),serverSideGrouper:new ml,lifecycle:new Yr,tablePanelView:new Cu({tablePropertyIds:u.slice(1).map((function(e){return e.id})),columnConfigurationModel:new jc,filterConfiguration:k,filterGroupManager:x,orderingConfiguration:O,groupingConfiguration:new Zu,rowHeight:25}),formPanelView:new ds,lookupLoader:new Kr,properties:u,actions:f,clientSideGrouper:new wl,dataViewData:new KR((function(){return C.dataTable}),(function(e){return Mo(C,e)})),dataViewRowCursor:new YR((function(){return Vn(C)})),dataViewApi:new HR((function(){return un(C)}),(function(){return En(C)}),(function(){return g}))});BT.set(C,e);var I=c.filter((function(e){var t,n,r,o;return"Grid"===(null===e||void 0===e||null===(t=e.parent)||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.Type)||"SectionLevelPlugin"===(null===e||void 0===e||null===(r=e.parent)||void 0===r||null===(o=r.attributes)||void 0===o?void 0:o.Type)})),S=1===I.length?I[0]:void 0;S&&_u(S,(function(e){return"view"===e.name&&"defaultView"===e.parent.name})).forEach((function(e){!C.isHeadless&&e.attributes.id.length<=2&&(C.activePanelView=e.attributes.id)}));var D=LT(I,C.tablePanelView.tableProperties,s);return C.tablePanelView.configurationManager=D,D.parent=C.tablePanelView,u.filter((function(e){return e.gridColumnWidth<0})).forEach((function(e){e.gridColumnWidth=Math.abs(e.gridColumnWidth),e.width=Math.abs(e.width),C.tablePanelView.setPropertyHidden(e.id,!0);var t=D.defaultTableConfiguration.columnConfigurations.find((function(t){return t.propertyId===e.id}));t&&(t.isVisible=!1)})),r.forEach((function(e){e.lookupId&&(e.menuId||e.dependsOnValue)&&u.forEach((function(t){t.lookup&&t.lookup.lookupId===e.lookupId&&(t.linkToMenuId=e.menuId,t.linkDependsOnValue=e.dependsOnValue)}))})),C})),componentBindings:[]}),I=Object(le.a)(y);try{for(D=function(){var e=S.value,t=C.componentBindings.find((function(t){return t.parentId===e.attributes.ParentId&&t.childId===e.attributes.ChildId})),n=new wo({parentPropertyId:e.attributes.ParentProperty,childPropertyId:e.attributes.ChildProperty});if(t)t.bindingPairs.push(n);else{var r=new Oo({parentId:e.attributes.ParentId,childId:e.attributes.ChildId,parentEntity:e.attributes.ParentEntity,childEntity:e.attributes.ChildEntity,bindingPairs:[n],childPropertyType:e.attributes.ChildPropertyType});C.componentBindings.push(r),r.parent=C}},I.s();!(S=I.n()).done;)D()}catch(E){I.e(E)}finally{I.f()}R=d.beginLifetimeScope(LR),T=R.beginLifetimeScope(MR),WR.register(uT,(function(){return l(C)})).scopedInstance(LR),_=Ml("IFormScreen"),T.register(_,(function(){return C})).scopedInstance(LR),P=Object(le.a)(C.dataViews);try{for(M=function(){var e=F.value,t=T.beginLifetimeScope(rR);t.register(Zl,(function(){return e})).scopedInstance(rR),t.register(zR,(function(){return new YR((function(){return Vn(e)}))})).scopedInstance(rR),t.register(kf,(function(){return new jf(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activePanelView=n,Ot(e)){t.next=3;break}return t.delegateYield(hc(e)(),"t0",3);case 3:case"end":return t.stop()}}),t)})),(function(){return e.activePanelView===ci.Form&&vi(e).isGrouping&&s?ci.Table:e.activePanelView}))})).scopedInstance(rR),t.resolve(Zl);var n=t.beginLifetimeScope(nR);n.resolve(tR).setup();var r=n.resolve(BI);r.onTablePerspectiveShown=function(){var t;return null===(t=It(e))||void 0===t?void 0:t.triggerOnFocusTable()};var i=t.beginLifetimeScope(VI);i.resolve(AI).setup();var a=i.resolve($k);if(e.activateFormView=a.handleClick.bind(a),e.activateTableView=function(){return Sn({ctx:e,generator:r.handleToolbarBtnClick.bind(a)()})},e.isFormViewActive=function(){return a.isActive},e.isTableViewActive=function(){return r.isActive},e.isMapSupported){var l,d=BT.get(e),p=new Tk(e);YT(p.mapSetupStore,d);var h=!!(null===(l=e.properties.find((function(e){return e.id===p.mapSetupStore.mapLocationMember})))||void 0===l?void 0:l.readOnly);p.mapSetupStore.isReadOnlyView=h;var f=t.beginLifetimeScope(Yk).resolve(Nk);f.rootStore=p,f.setup()}var b=u.lookupMultiEngine;e.properties.flatMap((function(e){return[e].concat(Object(gt.a)(e.childProperties))})).filter((function(e){return e.isLookup&&e.lookupId})).forEach((function(e){var t=e.lookupId;if(k.add(t),!b.lookupEngineById.has(t)){var n=_R(t,b);b.lookupCleanerReloaderById.set(t,n.lookupCleanerReloader),n.startup(),b.lookupEngineById.set(t,n)}var r=b.lookupEngineById.get(t);e.lookupEngine=r})),Object(c.flow)(t.resolve(rj).activateDefault)()},P.s();!(F=P.n()).done;)M()}catch(E){P.e(E)}finally{P.f()}return T.resolve(_),L.abrupt("return",{formScreen:C,foundLookupIds:k});case 27:case"end":return L.stop()}}),VT)}function HT(e){var t=_u(e,(function(e){return"Filter"===e.name}));return 0===t.length?[]:t.flatMap((function(e){return e.elements.map((function(e){return{propertyId:e.attributes.Property,operatorCode:e.attributes.Operator,value:e.attributes.RightSideValue}}))}))}function zT(e,t,n){var r,o=Object(le.a)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.attributes.ModelInstanceId,s=n.get(a);if(Co(t,i.attributes)&&!s)throw new Error("Table in: ".concat(a," has undefined default ordering while infinite scrolling is on. Make sure the underlying DataStructure has a SortSet defined."))}}catch(c){o.e(c)}finally{o.f()}}function YT(e,t){var n=t.attributes;e.mapAzimuthMember=n.MapAzimuthMember,e.mapCenterRaw=n.MapCenter,e.mapColorMember=n.MapColorMember,e.mapIconMember=n.MapIconMember,e.mapLocationMember=n.MapLocationMember,e.mapTextMember=n.MapTextMember,e.textColorMember=n.TextColorMember,e.textLocationMember=n.TextLocationMember,e.textRotationMember=n.TextRotationMember,e.mapResolutionRaw=n.MapResolution;var r,o=_u(t,(function(e){return"Layer"===e.name&&"MapViewLayers"===e.parent.name})),i=Object(le.a)(o);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a.attributes,c=new Dk;e.layers.push(c),c.defaultEnabled="true"===s.defaultEnabled,c.id=s.id,c.title=s.title,c.type=s.type;var u,l=_u(a,(function(e){return"Parameter"===e.name})),d=Object(le.a)(l);try{for(d.s();!(u=d.n()).done;){var p=u.value;c.mapLayerParameters.set(p.attributes.name,p.attributes.value)}}catch(h){d.e(h)}finally{d.f()}}}catch(h){i.e(h)}finally{i.f()}}function KT(e){return o.a.mark((function t(){var n,r,i,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=null===(n=Be(e))||void 0===n||null===(r=n.orderProperty)||void 0===r?void 0:r.id,s=null===(i=fi(e).filter((function(e){return"Id"!==e.id&&e.id!==a})))||void 0===i?void 0:i[0],It(e).selectedColumnId=null===s||void 0===s?void 0:s.id,It(e).selectedColumnId&&(It(e).scrollToCurrentRow(),setTimeout((function(){return It(e).setEditing(!0)})));case 4:case"end":return t.stop()}}),t)}))}function qT(e){return Be(e).formFocusManager}function QT(e){var t=[];return XT(e,t),t}function XT(e,t){var n,r=Ln(e),o=Object(le.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.push(i),XT(i,t)}}catch(a){o.e(a)}finally{o.f()}}function ZT(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}var $T=function(){function e(t){var n=this;Object(q.a)(this,e),this.api=t,this.registeredRequests=[],this.itemJustEnqueued=void 0,this.currentRequest=void 0,this.interpreter=Object(_C.a)(Object(PC.a)({id:"updateObject",initial:"IDLE",states:{IDLE:{on:{UPDATE_REQUESTED:{actions:["enqueueRequest"],target:"UPDATE_DEBOUNCING"}}},UPDATE_DEBOUNCING:{on:{UPDATE_REQUESTED:{actions:["enqueueRequest"],target:"UPDATE_DEBOUNCING"}},after:{170:"DEQUEUE"}},DEQUEUE:{entry:"dequeueToCurrentRequest",always:"UPDATING"},UPDATING:{initial:"API_RUNNING",states:{API_RUNNING:{invoke:{src:"apiUpdateObject",onDone:"API_RESOLVED",onError:"API_REJECTED"}},API_RESOLVED:{entry:["resolveCurrentPromise"],type:"final"},API_REJECTED:{entry:["rejectCurrentPromise"],type:"final"}},on:{UPDATE_REQUESTED:{actions:["enqueueRequest"]}},onDone:[{cond:"hasMoreItems",target:"#updateObject.DEQUEUE"},{target:"#updateObject.IDLE"}],exit:["resetCurrentRequest"]}}},{services:{apiUpdateObject:function(e,t){return n.api.updateObject(n.currentRequest)}},actions:{enqueueRequest:function(e,t){var r=n.mergeToQueue(t.payload);n.itemJustEnqueued=r},dequeueToCurrentRequest:function(e,t){var r=n.registeredRequests.shift();n.currentRequest=r},resolveCurrentPromise:function(e,t){var r;null===(r=n.currentRequest)||void 0===r||r.promise.resolve(t.data)},rejectCurrentPromise:function(e,t){var r;null===(r=n.currentRequest)||void 0===r||r.promise.reject(t.data)},resetCurrentRequest:function(e,t){n.currentRequest=void 0}},guards:{hasMoreItems:function(e,t){return n.registeredRequests.length>0}}}),{devTools:!0}),this.interpreter.start()}return Object(Q.a)(e,[{key:"enqueue",value:function(e){this.interpreter.send({type:"UPDATE_REQUESTED",payload:e});var t=this.itemJustEnqueued;return this.itemJustEnqueued=void 0,t.promise}},{key:"mergeToQueue",value:function(e){var t=this.registeredRequests.find((function(t){return t.Entity===e.Entity&&!t.isRunning}));t||(t={SessionFormIdentifier:e.SessionFormIdentifier,Entity:e.Entity,UpdateData:e.UpdateData,promise:ZT(),isRunning:!1},this.registeredRequests.push(t));var n,r=Object(le.a)(e.UpdateData);try{var o=function(){var e=n.value,r=t.UpdateData.find((function(t){return t.RowId===e.RowId}));r||(r={RowId:e.RowId,Values:{}},t.UpdateData.push(r)),r.Values=Object(Fe.a)(Object(Fe.a)({},r.Values),e.Values)};for(r.s();!(n=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}return t}}]),e}();function JT(e,t,n){return new Promise(Object(c.action)((function(r){var o=Rn(e,"",Object(re.jsx)(Ie.YesNoQuestion,{screenTitle:t,yesLabel:bt("Yes","button_yes"),noLabel:bt("No","button_no"),message:n,onYesClick:function(){o(),r(!0)},onNoClick:function(){o(),r(!1)}}))})))}var e_=function(){function e(t){Object(q.a)(this,e),this.ctx=t}return Object(Q.a)(e,[{key:"askYesNoQuestion",value:function(e,t){return JT(this.ctx,e,t)}},{key:"runGeneratorInFlowWithHandler",value:function(e){return Sn({ctx:this.ctx,generator:e})}},{key:"runInFlowWithHandler",value:function(e){return In({ctx:this.ctx,action:e})}},{key:"wrapInFlowWithHandler",value:function(e){return Cn({ctx:this.ctx,action:e})}}]),e}(),t_=function(){function e(t){Object(q.a)(this,e),this.dataView=t,this.properties=void 0,this.properties=Vs(this.dataView).map((function(e){return{id:e.id,name:e.name,type:e.column,momentFormatterPattern:e.formatterPattern}}))}return Object(Q.a)(e,[{key:"tableRows",get:function(){return this.dataView.tableRows}},{key:"saveConfiguration",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=la(this.dataView)).setCustomConfiguration(t,n),(i={})[t]=n,e.next=6,l(this.dataView).saveObjectConfiguration({sessionFormIdentifier:Wn(this.dataView),instanceId:this.dataView.modelInstanceId,tableConfigurations:r.allTableConfigurations,customConfigurations:i,defaultView:pc(this.dataView)});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfiguration",value:function(e){return la(this.dataView).getCustomConfiguration(e)}},{key:"getCellText",value:function(e,t){var n=Vs(this.dataView).find((function(e){return e.id===t}));if(!n)throw new Error('Property named "'+t+'" was not found');return this.dataView.dataTable.getCellText(e,n)}},{key:"getCellValue",value:function(e,t){var n=Vs(this.dataView).find((function(e){return e.id===t}));if(!n)throw new Error('Property named "'+t+'" was not found');return this.dataView.dataTable.getCellValue(e,n)}},{key:"getRowId",value:function(e){return Array.isArray(e)?this.dataView.dataTable.getRowId(e):e.columnLabel+e.columnValue+e.groupLevel+e.isExpanded}}]),e}(),n_=n(394),r_=n(395),o_=n(396),i_=n(397);var a_=n(253),s_=n.n(a_),c_=function(){function e(t,n){Object(q.a)(this,e),this.localizations=t,this.defaultLocale=n,this.messageFormat=void 0,this.defaultMessageFormat=void 0,this._activeLocalization=void 0,this._defaultLocalization=void 0,this.locale=void 0,this.locale=ot(),this.messageFormat=new s_.a(this.locale),this.defaultMessageFormat=this.locale===n?this.messageFormat:new s_.a(this.locale)}return Object(Q.a)(e,[{key:"defaultLocalization",get:function(){return this._defaultLocalization||(this._defaultLocalization=this.getLocalization(this.defaultLocale)),this._defaultLocalization}},{key:"activeLocalization",get:function(){return this._activeLocalization||(this._activeLocalization=this.getLocalization(this.locale)),this._activeLocalization}},{key:"getLocalization",value:function(e){var t=e.toLowerCase(),n=this.localizations.find((function(e){return e.locale.toLowerCase()===t}));if(n||(n=this.localizations.find((function(e){return e.locale.toLowerCase()===t.split("-")[0]}))),!n)throw new Error('Plugin localization for locale: "'.concat(e,'" was not found'));return n}},{key:"translate",value:function(e,t){var n,r=null!==(n=this.activeLocalization.translations[e])&&void 0!==n?n:this.defaultLocalization.translations[e];if(!r)throw new Error('No translation was found for: "'.concat(e,'" '));var o=this.messageFormat.compile(r);return t?o(t):o()}}]),e}(),u_=new Map;function l_(e,t){u_.set(e,t)}l_("FilterPlugin",(function(){return new r_.FilterPlugin})),l_("AuditPlugin",(function(){return new n_.AuditPlugin})),l_("RadarChartPlugin",(function(){return new o_.RadarChartPlugin})),l_("FileUploadSectionPlugin",(function(){return new i_.FileUploadSectionPlugin}));var d_,p_,h_,f_,b_,v_=new(function(){function e(){Object(q.a)(this,e),this.pluginInstances=new Map}return Object(Q.a)(e,[{key:"getComponent",value:function(e){var t=this.get({name:e.name,modelInstanceId:e.modelInstanceId,sessionId:e.sessionId}),n=function(e){if(e)return{dataView:new t_(e),guiHelper:new e_(e)}}(Be(e.ctx)),r=function(e){return new c_(e,"en-us")};return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(W.Fragment,{children:t.getComponent(n,r)},t.id)}})}},{key:"get",value:function(e){if(!e.modelInstanceId)throw new Error("modelInstanceId must have a value");if(!e.sessionId)throw new Error("sessionId must have a value");if(!e.name)throw new Error("name must have a value");var t=e.modelInstanceId+"_"+e.sessionId;if(this.pluginInstances.has(t))return this.pluginInstances.get(t);var n=this.makePluginInstance(e.name);return n.id=t,this.pluginInstances.set(n.id,n),n}},{key:"makePluginInstance",value:function(e){if(!u_.has(e))throw new Error("Cannot find plugin class named: ".concat(e));return u_.get(e)()}}]),e}()),y_=n(254);function g_(e){return o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(le.a)(Xt(e));try{for(n.s();!(r=n.n()).done;)eo(r.value).reload()}catch(o){n.e(o)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))}!function(e){e[e.Cancel=0]="Cancel",e[e.NoSave=1]="NoSave",e[e.Save=2]="Save"}(f_||(f_={})),function(e){e[e.No=0]="No",e[e.Yes=1]="Yes"}(b_||(b_={}));var m_=new WeakSet,w_=(d_=c.action.bound,p_=function(){function e(){Object(q.a)(this,e),this.$type_IFormScreenLifecycle=1,this.parameters={},this.focusedDataViewId=void 0,this._updateRequestAggregator=void 0,Object(de.a)(this,"allDataViewsSteady",h_,this),this.monitor=new zr,this.initialSelectedRowId=void 0,this.disposers=[],this._autoRefreshTimerHandle=void 0,this._processedUpdateObjectResults=new WeakSet,this._readFirstChunkOfRowsRunning=!1,this._readFirstChunkOfRowsScheduled=!1,this.readFirstChunkOfRowsWithGateDebounced=ge.a.debounce(Object(c.flow)(this.readFirstChunkOfRowsWithGate.bind(this)),500),this.actionRunning=!1,this.parent=void 0}return Object(Q.a)(e,[{key:"updateRequestAggregator",get:function(){return this._updateRequestAggregator||(this._updateRequestAggregator=new $T(l(this))),this._updateRequestAggregator}},{key:"isWorkingDelayed",get:function(){return this.monitor.isWorkingDelayed}},{key:"isWorking",get:function(){return this.monitor.isWorking}},{key:"registerDisposer",value:function(e){this.disposers.push(e)}},{key:"onFlushData",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flushData(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"onCreateRow",value:o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.createRow(t,n),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"onCopyRow",value:o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.copyRow(t,n,r),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"onDeleteRow",value:o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.onRequestDeleteRow(t,n,r),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"onSaveSession",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.flushData(),"t0",1);case 1:return e.delegateYield(this.saveSession(),"t1",2);case 2:case"end":return e.stop()}}),e,this)}))},{key:"onExecuteAction",value:o.a.mark((function e(t,n,r,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.confirmationMessage,!e.t0){e.next=5;break}return e.next=4,JT(this,Pe(this).tabTitle,r.confirmationMessage);case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return e.delegateYield(this.executeAction(t,n,r,i),"t1",8);case 8:case"end":return e.stop()}}),e,this)}))},{key:"onRequestDeleteRow",value:o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.questionDeleteData();case 2:if(e.t0=e.sent,e.t1=b_.Yes,e.t0!==e.t1){e.next=6;break}return e.delegateYield(this.deleteRow(t,n,r),"t2",6);case 6:case"end":return e.stop()}}),e,this)}))},{key:"onRequestScreenClose",value:o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ee(this),r=Object(le.a)(n.dataViews),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=10;break}return a=i.value,e.next=8,uC(a)(null);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.next=20,n.dataUpdateCRS.runAsync((function(){return Promise.resolve()}));case 20:if(!t&&pn(this)&&!hn(this)){e.next=23;break}return e.delegateYield(this.closeForm(),"t1",22);case 22:return e.abrupt("return");case 23:return e.next=25,this.questionSaveData();case 25:e.t2=e.sent,e.next=e.t2===f_.Cancel?28:e.t2===f_.Save?29:e.t2===f_.NoSave?34:36;break;case 28:return e.abrupt("return");case 29:return e.delegateYield(this.saveSession(),"t3",30);case 30:if(!e.t3){e.next=33;break}return e.delegateYield(this.closeForm(),"t4",33);case 33:return e.abrupt("return");case 34:return e.delegateYield(this.closeForm(),"t5",35);case 35:return e.abrupt("return");case 36:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))},{key:"onRequestScreenReload",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pn(this)&&!hn(this)){e.next=3;break}return e.delegateYield(this.refreshSession(),"t0",2);case 2:case 9:case 12:case 16:return e.abrupt("return");case 3:return Ee(this).dataViews.forEach((function(e){return e.onReload()})),e.next=6,this.questionSaveData();case 6:e.t1=e.sent,e.next=e.t1===f_.Cancel?9:e.t1===f_.Save?10:e.t1===f_.NoSave?13:17;break;case 10:return e.delegateYield(this.saveSession(),"t2",11);case 11:return e.delegateYield(this.refreshSession(),"t3",12);case 13:if(this.eagerLoading){e.next=15;break}return e.delegateYield(this.revertChanges(),"t4",15);case 15:return e.delegateYield(this.refreshSession(),"t5",16);case 17:case"end":return e.stop()}}),e,this)}))},{key:"revertChanges",value:o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(this),e.next=3,t.revertChanges({sessionFormIdentifier:Wn(this)});case 3:case"end":return e.stop()}}),e,this)}))},{key:"onWorkflowNextClick",value:o.a.mark((function e(t){var n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.monitor.inFlow++,e.prev=1,n=l(this),r=Wn(this),e.next=6,n.workflowNextQuery({sessionFormIdentifier:r});case 6:return i=e.sent,a=Ee(this),e.delegateYield(mu(this)(i,a.title),"t0",9);case 9:if(e.t0.canContinue){e.next=12;break}return e.abrupt("return");case 12:return e.prev=12,e.delegateYield(a.dataUpdateCRS.enterGenerator(),"t1",14);case 14:return e.next=16,n.workflowNext({sessionFormIdentifier:r,CachedFormIds:[]});case 16:s=e.sent;case 17:return e.prev=17,a.dataUpdateCRS.leave(),e.finish(17);case 20:return this.killForm(),e.delegateYield(this.start(s),"t2",22);case 22:return e.prev=22,this.monitor.inFlow--,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[1,,22,25],[12,,17,20]])}))},{key:"onWorkflowAbortClick",value:o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.monitor.inFlow++,e.prev=1,n=l(this),i=Ee(this),e.prev=4,e.delegateYield(i.dataUpdateCRS.enterGenerator(),"t0",6);case 6:return e.next=8,n.workflowAbort({sessionFormIdentifier:Wn(this)});case 8:r=e.sent;case 9:return e.prev=9,i.dataUpdateCRS.leave(),e.finish(9);case 12:return this.killForm(),e.delegateYield(this.start(r),"t1",14);case 14:return e.prev=14,this.monitor.inFlow--,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,,14,17],[4,,9,12]])}))},{key:"onWorkflowRepeatClick",value:o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.monitor.inFlow++,e.prev=1,n=l(this),r=Wn(this),a=Ee(this),e.prev=5,e.delegateYield(a.dataUpdateCRS.enterGenerator(),"t0",7);case 7:return e.next=9,n.workflowRepeat({sessionFormIdentifier:r});case 9:i=e.sent;case 10:return e.prev=10,a.dataUpdateCRS.leave(),e.finish(10);case 13:return this.killForm(),e.delegateYield(this.start(i),"t1",15);case 15:return e.prev=15,this.monitor.inFlow--,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,,15,18],[5,,10,13]])}))},{key:"onWorkflowCloseClick",value:o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.monitor.inFlow++,e.prev=1,n=Ee(this),e.prev=3,e.delegateYield(n.dataUpdateCRS.enterGenerator(),"t0",5);case 5:return e.prev=5,n.dataUpdateCRS.leave(),e.finish(5);case 8:return e.delegateYield(this.onRequestScreenClose(),"t1",9);case 9:return e.prev=9,this.monitor.inFlow--,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,,9,12],[3,,5,8]])}))},{key:"startAutoRefreshIfNeeded",value:o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=Ee(this).autoRefreshInterval)&&this.disposers.push(Object(c.autorun)((function(){hn(n)||!pn(n)&&Tn(n)?n._autoRefreshTimerHandle=setInterval((function(){return n.performAutoReload()}),1e3*t):n.clearAutoRefreshInterval()})));case 2:case"end":return e.stop()}}),e,this)}))},{key:"clearAutoRefreshInterval",value:function(){this._autoRefreshTimerHandle&&(clearInterval(this._autoRefreshTimerHandle),this._autoRefreshTimerHandle=void 0)}},{key:"performAutoReload",value:function(){var e=this;Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ee(e).dataViews.forEach((function(e){return eo(e).suppressWorkingStatus=!0})),t.delegateYield(e.refreshSession(),"t0",4);case 4:t.next=10;break;case 6:return t.prev=6,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",9);case 9:throw t.t1;case 10:return t.prev=10,Ee(e).dataViews.forEach((function(e){return eo(e).suppressWorkingStatus=!1})),t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[0,6,10,14]])})))()}},{key:"start",value:o.a.mark((function e(t){var n,r,i,a,s,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.disposers.push(Object(c.reaction)((function(){return Ee(u).dataViews.every((function(e){return!e.isWorking}))&&!u.isWorkingDelayed}),(function(e){e?n=setTimeout((function(){n=void 0,u.allDataViewsSteady=!0}),100):(u.allDataViewsSteady=!1,n&&(clearTimeout(n),n=void 0))})),(function(){clearTimeout(n),n=void 0})),e.prev=1,Pe(this)){e.next=5;break}return e.abrupt("return");case 5:return this.initialSelectedRowId=t.currentRecordId,e.delegateYield(this.applyInitUIResult({initUIResult:t}),"t0",7);case 7:if(this.initializePlugins(t),this.eagerLoading){e.next=15;break}return e.delegateYield(this.clearTotalCounts(),"t1",10);case 10:return e.delegateYield(this.loadData({keepCurrentData:!1}),"t2",11);case 11:return e.delegateYield(this.updateTotalRowCounts(),"t3",12);case 12:r=Ee(this),i=Object(le.a)(r.rootDataViews);try{for(s=function(){var e=a.value,t=or(e),n=nr(e);u.disposers.push(Object(c.reaction)((function(){return{filters:n.activeFilters.map((function(e){return[e.propertyId,e.setting.type,Object(ye.isArray)(e.setting.val1)?Object(gt.a)(e.setting.val1):e.setting.val1,e.setting.val2]})).filter((function(e){return"in"!==e[1]&&"eq"!==e[1]&&"neq"!==e[1]&&"nin"!==e[1]&&"neq"!==e[1]&&"contains"!==e[1]&&"ncontains"!==e[1]&&"lt"!==e[1]&&"lte"!==e[1]&&"gt"!==e[1]&&"gte"!==e[1]&&"between"!==e[1]&&"nbetween"!==e[1]&&"starts"!==e[1]&&"nstarts"!==e[1]&&"ends"!==e[1]&&"nends"!==e[1]||(void 0!==e[2]||void 0!==e[3])}))}}),(function(){return u.sortAndFilterReaction({dataView:e,updateTotalRowCount:!0})}),{equals:c.comparer.structural,delay:100})),u.disposers.push(Object(c.reaction)((function(){return t.userOrderings.map((function(e){return[e.columnId,e.direction]}))}),(function(){return u.sortAndFilterReaction({dataView:e,updateTotalRowCount:!1})}),{equals:c.comparer.structural,delay:100}))},i.s();!(a=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}case 15:return e.prev=15,this.initialSelectedRowId=void 0,e.finish(15);case 18:return e.delegateYield(this.startAutoRefreshIfNeeded(),"t4",19);case 19:case"end":return e.stop()}}),e,this,[[1,,15,18]])}))},{key:"initializePlugins",value:function(e){var t=this,n=Tu(e.formDefinition,(function(e){var t;return"ScreenLevelPlugin"===(null===(t=e.attributes)||void 0===t?void 0:t.Type)})),r=Wn(this);n.forEach((function(e){var n=v_.get({name:e.attributes.Name,modelInstanceId:e.attributes.ModelInstanceId,sessionId:r});if(!Object(y_.isIScreenPlugin)(n))throw new Error("Plugin ".concat(e.attributes.Name," is not ScreenLevelPlugin"));n.requestSessionRefresh=function(){return Sn({ctx:t,generator:t.refreshSession()})},n.setScreenParameters=function(e){return Object.keys(e).forEach((function(n){return t.parameters[n]=e[n]}))},n.initialize(e.attributes)})),Tu(e.formDefinition,(function(e){var t;return"SectionLevelPlugin"===(null===(t=e.attributes)||void 0===t?void 0:t.Type)})).forEach((function(e){var n=v_.get({name:e.attributes.Name,modelInstanceId:e.attributes.ModelInstanceId,sessionId:r});if(!Object(y_.isISectionPlugin)(n))throw new Error("Plugin ".concat(e.attributes.Name," is not SectionLevelPlugin"));n.getScreenParameters=function(){return ge.a.cloneDeep(t.parameters)},n.initialize(e.attributes)}))}},{key:"sortAndFilterReaction",value:function(e){var t=this;Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vd(e.dataView);case 2:if(n.sent){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.dataView.lifecycle.runRecordChangedReaction(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!vi(e.dataView).isGrouping){n.next=5;break}e.dataView.serverSideGrouper.refresh(),n.next=10;break;case 5:return e.dataView.setRowCount(void 0),n.next=8,t.readFirstChunkOfRowsWithGateDebounced(e.dataView);case 8:return n.next=10,t.updateTotalRowCount(e.dataView);case 10:case"end":return n.stop()}}),n)})));case 6:case"end":return n.stop()}}),n)})))()}},{key:"applyInitUIResult",value:o.a.mark((function e(t){var n,r,i,a,s,c,u,d,p=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pe(this),Pu(t.initUIResult.formDefinition),e.delegateYield(WT(t.initUIResult.formDefinition,this,t.initUIResult.panelConfigurations,t.initUIResult.lookupMenuMappings,t.initUIResult.sessionId,t.initUIResult.workflowTaskId,n.lazyLoading),"t0",3);case 3:if(r=e.t0,i=r.formScreen,a=r.foundLookupIds,s=l(n),c=ke(n).lookupMultiEngine.cacheDependencies,!((u=c.getUnhandledLookupIds(a)).size>0)){e.next=14;break}return e.next=12,s.getLookupCacheDependencies({LookupIds:Array.from(u)});case 12:d=e.sent,c.putValues(d);case 14:return n.content.setFormScreen(i),e.delegateYield(this.applyData(t.initUIResult.data),"t1",16);case 16:setTimeout((function(){var e=Ee(p).getFirstFormPropertyId();if(e){var t=Al(Ee(p));null===t||void 0===t||t.resolve(FR).focusField.trigger({propertyId:e})}}),100);case 17:case"end":return e.stop()}}),e,this)}))},{key:"loadChildRows",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,i=this.eagerLoading||t.isRootGrid||!t.bindingParent?void 0:t.bindingParent.selectedRowId,a=l(this),e.next=6,a.getRows({MenuId:Hn(t),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(t),Filter:n,FilterLookups:br(t),Ordering:r?[r]:[],RowLimit:Ur,Parameters:this.parameters,MasterRowId:i,RowOffset:0,ColumnNames:cn(t)});case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,this.monitor.inFlow--,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadChildGroups",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r,i,a){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={columnId:r.columnId,direction:zn.ASC,lookupId:a},e.prev=1,this.monitor.inFlow++,c=l(this),e.next=6,c.getGroups({MenuId:Hn(t),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(t),Filter:n,FilterLookups:br(t),Ordering:[s],RowLimit:999999,GroupBy:r.columnId,GroupingUnit:yc(r.groupingUnit),GroupByLookupId:a,MasterRowId:void 0,AggregatedColumns:i});case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,this.monitor.inFlow--,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));return function(t,n,r,o,i){return e.apply(this,arguments)}}()},{key:"loadGroups",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r,i){var a,s,c,u,d,p,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=or(t),u=null!==(a=null===(s=c.orderings.find((function(e){return e.columnId===n.columnId})))||void 0===s?void 0:s.direction)&&void 0!==a?a:zn.ASC,d=l(this),p={columnId:n.columnId,direction:u,lookupId:r},h=this.eagerLoading||t.isRootGrid||!t.bindingParent?void 0:t.bindingParent.selectedRowId,e.prev=5,this.monitor.inFlow++,e.next=9,d.getGroups({MenuId:Hn(t),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(t),Filter:rr({ctx:t}),FilterLookups:br(t),Ordering:[p],RowLimit:999999,GroupBy:n.columnId,GroupingUnit:yc(n.groupingUnit),GroupByLookupId:r,MasterRowId:h,AggregatedColumns:i});case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,this.monitor.inFlow--,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[5,,10,13]])})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"loadAggregations",value:function(e,t){return l(this).getAggregations({MenuId:Hn(e),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(e),Filter:rr({ctx:e}),FilterLookups:br(e),MasterRowId:void 0,AggregatedColumns:t})}},{key:"loadData",value:o.a.mark((function e(t){var n,r,i,a,s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ee(this),e.prev=1,this.monitor.inFlow++,r=Object(le.a)(n.nonRootDataViews);try{for(r.s();!(i=r.n()).done;)(a=i.value).dataTable.clear(),a.lifecycle.stopSelectedRowReaction()}catch(o){r.e(o)}finally{r.f()}s=Object(le.a)(n.rootDataViews),e.prev=6,s.s();case 8:if((c=s.n()).done){e.next=21;break}if((u=c.value).saveViewState(),!vi(u).isGrouping){e.next=16;break}u.serverSideGrouper.refresh(),e.next=19;break;case 16:return e.next=18,this.updateTotalRowCount(u);case 18:return e.delegateYield(this.readFirstChunkOfRows({rootDataView:u,keepCurrentData:t.keepCurrentData}),"t0",19);case 19:e.next=8;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(6),s.e(e.t1);case 26:return e.prev=26,s.f(),e.finish(26);case 29:e.prev=29,l=Object(le.a)(n.nonRootDataViews);try{for(l.s();!(d=l.n()).done;)d.value.lifecycle.startSelectedRowReaction()}catch(o){l.e(o)}finally{l.f()}return this.monitor.inFlow--,e.finish(29);case 34:case"end":return e.stop()}}),e,this,[[1,,29,34],[6,23,26,29]])}))},{key:"throwChangesAway",value:o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,n=l(this),e.next=5,n.restoreData({SessionFormIdentifier:Wn(this),ObjectId:t.selectedRowId});case 5:return r=e.sent,e.delegateYield(en(t,r,!1,t),"t0",7);case 7:if(!Ee(this).requestSaveAfterUpdate){e.next=10;break}return e.delegateYield(this.saveSession(),"t1",10);case 10:return e.prev=10,this.monitor.inFlow--,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])}))},{key:"flushData",value:o.a.mark((function e(){var t,n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.monitor.inFlow++,t=!1,n=Ee(this),r=n.dataViews,i=Object(le.a)(r),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=17;break}if(s=a.value,e.t0=t,e.t0){e.next=14;break}return e.delegateYield(this.runUpdateObject(s),"t1",13);case 13:e.t0=e.t1;case 14:t=e.t0;case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),i.e(e.t2);case 22:return e.prev=22,i.f(),e.finish(22);case 25:if(!n.requestSaveAfterUpdate||!t){e.next=27;break}return e.delegateYield(this.saveSession(),"t3",27);case 27:return e.prev=27,this.monitor.inFlow--,e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[0,,27,30],[6,19,22,25]])}))},{key:"runUpdateObject",value:o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.dataTable.getDirtyValueRows().map((function(e){return{RowId:t.dataTable.getRowId(e),Values:_n(t.dataTable.getDirtyValues(e))}})))&&0!==n.length){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,this.updateRequestAggregator.enqueue({SessionFormIdentifier:Wn(this),Entity:t.entity,UpdateData:n});case 5:if(r=e.sent,t.formFocusManager.stopAutoFocus(),this._processedUpdateObjectResults.has(r)){e.next=10;break}return this._processedUpdateObjectResults.add(r),e.delegateYield(en(t,r,!1,t),"t0",10);case 10:return t.formFocusManager.refocusLast(),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))},{key:"updateRadioButtonValue",value:o.a.mark((function e(t,n,r,i){var a,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,(a={})[r]=i,s=Ee(this),c=this,e.next=8,c.updateRequestAggregator.enqueue({SessionFormIdentifier:Wn(c),Entity:t.entity,UpdateData:[{RowId:t.dataTable.getRowId(n),Values:a}]});case 8:return u=e.sent,e.delegateYield(en(t,u,!1,t),"t0",10);case 10:if(!s.requestSaveAfterUpdate){e.next=12;break}return e.delegateYield(this.saveSession(),"t1",12);case 12:return e.prev=12,this.monitor.inFlow--,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,,12,15]])}))},{key:"rowSelectedReactionsDisabled",value:function(e){return!(!this.initialSelectedRowId||!e.isBindingRoot||this.eagerLoading)}},{key:"readFirstChunkOfRows",value:o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootDataView,r=l(this),n.setSelectedRowId(void 0),n.lifecycle.stopSelectedRowReaction(),e.prev=4,this.monitor.inFlow++,e.next=8,r.getRows({MenuId:Hn(n),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(n),Filter:rr({ctx:n}),FilterLookups:br(n),Ordering:sr(n),RowLimit:Ur,MasterRowId:void 0,Parameters:this.parameters,RowOffset:0,ColumnNames:cn(n)});case 8:if(i=e.sent,!t.keepCurrentData){e.next=13;break}n.appendRecords(i),e.next=15;break;case 13:return e.next=15,n.setRecords(i);case 15:this.initialSelectedRowId?n.setSelectedRowId(this.initialSelectedRowId):n.reselectOrSelectFirst(),n.restoreViewState();case 17:return e.prev=17,n.lifecycle.startSelectedRowReaction(!0),this.monitor.inFlow--,e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[4,,17,21]])}))},{key:"readFirstChunkOfRowsWithGate",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this._readFirstChunkOfRowsRunning){e.next=4;break}return this._readFirstChunkOfRowsScheduled=!0,e.abrupt("return");case 4:this._readFirstChunkOfRowsRunning=!0;case 5:return this._readFirstChunkOfRowsScheduled=!1,e.delegateYield(this.readFirstChunkOfRows({rootDataView:t,keepCurrentData:!1}),"t0",7);case 7:if(this._readFirstChunkOfRowsScheduled){e.next=5;break}case 8:return e.prev=8,this._readFirstChunkOfRowsRunning=!1,this._readFirstChunkOfRowsScheduled=!1,e.finish(8);case 12:case"end":return e.stop()}}),e,this,[[0,,8,12]])}))},{key:"getNewRowValues",value:function(e){if(e.orderMember){var t=e.orderMember,n=pi(e,t),r=e.tableRows.map((function(e){return e[n.index]})),o=r.length>0?Math.max.apply(Math,Object(gt.a)(r))+1:1,i={};return i[t]=o,i}}},{key:"createRow",value:o.a.mark((function e(t,n){var r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,r=l(this),i=dn(this,n),a=Ee(this),e.prev=5,e.delegateYield(a.dataUpdateCRS.enterGenerator(),"t0",7);case 7:return e.next=9,r.createObject({SessionFormIdentifier:Wn(this),Entity:t,RequestingGridId:n,Values:this.getNewRowValues(i),Parameters:Object(Fe.a)({},(o=i,Be(o).bindingParametersFromParent))});case 9:s=e.sent;case 10:return e.prev=10,a.dataUpdateCRS.leave(),e.finish(10);case 13:return e.delegateYield(en(i,s,!1,i),"t1",14);case 14:if("0"!==i.newRecordView||!i.activateFormView){e.next=19;break}return e.next=17,i.activateFormView({saveNewState:!0});case 17:e.next=24;break;case 19:if(!i.isTableViewActive()){e.next=23;break}return e.delegateYield(KT(i)(),"t2",21);case 21:e.next=24;break;case 23:i.isFormViewActive()&&qT(i).forceAutoFocus();case 24:return e.prev=24,this.monitor.inFlow--,e.finish(24);case 27:case"end":return e.stop()}var o}),e,this,[[0,,24,27],[5,,10,13]])}))},{key:"copyRow",value:o.a.mark((function e(t,n,r){var i,a,s,c,u,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,i=dn(this,n),a=QT(i).filter((function(e){return Cf(e)})).map((function(e){return En(e)})),s=l(this),c=Ee(this),e.prev=6,e.delegateYield(c.dataUpdateCRS.enterGenerator(),"t0",8);case 8:return e.next=10,s.copyObject({SessionFormIdentifier:Wn(this),Entity:t,OriginalId:r,RequestingGridId:n,Entities:[t].concat(Object(gt.a)(a)),ForcedValues:this.getNewRowValues(i)});case 10:u=e.sent;case 11:return e.prev=11,c.dataUpdateCRS.leave(),e.finish(11);case 14:d=Object(le.a)(QT(i));try{for(d.s();!(p=d.n()).done;)p.value.clear()}catch(o){d.e(o)}finally{d.f()}return e.delegateYield(en(i,u,!1,i),"t1",17);case 17:It(i).scrollToCurrentRow();case 18:return e.prev=18,this.monitor.inFlow--,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,,18,21],[6,,11,14]])}))},{key:"deleteRow",value:o.a.mark((function e(t,n,r){var i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,i=l(this),a=Ee(this),e.prev=4,e.delegateYield(a.dataUpdateCRS.enterGenerator(),"t0",6);case 6:if(!r.orderMember){e.next=11;break}return e.delegateYield(this.deleteObjectInOrderedList(n,t,r),"t1",8);case 8:s=e.t1,e.next=14;break;case 11:return e.next=13,i.deleteObject({SessionFormIdentifier:Wn(this),Entity:t,Id:n});case 13:s=e.sent;case 14:return e.prev=14,a.dataUpdateCRS.leave(),e.finish(14);case 17:return e.delegateYield(en(this,s),"t2",18);case 18:return e.prev=18,this.monitor.inFlow--,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,,18,21],[4,,14,17]])}))},{key:"deleteObjectInOrderedList",value:o.a.mark((function e(t,n,r){var i,a,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=l(this),a=r.dataTable.getRowById(t),s=r.orderMember,c={},!s){e.next=10;break}return u=pi(r,s),r.dataTable.allRows.filter((function(e){return e[u.index]>a[u.index]})).forEach((function(e){var t=r.dataTable.getRowId(e),n=e[u.index]-1;c[t]=n})),e.next=9,i.deleteObjectInOrderedList({SessionFormIdentifier:Wn(this),Entity:n,Id:t,OrderProperty:s,UpdatedOrderValues:c});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))},{key:"saveSession",value:o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hn(this)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,this.monitor.inFlow++,t=l(this),r=Ee(this),e.prev=6,e.delegateYield(r.dataUpdateCRS.enterGenerator(),"t0",8);case 8:return e.next=10,t.saveSessionQuery(Wn(this));case 10:return i=e.sent,e.delegateYield(mu(this)(i,r.title),"t1",12);case 12:if(e.t1.canContinue){e.next=15;break}return e.abrupt("return",!1);case 15:return e.next=17,t.saveSession(Wn(this));case 17:n=e.sent,Ee(this).dataViews.forEach((function(e){return e.dataTable.unlockAddedRowPosition()}));case 19:return e.prev=19,r.dataUpdateCRS.leave(),e.finish(19);case 22:return e.delegateYield(an(this)(),"t2",23);case 23:return e.delegateYield(en(this,n),"t3",24);case 24:return Ee(this).dataViews.forEach((function(e){return e.dataTable.updateSortAndFilter({retainPreviousSelection:!0})})),e.delegateYield(this.updateTotalRowCounts(),"t4",26);case 26:return e.prev=26,this.monitor.inFlow--,e.finish(26);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e,this,[[2,,26,29],[6,,19,22]])}))},{key:"refreshLookups",value:o.a.mark((function e(){var t,n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=qt(this),n=t.flatMap((function(e){return Vs(e)})).filter((function(e){return e.isLookup})),r=new Set,i=Object(le.a)(n);try{for(i.s();!(a=i.n()).done;)(s=a.value).lookupEngine&&!r.has(s.lookupId)&&(s.lookupEngine.cleanAndReload(),ke(this).lookupListCache.deleteLookup(s.lookupId),r.add(s.lookupId))}catch(o){i.e(o)}finally{i.f()}case 5:case"end":return e.stop()}}),e,this)}))},{key:"refreshSession",value:o.a.mark((function e(){var t,n,r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.monitor.inFlow++,!this.eagerLoading){e.next=19;break}return(t=Ee(this)).dataViews.forEach((function(e){return e.saveViewState()})),n=l(this),e.prev=6,e.delegateYield(t.dataUpdateCRS.enterGenerator(),"t0",8);case 8:return e.next=10,n.refreshSession(Wn(this));case 10:r=e.sent;case 11:return e.prev=11,t.dataUpdateCRS.leave(),e.finish(11);case 14:return e.delegateYield(this.applyData(r),"t1",15);case 15:Ee(this).setDirty(!1),Ee(this).dataViews.forEach((function(e){return e.restoreViewState()})),e.next=20;break;case 19:return e.delegateYield(this.loadData({keepCurrentData:!1}),"t2",20);case 20:return Ee(this).setDirty(!1),e.delegateYield(this.refreshLookups(),"t3",22);case 22:Ee(this).clearDataCache();case 23:return e.prev=23,this.monitor.inFlow--,setTimeout(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.when)((function(){return a.allDataViewsSteady}));case 2:case"end":return e.stop()}}),e)}))),10),e.finish(23);case 27:return e.delegateYield(g_(this)(),"t4",28);case 28:return e.delegateYield(an(this)(),"t5",29);case 29:case"end":return e.stop()}}),e,this,[[0,,23,27],[6,,11,14]])}))},{key:"loadInitialData",value:function(){if(!this.eagerLoading){var e=this;Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.clearTotalCounts(),"t0",1);case 1:return t.delegateYield(e.loadData({keepCurrentData:!1}),"t1",2);case 2:return t.delegateYield(e.updateTotalRowCounts(),"t2",3);case 3:case"end":return t.stop()}}),t)})))()}}},{key:"clearTotalCounts",value:o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ee(this),n=Object(le.a)(t.rootDataViews);try{for(n.s();!(r=n.n()).done;)Co(i=r.value)&&!vi(i).isGrouping&&i.setRowCount(void 0)}catch(o){n.e(o)}finally{n.f()}case 3:case"end":return e.stop()}}),e,this)}))},{key:"updateTotalRowCounts",value:o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ee(this),n=Object(le.a)(t.rootDataViews),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=13;break}if(!Co(i=r.value)||vi(i).isGrouping){e.next=11;break}return e.next=9,this.updateTotalRowCount(i);case 9:return e.next=11,this.reloadAggregations(i);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[2,15,18,21]])}))},{key:"reloadAggregations",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=It(t).aggregations.aggregationList).length){e.next=4;break}return t.aggregationData.length=0,e.abrupt("return");case 4:if(!Co(t)){e.next=11;break}return e.next=7,Ae(t).loadAggregations(t,n);case 7:r=e.sent,t.aggregationData=nl(r)||[],e.next=12;break;case 11:t.aggregationData=ol(t,n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTotalRowCount",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(this),e.next=3,n.getAggregations({MenuId:Hn(t),SessionFormIdentifier:Wn(this),DataStructureEntityId:un(t),Filter:rr({ctx:t}),FilterLookups:br(t),MasterRowId:void 0,AggregatedColumns:[{ColumnName:"Id",AggregationType:Zs.COUNT}]});case 3:r=e.sent,(i=nl(r))&&i.length>0&&t.setRowCount(i[0].value);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeAction",value:o.a.mark((function e(t,n,r,i){var a,s,c,u,d,p,h,f,b,v,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.actionRunning){e.next=2;break}return e.abrupt("return");case 2:this.actionRunning=!0,e.prev=3,this.monitor.inFlow++,s={},c=Object(le.a)(r.parameters);try{for(c.s();!(u=c.n()).done;)d=u.value,s[d.name]=d.fieldName}catch(o){c.e(o)}finally{c.f()}return p=l(this),h=Ee(this),e.prev=10,e.delegateYield(h.dataUpdateCRS.enterGenerator(),"t0",12);case 12:return e.next=14,p.executeActionQuery({SessionFormIdentifier:Wn(this),Entity:n,ActionType:r.type,ActionId:r.id,ParameterMappings:s,SelectedItems:i,InputParameters:{}});case 14:return b=e.sent,e.delegateYield(mu(this)(b,h.title),"t1",16);case 16:if(e.t1.canContinue){e.next=19;break}return e.abrupt("return");case 19:return v=this,e.next=22,p.executeAction({SessionFormIdentifier:Wn(v),Entity:n,ActionType:r.type,ActionId:r.id,ParameterMappings:s,SelectedItems:i,InputParameters:{},RequestingGrid:t});case 22:f=e.sent;case 23:return e.prev=23,h.dataUpdateCRS.leave(),e.finish(23);case 26:return e.delegateYield(rn(r)(f),"t2",27);case 27:null===(y=Be(r))||void 0===y||null===(a=y.formFocusManager)||void 0===a||a.refocusLast();case 29:return e.prev=29,this.monitor.inFlow--,this.actionRunning=!1,e.finish(29);case 33:case"end":return e.stop()}}),e,this,[[3,,29,33],[10,,23,26]])}))},{key:"killForm",value:function(){this.clearAutoRefreshInterval(),this.disposers.forEach((function(e){return e()})),qt(this).forEach((function(e){return e.stop()})),Pe(this).content.setFormScreen(void 0)}},{key:"closeForm",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.monitor.inFlow++,e.delegateYield(X_(this)(),"t0",3);case 3:this.killForm();case 4:return e.prev=4,this.monitor.inFlow--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[0,,4,7]])}))},{key:"questionSaveData",value:function(){var e=this;return new Promise(Object(c.action)((function(t){var n=Rn(e,"",Object(re.jsx)(Ct,{screenTitle:Pe(e).tabTitle,onSaveClick:function(){n(),t(f_.Save)},onDontSaveClick:function(){n(),t(f_.NoSave)},onCancelClick:function(){n(),t(f_.Cancel)}}))})))}},{key:"questionDeleteData",value:function(){var e=this;return new Promise(Object(c.action)((function(t){var n=Rn(e,"",Object(re.jsx)(Ie.YesNoQuestion,{screenTitle:Pe(e).tabTitle,yesLabel:bt("Yes","button_yes"),noLabel:bt("No","button_no"),message:bt("Delete selected row?","delete_confirmation"),onNoClick:function(){n(),t(b_.No)},onYesClick:function(){n(),t(b_.Yes)}}))})))}},{key:"applyData",value:o.a.mark((function e(t){var n,r,i,a,s,u,l,p,h,f=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t||{});case 1:if(!(n<r.length)){e.next=23;break}i=Object(d.a)(r[n],2),a=i[0],s=i[1],u=zt(this,a),l=Object(le.a)(u),e.prev=5,h=o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.value,e.next=3,t.setRecords(s.data);case 3:return t.setRowCount(t.dataTable.rows.length),e.next=6,t.start();case 6:n=ge.a.debounce((function(){var e=f;In({ctx:t,action:function(){return e.reloadAggregations(t)}})}),10),f.registerDisposer(Object(c.reaction)((function(){var e=It(t);return e?[Object(gt.a)(e.aggregations.aggregationList),nr(t).activeFilters.map((function(e){return[e.propertyId,e.setting.type,e.setting.val1,e.setting.val2]})),!!Co(t)||0===t.dataTable.rows.length]:[]}),(function(){return n()}),{fireImmediately:!0})),f.registerDisposer(Object(c.reaction)((function(){return Ot(t)}),(function(){var e=It(t);la(e).activeTableConfiguration.apply(e)}),{fireImmediately:!0}));case 9:case"end":return e.stop()}}),e)})),l.s();case 8:if((p=l.n()).done){e.next=12;break}return e.delegateYield(h(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),l.e(e.t1);case 17:return e.prev=17,l.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,this,[[5,14,17,20]])}))},{key:"eagerLoading",get:function(){return!Gn(this)}}]),e}(),h_=Object($.a)(p_.prototype,"allDataViewsSteady",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object($.a)(p_.prototype,"killForm",[d_],Object.getOwnPropertyDescriptor(p_.prototype,"killForm"),p_.prototype),p_);function O_(e,t){return new _s({formScreenLifecycle:new w_,preloadedSessionId:e,refreshOnReturnType:t})}var j_=o.a.mark(k_);function k_(e,t,n,r,i,a,s,c,u,l,d){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Bt({menuItemId:t,menuItemType:n,order:r,tabTitle:i,content:a,dialogInfo:c,lazyLoading:s,parameters:u,isSleeping:l,isSleepingDirty:d}));case 1:case"end":return e.stop()}}),j_)}var x_,C_,I_,S_,D_;var R_,T_,__,P_,F_,M_,L_,E_,A_,V_,N_,B_,U_=function(){function e(t){Object(q.a)(this,e),this.$type_IMainMenuContent=1,this.menuUI=void 0,this.parent=void 0,Object.assign(this,t)}return Object(Q.a)(e,[{key:"getItemById",value:function(e){return function t(n){if(n.attributes.id===e)return n;var r,o=Object(le.a)(n.elements||[]);try{for(o.s();!(r=o.n()).done;){var i=t(r.value);if(i)return i}}catch(a){o.e(a)}finally{o.f()}}(this.menuUI)}}]),e}(),G_=(x_=c.action.bound,C_=c.action.bound,I_=function(){function e(){Object(q.a)(this,e),this.$type_IMainMenuEnvelope=1,Object(de.a)(this,"mainMenu",S_,this),Object(de.a)(this,"isLoading",D_,this),this.parent=void 0}return Object(Q.a)(e,[{key:"setMainMenu",value:function(e){e?(e.parent=this,this.mainMenu=new Proxy(e,{get:function(e,t){return t in e?e[t]:e.parent[t]},set:function(e,t,n){return t in e?e[t]=n:e.parent[t]=n,!0}})):this.mainMenu=void 0}},{key:"setLoading",value:function(e){this.isLoading=e}}]),e}(),S_=Object($.a)(I_.prototype,"mainMenu",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D_=Object($.a)(I_.prototype,"isLoading",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(I_.prototype,"setMainMenu",[x_],Object.getOwnPropertyDescriptor(I_.prototype,"setMainMenu"),I_.prototype),Object($.a)(I_.prototype,"setLoading",[C_],Object.getOwnPropertyDescriptor(I_.prototype,"setLoading"),I_.prototype),I_),W_=(R_=c.action.bound,T_=function(){function e(t,n,r,o){Object(q.a)(this,e),this.screenUrl=n,this.menuItemId=r,this.order=o,this.$type_IOpenedScreen=1,this.$type_IWebScreen=1,this.parentSessionId=void 0,this.isBeingClosed=!1,this.reloader=null,Object(de.a)(this,"stackPosition",__,this),Object(de.a)(this,"tabTitle",P_,this),Object(de.a)(this,"formTitle",F_,this),Object(de.a)(this,"isActive",M_,this),this.isDialog=!1,this.isClosed=!1,this.parent=void 0,this.menuItemType=null,this.lazyLoading=!1,this.dialogInfo=void 0,this.content=null,this.parameters={},this.hasDynamicTitle=!1,this.parentContext=void 0,this.activationHandler=new Vt,this.tabTitle=t,this.formTitle=t}return Object(Q.a)(e,[{key:"setActive",value:function(e){this.isActive=e,this.isActive&&this.activationHandler.call()}},{key:"setContent",value:function(e){}},{key:"setTitle",value:function(e){this.tabTitle=e}},{key:"setReloader",value:function(e){this.reloader=e}},{key:"reload",value:function(){this.reloader&&this.reloader.reload()}}]),e}(),__=Object($.a)(T_.prototype,"stackPosition",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P_=Object($.a)(T_.prototype,"tabTitle",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F_=Object($.a)(T_.prototype,"formTitle",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M_=Object($.a)(T_.prototype,"isActive",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(T_.prototype,"setActive",[R_],Object.getOwnPropertyDescriptor(T_.prototype,"setActive"),T_.prototype),T_);function H_(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Ae(e),t.delegateYield(r.onFlushData(),"t0",3);case 3:return t.delegateYield(r.onWorkflowNextClick(n),"t1",4);case 4:t.next=10;break;case 6:return t.prev=6,t.t2=t.catch(0),t.delegateYield(yt(e)(t.t2),"t3",9);case 9:throw t.t2;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))}function z_(e){return ke(e).chatrooms}function Y_(e){return ke(e).notifications}function K_(e){return ke(e).favorites}!function(e){e.None="None",e.ReloadActualRecord="ReloadActualRecord",e.RefreshCompleteForm="RefreshCompleteForm",e.MergeModalDialogChanges="MergeModalDialogChanges"}(B_||(B_={}));var q_=(L_=function(){function e(){Object(q.a)(this,e),this.$type_IWorkbenchLifecycle=1,Object(de.a)(this,"portalSettings",E_,this),Object(de.a)(this,"userInfo",A_,this),Object(de.a)(this,"logoUrl",V_,this),Object(de.a)(this,"customAssetsRoute",N_,this),this.mainMenuItemClickHandler=new Vt,this.parent=void 0}return Object(Q.a)(e,[{key:"onMainMenuItemClick",value:o.a.mark((function e(t){var n,r,i,a,s,c,u,l,d,p,h,f,b,v,y,g,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item.attributes,r=n.type,i=n.id,a=n.label,s=n.dialogWidth,c=n.dialogHeight,u=n.lazyLoading,l=n.urlOpenMethod,d=t.event,p="true"===t.item.attributes.alwaysOpenNew||t.forceOpenNew,this.mainMenuItemClickHandler.call(),"LaunchBrowserWindow"!==l){e.next=10;break}return e.next=7,this.getReportTabUrl(i);case 7:return h=e.sent,window.open(h),e.abrupt("return");case 10:if(f=bn(this),r!==gn.FormRefWithSelection&&r!==gn.ReportRefWithSelection||(b=new Nt(parseInt(s,10),parseInt(c,10))),!d||d.ctrlKey||d.metaKey){e.next=40;break}if(!(v=f.findLastExistingTabItem(i))||r===gn.FormRefWithSelection||r===gn.ReportReferenceMenuItem||r===gn.ReportRefWithSelection||p){e.next=29;break}if(f.activateItem(i,v.order),!(y=v).isSleeping){e.next=24;break}return y.isSleeping=!1,e.delegateYield(this.initUIForScreen(y,!1,void 0,t.isSingleRecordEdit),"t0",20);case 20:return g=e.t0,e.delegateYield(y.content.start(g,y.isSleepingDirty),"t1",22);case 22:e.next=27;break;case 24:if(!(y.content&&y.content.formScreen&&y.content.formScreen.refreshOnFocus)||y.content.isLoading){e.next=27;break}if(pn(y.content.formScreen)){e.next=27;break}return e.delegateYield(Ve(y.content.formScreen)(),"t2",27);case 27:e.next=38;break;case 29:if(r!==gn.ReportReferenceMenuItem){e.next=37;break}return e.next=32,this.getReportTabUrl(i);case 32:return m=e.sent,e.delegateYield(this.openNewUrl(m,t.item.attributes.label),"t3",34);case 34:return e.abrupt("return");case 37:return e.delegateYield(this.openNewForm(i,r,a,"true"===u,b,t.idParameter?{id:t.idParameter}:{},void 0,void 0,void 0,void 0,void 0,void 0,t.isSingleRecordEdit),"t4",38);case 38:e.next=41;break;case 40:return e.delegateYield(this.openNewForm(i,r,a,"true"===u,b,t.idParameter?{id:t.idParameter}:{},void 0,void 0,void 0,void 0,void 0,void 0,t.isSingleRecordEdit),"t5",41);case 41:case"end":return e.stop()}}),e,this)}))},{key:"onMainMenuItemIdClick",value:o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.itemId&&Ze.getItemById(this,t.itemId),t.isSingleRecordEdit&&(delete(n=Object(Fe.a)({},n)).parent,delete n.elements,n=Object(ia.a)(n,(function(e){e.attributes.isLazyLoading="false"}))),!n){e.next=5;break}return e.next=5,sa(this)({event:void 0,item:n,idParameter:t.idParameter,isSingleRecordEdit:t.isSingleRecordEdit});case 5:case"end":return e.stop()}}),e,this)}))},{key:"getReportTabUrl",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(this),e.next=3,n.getReportFromMenu({menuId:t});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onWorkQueueListItemClick",value:o.a.mark((function e(t,n){var r,i,a,s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bn(this),this.mainMenuItemClickHandler.call(),i=n.id,a=gn.WorkQueue,s=n.name,t&&(t.ctrlKey||t.metaKey)){e.next=25;break}if(!(u=r.findLastExistingTabItem(i))){e.next=22;break}if(r.activateItem(i,u.order),!(l=u).isSleeping){e.next=17;break}return l.isSleeping=!1,e.delegateYield(this.initUIForScreen(l,!1,void 0),"t0",13);case 13:return d=e.t0,e.delegateYield(l.content.start(d,l.isSleepingDirty),"t1",15);case 15:e.next=20;break;case 17:if(!(l.content&&l.content.formScreen&&l.content.formScreen.refreshOnFocus)||l.content.isLoading){e.next=20;break}if(pn(l.content.formScreen)){e.next=20;break}return e.delegateYield(Ve(l.content.formScreen)(),"t2",20);case 20:e.next=23;break;case 22:return e.delegateYield(this.openNewForm(i,a,s,!1,c,{}),"t3",23);case 23:e.next=26;break;case 25:return e.delegateYield(this.openNewForm(i,a,s,!1,c,{}),"t4",26);case 26:case"end":return e.stop()}}),e,this)}))},{key:"onChatroomsListItemClick",value:o.a.mark((function e(t,n){var r,i,a,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bn(this),i="/chatrooms/index.html#/chatroom?chatroomId=".concat(n.id),a=i,!(s=r.findLastExistingTabItem(a))){e.next=19;break}if(r.activateItem(a,s.order),!(c=s).isSleeping){e.next=14;break}return c.isSleeping=!1,e.delegateYield(this.initUIForScreen(c,!1),"t0",10);case 10:return u=e.t0,e.delegateYield(c.content.start(u,c.isSleepingDirty),"t1",12);case 12:e.next=17;break;case 14:if(!(c.content&&c.content.formScreen&&c.content.formScreen.refreshOnFocus)||c.content.isLoading){e.next=17;break}if(pn(c.content.formScreen)){e.next=17;break}return e.delegateYield(Ve(c.content.formScreen)(),"t2",17);case 17:e.next=20;break;case 19:return e.delegateYield(Ht(this)(i,Gt.OrigamTab,n.topic),"t3",20);case 20:case"end":return e.stop()}}),e,this)}))},{key:"onScreenTabHandleClick",value:o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bn(this).activateItem(n.menuItemId,n.order),!n.isSleeping){e.next=9;break}return n.isSleeping=!1,e.delegateYield(this.initUIForScreen(n,!1),"t0",5);case 5:return r=e.t0,e.delegateYield(n.content.start(r,n.isSleepingDirty),"t1",7);case 7:e.next=12;break;case 9:if(!(n.content&&n.content.formScreen&&n.content.formScreen.refreshOnFocus)||n.content.isLoading){e.next=12;break}if(pn(n.content.formScreen)){e.next=12;break}return e.delegateYield(Ve(n.content.formScreen)(),"t2",12);case 12:case"end":return e.stop()}}),e,this)}))},{key:"closeForm",value:o.a.mark((function e(t){var n,r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=bn(t),r=t.parentContext?Pe(t.parentContext):void 0,i=r&&!r.isClosed?r:n.findTopmostItemExcept(t.menuItemId,t.order),n.deleteItem(t.menuItemId,t.order),!t.dialogInfo){e.next=15;break}if(!t.isActive){e.next=13;break}if(!i){e.next=13;break}if(n.activateItem(i.menuItemId,i.order),!i.isSleeping){e.next=13;break}return i.isSleeping=!1,e.delegateYield(this.initUIForScreen(i,!1),"t0",11);case 11:return a=e.t0,e.delegateYield(i.content.start(a,i.isSleepingDirty),"t1",13);case 13:e.next=28;break;case 15:if(!t.isActive){e.next=28;break}if(!i){e.next=28;break}if(n.activateItem(i.menuItemId,i.order),!i.isSleeping){e.next=25;break}return i.isSleeping=!1,e.delegateYield(this.initUIForScreen(i,!1),"t2",21);case 21:return s=e.t2,e.delegateYield(i.content.start(s,i.isSleepingDirty),"t3",23);case 23:e.next=28;break;case 25:if(!(i.content&&i.content.formScreen&&i.content.formScreen.refreshOnFocus)||i.content.isLoading){e.next=28;break}if(pn(i.content.formScreen)){e.next=28;break}return e.delegateYield(Ve(i.content.formScreen)(),"t4",28);case 28:return e.delegateYield(this.destroyUI(t),"t5",29);case 29:t.content&&t.content.formScreen&&(c=Al(t.content.formScreen))&&c.disposeWithChildren(),t.isClosed=!0;case 31:case"end":return e.stop()}}),e,this)}))},{key:"destroyUI",value:o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l(this),!t.content){e.next=10;break}if(!t.content.formScreen){e.next=7;break}return e.next=5,n.destroyUI({FormSessionId:Wn(t.content.formScreen)});case 5:e.next=10;break;case 7:if(!t.content.preloadedSessionId){e.next=10;break}return e.next=10,n.destroyUI({FormSessionId:t.content.preloadedSessionId});case 10:case"end":return e.stop()}}),e,this)}))},{key:"openNewForm",value:o.a.mark((function e(t,n,r,i,a,s,c,u,l,d,p,h,f){var b,v,y,g,m,w,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=bn(this),v=b.findLastExistingTabItem(t),y=O_(l,h),e.delegateYield(k_(0,t,n,v?v.order+1:0,r,y,i,a,s,d,p),"t0",4);case 4:if(g=e.t0,e.prev=5,b.pushItem(g),d||(g.parentContext=c,b.activateItem(g.menuItemId,g.order)),!d){e.next=10;break}return e.abrupt("return");case 10:return e.delegateYield(this.initUIForScreen(g,!d,u,f),"t1",11);case 11:return m=e.t1,e.delegateYield(y.start(m),"t2",13);case 13:return w=s.id,e.delegateYield(this.selectAndOpenRowById(w,y),"t3",15);case 15:if(!(null===(O=g.content.formScreen)||void 0===O?void 0:O.autoWorkflowNext)){e.next=19;break}return e.next=19,H_(O)(void 0);case 19:e.next=26;break;case 21:return e.prev=21,e.t4=e.catch(5),e.delegateYield(yt(this)(e.t4),"t5",24);case 24:return e.delegateYield(this.closeForm(g),"t6",25);case 25:throw e.t4;case 26:case"end":return e.stop()}}),e,this,[[5,21]])}))},{key:"selectAndOpenRowById",value:o.a.mark((function e(t,n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n.formScreen){e.next=20;break}r=Object(le.a)(n.formScreen.dataViews),e.prev=2,a=o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.value,!(void 0!==n.dataTable.rows.find((function(e){return n.dataTable.getRowId(e)===t})))||!n.activateFormView||n.isHeadless){e.next=7;break}return n.setSelectedRowId(t),e.next=6,n.activateFormView({saveNewState:!1});case 6:return e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)})),r.s();case 5:if((i=r.n()).done){e.next=12;break}return e.delegateYield(a(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))},{key:"initUIForScreen",value:o.a.mark((function e(t,n,r,i){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l(this),!r){e.next=5;break}return e.next=4,a.initUI(r);case 4:case 7:return e.abrupt("return",e.sent);case 5:return e.next=7,a.initUI({Type:t.menuItemType,Caption:t.tabTitle,ObjectId:t.menuItemId,FormSessionId:t.content.preloadedSessionId,IsNewSession:n,RegisterSession:!0,DataRequested:!t.lazyLoading,Parameters:t.parameters,IsSingleRecordEdit:i,RequestCurrentRecordId:!0});case 8:case"end":return e.stop()}}),e,this)}))},{key:"openNewUrl",value:o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=bn(this),i=new W_(n,t,t,0),r.pushItem(i),r.activateItem(i.menuItemId,i.order);case 4:case"end":return e.stop()}}),e,this)}))},{key:"initPortal",value:o.a.mark((function e(){var t,n,r,i,a,s,c,u,d,p,h,f,b,v,y,g,m,w,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(this),e.next=3,r.initPortal();case 3:if((i=e.sent).title&&(document.title=i.title),this.userInfo={userName:i.userName,avatarLink:i.avatarLink},this.logoUrl=i.logoUrl,this.customAssetsRoute=i.customAssetsRoute,this.portalSettings={showChat:i.chatRefreshInterval>0,showWorkQueues:i.workQueueListRefreshInterval>0,helpUrl:i.helpUrl,showToolTipsForMemoFieldsOnly:i.showToolTipsForMemoFieldsOnly,filterConfig:{caseSensitive:i.filteringConfig.caseSensitive,accentSensitive:i.filteringConfig.accentSensitive}},o=i.menu,Pu(a=_u(o,(function(e){return"Menu"===e.name}))[0]),K_(this).setXml(i.favorites),He(this).setMainMenu(new U_({menuUI:a})),on(this).indexMainMenu(a),!i.initialScreenId||0!==i.sessions.length&&i.sessions.some((function(e){return e.objectId===i.initialScreenId}))){e.next=18;break}return s=nn(this,i.initialScreenId),e.next=18,sa(this)({event:null,item:s,idParameter:void 0});case 18:if(window.localStorage.getItem("debugCloseAllForms")){e.next=39;break}c=Object(le.a)(i.sessions),e.prev=20,c.s();case 22:if((u=c.n()).done){e.next=29;break}return p=u.value,h=nn(this,p.objectId),f=!!h&&"true"===(null===h||void 0===h||null===(d=h.attributes)||void 0===d?void 0:d.lazyLoading),e.delegateYield(this.openNewForm(p.objectId,p.type,p.caption,f,void 0,{},void 0,void 0,p.formSessionId,!0,p.isDirty),"t0",27);case 27:e.next=22;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),c.e(e.t1);case 34:return e.prev=34,c.f(),e.finish(34);case 37:e.next=56;break;case 39:b=Object(le.a)(i.sessions),e.prev=40,b.s();case 42:if((v=b.n()).done){e.next=48;break}return y=v.value,e.next=46,r.destroyUI({FormSessionId:y.formSessionId});case 46:e.next=42;break;case 48:e.next=53;break;case 50:e.prev=50,e.t2=e.catch(40),b.e(e.t2);case 53:return e.prev=53,b.f(),e.finish(53);case 56:if(!((g=bn(this)).items.length>0)){e.next=65;break}return w=i.initialScreenId&&null!==(m=g.items.find((function(e){return e.menuItemId===i.initialScreenId})))&&void 0!==m?m:g.items[0],g.activateItem(w.menuItemId,w.order),w.isSleeping=!1,e.delegateYield(this.initUIForScreen(w,!1),"t3",62);case 62:if(O=e.t3,!w.content){e.next=65;break}return e.delegateYield(w.content.start(O,w.isSleepingDirty),"t4",65);case 65:if(!(null===(t=this.portalSettings)||void 0===t?void 0:t.showWorkQueues)){e.next=67;break}return e.delegateYield(Je(this).startTimer(i.workQueueListRefreshInterval),"t5",67);case 67:if(!(null===(n=this.portalSettings)||void 0===n?void 0:n.showChat)){e.next=69;break}return e.delegateYield(z_(this).startTimer(i.chatRefreshInterval),"t6",69);case 69:if(!(i.notificationBoxRefreshInterval>0)){e.next=71;break}return e.delegateYield(Y_(this).startTimer(i.notificationBoxRefreshInterval),"t7",71);case 71:case"end":return e.stop()}var o}),e,this,[[20,31,34,37],[40,50,53,56]])}))},{key:"run",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.initPortal(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),E_=Object($.a)(L_.prototype,"portalSettings",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A_=Object($.a)(L_.prototype,"userInfo",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V_=Object($.a)(L_.prototype,"logoUrl",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N_=Object($.a)(L_.prototype,"customAssetsRoute",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(L_.prototype,"openNewForm",[Le.a],Object.getOwnPropertyDescriptor(L_.prototype,"openNewForm"),L_.prototype),L_);function Q_(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Ae(e).onRequestScreenReload(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function X_(e){return o.a.mark((function t(){var n,r,i,a,s,c,u,d,p,h,f,b,v,y,g,m,w,O,j,k,x,C,I;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=_e(e),c=Pe(e),fn(e).onFormClose(c.content.formScreen),t.delegateYield(s.closeForm(c),"t0",4);case 4:if(!(null===(n=c.content)||void 0===n?void 0:n.refreshOnReturnType)){t.next=76;break}u=c.content.refreshOnReturnType,d=Pe(c.parentContext),p=Ee(c.parentContext),t.t1=u,t.next=t.t1===B_.ReloadActualRecord?11:t.t1===B_.RefreshCompleteForm?32:t.t1===B_.MergeModalDialogChanges?35:76;break;case 11:if(!Gn(e)){t.next=13;break}return t.abrupt("break",76);case 13:h=Object(le.a)(p.dataViews),t.prev=14,h.s();case 16:if((f=h.n()).done){t.next=23;break}return b=f.value,v=Fn(b),t.next=21,v.runRecordChangedReaction();case 21:t.next=16;break;case 23:t.next=28;break;case 25:t.prev=25,t.t2=t.catch(14),h.e(t.t2);case 28:return t.prev=28,h.f(),t.finish(28);case 31:return t.abrupt("break",76);case 32:return t.next=34,Q_(p)();case 34:return t.abrupt("break",76);case 35:return y=l(e),g=d.content.formScreen.sessionId,t.next=39,y.pendingChanges({sessionFormIdentifier:g});case 39:m=t.sent,w=Object(le.a)(m),t.prev=41,w.s();case 43:if((O=w.n()).done){t.next=48;break}return j=O.value,t.delegateYield(en(c.parentContext,j),"t3",46);case 46:t.next=43;break;case 48:t.next=53;break;case 50:t.prev=50,t.t4=t.catch(41),w.e(t.t4);case 53:return t.prev=53,w.f(),t.finish(53);case 56:k=null!==(r=null===d||void 0===d||null===(i=d.content)||void 0===i||null===(a=i.formScreen)||void 0===a?void 0:a.dataViews)&&void 0!==r?r:[],x=Object(le.a)(k),t.prev=58,x.s();case 60:if((C=x.n()).done){t.next=67;break}return(I=C.value).dataTable.unlockAddedRowPosition(),t.next=65,I.dataTable.updateSortAndFilter();case 65:t.next=60;break;case 67:t.next=72;break;case 69:t.prev=69,t.t5=t.catch(58),x.e(t.t5);case 72:return t.prev=72,x.f(),t.finish(72);case 75:return t.abrupt("break",76);case 76:case"end":return t.stop()}}),t,null,[[14,25,28,31],[41,50,53,56],[58,69,72,75]])}))}function Z_(e){return Object(c.flow)(o.a.mark((function t(n,r){var i,a,s,c,u,l,d,p,h,f,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=Pe(e),u=null!==(i=null===(a=c.content)||void 0===a||null===(s=a.formScreen)||void 0===s?void 0:s.dataViews)&&void 0!==i?i:[],l=Object(le.a)(u);try{for(l.s();!(d=l.n()).done;)h=d.value,null===(p=It(h))||void 0===p||p.setEditing(!1)}catch(o){l.e(o)}finally{l.f()}if(t.prev=4,null===n||void 0===n||null===(f=n.stopPropagation)||void 0===f||f.call(n),!m_.has(c)){t.next=8;break}return t.abrupt("return");case 8:if(m_.add(c),!c.content||c.content.isLoading){t.next=14;break}return b=Ae(c.content.formScreen),t.delegateYield(b.onRequestScreenClose(r),"t0",12);case 12:t.next=15;break;case 14:return t.delegateYield(X_(e)(),"t1",15);case 15:t.next=21;break;case 17:return t.prev=17,t.t2=t.catch(4),t.delegateYield(yt(e)(t.t2),"t3",20);case 20:throw t.t2;case 21:return t.prev=21,m_.delete(c),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[4,17,21,24]])})))}var $_,J_,eP,tP,nP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidCatch",value:function(e,t){var n,r;console.log("CAUGHT ERROR:",e,t),null===(n=(r=this.props).onErrorCaught)||void 0===n||n.call(r,e,t)}},{key:"render",value:function(){return this.props.children}}]),n}(H.a.Component),rP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"handleScreenError",value:function(e){var t=this;Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.delegateYield(yt(t.props.ctx)(e),"t0",2);case 2:n.next=6;break;case 4:n.prev=4,n.t1=n.catch(0);case 6:return n.prev=6,n.next=9,Z_(t.props.ctx)(void 0,!0);case 9:return n.finish(6);case 10:case"end":return n.stop()}}),n,null,[[0,4,6,10]])})))()}},{key:"render",value:function(){var e=this;return Object(re.jsx)(nP,{onErrorCaught:function(t){return e.handleScreenError(t)},children:this.props.children})}}]),n}(H.a.Component);function oP(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Pe(e),t.delegateYield(_e(e).onScreenTabHandleClick(n,r),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}var iP=Object(K.observer)((eP=J_=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){var e=vn(this.workbench);return Object(re.jsx)(Te,{children:e.map((function(e){return Object(re.jsx)(rP,{ctx:e,children:Object(re.jsx)(aP,{item:e})},"".concat(e.menuItemId,"@").concat(e.order))}))})}}]),n}(H.a.Component),J_.contextType=K.MobXProviderContext,$_=eP))||$_,aP=Object(K.observer)(tP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.item,t=sP(e);return Object(re.jsx)(Se,{title:t,isActive:e.isActive,hasCloseBtn:!0,isDirty:pn(e),onClick:function(t){return oP(e)(t)},onCloseClick:function(t){return Z_(e)(t)},onCloseMouseDown:function(t){return(n=e,function(e){var t=Pe(n);t&&(t.isBeingClosed=!0)})(t);var n},children:t},"".concat(e.menuItemId,"@").concat(e.order))}}]),n}(H.a.Component))||tP;function sP(e){return e?[e.tabTitle,e.order>0&&!e.hasDynamicTitle?"[".concat(e.order,"]"):""].join(" "):""}var cP,uP,lP=n(398),dP=n.n(lP),pP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:dP.a.root,children:this.props.children})}}]),n}(H.a.Component),hP=n(195),fP=n.n(hP),bP=(cP=c.action.bound,uP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"handleWindowKeyDown",value:function(e){var t,n,r,o;(null===(t=(n=this.props).shortcutPredicate)||void 0===t?void 0:t.call(n,e))&&(e.preventDefault(),null===(r=(o=this.props).onShortcut)||void 0===r||r.call(o,e))}},{key:"kbdHandlerUp",value:function(){window.addEventListener("keydown",this.handleWindowKeyDown)}},{key:"kbdHandlerDown",value:function(){window.removeEventListener("keydown",this.handleWindowKeyDown)}},{key:"componentDidMount",value:function(){this.props.onShortcut&&this.props.shortcutPredicate&&this.kbdHandlerUp()}},{key:"componentDidUpdate",value:function(e){e.onShortcut&&e.shortcutPredicate||!this.props.onShortcut||!this.props.shortcutPredicate?!e.onShortcut||!e.shortcutPredicate||this.props.onShortcut&&this.props.shortcutPredicate||this.kbdHandlerDown():this.kbdHandlerUp()}},{key:"componentWillUnmount",value:function(){this.kbdHandlerDown()}},{key:"render",value:function(){return Object(re.jsxs)("div",{ref:this.props.rootRef,className:ne()(fP.a.root,{isLabelless:!this.props.label,isHidden:this.props.isHidden},this.props.className),onMouseDown:this.props.onMouseDown,onClick:this.props.onClick,id:this.props.id,title:this.props.label,children:[this.props.icon&&Object(re.jsx)("div",{className:fP.a.icon,children:this.props.icon}),this.props.label&&Object(re.jsx)("div",{className:fP.a.label,children:this.props.label})]})}}]),n}(H.a.Component),Object($.a)(uP.prototype,"handleWindowKeyDown",[cP],Object.getOwnPropertyDescriptor(uP.prototype,"handleWindowKeyDown"),uP.prototype),uP),vP=n(399),yP=n.n(vP),gP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:yP.a.root})}}]),n}(H.a.Component);function mP(e){return Object(c.flow)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(tt(e).onSignOutClick({event:n}),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}var wP=n(400),OP=n.n(wP),jP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{ref:this.props.domRef,className:ne()(OP.a.root,{grovable:this.props.grovable}),children:this.props.children})}}]),n}(H.a.Component);function kP(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(Ae(e).onSaveSession(),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}function xP(e){return bn(e).activeScreenActions}var CP=n(58),IP=n.n(CP),SP=function(e){return Object(re.jsxs)("div",{className:IP.a.root,children:[Object(re.jsxs)("div",{className:IP.a.avatarSection,children:[Object(re.jsx)("div",{className:IP.a.pictureSection,children:Object(re.jsx)("div",{className:IP.a.avatarContainer,children:Object(re.jsx)("img",{className:IP.a.avatar,src:e.avatarLink,alt:""})})}),Object(re.jsx)("div",{className:IP.a.infoSection,children:e.userName})]}),Object(re.jsxs)("div",{className:IP.a.actionSection,children:[Object(re.jsx)("div",{className:IP.a.menuItemDivider}),e.actionItems]})]})},DP=function(e){return Object(re.jsx)(rd,{style:{width:"auto"},trigger:function(t){var n=t.refTrigger,r=t.setDropped;return Object(re.jsx)("div",{ref:n,onMouseDown:function(){return r(!0)},children:Object(re.jsxs)("div",{className:IP.a.avatarSection,children:[Object(re.jsx)("div",{className:IP.a.pictureSection,children:Object(re.jsx)("div",{className:IP.a.avatarContainer,children:Object(re.jsx)("img",{className:ne()(IP.a.avatar,IP.a.clickableAvatar),src:e.avatarLink,alt:""})})}),!e.hideLabel&&Object(re.jsx)("div",{className:IP.a.userNameLabel,children:e.userName})]})})},content:function(t){var n=t.setDropped;return Object(re.jsx)(wd,{children:Object(re.jsx)(SP,{userName:e.userName||"Logged user",avatarLink:e.avatarLink,actionItems:Object(re.jsxs)(re.Fragment,{children:[e.helpUrl&&""!==e.helpUrl.trim()&&Object(re.jsx)(kd,{onClick:function(){n(!1),window.open(e.helpUrl)},children:bt("Help","help_button")}),Object(re.jsx)(kd,{onClick:function(){n(!1),e.onAboutClick()},children:bt("About","about_application")}),Object(re.jsx)(kd,{onClick:e.handleLogoutClick,className:"redItem",children:bt("Log out","sign_out_tool_tip")})]})})})}})};function RP(e){var t;return null===(t=_e(e).userInfo)||void 0===t?void 0:t.userName}var TP=function(e){return e.$type_IWebScreen};function _P(e){for(var t=e;;){if(TP(t))return t;t=t.parent}}function PP(e){var t;return null===(t=_e(e).userInfo)||void 0===t?void 0:t.avatarLink}function FP(e){return _e(e).customAssetsRoute}function MP(e){var t;return null===(t=_e(e).portalSettings)||void 0===t?void 0:t.helpUrl}function LP(e){return ke(e).about}var EP,AP,VP,NP,BP,UP,GP=n(401),WP=n.n(GP),HP=n(196),zP=n.n(HP),YP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=window.ORIGAM_CLIENT_REVISION_HASH,t=window.ORIGAM_CLIENT_REVISION_DATE;return Object(re.jsxs)("div",{className:zP.a.root,children:[Object(re.jsx)("div",{children:"Server version:"}),Object(re.jsx)("div",{className:zP.a.version,children:this.props.aboutInfo.serverVersion}),Object(re.jsx)("br",{}),Object(re.jsx)("div",{children:"Client version:"}),Object(re.jsxs)("div",{className:zP.a.version,children:[Object(re.jsxs)("div",{children:["Commit ID: ",Object(re.jsx)("a",{href:"https://github.com/origam/origam-html/commit/"+e,children:e})]}),Object(re.jsxs)("div",{children:["Commit Date: ",t]})]}),Object(re.jsx)("br",{}),Object(re.jsx)("div",{children:Object(re.jsx)("a",{href:"/Attributions.txt",target:"_blank",rel:"noreferrer",children:"Copyright attributions"})}),Object(re.jsx)("br",{}),Object(re.jsx)("div",{children:"Copyright 2020 Advantage Solutions, s. r. o."}),Object(re.jsx)("br",{})]})}}]),n}(H.a.Component),KP=Object(K.observer)(EP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:bt("About","about_application"),titleButtons:null,buttonsCenter:Object(re.jsx)(re.Fragment,{children:Object(re.jsx)("button",{tabIndex:0,onClick:function(){return e.props.onOkClick()},children:bt("Ok","button_ok")})}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent+" "+WP.a.contentArea,children:Object(re.jsx)(YP,{aboutInfo:this.props.aboutInfo})})})}}]),n}(H.a.Component))||EP;function qP(e){return Ee(e).suppressRefresh}function QP(e){var t=yn(e);if(!t||t.content){var n=t&&!t.content.isLoading?t.content.formScreen:void 0,r=n&&n.isDirty,o=!!n;return{actionButtonsVisible:o,formScreen:n,isSaveButtonVisible:o&&!hn(n),isRefreshButtonVisible:o&&!qP(n),isDirty:!!r}}}function XP(e){return"s"===e.key&&(e.ctrlKey||e.metaKey)}function ZP(e){return"r"===e.key&&(e.ctrlKey||e.metaKey)}var $P,JP,eF,tF=(AP=c.action.bound,Object(K.observer)((UP=BP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hiddenActionIds:new Set},e}return Object(Q.a)(n,[{key:"application",get:function(){return this.context.application}},{key:"about",get:function(){return LP(this.application)}},{key:"componentDidMount",value:function(){this.about.update()}},{key:"onAboutClick",value:function(){var e=Rn(this.application,"",Object(re.jsx)(KP,{aboutInfo:this.about.info,onOkClick:function(){e()}}))}},{key:"handleLogoutClick",value:function(e){mP(this.application)(e)}},{key:"getOverfullActionsDropdownContent",value:function(e,t,n){var r=FP(this.application),o=e.flatMap((function(e){return e.actions})).some((function(e){return e.iconUrl}));function i(e){return e.iconUrl?Object(re.jsx)(Ie.Icon,{src:r+"/"+e.iconUrl}):o?Object(re.jsx)("div",{}):null}return e.filter((function(e){return e.actions.length>0})).map((function(e){return Object(re.jsx)(W.Fragment,{children:e.actions.filter((function(e){return(!t||t(e))&&pd(e)})).map((function(e,t){return Object(re.jsx)(kd,{children:Object(re.jsx)(bP,{icon:i(e),label:e.caption,onClick:function(t){Id.onActionClick(e)(t,e),n(!1)}})})}))},e.section)}))}},{key:"renderActions",value:function(e){var t=this,n=e.filter((function(e){return pd(e)}));return n.filter((function(e){return!e.groupId})).map((function(e,r){return t.renderAction(e,n,r)}))}},{key:"renderAction",value:function(e,t,n){var r=this,o=FP(this.application);if(e.type===Lt.Dropdown){var i=t.filter((function(t){return t.groupId===e.id}));return Object(re.jsx)(rd,{style:{width:"auto"},trigger:function(t){var n=t.refTrigger,r=t.setDropped,i=t.isDropped;return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(bP,{rootRef:n,onMouseDown:function(){return r(!0)},className:i?"isActiveDropDownAction":"",icon:e.iconUrl?Object(re.jsx)(Ie.Icon,{src:o+"/"+e.iconUrl}):void 0,label:e.caption})}},e.id)},content:function(e){return Object(re.jsx)(wd,{children:r.getOverfullActionsDropdownContent([{section:"",actions:i}],void 0,e.setDropped)})}})}return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(bP,{icon:e.iconUrl?Object(re.jsx)(Ie.Icon,{src:o+"/"+e.iconUrl}):void 0,label:e.caption,onClick:function(t){Id.onActionClick(e)(t,e)}})}},e.id)}},{key:"renderForFormScreen",value:function(){var e=this,t=QP(this.application);if(!t)return null;var n=xP(this.application),r=RP(this.application),o=PP(this.application);return Object(re.jsxs)(pP,{children:[t.actionButtonsVisible?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsxs)(jP,{children:[t.isSaveButtonVisible&&Object(re.jsx)(bP,{className:t.isDirty?"isRed isHoverGreen":"",onClick:kP(t.formScreen),onShortcut:kP(t.formScreen),id:"saveButton",shortcutPredicate:XP,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/save.svg",className:t.isDirty?"isRed isHoverGreen":"",tooltip:bt("Save","save_tool_tip")}),label:bt("Save","save_tool_tip")}),t.isRefreshButtonVisible&&Object(re.jsx)(bP,{onClick:Q_(t.formScreen),onShortcut:Q_(t.formScreen),id:"refreshButton",shortcutPredicate:ZP,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/refresh.svg",tooltip:bt("Refresh","refresh_tool_tip")}),label:bt("Refresh","refresh_tool_tip")})]}),Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(jP,{grovable:!0,children:n.filter((function(e){return e.actions.length>0})).map((function(t){return Object(re.jsx)(jP,{children:e.renderActions(t.actions)},t.section)}))})}})]}):null,this.state.hiddenActionIds.size>0&&Object(re.jsx)(rd,{style:{width:"auto"},trigger:function(e){var t=e.refTrigger,n=e.setDropped;return Object(re.jsx)(bP,{rootRef:t,onMouseDown:function(){return n(!0)},icon:Object(re.jsx)(Ie.Icon,{src:"./icons/dot-menu.svg",tooltip:""})})},content:function(t){return Object(re.jsx)(wd,{children:e.getOverfullActionsDropdownContent(n,(function(t){return e.state.hiddenActionIds.has(t.id)}),t.setDropped)})}}),Object(re.jsx)(bP,{onClick:function(){return Xi(e.application)},icon:Object(re.jsx)(Ie.Icon,{src:"./icons/search.svg"})}),Object(re.jsx)(DP,{avatarLink:o,userName:r,handleLogoutClick:function(t){return e.handleLogoutClick(t)},ctx:this.application,onAboutClick:function(){return e.onAboutClick()},helpUrl:MP(this.application)})]})}},{key:"renderForWebScreen",value:function(){var e,t=this,n=yn(this.application),r=RP(this.application),i=PP(this.application);return Object(re.jsxs)(pP,{children:[Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(jP,{children:Object(re.jsx)(bP,{onMouseDown:(e=n,Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,_P(e).reload(),t.next=8;break;case 4:return t.prev=4,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",7);case 7:throw t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))),icon:Object(re.jsx)(Ie.Icon,{src:"./icons/refresh.svg",tooltip:bt("Refresh","refresh_tool_tip")}),label:bt("Refresh","refresh_tool_tip")})})}),Object(re.jsx)(gP,{}),Object(re.jsx)(bP,{onClick:function(){return Xi(t.application)},icon:Object(re.jsx)(Ie.Icon,{src:"./icons/search.svg"})}),Object(re.jsx)(DP,{avatarLink:i,userName:r,handleLogoutClick:function(e){return t.handleLogoutClick(e)},ctx:this.application,onAboutClick:function(){return t.onAboutClick()},helpUrl:MP(this.application)})]})}},{key:"renderDefault",value:function(){var e=this,t=RP(this.application),n=PP(this.application);return Object(re.jsxs)(pP,{children:[Object(re.jsx)(gP,{}),Object(re.jsx)(bP,{onClick:function(){return Xi(e.application)},icon:Object(re.jsx)(Ie.Icon,{src:"./icons/search.svg"})}),Object(re.jsx)(DP,{avatarLink:n,userName:t,handleLogoutClick:function(t){return e.handleLogoutClick(t)},ctx:this.application,onAboutClick:function(){return e.onAboutClick()},helpUrl:MP(this.application)})]})}},{key:"render",value:function(){var e=yn(this.application);return e?e.content&&e.content.$type_IFormScreenEnvelope?this.renderForFormScreen():TP(e)?this.renderForWebScreen():null:this.renderDefault()}}]),n}(H.a.Component),BP.contextType=K.MobXProviderContext,NP=UP,Object($.a)(NP.prototype,"handleLogoutClick",[AP],Object.getOwnPropertyDescriptor(NP.prototype,"handleLogoutClick"),NP.prototype),VP=NP))||VP),nF=n(402),rF=n.n(nF),oF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:rF.a.root,children:this.props.children})}}]),n}(H.a.Component),iF=n(403),aF=n.n(iF),sF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:aF.a.root,children:this.props.children})}}]),n}(H.a.Component),cF=(n(744),function(e){return Object(re.jsx)("div",{className:"sidebar",children:e.children})}),uF=n(404),lF=n.n(uF),dF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:ne()(lF.a.root,{isActive:this.props.isActive}),children:this.props.children})}}]),n}(H.a.Component),pF=n(405),hF=n.n(pF),fF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:hF.a.root})}}]),n}(H.a.Component),bF=n(197),vF=n.n(bF),yF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsxs)("a",{id:this.props.id,ref:this.props.refDom,className:ne()(vF.a.root,{isActive:this.props.isActive}),onClick:this.props.onClick,onContextMenu:this.props.onContextMenu,children:[Object(re.jsx)("div",{className:vF.a.icon,children:this.props.icon}),Object(re.jsx)("div",{className:vF.a.label,children:this.props.label})]})}}]),n}(H.a.Component),gF=n(406),mF=n.n(gF),wF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("ul",{className:mF.a.root,children:this.props.children})}}]),n}(H.a.Component),OF=n(407),jF=n.n(OF),kF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("li",{className:jF.a.root,children:this.props.children})}}]),n}(H.a.Component),xF=n(153),CF=n.n(xF),IF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:CF.a.linkContainer,onContextMenu:this.props.onContextMenu,children:Object(re.jsxs)("a",{ref:this.props.refDom,className:ne()(CF.a.anchor,{isActive:this.props.isActive,isHidden:this.props.isHidden,isOpenedScreen:this.props.isOpenedScreen,isActiveScreen:this.props.isActiveScreen,isHighLighted:this.props.isHighLighted}),style:{paddingLeft:"".concat(1.6667*this.props.level,"em")},onClick:this.props.onClick,title:this.props.label,children:[Object(re.jsx)("div",{className:CF.a.icon,children:this.props.icon}),Object(re.jsx)("div",{className:CF.a.label,id:this.props.id,children:this.props.label})]})})}}]),n}(H.a.Component);function SF(e){return He(e).isLoading}var DF,RF=Object(K.observer)((JP=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).options=void 0,Object(de.a)(r,"selectedOption",eF,Object(pe.a)(r)),r.options=r.props.favorites.map((function(e){return{value:e,label:e.name}})),r.selectedOption=r.options[0],r}return Object(Q.a)(n,[{key:"onKeydown",value:function(e){"Enter"===e.key&&this.props.onOkClick(this.selectedOption.value.id)}},{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:bt("Select Favourites Folder","select_group_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,onClick:function(){return e.props.onOkClick(e.selectedOption.value.id)},children:bt("Ok","button_ok")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:Object(re.jsx)("div",{className:Fd.a.inpuContainer,children:Object(re.jsxs)("div",{className:Fd.a.row,children:[Object(re.jsx)("div",{className:Fd.a.label,children:bt("Name:","group_name")}),Object(re.jsx)(Ie.SimpleDropdown,{width:"150px",options:this.options,selectedOption:this.selectedOption,onOptionClick:function(t){return e.selectedOption=t}})]})})})})}}]),n}(H.a.Component),eF=Object($.a)(JP.prototype,"selectedOption",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$P=JP))||$P;function TF(e,t){switch(e){case DF.Form:return"./icons/document.svg";case DF.Workflow:return"./icons/settings.svg";case DF.WorkQueue:return"./icons/work-queue.svg";case DF.Chat:return"./icons/chat.svg";case DF.Folder:return"./icons/folder-closed.svg";default:return t||"./icons/document.svg"}}function _F(e){return Object(c.flow)(o.a.mark((function t(n){var r,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===n||void 0===n||null===(r=n.item)||void 0===r||null===(i=r.attributes)||void 0===i?void 0:i.id){t.next=3;break}return t.abrupt("return");case 3:return a=l(e),t.next=6,a.resetScreenColumnConfiguration({instanceId:n.item.attributes.id});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.delegateYield(yt(e)(t.t0),"t1",11);case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))}!function(e){e.Form="menu_form.png",e.Folder="menu_folder.png",e.Workflow="menu_workflow.png",e.Parameter="menu_parameter.png",e.WorkQueue="./icons/work-queue.svg",e.Chat="./icons/chat.svg"}(DF||(DF={}));var PF,FF,MF,LF,EF,AF,VF,NF,BF,UF,GF,WF,HF,zF,YF,KF,qF,QF,XF=n(91),ZF=n.n(XF),$F=n(408),JF=n.n($F),eM=function(e){return Object(re.jsx)("div",{className:ne()(JF.a.root,{isActive:e.isActive}),children:e.children})},tM=n(409),nM=n.n(tM),rM=n(100),oM=n.n(rM),iM=Object(K.observer)(PF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getClass",value:function(){var e="fas  fa-edit ".concat(oM.a.headerIcon," ").concat(nM.a.editIcon);return this.props.isVisible||this.props.isEnabled||(e+=" "+oM.a.headerIconHidden),this.props.isEnabled&&(e+=" "+oM.a.headerIconActive),e}},{key:"render",value:function(){var e=this;return Object(re.jsx)("i",{title:this.props.tooltip,className:this.getClass(),onClick:function(){return e.props.onClick()}})}}]),n}(H.a.Component))||PF,aM=Object(K.inject)((function(e){return e}))(FF=Object(K.observer)((AF=EF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"mouseInHeader",LF,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"application",get:function(){return this.context.application}},{key:"onMouseEnter",value:function(){this.mouseInHeader=!0,Ot(this.application)&&this.props.onClick()}},{key:"onEditClick",value:function(){this.props.mainMenuState.editing=!this.props.mainMenuState.editing;var e=ze(this.application);this.props.mainMenuState.editing&&(this.props.onClick(),this.isAnyCommandVisible(e.menuUI)||this.ensureAtLeastOneCommandVisible(e.menuUI))}},{key:"isAnyCommandVisible",value:function(e){if(e.elements.some((function(e){return"Command"===e.name})))return!0;var t,n=Object(le.a)(e.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("Submenu"===r.name&&"true"!==r.attributes.isHidden&&this.props.mainMenuState.isOpen(r.attributes.id))if(this.isAnyCommandVisible(r))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"ensureAtLeastOneCommandVisible",value:function(e){if(e.elements.some((function(e){return"Command"===e.name})))return!0;var t,n=Object(le.a)(e.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("Submenu"===r.name&&"true"!==r.attributes.isHidden)if(this.props.mainMenuState.isOpen(r.attributes.id)||this.props.mainMenuState.setIsOpen(r.attributes.id,!0),this.ensureAtLeastOneCommandVisible(r))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"render",value:function(){var e=this,t=this.application,n=SF(t),r=ze(t);return n||!r?null:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(fF,{}),Object(re.jsxs)("div",{className:ZF.a.topMenuHeader,onMouseEnter:function(){return e.onMouseEnter()},onMouseLeave:function(){return e.mouseInHeader=!1},children:[Object(re.jsx)(yF,{id:"menuHeader",isActive:this.props.isActive,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/menu.svg",tooltip:bt("Menu","menu")}),label:bt("Menu","menu"),onClick:function(){return e.props.onClick()}}),Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(iM,{isVisible:e.mouseInHeader,isEnabled:e.props.mainMenuState.editing,onClick:function(){return e.onEditClick()},tooltip:bt("Manage Favourites","manage_favorites")})}})]}),Object(re.jsx)(eM,{isActive:this.props.isActive,children:sM(r.menuUI,1,!0)})]})}}]),n}(H.a.Component),EF.contextType=K.MobXProviderContext,MF=AF,LF=Object($.a)(MF.prototype,"mouseInHeader",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(MF.prototype,"onEditClick",[c.action],Object.getOwnPropertyDescriptor(MF.prototype,"onEditClick"),MF.prototype),FF=MF))||FF)||FF;function sM(e,t,n){return Object(re.jsx)(wF,{children:e.elements.filter((function(e){return"true"!==e.attributes.isHidden})).map((function(e){return function(e,t,n){switch(e.name){case"Submenu":return Object(re.jsx)(kF,{children:Object(re.jsx)(hM,{node:e,level:t,isOpen:n})},e.$iid);case"Command":return Object(re.jsx)(kF,{children:Object(re.jsx)(cM,{node:e,level:t,isOpen:n})},e.$iid);default:return Object(re.jsx)(re.Fragment,{})}}(e,t,n)}))})}var cM=Object(K.inject)((function(e){return e}))(VF=Object(K.observer)((BF=NF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"menuId",get:function(){return this.props.node.attributes.id}},{key:"favorites",get:function(){return K_(this.workbench)}},{key:"render",value:function(){var e=this,t=this.props,n=FP(this.workbench),r=yn(this.workbench),o=r?r.menuItemId:void 0,i=this.workbench.openedScreenIdSet.has(t.node.attributes.id);return Object(re.jsx)(rd,{trigger:function(r){var a=r.refTrigger,s=r.setDropped;return Object(re.jsxs)("div",{className:ZF.a.favoritesMenuItem+(i?" "+ZF.a.isOpenedScreen:""),children:[Object(re.jsx)(IF,{refDom:a,level:t.level,id:"menu_"+t.node.attributes.id,isActive:!1,icon:Object(re.jsx)(Ie.Icon,{src:TF(t.node.attributes.icon,n+"/"+t.node.attributes.icon),tooltip:t.node.attributes.label}),label:t.node.attributes.label,isHidden:!t.isOpen,isOpenedScreen:i,isActiveScreen:o===t.node.attributes.id,onClick:function(n){return sa(e.workbench)({event:n,item:t.node,idParameter:void 0})},onContextMenu:function(e){s(!0,e),e.preventDefault(),e.stopPropagation()}}),e.props.mainMenuState.editing&&Object(re.jsx)(pM,{isVisible:t.isOpen,menuId:e.menuId,ctx:e.workbench})]})},content:function(n){var r=n.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{onClick:function(n){r(!1),sa(e.workbench)({event:n,item:t.node,idParameter:void 0})},children:bt("Open","open_form")}),Object(re.jsx)(kd,{onClick:function(n){r(!1),sa(e.workbench)({event:n,item:t.node,idParameter:void 0,forceOpenNew:!0})},children:bt("Open in New Tab","open_in_new_tab")}),("FormReferenceMenuItem"===t.node.attributes.type||"FormReferenceMenuItem_WithSelection"===t.node.attributes.type)&&Object(re.jsx)(kd,{onClick:function(n){r(!1),_F(e.workbench)({item:t.node})},children:bt("Reset Column Configuration","reset_column_configuration")}),!e.favorites.isInAnyFavoriteFolder(e.menuId)&&Object(re.jsx)(kd,{onClick:function(t){r(!1),dM(e.workbench,e.menuId)},children:bt("Put to favourites","put_to_favourites")})]})}})}}]),n}(H.a.Component),NF.contextType=K.MobXProviderContext,VF=BF))||VF)||VF,uM=Object(K.observer)((WF=GF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"menuId",get:function(){return this.props.node.attributes.id}},{key:"favorites",get:function(){return K_(this.workbench)}},{key:"getIconSrc",value:function(){if(this.props.editingEnabled)return"./icons/minus.svg";var e=FP(this.workbench);return TF(this.props.node.attributes.icon,e+"/"+this.props.node.attributes.icon)}},{key:"onIconClick",value:function(e){this.props.editingEnabled?lM(this.workbench,this.menuId):sa(this.workbench)({event:e,item:this.props.node,idParameter:void 0})}},{key:"onClick",value:function(e){this.props.editingEnabled||sa(this.workbench)({event:e,item:this.props.node,idParameter:void 0})}},{key:"render",value:function(){var e=this,t=this.props,n=yn(this.workbench),r=n?n.menuItemId:void 0,o=this.workbench.openedScreenIdSet.has(t.node.attributes.id);return Object(re.jsx)(rd,{trigger:function(n){var i=n.refTrigger,a=n.setDropped;return Object(re.jsxs)("div",{className:ne()(ZF.a.favoritesMenuItem,{openItem:o}),children:[Object(re.jsx)(IF,{refDom:i,level:t.level,isActive:!1,icon:Object(re.jsx)("div",{onClick:function(t){return e.onIconClick(t)},children:Object(re.jsx)(Ie.Icon,{src:e.getIconSrc(),tooltip:t.node.attributes.label,className:e.props.editingEnabled?ZF.a.deleteIcon:""})}),label:t.node.attributes.label,isHidden:!t.isOpen,isOpenedScreen:o,isActiveScreen:r===t.node.attributes.id,onClick:function(n){e.props.editingEnabled||sa(e.workbench)({event:n,item:t.node,idParameter:void 0})},onContextMenu:function(e){a(!0,e),e.preventDefault(),e.stopPropagation()}}),e.props.editingEnabled?Object(re.jsx)("i",{className:"fas fa-bars "+ZF.a.itemGrip}):null]})},content:function(n){var r=n.setDropped;return Object(re.jsxs)(wd,{children:[Object(re.jsx)(kd,{onClick:function(t){return e.onClick(t)},children:bt("Open","open_form")}),Object(re.jsx)(kd,{onClick:function(n){r(!1),sa(e.workbench)({event:n,item:t.node,idParameter:void 0,forceOpenNew:!0})},children:bt("Open in New Tab","open_in_new_tab")}),("FormReferenceMenuItem"===t.node.attributes.type||"FormReferenceMenuItem_WithSelection"===t.node.attributes.type)&&Object(re.jsx)(kd,{onClick:function(n){r(!1),_F(e.workbench)({item:t.node})},children:bt("Reset Column Configuration","reset_column_configuration")}),e.favorites.isInAnyFavoriteFolder(e.menuId)&&Object(re.jsx)(kd,{onClick:function(t){r(!1),lM(e.workbench,e.menuId)},children:bt("Remove from Favourites","remove_from_favourites")})]})}})}}]),n}(H.a.Component),GF.contextType=K.MobXProviderContext,UF=WF))||UF;function lM(e,t){var n=K_(e);In({ctx:e,action:function(){return n.remove(t)}})}function dM(e,t){var n=K_(e),r=Rn(e,"",Object(re.jsx)(RF,{onOkClick:function(o){In({ctx:e,action:function(){return n.add(o,t)}}),r()},onCancelClick:function(){return r()},favorites:n.favoriteFolders}))}var pM=Object(K.observer)(HF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this,t=K_(this.props.ctx);return Object(re.jsx)("div",{className:ne()(ZF.a.addToFavoritesIconContainer,{isHidden:!this.props.isVisible}),onClick:function(){t.isInAnyFavoriteFolder(e.props.menuId)?lM(e.props.ctx,e.props.menuId):dM(e.props.ctx,e.props.menuId)},children:Object(re.jsx)(Ie.Icon,{tooltip:bt("Add To / Remove From Favourites","put_remove_to_favourites"),className:ne()(ZF.a.addToFavoritesIcon,{activeAddToFavoritesIcon:!t.isInAnyFavoriteFolder(this.props.menuId)}),src:"./icons/favorites.svg"})})}}]),n}(H.a.Component))||HF,hM=(zF=c.action.bound,Object(K.observer)((QF=qF=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).itemRef=H.a.createRef(),e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.mainMenuState.setReference(this.id,this.itemRef)}},{key:"id",get:function(){return this.props.node.attributes.id}},{key:"mainMenuState",get:function(){return Hi(this.context.application)}},{key:"handleClick",value:function(e){this.mainMenuState.flipIsOpen(this.id)}},{key:"icon",get:function(){if(this.props.node.attributes.icon!==DF.Folder){var e=FP(this.context.application);return Object(re.jsx)(Ie.Icon,{src:e+"/"+this.props.node.attributes.icon,tooltip:this.props.node.attributes.label})}return this.mainMenuState.isOpen(this.id)?Object(re.jsx)(Ie.Icon,{src:"./icons/folder-open.svg",tooltip:this.props.node.attributes.label}):Object(re.jsx)(Ie.Icon,{src:"./icons/folder-closed.svg",tooltip:this.props.node.attributes.label})}},{key:"render",value:function(){var e=this.props;return Object(re.jsxs)("div",{id:this.id,ref:this.itemRef,children:[Object(re.jsx)(IF,{level:e.level,isActive:!1,icon:this.icon,id:"menu_"+e.node.attributes.id,label:e.node.attributes.label,isHidden:!e.isOpen,onClick:this.handleClick,isHighLighted:this.id===this.mainMenuState.highLightedItemId}),sM(e.node,e.level+1,this.props.isOpen&&this.mainMenuState.isOpen(this.id))]})}}]),n}(H.a.Component),qF.contextType=K.MobXProviderContext,KF=QF,Object($.a)(KF.prototype,"handleClick",[zF],Object.getOwnPropertyDescriptor(KF.prototype,"handleClick"),KF.prototype),YF=KF))||YF);function fM(e){return Je(e).totalItemCount}var bM,vM,yM,gM,mM=n(198),wM=n.n(mM),OM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).itemRef=H.a.createRef(),e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.id&&this.mainMenuState.setReference(this.props.id,this.itemRef)}},{key:"mainMenuState",get:function(){return Hi(this.context.application)}},{key:"render",value:function(){return Object(re.jsxs)("a",{ref:this.itemRef,className:ne()(wM.a.root,{isActiveScreen:this.props.isActiveScreen,isOpenedScreen:this.props.isOpenedScreen},{isHidden:this.props.isHidden},{isEmphasized:this.props.isEmphasized}),style:{paddingLeft:"".concat(1.6667*(this.props.level||1),"em")},onClick:this.props.onClick,title:this.props.tooltip,children:[Object(re.jsx)("div",{className:wM.a.icon,children:this.props.icon}),Object(re.jsx)("div",{className:wM.a.label,children:this.props.label})]})}}]),n}(H.a.Component);function jM(e){return Object(c.flow)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(_e(e).onWorkQueueListItemClick(n,r),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}OM.contextType=K.MobXProviderContext;var kM,xM=Object(K.observer)((gM=yM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"sortedItems",get:function(){var e=Object(gt.a)(Je(this.workbench).items);return e.sort((function(e,t){return(e.name||"").localeCompare(t.name||"")})),e}},{key:"render",value:function(){var e=this;return Object(re.jsx)(re.Fragment,{children:this.sortedItems.map((function(t){var n=yn(e.workbench),r=n?n.menuItemId:void 0;return Object(re.jsx)(OM,{isEmphasized:t.countTotal>0,isOpenedScreen:e.workbench.openedScreenIdSet.has(t.id),isActiveScreen:r===t.id,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/work-queue.svg",tooltip:t.name}),tooltip:t.name,label:Object(re.jsxs)(re.Fragment,{children:[t.name,t.countTotal>0&&Object(re.jsxs)(re.Fragment,{children:[" (",t.countTotal,")"]})]}),id:t.id,onClick:function(n){return jM(e.workbench)(n,t)}},t.id)}))})}}]),n}(H.a.Component),yM.contextType=K.MobXProviderContext,vM=gM,Object($.a)(vM.prototype,"sortedItems",[c.computed],Object.getOwnPropertyDescriptor(vM.prototype,"sortedItems"),vM.prototype),bM=vM))||bM;!function(e){e[e.Info=0]="Info",e[e.Audit=1]="Audit"}(kM||(kM={}));var CM=n(410),IM=n.n(CM),SM=function(e){return Object(re.jsx)("div",{className:IM.a.root,children:e.children})},DM=Object(K.observer)((function(e){var t=ca(Object(W.useContext)(K.MobXProviderContext).workbench);return Object(re.jsxs)(re.Fragment,{children:[e.activeSubsection===kM.Info&&t.info.length>0&&Object(re.jsx)(PO,{lines:t.info}),e.activeSubsection===kM.Audit&&t.audit&&Object(re.jsx)(SM,{})]})}));var RM,TM,_M,PM=n(411),FM=n.n(PM);function MM(e){return Object(c.flow)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(_e(e).onChatroomsListItemClick(n,r),"t0",2);case 2:t.next=8;break;case 4:return t.prev=4,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",7);case 7:throw t.t1;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))}var LM=Object(K.observer)((_M=TM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"sortedItems",get:function(){return z_(this.workbench).items}},{key:"render",value:function(){var e=this;return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(OM,{isEmphasized:!1,isOpenedScreen:!1,isActiveScreen:!1,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/add.svg",tooltip:bt("New Chat","new_chat")}),label:Object(re.jsx)(re.Fragment,{children:bt("New Chat","new_chat")}),onClick:function(t){var n=e;Object(c.flow)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Ht(n.workbench)("chatrooms/index.html#/chatroom",Gt.OrigamTab,"New Chat"),"t0",1);case 1:case"end":return e.stop()}}),e)})))()}}),this.sortedItems.map((function(t){var n=yn(e.workbench),r=n?n.menuItemId:void 0;return Object(re.jsx)(OM,{isEmphasized:t.unreadMessageCount>0,isOpenedScreen:e.workbench.openedScreenIdSet.has(t.id),isActiveScreen:r===t.id,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/chat.svg",tooltip:t.topic}),label:Object(re.jsxs)(re.Fragment,{children:[t.topic,t.unreadMessageCount>0&&Object(re.jsxs)(re.Fragment,{children:[" (",t.unreadMessageCount,")"]})]}),onClick:function(n){return MM(e.workbench)(n,t)},id:t.id})}))]})}}]),n}(H.a.Component),TM.contextType=K.MobXProviderContext,RM=_M))||RM;var EM,AM,VM,NM=n(79),BM=n.n(NM),UM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:BM.a.root,children:this.props.groups.map((function(t){return Object(re.jsx)(GM,{ctx:e.props.ctx,name:t.name,results:t.results},t.name)}))})}}]),n}(H.a.Component),GM=Object(K.observer)((AM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"isExpanded",VM,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"onGroupClick",value:function(){this.isExpanded=!this.isExpanded}},{key:"favorites",get:function(){return K_(this.props.ctx)}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:BM.a.resultGroupRow,onClick:function(){return e.onGroupClick()},children:[this.isExpanded?Object(re.jsx)("i",{className:"fas fa-angle-up "+BM.a.arrow}):Object(re.jsx)("i",{className:"fas fa-angle-down "+BM.a.arrow}),Object(re.jsx)("div",{className:BM.a.groupName,children:this.props.name})]}),Object(re.jsx)("div",{children:this.isExpanded&&this.props.results.map((function(t){return Object(re.jsx)(rd,{trigger:function(e){var n=e.refTrigger,r=e.setDropped;return Object(re.jsx)(WM,{refDom:n,result:t,onContextMenu:function(e){r(!0,e),e.preventDefault(),e.stopPropagation()}})},content:function(n){var r,o=n.setDropped;return Object(re.jsx)(wd,{children:(r=t,"type"in r&&!e.favorites.isInAnyFavoriteFolder(t.id)&&Object(re.jsx)(kd,{onClick:function(n){o(!1),dM(e.props.ctx,t.id)},children:bt("Put to favourites","put_to_favourites")}))})}})}))})]})}}]),n}(H.a.Component),VM=Object($.a)(AM.prototype,"isExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),EM=AM))||EM;function WM(e){return Object(re.jsxs)("div",{className:BM.a.resultItem,onContextMenu:e.onContextMenu,ref:e.refDom,onClick:function(){return e.result.onClick()},children:[Object(re.jsx)(Ie.Icon,{className:BM.a.icon,src:e.result.iconUrl}),Object(re.jsxs)("div",{className:BM.a.textContainer,children:[Object(re.jsx)("div",{className:BM.a.resultItemName,children:e.result.label}),e.result.description&&Object(re.jsx)("div",{className:BM.a.resultItemDescription,children:e.result.description})]})]})}var HM,zM,YM,KM,qM,QM,XM,ZM,$M,JM,eL,tL,nL=n(199),rL=n.n(nL),oL=Object(K.observer)((zM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"groupName",YM,Object(pe.a)(e)),Object(de.a)(e,"isPinned",KM,Object(pe.a)(e)),e.refInput=H.a.createRef(),e}return Object(Q.a)(n,[{key:"isInvalid",get:function(){return""===this.groupName}},{key:"onNameChanged",value:function(e){this.groupName=e.target.value}},{key:"onIsPinnedClicked",value:function(e){this.isPinned=e.target.checked}},{key:"componentDidMount",value:function(){var e;null===(e=this.refInput.current)||void 0===e||e.focus()}},{key:"onKeydown",value:function(e){"Enter"===e.key&&this.onOkClick()}},{key:"onOkClick",value:function(){this.isInvalid||this.props.onOkClick(this.groupName,this.isPinned)}},{key:"render",value:function(){var e=this;return Object(re.jsx)(xt,{title:this.props.title,titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{tabIndex:0,onClick:function(){return e.onOkClick()},children:bt("Ok","button_ok")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onCancelClick,children:bt("Cancel","button_cancel")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:Object(re.jsxs)("div",{className:lc.a.inpuContainer,children:[Object(re.jsxs)("div",{className:lc.a.row,children:[Object(re.jsx)("div",{className:lc.a.label,children:bt("Name:","group_name")}),Object(re.jsx)("input",{ref:this.refInput,className:lc.a.textInput,value:this.groupName,onChange:function(t){return e.onNameChanged(t)},onKeyDown:function(t){return e.onKeydown(t)}}),this.isInvalid&&Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:lc.a.notification,title:bt("Name cannot be empty","group_name_empty"),children:Object(re.jsx)("i",{className:"fas fa-exclamation-circle red"})})})]}),Object(re.jsxs)("div",{id:lc.a.lastRow,className:lc.a.row,children:[Object(re.jsx)("div",{className:lc.a.label,children:bt("Pin to the Top:","group_pinned")}),Object(re.jsx)("input",{className:lc.a.chcekBoxinput,type:"checkbox",checked:this.isPinned,onChange:function(t){return e.onIsPinnedClicked(t)}})]})]})})})}}]),n}(H.a.Component),YM=Object($.a)(zM.prototype,"groupName",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return null!==(e=this.props.name)&&void 0!==e?e:""}}),KM=Object($.a)(zM.prototype,"isPinned",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return null!==(e=this.props.isPinned)&&void 0!==e&&e}}),HM=zM))||HM,iL=Object(K.observer)(qM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getClass",value:function(){var e="fas fa-thumbtack "+oM.a.headerIcon;return this.props.isVisible||(e+=" "+oM.a.headerIconHidden),this.props.isPinned&&(e+=" "+oM.a.headerIconActive),e}},{key:"render",value:function(){var e=this;return Object(re.jsx)("i",{title:bt("Pin Favourites to the Top","pin_favorites"),className:this.getClass(),onClick:function(){return e.props.onClick()}})}}]),n}(H.a.Component))||qM,aL=o.a.mark(uL),sL=Object(K.observer)((XM=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).favorites=void 0,r.dragStateContainer=new cL,Object(de.a)(r,"mouseInHeader",ZM,Object(pe.a)(r)),r.favorites=K_(r.props.ctx),r}return Object(Q.a)(n,[{key:"canBeDeleted",get:function(){return this.props.folder.id!==this.favorites.defaultFavoritesFolderId}},{key:"onCreateNewFolderClick",value:function(){var e=this,t=Rn(this.props.ctx,"",Object(re.jsx)(oL,{title:bt("New Favourites Folder","new_group_title"),onOkClick:function(n,r){In({ctx:e.props.ctx,action:function(){return e.favorites.createFolder(n,r)}}),t()},onCancelClick:function(){return t()}}))}},{key:"onFolderPropertiesClick",value:function(){var e=this,t=Rn(this.props.ctx,"",Object(re.jsx)(oL,{title:bt("Favourites Folder Properties","group_properties_title"),name:this.props.folder.name,isPinned:this.props.folder.isPinned,onOkClick:function(n,r){In({ctx:e.props.ctx,action:function(){return e.favorites.updateFolder(e.props.folder.id,n,r)}}),t()},onCancelClick:function(){return t()}}))}},{key:"onMouseEnter",value:function(){var e,t;(this.mouseInHeader=!0,Ot(this.props.ctx))&&(null===(e=(t=this.props).onHeaderClick)||void 0===e||e.call(t))}},{key:"onEditClick",value:function(){var e,t;this.dragStateContainer.flipEditEnabled(),null===(e=(t=this.props).onHeaderClick)||void 0===e||e.call(t)}},{key:"listFromNode",value:function(e,t,n){var r=this,o=function(e){return Array.from(uL(e.elements))}(e).filter((function(e){return"true"!==e.attributes.isHidden&&"Submenu"!==e.name}));return Object(re.jsx)(rd,{trigger:function(e){var i=e.refTrigger,a=e.setDropped;return Object(re.jsx)("div",{ref:i,className:rL.a.favoritesList,onContextMenu:function(e){a(!0,e),e.preventDefault(),e.stopPropagation()},children:Object(re.jsx)(cO.c,{droppableId:"favorite_folder_"+r.props.folder.id,children:function(e){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)("div",Object(Fe.a)(Object(Fe.a)({},e.droppableProps),{},{ref:e.innerRef,children:[r.props.folder.itemIds.map((function(e){return o.find((function(t){return t.attributes.id===e}))})).map((function(e,o){return Object(re.jsx)(cO.b,{draggableId:"favorite_item_"+e.attributes.id,index:o,isDragDisabled:!r.dragStateContainer.editingEnabled,children:function(o){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",Object(Fe.a)(Object(Fe.a)(Object(Fe.a)({ref:o.innerRef},o.draggableProps),o.dragHandleProps),{},{children:Object(re.jsx)(uM,{node:e,level:t,isOpen:n,editingEnabled:r.dragStateContainer.editingEnabled})}))}})}},e.$iid)})),e.placeholder]}))}})}})})},content:function(e){var t=e.setDropped;return Object(re.jsx)(wd,{children:Object(re.jsx)(kd,{onClick:function(e){t(!1),r.onCreateNewFolderClick()},children:bt("Add Folder","add_group")})})}})}},{key:"renderHeader",value:function(){var e=this;return Object(re.jsx)(rd,{trigger:function(t){var n=t.refTrigger,r=t.setDropped;return Object(re.jsx)(cO.c,{droppableId:"favorite_folder_header_"+e.props.folder.id,children:function(t){return Object(re.jsxs)("div",Object(Fe.a)(Object(Fe.a)({className:rL.a.favoritesFolderHeader},t.droppableProps),{},{ref:t.innerRef,onMouseEnter:function(){return e.onMouseEnter()},onMouseLeave:function(){return e.mouseInHeader=!1},children:[Object(re.jsx)(yF,{isActive:!e.props.forceOpen&&e.props.isActive,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/favorites.svg",tooltip:e.props.folder.name}),label:e.props.folder.name,onClick:function(){var t,n;return null===(t=(n=e.props).onHeaderClick)||void 0===t?void 0:t.call(n)},refDom:n,onContextMenu:function(e){r(!0,e),e.preventDefault(),e.stopPropagation()}}),Object(re.jsx)(be.a,{children:function(){return Object(re.jsxs)("div",{children:[Object(re.jsx)(iL,{isVisible:e.mouseInHeader||e.dragStateContainer.editingEnabled,isPinned:e.props.folder.isPinned,onClick:function(){return e.favorites.setPinned(e.props.folder.id,!e.props.folder.isPinned)}}),Object(re.jsx)(iM,{isVisible:e.mouseInHeader,isEnabled:e.dragStateContainer.editingEnabled,onClick:function(){return e.onEditClick()},tooltip:bt("Edit Favourites","edit_favorites")})]})}})]}))}})},content:function(t){var n=t.setDropped;return Object(re.jsxs)(wd,{children:[e.canBeDeleted&&Object(re.jsx)(kd,{onClick:function(t){n(!1),In({ctx:e.props.ctx,action:function(){return e.favorites.removeFolder(e.props.folder.id)}})},children:bt("Remove Folder","remove_group")}),!e.props.folder.isPinned&&Object(re.jsx)(kd,{onClick:function(t){n(!1),In({ctx:e.props.ctx,action:function(){return e.favorites.setPinned(e.props.folder.id,!0)}})},children:bt("Pin to the top","group_pin")}),e.props.folder.isPinned&&Object(re.jsx)(kd,{onClick:function(t){n(!1),In({ctx:e.props.ctx,action:function(){return e.favorites.setPinned(e.props.folder.id,!1)}})},children:bt("Unpin","group_unpin")}),Object(re.jsx)(kd,{onClick:function(t){n(!1),e.onCreateNewFolderClick()},children:bt("Put to favourites","add_group")}),Object(re.jsx)(kd,{onClick:function(t){n(!1),e.onFolderPropertiesClick()},children:bt("Properties","group_properties")})]})},style:{height:"auto"}})}},{key:"render",value:function(){var e=SF(this.props.ctx),t=ze(this.props.ctx);return e||!t?null:this.props.forceOpen?Object(re.jsxs)("div",{className:rL.a.forceOpenSection,children:[Object(re.jsx)(fF,{}),this.renderHeader(),Object(re.jsx)(eM,{isActive:!0,children:this.props.folder&&Object(re.jsx)(re.Fragment,{children:this.listFromNode(t.menuUI,1,!0)})})]}):Object(re.jsxs)(dF,{isActive:this.props.isActive,children:[Object(re.jsx)(fF,{}),this.renderHeader(),Object(re.jsx)(eM,{isActive:this.props.isActive,children:this.props.folder&&this.props.isActive&&Object(re.jsx)(re.Fragment,{children:this.listFromNode(t.menuUI,1,!0)})})]})}}]),n}(H.a.Component),ZM=Object($.a)(XM.prototype,"mouseInHeader",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(XM.prototype,"onEditClick",[c.action],Object.getOwnPropertyDescriptor(XM.prototype,"onEditClick"),XM.prototype),QM=XM))||QM,cL=(tL=eL=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"editingEnabled",JM,this),e.instances.push(this)}return Object(Q.a)(e,[{key:"flipEditEnabled",value:function(){if(!this.editingEnabled){var t,n=Object(le.a)(e.instances);try{for(n.s();!(t=n.n()).done;){t.value.editingEnabled=!1}}catch(r){n.e(r)}finally{n.f()}}this.editingEnabled=!this.editingEnabled}}]),e}(),eL.instances=[],$M=tL,JM=Object($.a)($M.prototype,"editingEnabled",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$M);function uL(e){var t,n,r;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=Object(le.a)(e),o.prev=1,t.s();case 3:if((n=t.n()).done){o.next=13;break}if("Submenu"!==(r=n.value).name){o.next=9;break}return o.delegateYield(uL(r.elements),"t0",7);case 7:o.next=11;break;case 9:return o.next=11,r;case 11:o.next=3;break;case 13:o.next=18;break;case 15:o.prev=15,o.t1=o.catch(1),t.e(o.t1);case 18:return o.prev=18,t.f(),o.finish(18);case 21:case"end":return o.stop()}}),aL,null,[[1,15,18,21]])}var lL,dL,pL,hL,fL,bL,vL=n(97),yL=(lL=c.action.bound,dL=c.action.bound,Object(K.observer)((bL=fL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).disposers=[],e}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"sidebarState",get:function(){return this.workbench.sidebarState}},{key:"handleExpandRecordAuditLog",value:function(){this.sidebarState.activeInfoSubsection=kM.Audit,this.sidebarState.activeSection="Info"}},{key:"handleExpandRecordInfo",value:function(){this.sidebarState.activeInfoSubsection=kM.Info,this.sidebarState.activeSection="Info"}},{key:"componentDidMount",value:function(){var e,t=this;this.disposers.push((e=this.workbench,function(t){return ca(e).addInfoSectionExpandHandler(t)})(this.handleExpandRecordInfo),function(e){return function(t){return ca(e).addAuditSectionExpandHandler(t)}}(this.workbench)(this.handleExpandRecordAuditLog)),this.disposers.push(Object(c.reaction)((function(){return K_(t.workbench).favoriteFolders}),(function(e){var n=e.find((function(e){return e.itemIds.length>0&&!e.isPinned}));n&&(t.sidebarState.activeSection=n.id)}),{fireImmediately:!0}))}},{key:"componentWillUnmount",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"renderWorkQuesSection",value:function(){var e=this,t=fM(this.workbench);return Object(re.jsxs)(dF,{isActive:"WorkQueues"===this.sidebarState.activeSection,children:[Object(re.jsx)(fF,{}),Object(re.jsx)(yF,{isActive:"WorkQueues"===this.sidebarState.activeSection,icon:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Ie.Icon,{src:"./icons/work-queue.svg",tooltip:bt("Work Queues","work_queue_measure")}),t>0&&Object(re.jsx)(oF,{children:t})]}),label:Object(re.jsx)(re.Fragment,{children:bt("Work Queues","work_queue_measure")}),onClick:function(){return e.sidebarState.activeSection="WorkQueues"}}),Object(re.jsx)(eM,{isActive:"WorkQueues"===this.sidebarState.activeSection,children:Object(re.jsx)(xM,{})})]})}},{key:"renderChatSection",value:function(){var e=this,t=z_(this.workbench).totalItemCount;return Object(re.jsxs)(dF,{isActive:"Chat"===this.sidebarState.activeSection,children:[Object(re.jsx)(fF,{}),Object(re.jsx)(yF,{isActive:"Chat"===this.sidebarState.activeSection,icon:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(Ie.Icon,{src:"./icons/chat.svg",tooltip:bt("Chat","chat")}),t>0&&Object(re.jsx)(oF,{children:t})]}),label:Object(re.jsx)(re.Fragment,{children:bt("Chat","chat")}),onClick:function(){return e.sidebarState.activeSection="Chat"}}),Object(re.jsx)(eM,{isActive:"Chat"===this.sidebarState.activeSection,children:Object(re.jsx)(LM,{})})]})}},{key:"onDragEnd",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:if(n=this.getIdFromDropIdentifier(t.source.droppableId),r=this.getIdFromDropIdentifier(t.destination.droppableId),i=this.getIdFromDropIdentifier(t.draggableId),a=K_(this.workbench),s=a.favoriteFolders.find((function(e){return e.id===r})),c=a.favoriteFolders.find((function(e){return e.id===n})),n!==r){e.next=14;break}if(t.source.index!==t.destination.index){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a.moveItemInFolder(c.itemIds,t.source.index,t.destination.index);case 13:return e.abrupt("return");case 14:return e.next=16,a.moveItemBetweenFolders(i,c,s);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdFromDropIdentifier",value:function(e){var t=e.split("_");return t[t.length-1]}},{key:"render",value:function(){var e,t=this,n=function(e){var t,n;return null!==(t=null===(n=_e(e).portalSettings)||void 0===n?void 0:n.showChat)&&void 0!==t&&t}(this.workbench),r=function(e){var t,n;return null!==(t=null===(n=_e(e).portalSettings)||void 0===n?void 0:n.showWorkQueues)&&void 0!==t&&t}(this.workbench),o=null===(e=Y_(this.workbench))||void 0===e?void 0:e.notificationBox,i=_e(this.workbench).logoUrl,a=K_(this.workbench);return Object(re.jsxs)(cF,{children:[Object(re.jsx)(sF,{children:Object(re.jsx)("div",{className:FM.a.logoLeft,children:o?Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:o}}):Object(re.jsx)("img",{src:i,alt:""})})}),Object(re.jsxs)(cO.a,{onDragEnd:function(e){return t.onDragEnd(e)},children:[a.favoriteFolders.filter((function(e){return e.isPinned})).map((function(e){return Object(re.jsx)(sL,{ctx:t.workbench,folder:e,isActive:!0,forceOpen:!0})})),r?this.renderWorkQuesSection():null,n?this.renderChatSection():null,a.favoriteFolders.filter((function(e){return!e.isPinned})).map((function(e){return Object(re.jsx)(sL,{ctx:t.workbench,folder:e,isActive:t.sidebarState.activeSection===e.id,onHeaderClick:function(){return t.sidebarState.activeSection=e.id}},e.id)})),Object(re.jsx)(dF,{isActive:"Menu"===this.sidebarState.activeSection,children:Object(re.jsx)(K.Provider,{mainMenuState:this.sidebarState.mainMenuState,children:Object(re.jsx)(aM,{isActive:"Menu"===this.sidebarState.activeSection,onClick:function(){return t.sidebarState.activeSection="Menu"}})})}),!Ot(this.workbench)&&Object(re.jsxs)(dF,{isActive:"Info"===this.sidebarState.activeSection,children:[Object(re.jsx)(fF,{}),Object(re.jsx)(yF,{isActive:"Info"===this.sidebarState.activeSection,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/info.svg",tooltip:bt("Info","infopanel_title")}),label:bt("Info","infopanel_title"),onClick:function(){return t.sidebarState.activeSection="Info"}}),Object(re.jsx)(eM,{isActive:"Info"===this.sidebarState.activeSection,children:Object(re.jsx)(DM,{activeSubsection:this.sidebarState.activeInfoSubsection})})]}),Object(re.jsx)(vL.Breakpoint,{medium:!0,up:!0,children:Object(re.jsxs)(dF,{isActive:"Search"===this.sidebarState.activeSection,children:[Object(re.jsx)(fF,{}),Object(re.jsx)(yF,{isActive:"Search"===this.sidebarState.activeSection,icon:Object(re.jsx)(Ie.Icon,{src:"./icons/search.svg",tooltip:bt("Search","search_result",this.sidebarState.resultCount)}),label:bt("Search","search_result",this.sidebarState.resultCount),onClick:function(){return t.sidebarState.activeSection="Search"}}),Object(re.jsx)(eM,{isActive:"Search"===this.sidebarState.activeSection,children:Object(re.jsx)(UM,{groups:this.sidebarState.searchResultGroups,ctx:this.workbench})}),Object(re.jsx)(fF,{})]})})]})]})}}]),n}(H.a.Component),fL.contextType=K.MobXProviderContext,hL=bL,Object($.a)(hL.prototype,"handleExpandRecordAuditLog",[lL],Object.getOwnPropertyDescriptor(hL.prototype,"handleExpandRecordAuditLog"),hL.prototype),Object($.a)(hL.prototype,"handleExpandRecordInfo",[dL],Object.getOwnPropertyDescriptor(hL.prototype,"handleExpandRecordInfo"),hL.prototype),Object($.a)(hL.prototype,"onDragEnd",[c.action],Object.getOwnPropertyDescriptor(hL.prototype,"onDragEnd"),hL.prototype),pL=hL))||pL),gL=n(116),mL=n.n(gL),wL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:mL.a.root,children:[this.props.children,(this.props.isLoading||window.localStorage.getItem("debugKeepProgressIndicatorsOn"))&&Object(re.jsx)("div",{className:mL.a.progressIndicator,children:Object(re.jsx)("div",{className:mL.a.indefinite})})]})}}]),n}(H.a.Component),OL=n(412),jL=n.n(OL),kL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("a",{className:ne()(jL.a.root,this.props.className,{isActive:this.props.isActive}),onClick:this.props.onClick,children:this.props.children})}}]),n}(H.a.Component),xL=n(413),CL=n.n(xL),IL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:CL.a.root})}}]),n}(H.a.Component);function SL(e){return ke(e).isFullScreen}function DL(e){return Zf(e)||Array.from(qt(e)).some((function(e){return Xf(e)}))}var RL,TL,_L,PL,FL=n(414),ML=n.n(FL),LL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:ML.a.root})}}]),n}(H.a.Component);function EL(e){return Object(c.flow)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Ae(e),t.delegateYield(r.onWorkflowAbortClick(n),"t0",3);case 3:t.next=9;break;case 5:return t.prev=5,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",8);case 8:throw t.t1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}var AL=Object(K.observer)((_L=TL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){var e=yn(this.workbench);return e?Object(re.jsx)(rP,{ctx:e,children:Object(re.jsx)(VL,{activeScreen:e})}):null}}]),n}(H.a.Component),TL.contextType=K.MobXProviderContext,RL=_L))||RL,VL=Object(K.observer)(PL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.activeScreen,t=e.content,n=SL(e);if(!t)return null;var r,o=t.formScreen&&t.formScreen.showWorkflowNextButton,i=t.formScreen&&t.formScreen.showWorkflowCancelButton;return Object(re.jsxs)(wL,{isLoading:t.isLoading||DL(t.formScreen),children:[Object(re.jsx)("h1",{children:e.formTitle}),(i||o)&&Object(re.jsx)(LL,{}),i&&Object(re.jsx)("button",{className:mL.a.workflowActionBtn,onClick:EL(t.formScreen),children:bt("Cancel","button_cancel")}),o&&Object(re.jsx)("button",{className:mL.a.workflowActionBtn,onClick:H_(t.formScreen),children:bt("Next","button_next")}),Object(re.jsx)(IL,{}),Object(re.jsx)(kL,{onClick:(r=e,function(e){ke(r).setFullscreen(!SL(r))}),isActive:n,children:Object(re.jsx)(Ie.Icon,{src:"./icons/fullscreen.svg",tooltip:bt("Fullscreen","fullscreen_button_tool_tip")})})]})}}]),n}(H.a.Component))||PL,NL=n(415),BL=n.n(NL),UL=function(e){return Object(re.jsx)("div",{className:BL.a.root,children:e.children})},GL=n(255),WL=n.n(GL),HL=function(e){return Object(re.jsxs)("div",{className:WL.a.root,children:[e.isRepeatButton&&Object(re.jsx)("button",{onClick:e.onRepeatClick,children:bt("Repeat","button_repeat")}),e.isCloseButton&&Object(re.jsx)("button",{onClick:e.onCloseClick,children:bt("Close","button_close")}),Object(re.jsx)("div",{className:WL.a.message,dangerouslySetInnerHTML:{__html:"".concat(e.message)}})]})};function zL(e){return Math.round(1e6*e)}function YL(e){return o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e).saveSplitPanelConfiguration({InstanceId:n,Position:r});case 2:case"end":return t.stop()}}),t)}))}function KL(e){return Object(c.flow)(o.a.mark((function t(n,r){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=zL(r),Ee(e).setPanelSize(n,i),t.delegateYield(YL(e)(n,i),"t0",3);case 3:case"end":return t.stop()}}),t)})))}var qL,QL,XL,ZL,$L=n(416),JL=n.n($L),eE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:JL.a.label,style:{height:this.props.height},children:this.props.text})}}]),n}(H.a.Component),tE=n(417),nE=n.n(tE),rE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getVBoxStyle",value:function(){return void 0!==this.props.height?{flexShrink:0,height:this.props.height}:{flexGrow:1}}},{key:"render",value:function(){return Object(re.jsx)("div",{className:nE.a.vBox,style:this.getVBoxStyle(),children:this.props.children})}}]),n}(H.a.Component),oE=n(418),iE=n.n(oE),aE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getHBoxStyle",value:function(){return void 0!==this.props.width?{flexShrink:0,width:this.props.width}:{flexGrow:1}}},{key:"render",value:function(){return Object(re.jsx)("div",{className:iE.a.hBox,style:this.getHBoxStyle(),children:this.props.children})}}]),n}(H.a.Component),sE=n(419),cE=n.n(sE),uE=function(e){var t=Object(W.useContext)(sI);return Object(re.jsx)(sI.Provider,{value:{isVisible:e.isActive&&t.isVisible},children:Object(re.jsx)("div",{className:ne()(cE.a.root,{isActive:e.isActive}),children:e.children})})},lE=n(420),dE=n.n(lE),pE=function(e){return Object(re.jsx)("div",{className:dE.a.root,children:e.children})},hE=n(421),fE=n.n(hE),bE=function(e){return Object(re.jsx)("div",{className:fE.a.root,children:e.children})},vE=(qL=c.action.bound,Object(K.observer)((XL=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(de.a)(e,"activePanelId",ZL,Object(pe.a)(e)),e}return Object(Q.a)(n,[{key:"activateTab",value:function(e){this.activePanelId=e;var t=this.props.boxes.find((function(t){return t.attributes.Id===e})),n=this.getFirstGridId(t);n&&It(this.props.dataViewMap.get(n)).triggerOnFocusTable()}},{key:"getFirstGridId",value:function(e){return _u(e,(function(e){var t;return"Grid"===(null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.Type)})).map((function(e){return e.attributes.Id})).find((function(e){return e}))}},{key:"render",value:function(){var e=this,t=this.props.boxes;return Object(re.jsxs)(pE,{children:[Object(re.jsx)(Te,{children:t.map((function(t){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(Se,{title:t.attributes.Name,id:"tabHandle_"+t.attributes.ModelInstanceId,isActive:e.activePanelId===t.attributes.Id,onClick:function(){return e.activateTab(t.attributes.Id)},children:t.attributes.Name},t.attributes.Id)}},t.$iid)}))}),Object(re.jsx)(bE,{children:t.map((function(t){return Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(uE,{isActive:e.activePanelId===t.attributes.Id,children:zu(t).map((function(t){return e.props.nextNode(t)}))},t.attributes.Id)}},t.$iid)}))})]})}}]),n}(H.a.Component),ZL=Object($.a)(XL.prototype,"activePanelId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.boxes.length>0?this.props.boxes[0].attributes.Id:""}}),Object($.a)(XL.prototype,"activateTab",[qL],Object.getOwnPropertyDescriptor(XL.prototype,"activateTab"),XL.prototype),QL=XL))||QL),yE=n(422),gE=n.n(yE),mE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:gE.a.box,children:this.props.children})}}]),n}(H.a.Component);function wE(e,t){var n=new Map;return function t(r){switch(r.attributes.Type){case"ScreenLevelPlugin":case"SectionLevelPlugin":var o=function(t){var r=$f(e,t.attributes.Id);r&&n.set(t.attributes.Id,r);return r}(r),i=Wn(e);return v_.getComponent({name:r.attributes.Name,modelInstanceId:r.attributes.ModelInstanceId,sessionId:i,ctx:o});case"WorkflowFinishedPanel":return Object(re.jsx)(HL,{isCloseButton:r.attributes.showWorkflowCloseButton,isRepeatButton:r.attributes.showWorkflowRepeatButton,message:r.attributes.Message,onCloseClick:Sd.onCloseClick(e),onRepeatClick:Sd.onRepeatClick(e)},r.$iid);case"VSplit":case"HSplit":var a=function(e){var t=e?e/1e6:.5;return t<.1||t>.9?.5:t}(e.getPanelPosition(r.attributes.ModelInstanceId)),s=zu(r).map((function(e,n){return{id:n,positionRatio:0===n?a:1-a,element:t(e)}}));return Object(re.jsx)(Oe,{STYLE:ue.a,type:"HSplit"===r.attributes.Type?"isHoriz":"isVert",id:r.attributes.ModelInstanceId,onSizeChangeFinished:function(t,n,o,i){t===s[0].id&&KL(e)(r.attributes.ModelInstanceId,o),n===s[0].id&&KL(e)(r.attributes.ModelInstanceId,i)},panels:s},r.$iid);case"Label":return Object(re.jsx)(eE,{height:parseInt(r.attributes.Height,10),text:r.attributes.Name},r.$iid);case"VBox":return Object(re.jsx)(rE,{height:r.attributes.Height?parseInt(r.attributes.Height,10):void 0,children:zu(r).map((function(e){return t(e)}))},r.$iid);case"HBox":return Object(re.jsx)(aE,{width:r.attributes.Width?parseInt(r.attributes.Width,10):void 0,children:zu(r).map((function(e){return t(e)}))},r.$iid);case"TreePanel":case"Grid":var c=$f(e,r.attributes.Id);return c&&n.set(r.attributes.Id,c),Object(re.jsx)(zO,{id:r.attributes.Id,modelInstanceId:r.attributes.ModelInstanceId,height:r.attributes.Height?parseInt(r.attributes.Height,10):void 0,width:r.attributes.Width?parseInt(r.attributes.Width,10):void 0,isHeadless:"true"===r.attributes.IsHeadless},r.$iid);case"Tab":return Object(re.jsx)(vE,{boxes:Yu(r),nextNode:t,dataViewMap:n},r.$iid);case"Box":return Object(re.jsx)(mE,{children:zu(r).map((function(e){return t(e)}))},r.$iid);default:return console.error("Unknown node:",r),null}}(t)}var OE,jE,kE,xE=n(200),CE=n.n(xE),IE=Object(K.observer)((function(e){var t,n,r=null!==(t=null===(n=Object(W.useContext)(K.MobXProviderContext).application.mobileState.breadCrumbsState.activeBreadCrumbList)||void 0===n?void 0:n.filter((function(e){return e.isVisible()})))&&void 0!==t?t:[];function o(e,t){return Object(re.jsx)("div",{className:t===r.length-1?"":CE.a.breadcrumb,onClick:e.onClick,children:e.caption},e.id)}return Object(re.jsx)("div",{className:CE.a.navigationBar,children:r.length>0&&r.flatMap((function(e,t){return 0===t?[o(e,t)]:[Object(re.jsx)("div",{className:CE.a.pathSeparator,children:"/"},e.id+"Sep"),o(e,t)]}))})})),SE=function e(t,n,r){Object(q.a)(this,e),this.caption=t,this.id=n,this.onClick=r,this.isVisible=function(){return!0}},DE=function(){function e(t){Object(q.a)(this,e),this.getCaption=t,this.id="root",this.onClick=function(){},this.isVisible=function(){return!0}}return Object(Q.a)(e,[{key:"caption",get:function(){return this.getCaption()}}]),e}(),RE=(OE=function(){function e(){Object(q.a)(this,e),this._children=[],this._name="",this._dataView=void 0,this.formScreen=void 0,this.parent=void 0,this.id="",this.element=null}return Object(Q.a)(e,[{key:"dataView",get:function(){var e,t,n;return this._dataView?this._dataView:!this.parent&&(null!==(e=null===(t=this.formScreen)||void 0===t||null===(n=t.rootDataViews)||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0?this.formScreen.rootDataViews[0]:void 0},set:function(e){this._dataView=e}},{key:"name",get:function(){var e,t,n=this._name?this._name:this.id;!this.parent&&this.formScreen&&(n=null!==(e=null===(t=yn(this.formScreen))||void 0===t?void 0:t.tabTitle)&&void 0!==e?e:n);return n},set:function(e){this._name=e}},{key:"children",get:function(){return this._children}},{key:"allChildren",get:function(){return this._children.flatMap((function(e){return e.children}))}},{key:"parentChain",get:function(){for(var e=this.parent,t=[this];e;)t.push(e),e=e.parent;return t.reverse()}},{key:"navigationDisabled",get:function(){var e,t=this;return!!(null===(e=this.dataView)||void 0===e?void 0:e.selectedRow)&&this.dataView.properties.some((function(e){return Ac(e)(t.dataView.selectedRow,e)}))}},{key:"addChild",value:function(e){this._children.push(e),e.parent=this}},{key:"removeChild",value:function(e){this._children.remove(e),e.parent=void 0}},{key:"merge",value:function(e){this.element=e.element;for(var t=0,n=Object(gt.a)(e.children);t<n.length;t++){var r=n[t];e.removeChild(r),this.addChild(r)}this.id=e.id,this._name=e._name,this._dataView=e._dataView}},{key:"equals",value:function(e){return this.id===e.id}}]),e}(),Object($.a)(OE.prototype,"navigationDisabled",[c.computed],Object.getOwnPropertyDescriptor(OE.prototype,"navigationDisabled"),OE.prototype),OE),TE=(jE=function(){function e(t,n){Object(q.a)(this,e),this.mobileState=t,Object(de.a)(this,"currentNode",kE,this),this.currentNode=n}return Object(Q.a)(e,[{key:"navigationDisabled",get:function(){return this.currentNode.parentChain.concat(this.currentNode.allChildren).some((function(e){return e.navigationDisabled}))}},{key:"onLinkClick",value:function(e){var t,n;this.navigationDisabled||(this.onNodeClick(e),null===(t=this.currentNode.dataView)||void 0===t||null===(n=t.activateTableView)||void 0===n||n.call(t))}},{key:"onNodeClick",value:function(e){var t,n=this;this.currentNode=e,this.mobileState.activeDataViewId=null===(t=e.dataView)||void 0===t?void 0:t.id;var r=this.currentNode.parentChain.map((function(e){return new SE(e.name,e.id,(function(){return n.onBreadCrumbClick(e)}))}));this.mobileState.breadCrumbsState.setActiveBreadCrumbList(r),this.mobileState.breadCrumbsState.addDetailBreadCrumbNode(this.currentNode.dataView)}},{key:"onBreadCrumbClick",value:function(e){var t,n,r,o,i;this.navigationDisabled||(this.currentNode!==e?(this.onNodeClick(e),null===(t=this.currentNode.dataView)||void 0===t||null===(n=t.activateFormView)||void 0===n||n.call(t)):(null===(r=this.currentNode.dataView)||void 0===r?void 0:r.isFormViewActive())&&(null===(o=this.currentNode.dataView)||void 0===o||null===(i=o.activateTableView)||void 0===i||i.call(o)))}}]),e}(),kE=Object($.a)(jE.prototype,"currentNode",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object($.a)(jE.prototype,"navigationDisabled",[c.computed],Object.getOwnPropertyDescriptor(jE.prototype,"navigationDisabled"),jE.prototype),Object($.a)(jE.prototype,"onLinkClick",[c.action],Object.getOwnPropertyDescriptor(jE.prototype,"onLinkClick"),jE.prototype),Object($.a)(jE.prototype,"onNodeClick",[c.action],Object.getOwnPropertyDescriptor(jE.prototype,"onNodeClick"),jE.prototype),Object($.a)(jE.prototype,"onBreadCrumbClick",[c.action],Object.getOwnPropertyDescriptor(jE.prototype,"onBreadCrumbClick"),jE.prototype),jE);function _E(e){function t(t,n){return t.attributes.Name||t!==e.uiRoot&&n!==e.uiRoot?t.attributes.Name:e.title}return function n(r,o){var i=!o;if("VSplit"===r.attributes.Type||"HSplit"===r.attributes.Type||"VBox"===r.attributes.Type||"HBox"===r.attributes.Type){var a=new RE,s=new RE,c=zu(r),u=Object(d.a)(c,2),l=u[0],p=u[1],h=n(l,a);if(!p)return h||e.componentFactory.getDetailNavigator(a);a.addChild(s);var f=n(p,s);if(!h)throw new Error("Master element cannot be null");return function(n,r,o,i){var a;n.element=r,n.id=o.attributes.Id,n.formScreen=e.formScreen,n.dataView=e.formScreen.getDataViewByModelInstanceId(null===(a=r.props)||void 0===a?void 0:a.modelInstanceId),n.name=t(o,i)}(a,h,l,r),f&&function(t,n,r){var o;t.element=n,t.id=r.attributes.Id,t.formScreen=e.formScreen,t.dataView=e.formScreen.getDataViewByModelInstanceId(null===(o=n.props)||void 0===o?void 0:o.modelInstanceId),t.name=t.dataView?Of(t.dataView):r.attributes.Name}(s,f,p),i?e.componentFactory.getDetailNavigator(a):(o.merge(a),h)}if("Tab"===r.attributes.Type){var b=Yu(r).map((function(t){var r=zu(t)[0],o=new RE,i=n(r,o);return i&&(o.element=i,o.id=r.attributes.Id,o.name=t.attributes.Name?t.attributes.Name:r.attributes.Name,o.dataView=$f(e.formScreen,i.props.id)),o})),v=new RE;return v.id=r.attributes.Id,v.name=t(r),v.formScreen=e.formScreen,b.forEach((function(e){return v.addChild(e)})),i?e.componentFactory.getTabNavigator(v):void function(e,t,n){var r=e.parent;r?(r.removeChild(e),n.forEach((function(e){return r.addChild(e)}))):e.merge(t)}(o,v,b)}return"TreePanel"===r.attributes.Type||"Grid"===r.attributes.Type?e.componentFactory.getDataView({key:r.$iid,id:r.attributes.Id,modelInstanceId:r.attributes.ModelInstanceId,isHeadless:"true"===r.attributes.IsHeadless}):e.desktopRecursiveBuilder(e.formScreen,r)}(e.uiRoot,void 0)}var PE,FE,ME,LE,EE,AE,VE,NE,BE,UE,GE,WE,HE,zE,YE=n(130),KE=n.n(YE),qE=Object(K.observer)((ME=FE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).navigatorState=new TE(e.mobileState,e.props.node),e}return Object(Q.a)(n,[{key:"mobileState",get:function(){return this.context.application.mobileState}},{key:"onScreenActivation",value:function(){var e;this.mobileState.activeDataViewId=null===(e=this.props.node.dataView)||void 0===e?void 0:e.id}},{key:"componentDidMount",value:function(){var e=this;this.props.node.dataView&&(Pe(this.props.node.dataView).activationHandler.add((function(){return e.onScreenActivation()})),this.onScreenActivation())}},{key:"componentWillUnmount",value:function(){var e=this;this.props.node.dataView&&Pe(this.props.node.dataView).activationHandler.remove((function(){return e.onScreenActivation()}))}},{key:"render",value:function(){var e=this;return Object(re.jsx)(QE,{node:this.navigatorState.currentNode,onNodeClick:function(t){return e.navigatorState.onLinkClick(t)}})}}]),n}(H.a.Component),FE.contextType=K.MobXProviderContext,PE=ME))||PE,QE=Object(K.observer)((AE=EE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"breadCrumbsState",get:function(){return this.context.application.mobileState.breadCrumbsState}},{key:"componentDidMount",value:function(){var e;(null===(e=this.props.node.dataView)||void 0===e?void 0:e.isTableViewActive)&&!this.props.node.parent&&this.breadCrumbsState.addDetailBreadCrumbNodeToRoot(this.props.node.dataView)}},{key:"render",value:function(){var e=this;return this.props.node?Object(re.jsxs)("div",{className:KE.a.root,children:[this.props.node.element?this.props.node.element:Object(re.jsx)("div",{className:KE.a.contentPlaceholder}),Object(re.jsx)(XE,{onClick:function(t){return e.props.onNodeClick(t)},nodes:this.props.node.children})]}):Object(re.jsx)("div",{})}}]),n}(H.a.Component),EE.contextType=K.MobXProviderContext,LE=AE))||LE,XE=Object(K.observer)((function(e){var t,n=Object(W.useState)(!1),r=Object(d.a)(n,2),o=r[0],i=r[1];return e.nodes.length<=3?Object(re.jsx)("div",{className:xO.a.navigationButtonContainer,children:null===(t=e.nodes)||void 0===t?void 0:t.map((function(t){return Object(re.jsx)(CO,{label:t.name,onClick:function(){return e.onClick(t)}},t.name)}))}):Object(re.jsx)("div",{className:ne()(o?KE.a.navigatorButtonListRoot:"",KE.a.navigationButtonContainer),onClick:function(){return i(!o)},children:Object(re.jsx)(CO,{label:bt("Details","mobile_details_dropdown"),onClick:function(){return i(!o)},isOpen:o,children:Object(re.jsx)("div",{className:KE.a.navigationButtonList,children:Object(re.jsx)("div",{className:xO.a.navigationButtonContainer,children:o&&e.nodes.map((function(t){return Object(re.jsx)(CO,{label:t.name,onClick:function(){return e.onClick(t)}},t.name)}))})})})})})),ZE=Object(K.observer)((BE=NE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).navigatorState=new TE(e.mobileState,e.props.rootNode),e}return Object(Q.a)(n,[{key:"mobileState",get:function(){return this.context.application.mobileState}},{key:"onScreenActivation",value:function(){var e;this.mobileState.activeDataViewId=null===(e=this.props.rootNode.dataView)||void 0===e?void 0:e.id}},{key:"componentDidMount",value:function(){var e=this;this.props.rootNode.dataView&&(Pe(this.props.rootNode.dataView).activationHandler.add((function(){return e.onScreenActivation()})),this.onScreenActivation())}},{key:"componentWillUnmount",value:function(){var e=this;this.props.rootNode.dataView&&Pe(this.props.rootNode.dataView).activationHandler.remove((function(){return e.onScreenActivation()}))}},{key:"render",value:function(){var e=this;return this.navigatorState.currentNode?this.navigatorState.currentNode.parent?Object(re.jsx)(QE,{node:this.navigatorState.currentNode,onNodeClick:function(t){return e.navigatorState.onLinkClick(t)}}):Object(re.jsx)("div",{className:xO.a.navigationButtonContainer,children:this.navigatorState.currentNode.children.map((function(t){return Object(re.jsx)(CO,{label:t.name,onClick:function(){return e.navigatorState.onLinkClick(t)}},t.id)}))}):null}}]),n}(H.a.Component),NE.contextType=K.MobXProviderContext,VE=BE))||VE,$E=function(){function e(){Object(q.a)(this,e)}return Object(Q.a)(e,[{key:"getDetailNavigator",value:function(e){return Object(re.jsx)(qE,{node:e})}},{key:"getTabNavigator",value:function(e){return Object(re.jsx)(ZE,{rootNode:e})}},{key:"getDataView",value:function(e){return Object(re.jsx)(zO,{id:e.id,modelInstanceId:e.modelInstanceId,isHeadless:e.isHeadless},e.key)}}]),e}(),JE=Object(K.observer)((WE=GE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"formScreen",get:function(){return this.context.formScreen.formScreen}},{key:"render",value:function(){var e=Hu(this.props.xmlWindowObject);return Ot(this.formScreen)?_E({uiRoot:e,formScreen:this.formScreen,title:this.props.title,desktopRecursiveBuilder:wE,componentFactory:new $E}):wE(this.formScreen,e)}}]),n}(H.a.Component),GE.contextType=K.MobXProviderContext,UE=WE))||UE,eA=n(423),tA=n.n(eA),nA=function(e){return Object(re.jsx)("div",{className:ne()(tA.a.root,{isHidden:e.isHidden}),children:e.children})},rA=n(131),oA=n.n(rA),iA=function(e){var t=Object(W.useState)(!1),n=Object(d.a)(t,2),r=n[0],o=n[1];Object(W.useEffect)((function(){var e=function(){o(!0),window.addEventListener("mouseup",t)},t=function e(){o(!1),window.removeEventListener("mouseup",e)};return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[]);var i=Object(W.useCallback)((function(t){e.refIFrame&&e.refIFrame(t)}),[]);return Object(re.jsxs)("div",{className:oA.a.root,children:[e.isLoading&&Object(re.jsx)("div",{className:oA.a.progressIndicator,children:Object(re.jsx)("div",{className:oA.a.indefinite})}),Object(re.jsx)("iframe",{onLoad:e.onLoad,onLoadStart:e.onLoadStart,ref:i,className:oA.a.webContent,src:e.url}),Object(re.jsx)("div",{className:ne()(oA.a.transparentOverlay,{isVisible:r})})]})};function aA(e){var t=Pe(e),n=function(e){var t=Object(gt.a)(vn(e));return t.sort((function(e,t){return t.stackPosition-e.stackPosition})),t[0]}(e);return!(!t||!n)&&(t.menuItemId===n.menuItemId&&t.order===n.order)}function sA(e){return o.a.mark((function t(n,r){var i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=l(e),t.next=3,i.getMenuIdByReference({Category:n,ReferenceId:r});case 3:return a=t.sent,t.delegateYield(_e(e).onMainMenuItemIdClick({event:void 0,itemId:a,idParameter:r,isSingleRecordEdit:!0}),"t0",5);case 5:case"end":return t.stop()}}),t)}))}function cA(e){return o.a.mark((function t(n,r){var i,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="openScreenByMenuItemId"===t.t0?3:"objectTag"===t.t0?7:12;break;case 3:if(!(i=null===r||void 0===r?void 0:r.menuItemId)){t.next=6;break}return t.delegateYield(_e(e).onMainMenuItemIdClick({event:void 0,itemId:i,idParameter:void 0}),"t1",6);case 6:case 11:return t.abrupt("break",12);case 7:if(a=null===r||void 0===r?void 0:r.objectId,s=null===r||void 0===r?void 0:r.categoryId,!a||!s){t.next=11;break}return t.delegateYield(sA(e)(s,a),"t2",11);case 12:case"end":return t.stop()}}),t)}))}function uA(e){return Object(c.flow)(o.a.mark((function t(n){var r,i,a,s,c,u,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=n.target,i=r.nodeName,"a"!=="".concat(i).toLowerCase()){t.next=12;break}if(!(a=r.getAttribute("href"))||!"".concat(a).startsWith("web+origam-link://")){t.next=12;break}return s=a.replace("web+origam-link://",""),n.preventDefault(),c=s.split("?"),u=c[0],l=uj.a.parse(c[1]||""),t.delegateYield(cA(e)(u,l),"t0",12);case 12:t.next=18;break;case 14:return t.prev=14,t.t1=t.catch(0),t.delegateYield(yt(e)(t.t1),"t2",17);case 17:throw t.t1;case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))}var lA,dA,pA,hA=Object(K.observer)((function(e){var t=e.openedScreen,n=Object(W.useState)(!1),r=Object(d.a)(n,2),i=r[0],a=r[1],s=Object(W.useRef)(null),u=Object(W.useMemo)((function(){return function(){var e=s.current,n=null===e||void 0===e?void 0:e.contentDocument;(null===n||void 0===n?void 0:n.title)&&t.setTitle(n.title)}}),[t]);Object(W.useEffect)((function(){t.screenUrl&&a(!0)}),[]),Object(W.useEffect)((function(){var e=setInterval((function(){u()}),1e4);return function(){return clearTimeout(e)}}),[u]),Object(W.useEffect)((function(){var e=s.current,t=null===e||void 0===e?void 0:e.contentDocument,n=null===t||void 0===t?void 0:t.querySelector("head");if(t&&n){var r=new MutationObserver((function(){u()}));return r.observe(n,{subtree:!0,characterData:!0,childList:!0}),function(){return r.disconnect()}}}));var l=Object(W.useMemo)((function(){return function(){var e=s.current,n=null===e||void 0===e?void 0:e.contentDocument;n&&(n.closeOrigamTab=function(){Z_(t)(void 0)},n.addEventListener("click",(function(e){var n;(n=t,Object(c.flow)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uA(n)(t);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.delegateYield(yt(n)(e.t0),"t1",8);case 8:throw e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))))(e)}),!0))}}),[t]);return Object(re.jsx)(nA,{isHidden:!aA(t),children:Object(re.jsx)(iA,{url:t.screenUrl||"",isLoading:i,onLoad:function(e){e.persist(),u(),l(),a(!1)},refIFrame:function(e){s.current=e,t.setReloader(e?{reload:function(){a(!0),e.contentWindow.location.reload()}}:null)}})})})),fA=Object(K.observer)(HE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.openedScreen;if(e.screenUrl)return Object(re.jsx)(rP,{ctx:e,children:Object(re.jsx)(hA,{openedScreen:e})});if(!e.content)return null;var t=e.content;return t.isLoading?null:Object(re.jsx)(K.Provider,{formScreen:t,children:Object(re.jsx)(rP,{ctx:e,children:Object(re.jsx)(bA,{openedScreen:e,formScreen:t})})},t.formScreen.screenUI.$iid)}}]),n}(H.a.Component))||HE,bA=Object(K.observer)(zE=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props,t=e.openedScreen,n=e.formScreen;return Object(re.jsx)(nA,{isHidden:!aA(t),children:Object(re.jsx)(sI.Provider,{value:{isVisible:aA(t)},children:Object(re.jsx)(JE,{title:n.formScreen.title,xmlWindowObject:n.formScreen.screenUI})})})}}]),n}(H.a.Component))||zE,vA=Object(K.observer)((pA=dA=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){var e=vn(this.workbench);return Object(re.jsx)(UL,{children:e.map((function(e){return Object(re.jsx)(fA,{openedScreen:e},"".concat(e.menuItemId,"@").concat(e.order))}))})}}]),n}(H.a.Component),dA.contextType=K.MobXProviderContext,lA=pA))||lA,yA=!1;var gA,mA,wA,OA,jA=n(201),kA=n.n(jA),xA=Object(K.observer)(gA=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.props.openedScreen.content;return e.isLoading?null:Object(re.jsx)(K.Provider,{formScreen:e,children:!e.isLoading&&Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(JE,{title:e.formScreen.title,xmlWindowObject:e.formScreen.screenUI})})})}}]),n}(H.a.Component))||gA,CA=Object(K.observer)((function(e){var t="ScreenDialog@".concat(e.openedScreen.menuItemId,"@").concat(e.openedScreen.order),n=_e(e.openedScreen);function r(){var t=e.openedScreen.content,n=t.formScreen&&t.formScreen.showWorkflowNextButton,r=t.formScreen&&t.formScreen.showWorkflowCancelButton;return Object(re.jsxs)("div",{className:kA.a.actionButtonHeader,children:[r&&Object(re.jsx)("button",{className:kA.a.workflowActionBtn,onClick:EL(t.formScreen),children:bt("Cancel","button_cancel")}),n&&Object(re.jsx)("button",{className:kA.a.workflowActionBtn,onClick:H_(t.formScreen),children:bt("Next","button_next")})]})}return Object(W.useEffect)((function(){return Rn(n,t,Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(xt,{title:e.openedScreen.tabTitle,titleIsWorking:e.openedScreen.content.isLoading||DL(e.openedScreen.content.formScreen)||!!window.localStorage.getItem("debugKeepProgressIndicatorsOn"),titleButtons:Object(re.jsx)(Ie.CloseButton,{onClick:function(t){return Z_(e.openedScreen)(t)}}),buttonsCenter:null,buttonsLeft:null,buttonsRight:Object(re.jsx)(be.a,{children:function(){return e.openedScreen.content.isLoading?Object(re.jsx)(re.Fragment,{}):Object(re.jsx)(re.Fragment,{children:e.openedScreen.content.formScreen.dialogActions.filter((function(e){return e.placement!==Et.PanelHeader&&e.placement!==Et.PanelMenu&&e.isEnabled})).map((function(e,t){return Object(re.jsx)("button",{className:ne()({isPrimary:e.isDefault}),tabIndex:0,onClick:function(t){var n;(n=e,Object(c.flow)(o.a.mark((function e(t,r){var i,a,s,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!yA){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,yA=!0,i=Ae(n),a=ln(n),s=En(n),c=Vn(n),u=Be(n),!c){e.next=14;break}return e.delegateYield(i.onFlushData(),"t0",12);case 12:return l=r.mode===At.MultipleCheckboxes?Array.from(u.selectedRowIds):[c],e.delegateYield(i.onExecuteAction(a,s,r,l),"t1",14);case 14:return e.prev=14,yA=!1,e.finish(14);case 17:e.next=23;break;case 19:return e.prev=19,e.t2=e.catch(0),e.delegateYield(yt(n)(e.t2),"t3",22);case 22:throw e.t2;case 23:case"end":return e.stop()}}),e,null,[[0,19],[3,,14,17]])}))))(t,e)},children:e.caption},e.id)}))})}}),children:Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)("div",{style:{width:Ot(e.openedScreen)?"unset":e.openedScreen.dialogInfo.width,height:Ot(e.openedScreen)?"60vh":e.openedScreen.dialogInfo.height,display:"flex",flexDirection:"column"},children:e.openedScreen.content.isLoading?null:Object(re.jsxs)(sI.Provider,{value:{isVisible:!0},children:[r(),Object(re.jsx)(xA,{openedScreen:e.openedScreen})]})})}})})}}))}),[]),null}));var IA,SA,DA,RA,TA,_A,PA,FA,MA=Object(K.observer)((OA=wA=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){var e=bn(this.workbench).items.filter((function(e){return e.isDialog}));return Object(re.jsx)(re.Fragment,{children:e.map((function(e){return Object(re.jsx)(CA,{openedScreen:e},"".concat(e.menuItemId,"@").concat(e.order))}))})}}]),n}(H.a.Component),wA.contextType=K.MobXProviderContext,mA=OA))||mA,LA=n(424),EA=n.n(LA),AA=function(e){return Object(re.jsx)("div",{className:ne()(EA.a.root,{isFullscreen:e.isFullscreen}),children:e.children})},VA=n(256),NA=n.n(VA),BA=n(425),UA=n.n(BA),GA=n(426),WA=n.n(GA),HA=n(103),zA=n.n(HA),YA=Object(K.observer)((DA=SA=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){if(!this.props.mobileState.layoutState.showOpenTabCombo)return Object(re.jsx)("div",{className:zA.a.heading,children:this.props.mobileState.layoutState.heading});var e=vn(this.workbench),t=e.some((function(e){var t;return null===(t=e.content.formScreen)||void 0===t?void 0:t.isDirty})),n=e.find((function(e){return e.isActive}));return Object(re.jsx)(rd,{trigger:function(r){var o,i,a=r.refTrigger,s=r.setDropped;return Object(re.jsx)(qO,{refDom:a,onMouseDown:function(){return s(!0)},isActive:!1,children:Object(re.jsxs)("div",{className:zA.a.titleContainer,children:[Object(re.jsx)("div",{className:zA.a.screenName+" "+((null===n||void 0===n||null===(o=n.content)||void 0===o||null===(i=o.formScreen)||void 0===i?void 0:i.isDirty)?zA.a.dirtyScreenName:""),children:sP(n)}),e.length>1&&Object(re.jsx)(Ie.Icon,{className:zA.a.icon+" "+(t?zA.a.dirtyIcon:""),src:"./icons/noun-arrow-89829.svg"})]})})},content:function(t){var n=t.setDropped;return Object(re.jsx)(wd,{children:e.map((function(e){var t,r=sP(e);return Object(re.jsx)(kd,{className:(null===(t=e.content.formScreen)||void 0===t?void 0:t.isDirty)?zA.a.dirtyDropDownItem:"",onClick:function(t){n(!1),oP(e)(t)},children:r},r)}))})}})}}]),n}(H.a.Component),SA.contextType=K.MobXProviderContext,IA=DA))||IA,KA=n(427),qA=n.n(KA),QA=function(e){return Object(re.jsx)("div",{className:qA.a.root,onClick:function(){return e.mobileState.layoutState=new On},children:Object(re.jsx)(Ie.Icon,{src:"./icons/search.svg"})})},XA=n(257),ZA=n.n(XA),$A=Object(K.observer)((function(e){var t=Object(W.useContext)(K.MobXProviderContext),n=fM(t.application);return Object(re.jsxs)("div",{className:ZA.a.root,onClick:function(){return t.application.mobileState.hamburgerClick()},children:[Object(re.jsx)(Ie.Icon,{src:"./icons/noun-hamburger-4238597.svg",className:ZA.a.menuIcon}),n>0&&Object(re.jsx)(oF,{children:n})]})})),JA=(RA=c.action.bound,Object(K.observer)((FA=PA=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"application",get:function(){return this.context.application}},{key:"layoutState",get:function(){return this.props.mobileState.layoutState}},{key:"handleLogoutClick",value:function(e){mP(this.application)(e)}},{key:"getLeftElement",value:function(){return this.layoutState.showHamburgerMenuButton?Object(re.jsx)($A,{}):this.layoutState.showSearchButton?Object(re.jsx)("div",{style:{minWidth:"90px"}}):Object(re.jsx)("div",{style:{minWidth:"67px"}})}},{key:"render",value:function(){var e=this,t=PP(this.application),n=RP(this.application);return Object(re.jsxs)("div",{className:WA.a.root,children:[this.getLeftElement(),Object(re.jsx)(YA,{mobileState:this.props.mobileState}),this.layoutState.showSearchButton&&Object(re.jsx)(QA,{mobileState:this.props.mobileState}),Object(re.jsx)(DP,{avatarLink:t,handleLogoutClick:function(t){return e.handleLogoutClick(t)},userName:n,hideLabel:!0,ctx:this.application,onAboutClick:function(){return e.props.mobileState.layoutState=new wn},helpUrl:MP(this.application)})]})}}]),n}(H.a.Component),PA.contextType=K.MobXProviderContext,_A=FA,Object($.a)(_A.prototype,"handleLogoutClick",[RA],Object.getOwnPropertyDescriptor(_A.prototype,"handleLogoutClick"),_A.prototype),TA=_A))||TA),eV=n(428),tV=n.n(eV),nV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).searchViewState=new qi(e.workbench,(function(){})),e}return Object(Q.a)(n,[{key:"workbench",get:function(){return this.context.workbench}},{key:"render",value:function(){return Object(re.jsx)("div",{className:tV.a.root,children:Object(re.jsx)(Ki,{state:this.searchViewState})})}}]),n}(H.a.Component);nV.contextType=K.MobXProviderContext;var rV,oV,iV,aV,sV,cV,uV,lV,dV,pV,hV,fV,bV=n(189),vV=n.n(bV),yV=n(127),gV=n.n(yV),mV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:gV.a.root,children:!this.props.hidden&&this.props.actions.length>0?Object(re.jsx)(rd,{trigger:function(e){var t=e.refTrigger,n=e.setDropped;return Object(re.jsx)("div",{className:gV.a.clickArea,onMouseDown:function(){return n(!0)},children:Object(re.jsx)("div",{ref:t,className:gV.a.iconContainer,children:Object(re.jsx)(Ie.Icon,{src:"./icons/noun-right-1784045.svg"})})})},content:function(t){var n=t.setDropped;return Object(re.jsx)(wd,{children:e.props.actions.map((function(e){return Object(re.jsx)(kd,{onClick:function(t){n(!1),Id.onActionClick(e)(t,e)},children:e.caption},e.id)}))})}}):Object(re.jsx)("div",{className:gV.a.placeholder})})}}]),n}(H.a.Component),wV=Object(K.observer)((aV=iV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"mobileState",get:function(){return this.context.application.mobileState}},{key:"activeScreen",get:function(){var e,t;return null===(e=yn(this.props.ctx))||void 0===e||null===(t=e.content)||void 0===t?void 0:t.formScreen}},{key:"getActions",value:function(){var e,t,n=this,r=xP(this.props.ctx).flatMap((function(e){return e.actions})).filter((function(e){return pd(e)})),o=null===(e=this.activeScreen)||void 0===e?void 0:e.dataViews;if(!o||0===o.length)return r;if(1===o.length&&(t=o[0]),!this.mobileState.activeDataViewId)return r;if(!(t=o.find((function(e){return e.id===n.mobileState.activeDataViewId}))))return r;var i=Rf(t).filter((function(e){return!e.groupId})).filter((function(e){return pd(e)||e.mode!==At.ActiveRecord}));return r.concat(i)}},{key:"showNextButton",value:function(){return this.activeScreen&&this.activeScreen.showWorkflowNextButton}},{key:"render",value:function(){var e=this,t=QP(this.props.ctx),n=this.getActions(),r=[];return this.props.mobileState.layoutState.showCloseButton(!!this.activeScreen)&&r.push(Object(re.jsx)(jO,{iconPath:"./icons/noun-close-25798.svg",onClick:Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.mobileState.close();case 2:case"end":return t.stop()}}),t)})))},"close")),this.props.mobileState.layoutState.showOkButton&&r.push(Object(re.jsx)(Ie.Button,{label:bt("Ok","button_ok"),onClick:Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.mobileState.close();case 2:case"end":return t.stop()}}),t)})))},"ok")),n.length>0&&!this.props.mobileState.layoutState.actionDropUpHidden&&r.push(Object(re.jsx)(mV,{actions:n},"actions")),!this.props.mobileState.layoutState.refreshButtonHidden&&(null===t||void 0===t?void 0:t.isRefreshButtonVisible)&&r.push(Object(re.jsx)(jO,{iconPath:"./icons/noun-loading-1780489.svg",onClick:Q_(null===t||void 0===t?void 0:t.formScreen)},"refresh")),!this.props.mobileState.layoutState.saveButtonHidden&&(null===t||void 0===t?void 0:t.isSaveButtonVisible)&&r.push(Object(re.jsx)(jO,{className:(null===t||void 0===t?void 0:t.isDirty)?vV.a.isRed:"",iconPath:"./icons/noun-save-1014816.svg",onClick:kP(null===t||void 0===t?void 0:t.formScreen)},"save")),this.showNextButton()&&r.push(Object(re.jsx)(jO,{iconPath:"./icons/list-arrow-next.svg",onClick:function(){return H_(e.activeScreen)(null)}},"next")),0!==r.length?Object(re.jsx)("div",{className:vV.a.root,children:r}):null}}]),n}(H.a.Component),iV.contextType=K.MobXProviderContext,oV=aV,Object($.a)(oV.prototype,"activeScreen",[c.computed],Object.getOwnPropertyDescriptor(oV.prototype,"activeScreen"),oV.prototype),rV=oV))||rV,OV=n(429),jV=n.n(OV),kV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)("div",{className:jV.a.root,children:Object(re.jsx)(YP,{aboutInfo:this.props.aboutInfo})})}}]),n}(H.a.Component),xV=n(430),CV=n.n(xV),IV=Object(K.observer)((function(e){var t,n=yn(Object(W.useContext)(K.MobXProviderContext).application);return n&&(null===(t=n.content.formScreen)||void 0===t?void 0:t.workflowTaskId)?Object(re.jsx)("div",{className:CV.a.root,children:n.formTitle}):null})),SV=Object(K.observer)((uV=cV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"mobileState",get:function(){return this.context.application.mobileState}},{key:"workbench",get:function(){return this.context.workbench}},{key:"about",get:function(){return LP(this.context.application)}},{key:"componentDidMount",value:function(){yn(this.workbench)||(this.mobileState.layoutState=new mn),this.about.update()}},{key:"renderMainPageContents",value:function(){if(this.mobileState.layoutState instanceof mn)return Object(re.jsx)(yL,{});if(this.mobileState.layoutState instanceof xn)return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(IE,{}),Object(re.jsx)(IV,{}),Object(re.jsx)(vA,{})]});if(this.mobileState.layoutState instanceof On)return Object(re.jsx)(nV,{});if(this.mobileState.layoutState instanceof jn)return this.mobileState.layoutState.component;if(this.mobileState.layoutState instanceof kn)return this.mobileState.layoutState.component;if(this.mobileState.layoutState instanceof wn)return Object(re.jsx)(kV,{aboutInfo:this.about.info,mobileState:this.mobileState});throw new Error(this.mobileState.layoutState+" not implemented")}},{key:"render",value:function(){return Object(re.jsxs)("div",{className:UA.a.root,children:[Object(re.jsx)(JA,{mobileState:this.mobileState}),this.renderMainPageContents(),Object(re.jsx)(MA,{}),Object(re.jsx)(wV,{mobileState:this.mobileState,ctx:this.context.application})]})}}]),n}(H.a.Component),cV.contextType=K.MobXProviderContext,sV=uV))||sV,DV=n(431),RV=n.n(DV),TV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).disposer=void 0,e}return Object(Q.a)(n,[{key:"application",get:function(){return this.context.application}},{key:"componentDidMount",value:function(){var e=this;this.disposer=Object(c.reaction)((function(){return Ot(e.application)}),(function(e){Array.from(document.styleSheets).find((function(e){return e.rules[0]&&e.rules[0].selectorText==="."+RV.a.mobileStyleSheetIdentifier})).disabled=!e}),{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.disposer)||void 0===e||e.call(this)}},{key:"render",value:function(){return Object(re.jsx)(re.Fragment,{})}}]),n}(H.a.Component);TV.contextType=K.MobXProviderContext;var _V,PV,FV,MV,LV,EV,AV,VV,NV,BV,UV,GV=(lV=c.action.bound,Object(K.observer)((fV=hV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"workbench",get:function(){return ke(this.context.application)}},{key:"handleRootElementClick",value:function(e){return uA(this.workbench)(e)}},{key:"componentDidMount",value:function(){window.document.addEventListener("click",this.handleRootElementClick,!0)}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this.handleRootElementClick,!0)}},{key:"render",value:function(){var e=SL(this.workbench);return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(vL.Breakpoint,{small:!0,down:!0,className:NA.a.mobileContainer,children:Object(re.jsx)(SV,{})}),Object(re.jsx)(vL.Breakpoint,{medium:!0,up:!0,className:NA.a.root,children:Object(re.jsx)(je,{sidebar:Object(re.jsx)(yL,{}),mainbar:Object(re.jsxs)(oe,{children:[Object(re.jsx)(tF,{}),Object(re.jsxs)(se,{children:[Object(re.jsx)(iP,{}),Object(re.jsxs)(AA,{isFullscreen:e,children:[Object(re.jsx)(AL,{}),Object(re.jsx)(vA,{})]}),Object(re.jsx)(MA,{})]})]})})}),Object(re.jsx)(WV,{}),Object(re.jsx)(TV,{})]})}}]),n}(H.a.Component),hV.contextType=K.MobXProviderContext,pV=fV,Object($.a)(pV.prototype,"handleRootElementClick",[lV],Object.getOwnPropertyDescriptor(pV.prototype,"handleRootElementClick"),pV.prototype),dV=pV))||dV),WV=function(e){var t=Object(vL.useCurrentBreakpointName)();return Object(W.useContext)(K.MobXProviderContext).application.breakpoint=t,Object(re.jsx)(re.Fragment,{})},HV=n(432),zV=n.n(HV),YV=Object(K.observer)((function(){var e=Ys(Object(W.useContext)(K.MobXProviderContext).application);return Object(re.jsx)(KV,{stackedDialogs:e.stackedDialogs,close:e.closeDialog})})),KV=Object(K.observer)(_V=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"onOverlayClick",value:function(e){e.closeOnClickOutside&&this.props.close(e.key)}},{key:"getStackedDialogs",value:function(){for(var e=this,t=[],n=function(n){n<e.props.stackedDialogs.length-1?t.push(H.a.cloneElement(e.props.stackedDialogs[n].component,{key:e.props.stackedDialogs[n].key})):t.push(Object(re.jsx)("div",{className:zV.a.modalWindowOverlay,onClick:function(t){return e.onOverlayClick(e.props.stackedDialogs[n])}},n),H.a.cloneElement(e.props.stackedDialogs[n].component,{key:e.props.stackedDialogs[n].key}))},r=0;r<this.props.stackedDialogs.length;r++)n(r);return t}},{key:"render",value:function(){return Y.a.createPortal(Object(re.jsx)(re.Fragment,{children:this.getStackedDialogs()}),document.getElementById("modal-window-portal"))}}]),n}(H.a.Component))||_V,qV=Object(K.observer)((MV=FV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"application",get:function(){return this.context.application}},{key:"workbench",get:function(){return this.application.workbench}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"toplevelContainer",children:Object(re.jsxs)(K.Provider,{workbench:this.workbench,children:[Object(re.jsx)(YV,{}),Object(re.jsx)(vL.BreakpointProvider,{children:Object(re.jsx)(GV,{})})]})})}}]),n}(H.a.Component),FV.contextType=K.MobXProviderContext,PV=MV))||PV,QV=function(e){return Object(re.jsx)(K.Provider,{application:e.application,children:Object(re.jsx)(qV,{})})},XV=(n(745),n(120)),ZV=n.n(XV);function $V(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}var JV,eN,tN,nN,rN,oN,iN,aN,sN,cN,uN,lN,dN,pN,hN,fN,bN,vN,yN,gN,mN,wN,ON,jN,kN=(LV=c.action.bound,EV=c.action.bound,AV=c.action.bound,VV=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"errorStack",NV,this),Object(de.a)(this,"isDialogDisplayed",BV,this),this.idGen=0}return Object(Q.a)(e,[{key:"errorMessages",get:function(){return this.errorStack.map((function(e){var t,n,r,o;console.error(e.error);var i=ge.a.get(e.error,"response.headers.content-type","").startsWith("text/plain")&&e.error.response.data||function(){var t;if(!(null===(t=e.error.response)||void 0===t?void 0:t.data))return"";var n=e.error.response.data,r="";do{var o,i,a=ge.a.get(n,"message")||ge.a.get(n,"Message");if(420===(null===(o=e.error)||void 0===o||null===(i=o.request)||void 0===i?void 0:i.status))return a;a&&(r+=a,r+="\n"),n=n.innerException||n.InnerException}while(n);return r}()||[].concat(Object(gt.a)(ge.a.get(e.error,"response.data.UserName",[])),Object(gt.a)(ge.a.get(e.error,"response.data.Password",[]))).join(" ")||""+e.error;return 500!==(null===(t=e.error)||void 0===t||null===(n=t.request)||void 0===n?void 0:n.status)&&409!==(null===(r=e.error)||void 0===r||null===(o=r.request)||void 0===o?void 0:o.status)||(i="Server error occurred. Please check server log for more details:\n"+i),{message:i,id:e.id,timestamp:e.timestamp.format("YYYY-MM-DD HH:mm:ss")}}))}},{key:"pushError",value:o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.idGen++,r=$V(),this.errorStack.push({id:n,error:t,promise:r,timestamp:Qn()()}),this.displayDialog(),e.next=6,r;case 6:case"end":return e.stop()}}),e,this)}))},{key:"displayDialog",value:function(){var e=this;if(!this.isDialogDisplayed){this.isDialogDisplayed=!0;var t=document.activeElement,n=Rn(this,"",Object(re.jsx)(be.a,{children:function(){return Object(re.jsx)(xN,{errorMessages:e.errorMessages,onOkClick:Object(c.action)((function(){n(),e.isDialogDisplayed=!1,e.dismissErrors(),setTimeout((function(){return null===t||void 0===t?void 0:t.focus()}),100)}))})}}))}}},{key:"dismissError",value:function(e){var t=this.errorStack.findIndex((function(t){return t.id===e}));t>-1&&(this.errorStack[t].promise.resolve(null),this.errorStack.splice(t,1))}},{key:"dismissErrors",value:function(){for(var e=0,t=Object(gt.a)(this.errorStack);e<t.length;e++){var n=t[e];this.dismissError(n.id)}}}]),e}(),NV=Object($.a)(VV.prototype,"errorStack",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),BV=Object($.a)(VV.prototype,"isDialogDisplayed",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(VV.prototype,"errorMessages",[c.computed],Object.getOwnPropertyDescriptor(VV.prototype,"errorMessages"),VV.prototype),Object($.a)(VV.prototype,"pushError",[Le.a],Object.getOwnPropertyDescriptor(VV.prototype,"pushError"),VV.prototype),Object($.a)(VV.prototype,"displayDialog",[LV],Object.getOwnPropertyDescriptor(VV.prototype,"displayDialog"),VV.prototype),Object($.a)(VV.prototype,"dismissError",[EV],Object.getOwnPropertyDescriptor(VV.prototype,"dismissError"),VV.prototype),Object($.a)(VV.prototype,"dismissErrors",[AV],Object.getOwnPropertyDescriptor(VV.prototype,"dismissErrors"),VV.prototype),VV),xN=Object(K.observer)(UV=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"render",value:function(){return Object(re.jsx)(xt,{title:bt("Error","error_window_title"),titleButtons:null,buttonsCenter:Object(re.jsx)(re.Fragment,{children:Object(re.jsx)("button",{tabIndex:0,autoFocus:!0,onClick:this.props.onOkClick,children:bt("Ok","button_ok")})}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsxs)("div",{className:ZV.a.dialogContent,children:[Object(re.jsx)("div",{className:ZV.a.dialogBigIconColumn,children:Object(re.jsx)(Ie.Icon,{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiCiAgICAgdmlld0JveD0iMCAwIDIwIDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMCAyMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8dGl0bGU+WmVpY2hlbmZsw6RjaGUgMTwvdGl0bGU+CjxnPgoJPHBhdGggZmlsbD0iI2ZmNDM1NCIgZD0iTTkuMywwLjlsLTkuMiwxN2MtMC4zLDAuNSwwLjEsMS4yLDAuNywxLjJoMTguNGMwLjYsMCwxLTAuNywwLjctMS4ybC05LjItMTdDMTAuNCwwLjQsOS42LDAuNCw5LjMsMC45eiBNMTAsMTUuOUwxMCwxNS45CgkJYy0wLjQsMC0wLjgtMC40LTAuOC0wLjh2MGMwLTAuNCwwLjQtMC44LDAuOC0wLjhoMGMwLjQsMCwwLjgsMC40LDAuOCwwLjh2MEMxMC44LDE1LjUsMTAuNCwxNS45LDEwLDE1Ljl6IE05LjIsMTEuOFY2LjkKCQljMC0wLjQsMC40LTAuOCwwLjgtMC44aDBjMC40LDAsMC44LDAuNCwwLjgsMC44djQuOWMwLDAuNC0wLjQsMC44LTAuOCwwLjhoMEM5LjYsMTIuNiw5LjIsMTIuMiw5LjIsMTEuOHoiLz4KPC9nPgo8L3N2Zz4K"})}),Object(re.jsx)("div",{className:ZV.a.dialogMessageColumn,children:1===this.props.errorMessages.length?this.props.errorMessages[0].message:Object(re.jsx)("div",{className:ZV.a.errorMessageList,children:this.props.errorMessages.map((function(e){return Object(re.jsxs)("div",{className:ZV.a.errorMessageListItem,children:[Object(re.jsx)("span",{className:ZV.a.errorMessageDatetime,children:e.timestamp}),e.message]},e.id)}))})})]})})}}]),n}(H.a.Component))||UV,CN=(JV=function(){function e(){Object(q.a)(this,e),this.workbench=void 0,Object(de.a)(this,"openScreenBreadCrumbs",eN,this)}return Object(Q.a)(e,[{key:"activeFormScreen",get:function(){var e,t;return null===(e=yn(this.workbench))||void 0===e||null===(t=e.content)||void 0===t?void 0:t.formScreen}},{key:"setActiveBreadCrumbList",value:function(e){if(this.openScreenBreadCrumbs.has(this.activeFormScreen)){var t=this.openScreenBreadCrumbs.get(this.activeFormScreen);t.length=0,e.forEach((function(e){return t.push(e)}))}else this.openScreenBreadCrumbs.set(this.activeFormScreen,e)}},{key:"activeBreadCrumbList",get:function(){if(this.activeFormScreen)return this.openScreenBreadCrumbs.has(this.activeFormScreen)||this.updateBreadCrumbs(),this.openScreenBreadCrumbs.get(this.activeFormScreen)}},{key:"updateBreadCrumbs",value:function(){this.activeFormScreen&&!this.openScreenBreadCrumbs.has(this.activeFormScreen)&&this.resetBreadCrumbs(this.activeFormScreen)}},{key:"resetBreadCrumbs",value:function(e){var t,n,r=this;if(this.openScreenBreadCrumbs.set(e,[new DE((function(){var e,t;return r.workbench&&null!==(e=null===(t=yn(r.workbench))||void 0===t?void 0:t.tabTitle)&&void 0!==e?e:""}))]),(null!==(t=null===e||void 0===e||null===(n=e.rootDataViews)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0&&"Tab"!==(null===e||void 0===e?void 0:e.uiRootType)){var o=null===e||void 0===e?void 0:e.rootDataViews[0];this.addDetailBreadCrumbNodeToRoot(o)}}},{key:"addDetailBreadCrumbNodeToRoot",value:function(e){var t;1===(null===(t=this.activeBreadCrumbList)||void 0===t?void 0:t.length)&&(this.activeBreadCrumbList[0].onClick=function(){var t;return null===(t=e.activateTableView)||void 0===t?void 0:t.call(e)},this.addDetailBreadCrumbNode(e))}},{key:"addDetailBreadCrumbNode",value:function(e){var t;null===(t=this.activeBreadCrumbList)||void 0===t||t.push({caption:bt("Detail","mobile_detail_navigation"),id:"Detail",isVisible:function(){return null===e||void 0===e?void 0:e.isFormViewActive()},onClick:function(){}})}},{key:"onFormClose",value:function(e){this.openScreenBreadCrumbs.delete(e)}}]),e}(),Object($.a)(JV.prototype,"activeFormScreen",[c.computed],Object.getOwnPropertyDescriptor(JV.prototype,"activeFormScreen"),JV.prototype),eN=Object($.a)(JV.prototype,"openScreenBreadCrumbs",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object($.a)(JV.prototype,"setActiveBreadCrumbList",[c.action],Object.getOwnPropertyDescriptor(JV.prototype,"setActiveBreadCrumbList"),JV.prototype),Object($.a)(JV.prototype,"updateBreadCrumbs",[c.action],Object.getOwnPropertyDescriptor(JV.prototype,"updateBreadCrumbs"),JV.prototype),Object($.a)(JV.prototype,"addDetailBreadCrumbNodeToRoot",[c.action],Object.getOwnPropertyDescriptor(JV.prototype,"addDetailBreadCrumbNodeToRoot"),JV.prototype),Object($.a)(JV.prototype,"addDetailBreadCrumbNode",[c.action],Object.getOwnPropertyDescriptor(JV.prototype,"addDetailBreadCrumbNode"),JV.prototype),JV),IN=(tN=function(){function e(){Object(q.a)(this,e),this._workbench=void 0,Object(de.a)(this,"layoutState",nN,this),Object(de.a)(this,"activeDataViewId",rN,this),this.breadCrumbsState=new CN,this.lastArgs=void 0}return Object(Q.a)(e,[{key:"initialize",value:function(e){var t=this;_e(e).mainMenuItemClickHandler.add((function(){return t.layoutState=new xn})),this._workbench=e,this.breadCrumbsState.workbench=e,this.breadCrumbsState.updateBreadCrumbs(),this.start()}},{key:"start",value:function(){var e=this;Object(c.reaction)((function(){return{activeScreen:!!yn(e._workbench),layoutState:e.layoutState}}),(function(t){!t.activeScreen&&t.layoutState instanceof xn?e.layoutState=new mn:e.lastArgs&&!e.lastArgs.activeScreen&&t.activeScreen&&t.layoutState instanceof mn&&(e.layoutState=new xn),e.lastArgs=t}))}},{key:"close",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.layoutState.close(this._workbench);case 2:this.layoutState=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hamburgerClick",value:function(){this.layoutState=this.layoutState.hamburgerClick()}},{key:"onFormClose",value:function(e){e&&this.breadCrumbsState.onFormClose(e)}}]),e}(),nN=Object($.a)(tN.prototype,"layoutState",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xn}}),rN=Object($.a)(tN.prototype,"activeDataViewId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tN),SN=(oN=function(){function e(t){Object(q.a)(this,e),this.$type_IApplication=1,this.errorDialogController=null,this.applicationLifecycle=null,this.api=null,this.dialogStack=null,this.workbench=void 0,this.mobileState=new IN,this.parent=void 0,Object(de.a)(this,"breakpoint",iN,this),Object.assign(this,t),this.applicationLifecycle.parent=this,this.dialogStack.parent=this,this.errorDialogController.parent=this}return Object(Q.a)(e,[{key:"resetWorkbench",value:function(){this.workbench=void 0}},{key:"setWorkbench",value:function(e){this.workbench=e,e.parent=this,this.mobileState.initialize(e)}},{key:"run",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(this.applicationLifecycle.run(),"t0",2);case 2:e.next=8;break;case 4:return e.prev=4,e.t1=e.catch(0),e.delegateYield(yt(this)(e.t1),"t2",7);case 7:throw e.t1;case 8:case"end":return e.stop()}}),e,this,[[0,4]])}))}]),e}(),iN=Object($.a)(oN.prototype,"breakpoint",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oN),DN=(aN=c.action.bound,sN=function(){function e(t){Object(q.a)(this,e),this.$type_IWorkbench=1,this.workbenchLifecycle=null,this.searcher=null,this.mainMenuEnvelope=null,this.openedScreens=null,this.openedDialogScreens=null,this.workQueues=null,this.chatrooms=void 0,this.notifications=null,this.recordInfo=null,this.lookupListCache=null,this.lookupMultiEngine=null,this.favorites=null,this.sidebarState=null,this.about=null,Object(de.a)(this,"isFullScreen",cN,this),this.parent=void 0,Object.assign(this,t),this.workbenchLifecycle.parent=this,this.searcher.parent=this,this.openedScreens.parent=this,this.openedDialogScreens.parent=this,this.workQueues.parent=this,this.chatrooms.parent=this,this.notifications.parent=this,this.recordInfo.parent=this,this.favorites.parent=this,this.sidebarState.parent=this,this.about.parent=this}return Object(Q.a)(e,[{key:"setFullscreen",value:function(e){this.isFullScreen=e}},{key:"openedScreenIdSet",get:function(){return new Set(this.openedScreens.items.map((function(e){return e.menuItemId})))}},{key:"run",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.workbenchLifecycle.run(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),cN=Object($.a)(sN.prototype,"isFullScreen",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(sN.prototype,"setFullscreen",[aN],Object.getOwnPropertyDescriptor(sN.prototype,"setFullscreen"),sN.prototype),Object($.a)(sN.prototype,"openedScreenIdSet",[c.computed],Object.getOwnPropertyDescriptor(sN.prototype,"openedScreenIdSet"),sN.prototype),sN);function RN(e){return o.a.mark((function t(n,r){var i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=l(e),t.next=3,i.getMenuId({LookupId:n,ReferenceId:r});case 3:return a=t.sent,t.delegateYield(_e(e).onMainMenuItemIdClick({event:void 0,itemId:a,idParameter:r,isSingleRecordEdit:!0}),"t0",5);case 5:case"end":return t.stop()}}),t)}))}function TN(e){for(var t=[],n=e;void 0!==n;)t.push(n),n=n.parent;return t.reverse(),t.slice(2)}function _N(e){var t=TN(e).map((function(e){return e.attributes.label}));return t.unshift(bt("Menu","menu")),t.join("/")}function PN(e,t){if("Submenu"===e.name){var n=Hi(t);Object(c.runInAction)((function(){n.closeAll();var t,r=TN(e),o=Object(le.a)(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;n.setIsOpen(i.attributes.id,!0)}}catch(a){o.e(a)}finally{o.f()}}))}}var FN,MN,LN,EN,AN,VN=(uN=c.action.bound,lN=c.action.bound,dN=c.action.bound,pN=c.action.bound,hN=c.action.bound,fN=c.action.bound,bN=function(){function e(){Object(q.a)(this,e),this.parent=void 0,this.nodeIndex=[],this.workQueueIndex=[],this.chatsIndex=[],this.searchTerm="",Object(de.a)(this,"selectedResult",vN,this),Object(de.a)(this,"serverResultGroups",yN,this),Object(de.a)(this,"menuResultGroup",gN,this),Object(de.a)(this,"workQueueResultGroup",mN,this),Object(de.a)(this,"chatResultGroup",wN,this),this.doSearchTerm=ge.a.throttle(this.doSearchTermImm,100)}return Object(Q.a)(e,[{key:"resultGroups",get:function(){var e=this.serverResultGroups.length>0?Object(gt.a)(this.serverResultGroups):[];return this.workQueueResultGroup&&this.workQueueResultGroup.results.length>0&&e.unshift(this.workQueueResultGroup),this.menuResultGroup&&this.menuResultGroup.results.length>0&&e.unshift(this.menuResultGroup),this.chatResultGroup&&this.chatResultGroup.results.length>0&&e.unshift(this.chatResultGroup),e}},{key:"selectFirst",value:function(){0!==this.resultGroups.length&&0!==this.resultGroups[0].results.length&&(this.selectedResult=this.resultGroups[0].results[0])}},{key:"selectNextResult",value:function(){if(this.selectedResult){var e=this.getSelectedResultIndices();if(-1!==e.groupIndex){var t=this.resultGroups[e.groupIndex];if(e.indexInGroup<t.results.length-1)this.selectedResult=t.results[e.indexInGroup+1];else{var n=this.resultGroups.indexOf(t);if(n<this.resultGroups.length-1){var r=this.resultGroups[n+1];r.isExpanded=!0,this.selectedResult=r.results[0]}}}else this.selectFirst()}else this.selectFirst()}},{key:"selectPreviousResult",value:function(){if(this.selectedResult){var e=this.getSelectedResultIndices();if(-1!==e.groupIndex){var t=this.resultGroups[e.groupIndex];if(e.indexInGroup>0)this.selectedResult=t.results[e.indexInGroup-1];else{var n=this.resultGroups.indexOf(t);if(n>0){var r=this.resultGroups[n-1];r.isExpanded=!0,this.selectedResult=r.results[r.results.length-1]}}}else this.selectFirst()}else this.selectFirst()}},{key:"getSelectedResultIndices",value:function(){var e=this,t=this.resultGroups.findIndex((function(t){return t.results.some((function(t){return t.id===e.selectedResult.id}))}));return-1===t?{groupIndex:-1,indexInGroup:-1}:{groupIndex:t,indexInGroup:this.resultGroups[t].results.findIndex((function(t){return t.id===e.selectedResult.id}))}}},{key:"searchOnServer",value:function(){var e=this;if(!this.searchTerm.trim())return this.serverResultGroups=[],this.menuResultGroup=void 0,this.workQueueResultGroup=void 0,void(this.chatResultGroup=void 0);In({ctx:this,action:function(){var t=Object(i.a)(o.a.mark((function t(){var n,r,i,a,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l(e),t.next=3,n.search(e.searchTerm);case 3:r=t.sent,i=Object(le.a)(r);try{for(s=function(){var t=a.value;t.iconUrl=e.getIconUrl(DF.Form),t.id=t.referenceId,t.onClick=function(){return e.onItemServerClick(t)}},i.s();!(a=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}c=r.groupBy((function(e){return e.group})),e.serverResultGroups=Array.from(c.keys()).sort().map((function(e){return new NN(e,c.get(e))}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},{key:"onItemServerClick",value:function(e){var t;(t=this,function(){var e=Object(i.a)(o.a.mark((function e(n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.flow)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(RN(t)(n,r),"t0",2);case 2:e.next=8;break;case 4:return e.prev=4,e.t1=e.catch(0),e.delegateYield(yt(t)(e.t1),"t2",7);case 7:throw e.t1;case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())(e.dataSourceLookupId,e.referenceId),ke(this).sidebarState.onSearchResultsChange(this.resultGroups)}},{key:"onSearchFieldChange",value:function(e){this.searchTerm=e,""!==e.trim()?this.doSearchTerm(e):this.menuResultGroup=void 0}},{key:"doSearchTermImm",value:function(e){var t=cs(this,e.trim());this.searchInMenu(t),this.searchInWorkQueues(t),this.searchInChat(t)}},{key:"getIconUrl",value:function(e){return TF(e,FP(this)+"/"+e)}},{key:"searchInChat",value:function(e){var t=this,n=this.chatsIndex.filter((function(t){return t.latinizedLowerLabel.includes(e)})).map((function(e){var n=e.node;return{id:n.id,type:"",iconUrl:t.getIconUrl(DF.Chat),label:n.topic,description:"",onClick:function(){return t.onChatItemClicked(n)}}}));this.chatResultGroup=new NN(bt("Chat","chat"),n)}},{key:"onChatItemClicked",value:function(e){PN(e,this);var t=ke(this).sidebarState;MM(this)(null,e),t.activeSection="Chat",Hi(this).scrollToItem(e.id),t.onSearchResultsChange(this.resultGroups)}},{key:"searchInWorkQueues",value:function(e){var t=this,n=this.workQueueIndex.filter((function(t){return t.latinizedLowerLabel.includes(e)})).map((function(e){var n=e.node;return{id:n.id,type:"",iconUrl:t.getIconUrl(DF.WorkQueue),label:n.name,description:"",onClick:function(){return t.onWorkQueueItemClicked(n)}}}));this.workQueueResultGroup=new NN(bt("Work Queue","queue_results"),n)}},{key:"onWorkQueueItemClicked",value:function(e){PN(e,this);var t=ke(this).sidebarState;jM(this)(null,e),t.activeSection="WorkQueues",Hi(this).scrollToItem(e.id),t.onSearchResultsChange(this.resultGroups)}},{key:"searchInMenu",value:function(e){var t=this,n=this.nodeIndex.filter((function(t){return t.latinizedLowerLabel.includes(e)})).map((function(e){var n=e.node;switch(n.name){case"Submenu":return{id:n.attributes.id,type:"Submenu",iconUrl:t.getIconUrl(n.attributes.icon),label:n.attributes.label,description:_N(n),onClick:function(){return t.onSubMenuClicked(n)}};case"Command":return{id:n.attributes.id,type:"Command",iconUrl:t.getIconUrl(n.attributes.icon),label:n.attributes.label,description:_N(n),onClick:function(){return t.onCommandClicked(n)}}}})).filter((function(e){return e}));this.menuResultGroup=new NN(bt("Menu","menu"),n)}},{key:"onCommandClicked",value:function(e){sa(this)({event:null,item:e,idParameter:void 0}),ke(this).sidebarState.onSearchResultsChange(this.resultGroups)}},{key:"onSubMenuClicked",value:function(e){PN(e,this),ke(this).sidebarState.activeSection="Menu",Hi(this).scrollToItem(e.attributes.id)}},{key:"indexWorkQueues",value:function(e){var t=this;this.workQueueIndex=e.map((function(e){return new BN(cs(t,e.name),e)}))}},{key:"indexChats",value:function(e){var t=this;this.chatsIndex=e.map((function(e){return new BN(cs(t,e.topic),e)}))}},{key:"indexMainMenu",value:function(e){var t=this,n=function e(n){if("true"!==n.attributes.isHidden){switch(n.name){case"Submenu":case"Command":t.nodeIndex.push(new BN(cs(t,n.attributes.label),n))}n.elements.forEach((function(t){return e(t)}))}};e.elements.forEach((function(e){n(e)}))}},{key:"clear",value:function(){this.serverResultGroups=[],this.menuResultGroup=void 0,this.workQueueResultGroup=void 0,this.chatResultGroup=void 0,this.searchTerm=""}}]),e}(),vN=Object($.a)(bN.prototype,"selectedResult",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yN=Object($.a)(bN.prototype,"serverResultGroups",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gN=Object($.a)(bN.prototype,"menuResultGroup",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),mN=Object($.a)(bN.prototype,"workQueueResultGroup",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),wN=Object($.a)(bN.prototype,"chatResultGroup",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object($.a)(bN.prototype,"resultGroups",[c.computed],Object.getOwnPropertyDescriptor(bN.prototype,"resultGroups"),bN.prototype),Object($.a)(bN.prototype,"onSearchFieldChange",[uN],Object.getOwnPropertyDescriptor(bN.prototype,"onSearchFieldChange"),bN.prototype),Object($.a)(bN.prototype,"doSearchTermImm",[lN],Object.getOwnPropertyDescriptor(bN.prototype,"doSearchTermImm"),bN.prototype),Object($.a)(bN.prototype,"indexWorkQueues",[dN],Object.getOwnPropertyDescriptor(bN.prototype,"indexWorkQueues"),bN.prototype),Object($.a)(bN.prototype,"indexChats",[pN],Object.getOwnPropertyDescriptor(bN.prototype,"indexChats"),bN.prototype),Object($.a)(bN.prototype,"indexMainMenu",[hN],Object.getOwnPropertyDescriptor(bN.prototype,"indexMainMenu"),bN.prototype),Object($.a)(bN.prototype,"clear",[fN],Object.getOwnPropertyDescriptor(bN.prototype,"clear"),bN.prototype),bN),NN=(ON=function e(t,n){Object(q.a)(this,e),this.name=t,this.results=n,Object(de.a)(this,"isExpanded",jN,this)},jN=Object($.a)(ON.prototype,"isExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ON),BN=function e(t,n){Object(q.a)(this,e),this.latinizedLowerLabel=t,this.node=n},UN=(FN=c.action.bound,MN=c.action.bound,LN=c.action.bound,EN=function(){function e(){Object(q.a)(this,e),this.$type_IOpenedScreens=1,this.parent=void 0,Object(de.a)(this,"items",AN,this)}return Object(Q.a)(e,[{key:"isShown",value:function(e){return this.items.indexOf(e)>-1}},{key:"pushItem",value:function(e){e.stackPosition=this.maxStackPosition+1,this.items.push(e),e.parent=this}},{key:"deleteItem",value:function(e,t){var n=this.items.findIndex((function(n){return n.menuItemId===e&&n.order===t}));n>-1&&this.items.splice(n,1)}},{key:"activateItem",value:function(e,t){this.items.forEach((function(e){return e.setActive(!1)}));var n=this.items.find((function(n){return n.menuItemId===e&&n.order===t}));n&&(n.setActive(!0),n.stackPosition=this.maxStackPosition+1)}},{key:"activeItem",get:function(){return this.items.find((function(e){return e.isActive}))}},{key:"activeScreenActions",get:function(){var e=this.activeItem;return e&&!e.content.isLoading?e.content.formScreen.toolbarActions:[]}},{key:"maxStackPosition",get:function(){return Math.max.apply(Math,Object(gt.a)(this.items.map((function(e){return e.stackPosition}))).concat([0]))}},{key:"findLastExistingTabItem",value:function(e){var t=this.items.filter((function(t){return t.menuItemId===e&&!t.isDialog}));return t.sort((function(e,t){return e.order-t.order})),t.slice(-1)[0]}},{key:"findTopmostItemExcept",value:function(e,t){var n=Object(gt.a)(this.items).sort((function(e,t){return t.stackPosition-e.stackPosition})),r=n.findIndex((function(n){return n.menuItemId===e&&n.order===t}));return r>-1&&n.splice(r,1),n[0]}}]),e}(),AN=Object($.a)(EN.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(EN.prototype,"pushItem",[FN],Object.getOwnPropertyDescriptor(EN.prototype,"pushItem"),EN.prototype),Object($.a)(EN.prototype,"deleteItem",[MN],Object.getOwnPropertyDescriptor(EN.prototype,"deleteItem"),EN.prototype),Object($.a)(EN.prototype,"activateItem",[LN],Object.getOwnPropertyDescriptor(EN.prototype,"activateItem"),EN.prototype),Object($.a)(EN.prototype,"activeItem",[c.computed],Object.getOwnPropertyDescriptor(EN.prototype,"activeItem"),EN.prototype),Object($.a)(EN.prototype,"activeScreenActions",[c.computed],Object.getOwnPropertyDescriptor(EN.prototype,"activeScreenActions"),EN.prototype),Object($.a)(EN.prototype,"maxStackPosition",[c.computed],Object.getOwnPropertyDescriptor(EN.prototype,"maxStackPosition"),EN.prototype),EN);var GN,WN,HN,zN,YN,KN,qN,QN,XN,ZN,$N,JN,eB,tB,nB,rB,oB=function(){function e(t,n){var r=this;Object(q.a)(this,e),this.loadFunction=t,this.getChSuccessfulApi=n,this.timeoutHandle=void 0,this.interpreter=Object(_C.a)(Object(PC.a)({id:"periodicLoader",initial:"INITIALIZED",states:{INITIALIZED:{on:{START:{target:"PERFORMING_LOAD"}}},PERFORMING_LOAD:{invoke:{src:"svcLoadFunction",onDone:"WAIT_PERIOD_REST",onError:"FAILED"}},FAILED:{invoke:{src:"svcSuccessfulApiSubs"},on:{SOME_API_SUCCESS:"PERFORMING_LOAD"},after:{6e4:"PERFORMING_LOAD"}},WAIT_PERIOD_REST:{after:{REST_DELAY:"PERFORMING_LOAD"}}}},{actions:{},services:{svcLoadFunction:function(e,t){return Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.t0=(new Date).valueOf(),e.next=3,Object(c.flow)(r.loadFunction)();case 3:r.t1=(new Date).valueOf();case 4:case"end":return e.stop()}}),e)})))},svcSuccessfulApiSubs:function(e,t){return function(e,t){return r.getChSuccessfulApi().subscribe((function(){r.interpreter.send("SOME_API_SUCCESS")}))}}},delays:{REST_DELAY:function(e,t){return Math.max(0,r.refreshIntervalMs-(r.t1-r.t0))}}}),{devTools:!0}),this.t0=0,this.t1=0,this.refreshIntervalMs=0,this.interpreter.start()}return Object(Q.a)(e,[{key:"start",value:o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=0)){e.next=2;break}return e.abrupt("return");case 2:this.refreshIntervalMs=t,this.t0=0,this.t1=0,(null===(n=this.interpreter.state)||void 0===n||null===(r=n.matches)||void 0===r?void 0:r.call(n,"INITIALIZED"))||(this.interpreter.stop(),this.interpreter.start()),this.interpreter.send("START");case 7:case"end":return e.stop()}}),e,this)}))},{key:"stop",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.interpreter.stop();case 1:case"end":return e.stop()}}),e,this)}))}]),e}(),iB=(GN=function(){function e(){var t,n=this;Object(q.a)(this,e),this.$type_IWorkQueues=1,Object(de.a)(this,"items",WN,this),this.loader=new oB((t=this,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(an(t)(),"t0",2);case 2:e.next=8;break;case 4:return e.prev=4,e.t1=e.catch(0),e.delegateYield(yt(t)(e.t1),"t2",7);case 7:throw e.t1;case 8:case"end":return e.stop()}}),e,null,[[0,4]])}))),(function(){return l(n).onApiResponse})),this.hRefreshTimer=void 0,this.refreshInterval=0,this.parent=void 0}return Object(Q.a)(e,[{key:"getWorkQueueList",value:o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(this),e.next=3,t.getWorkQueueList();case 3:n=e.sent,this.items=n;case 5:case"end":return e.stop()}}),e,this)}))},{key:"totalItemCount",get:function(){return this.items.map((function(e){return e.countTotal})).reduce((function(e,t){return e+t}),0)}},{key:"startTimer",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("debugNoPolling")){e.next=2;break}return e.abrupt("return");case 2:return e.delegateYield(this.loader.start(t),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"stopTimer",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.loader.stop(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"isTimerRunning",get:function(){return!!this.hRefreshTimer}}]),e}(),WN=Object($.a)(GN.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(GN.prototype,"totalItemCount",[c.computed],Object.getOwnPropertyDescriptor(GN.prototype,"totalItemCount"),GN.prototype),GN),aB=(HN=c.observable.ref,zN=c.observable.ref,YN=c.action.bound,KN=c.action.bound,qN=function(){function e(){Object(q.a)(this,e),this.$type_IRecordInfo=1,Object(de.a)(this,"info",QN,this),Object(de.a)(this,"audit",XN,this),Object(de.a)(this,"recordInfoExpanded",ZN,this),Object(de.a)(this,"recordAuditExpanded",$N,this),this.displayedFor={},this.idgen=0,this.infoSectionExpandHandlers=new Map,this.auditSectionExpandHandlers=new Map,this.parent=void 0}return Object(Q.a)(e,[{key:"addInfoSectionExpandHandler",value:function(e){var t=this,n=this.idgen++;return this.infoSectionExpandHandlers.set(n,e),function(){return t.infoSectionExpandHandlers.delete(n)}}},{key:"triggerInfoSectionExpand",value:function(){Array.from(this.infoSectionExpandHandlers.values()).forEach((function(e){return e()}))}},{key:"addAuditSectionExpandHandler",value:function(e){var t=this,n=this.idgen++;return this.auditSectionExpandHandlers.set(n,e),function(){return t.auditSectionExpandHandlers.delete(n)}}},{key:"triggerAuditSectionExpand",value:function(){Array.from(this.auditSectionExpandHandlers.values()).forEach((function(e){return e()}))}},{key:"willLoadNewInfo",value:function(e,t,n){return e!==this.displayedFor.menuId||t!==this.displayedFor.dataStructureEntityId||n!==this.displayedFor.rowId}},{key:"hasValidLoadedFor",value:function(){return this.displayedFor.menuId&&this.displayedFor.dataStructureEntityId&&this.displayedFor.rowId}},{key:"onSidebarInfoSectionCollapsed",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.recordInfoExpanded=!1,this.recordAuditExpanded=!1,this.info=[],this.audit=void 0;case 4:case"end":return e.stop()}}),e,this)}))},{key:"onOpenRecordInfoClick",value:o.a.mark((function e(t,n,r,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.recordInfoExpanded=!0,this.recordAuditExpanded=!1,this.triggerInfoSectionExpand(),e.delegateYield(this.loadRecordInfo(n,r,i),"t0",4);case 4:case"end":return e.stop()}}),e,this)}))},{key:"onSelectedRowMaybeChanged",value:o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.willLoadNewInfo(t,n,r)){e.next=3;break}if(!this.recordInfoExpanded){e.next=3;break}return e.delegateYield(this.loadRecordInfo(t,n,r),"t0",3);case 3:this.displayedFor={menuId:t,dataStructureEntityId:n,rowId:r};case 4:case"end":return e.stop()}}),e,this)}))},{key:"onOpenRecordAuditClick",value:o.a.mark((function e(t,n,r,i){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.recordAuditExpanded=!0,this.recordInfoExpanded=!1,this.triggerAuditSectionExpand();case 3:case"end":return e.stop()}}),e,this)}))},{key:"onSidebarInfoSectionExpanded",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recordInfoExpanded=!0,this.recordAuditExpanded=!1,!this.hasValidLoadedFor()){e.next=4;break}return e.delegateYield(this.loadRecordInfo(this.displayedFor.menuId,this.displayedFor.dataStructureEntityId,this.displayedFor.rowId),"t0",4);case 4:case"end":return e.stop()}}),e,this)}))},{key:"onSidebarAuditSectionExpanded",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.recordInfoExpanded=!1,this.recordAuditExpanded=!0,this.hasValidLoadedFor();case 3:case"end":return e.stop()}}),e,this)}))},{key:"loadRecordInfo",value:o.a.mark((function e(t,n,r){var i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l(this),this.info=[],e.next=4,i.getRecordInfo({MenuId:t,DataStructureEntityId:n,RowId:r});case 4:a=e.sent,s=a.cell.map((function(e){return e["#text"]})),this.info=s;case 7:case"end":return e.stop()}}),e,this)}))}]),e}(),QN=Object($.a)(qN.prototype,"info",[HN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),XN=Object($.a)(qN.prototype,"audit",[zN],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ZN=Object($.a)(qN.prototype,"recordInfoExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$N=Object($.a)(qN.prototype,"recordAuditExpanded",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object($.a)(qN.prototype,"triggerInfoSectionExpand",[YN],Object.getOwnPropertyDescriptor(qN.prototype,"triggerInfoSectionExpand"),qN.prototype),Object($.a)(qN.prototype,"triggerAuditSectionExpand",[KN],Object.getOwnPropertyDescriptor(qN.prototype,"triggerAuditSectionExpand"),qN.prototype),qN),sB=(JN=c.action.bound,eB=c.action.bound,tB=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OR();Object(q.a)(this,e),this.clock=t,this.lists=new Map,this.recordBirthdate=new Map,this.disposers=[]}return Object(Q.a)(e,[{key:"startup",value:function(){this.disposers.push(this.clock.setInterval(this.handleOutdatingTimerTick,6e4))}},{key:"teardown",value:function(){var e,t=Object(le.a)(this.disposers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"handleOutdatingTimerTick",value:function(){var e,t=this.clock.getTimeMs(),n=[],r=Object(le.a)(this.lists.keys());try{for(r.s();!(e=r.n()).done;){var o=e.value;t-this.recordBirthdate.get(o)>=6e5&&n.push(o)}}catch(c){r.e(c)}finally{r.f()}for(var i=0,a=n;i<a.length;i++){var s=a[i];this.deleteLookup(s)}}},{key:"deleteLookup",value:function(e){this.lists.delete(e),this.recordBirthdate.delete(e)}},{key:"getLookupList",value:function(e){return this.lists.get(e)}},{key:"hasLookupList",value:function(e){return this.lists.has(e)}},{key:"setLookupList",value:function(e,t){this.lists.set(e,t),this.recordBirthdate.set(e,this.clock.getTimeMs())}}]),e}(),Object($.a)(tB.prototype,"handleOutdatingTimerTick",[JN],Object.getOwnPropertyDescriptor(tB.prototype,"handleOutdatingTimerTick"),tB.prototype),Object($.a)(tB.prototype,"deleteLookup",[eB],Object.getOwnPropertyDescriptor(tB.prototype,"deleteLookup"),tB.prototype),tB);Ml("ILookupListCacheMulti");var cB,uB,lB=(nB=function(){function e(){var t,n=this;Object(q.a)(this,e),this.loader=new oB((t=this,o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=z_(t),e.delegateYield(n.getChatroomsList(),"t0",3);case 3:on(t).indexChats(n.items),e.next=10;break;case 6:return e.prev=6,e.t1=e.catch(0),e.delegateYield(yt(t)(e.t1),"t2",9);case 9:throw e.t1;case 10:case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),(function(){return l(n).onApiResponse})),Object(de.a)(this,"items",rB,this),this.parent=void 0}return Object(Q.a)(e,[{key:"getChatroomsList",value:o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(this),e.next=3,t.getChatroomList();case 3:n=e.sent,this.items=n;case 5:case"end":return e.stop()}}),e,this)}))},{key:"totalItemCount",get:function(){return this.items.map((function(e){return e.unreadMessageCount})).reduce((function(e,t){return e+t}),0)}},{key:"sortedItems",get:function(){return this.items}},{key:"startTimer",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("debugNoPolling_chatrooms")){e.next=2;break}return e.abrupt("return");case 2:return localStorage.getItem("debugPollingMs_chatrooms")&&(t=parseInt(localStorage.getItem("debugPollingMs_chatrooms")||"30000")),e.delegateYield(this.loader.start(t),"t0",4);case 4:case"end":return e.stop()}}),e,this)}))}]),e}(),rB=Object($.a)(nB.prototype,"items",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(nB.prototype,"totalItemCount",[c.computed],Object.getOwnPropertyDescriptor(nB.prototype,"totalItemCount"),nB.prototype),nB);var dB,pB,hB,fB,bB,vB,yB,gB,mB,wB,OB,jB,kB,xB,CB=(cB=function(){function e(){var t,n=this;Object(q.a)(this,e),Object(de.a)(this,"notificationBox",uB,this),this.loader=new oB((t=this,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(Y_(t).getNotificationBoxContent(),"t0",2);case 2:e.next=8;break;case 4:return e.prev=4,e.t1=e.catch(0),e.delegateYield(yt(t)(e.t1),"t2",7);case 7:throw e.t1;case 8:case"end":return e.stop()}}),e,null,[[0,4]])}))),(function(){return l(n).onApiResponse})),this.parent=void 0}return Object(Q.a)(e,[{key:"getNotificationBoxContent",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(this).getNotificationBoxContent();case 2:this.notificationBox=e.sent;case 3:case"end":return e.stop()}}),e,this)}))},{key:"startTimer",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("debugNoPolling_notificationBox")){e.next=2;break}return e.abrupt("return");case 2:return e.delegateYield(this.loader.start(t),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))}]),e}(),uB=Object($.a)(cB.prototype,"notificationBox",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cB),IB=(dB=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"favoriteFolders",pB,this),this.xmlConverter=new SB,this.parent=void 0}return Object(Q.a)(e,[{key:"isFavorite",value:function(e,t){var n;return!0===(null===(n=this.getFolder(e))||void 0===n?void 0:n.has(t))}},{key:"isInAnyFavoriteFolder",value:function(e){return this.favoriteFolders.some((function(t){return t.has(e)}))}},{key:"defaultFavoritesFolderId",get:function(){return this.favoriteFolders.length>0?this.favoriteFolders[0].id:"Favorites"}},{key:"setXml",value:function(e){var t=this.xmlConverter.xmlToFolders(e);0===t.length&&t.push(new DB(Object(nI.a)(),bt("Favorites","default_group"),!0,[],!1)),this.favoriteFolders=t}},{key:"add",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=this.getFolder(t))||void 0===r||r.add(n),e.next=3,this.saveFavorites();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=this.favoriteFolders.find((function(e){return e.has(t)})))||void 0===n||n.remove(t),e.next=3,this.saveFavorites();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveFavorites",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(this),n=this.xmlConverter.favoriteIdsToXml(this.favoriteFolders),e.next=4,t.saveFavorites({ConfigXml:n});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createFolder",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.favoriteFolders.push(new DB(Object(nI.a)(),t,!1,[],n)),e.next=3,this.saveFavorites();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeFolder",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.getFolder(t))&&this.favoriteFolders.remove(n),e.next=4,this.saveFavorites();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFolderName",value:function(e){var t,n;return null!==(t=null===(n=this.getFolder(e))||void 0===n?void 0:n.name)&&void 0!==t?t:""}},{key:"updateFolder",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this.getFolder(t)).name=n,i.isPinned=r,e.next=5,this.saveFavorites();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getFolder",value:function(e){return this.favoriteFolders.find((function(t){return t.id===e}))}},{key:"setPinned",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getFolder(t).isPinned=n,e.next=3,this.saveFavorites();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"moveItemInFolder",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[n],t.splice(n,1),t.splice(r,0,i),e.next=5,this.saveFavorites();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"moveItemBetweenFolders",value:function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.itemIds.remove(t),r.itemIds.push(t),e.next=4,this.saveFavorites();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),pB=Object($.a)(dB.prototype,"favoriteFolders",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dB),SB=function(){function e(){Object(q.a)(this,e)}return Object(Q.a)(e,[{key:"xmlToFolders",value:function(e){var t,n,r=this;if(!e)return[];var o=XR.a.xml2js(e);return(null===o||void 0===o||null===(t=o.elements)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.elements)?o.elements[0].elements.map((function(e,t){return r.parseToFavoriteFolder(e,0===t)})):[]}},{key:"parseToFavoriteFolder",value:function(e,t){var n,r,o,i,a=e.attributes.label,s=null!==(n=e.attributes.id)&&void 0!==n?n:a,c="true"===e.attributes.isPinned,u=null!==(r=null===(o=e.elements)||void 0===o||null===(i=o.map((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.menuId})))||void 0===i?void 0:i.filter((function(e){return e})))&&void 0!==r?r:[];return new DB(s,a,t,u,c)}},{key:"favoriteIdsToXml",value:function(e){var t=this;return"<favourites>\n"+e.map((function(e){return t.folderToXml(e)})).join("\n")+"\n</favourites>"}},{key:"folderToXml",value:function(e){return'  <folder label="'.concat(e.name,'" id="').concat(e.id,'" isPinned="').concat(e.isPinned,'">\n')+e.itemIds.map((function(e){return'    <item menuId="'.concat(e,'"/>')})).join("\n")+"  </folder>"}}]),e}(),DB=(hB=function(){function e(t,n,r,o,i){Object(q.a)(this,e),this.id=t,this.isDefault=r,Object(de.a)(this,"itemIds",fB,this),Object(de.a)(this,"isPinned",bB,this),Object(de.a)(this,"name",vB,this),this.name=n,this.isPinned=i,this.itemIds=o}return Object(Q.a)(e,[{key:"has",value:function(e){return this.itemIds.includes(e)}},{key:"add",value:function(e){return this.itemIds.push(e)}},{key:"remove",value:function(e){return this.itemIds.remove(e)}}]),e}(),fB=Object($.a)(hB.prototype,"itemIds",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bB=Object($.a)(hB.prototype,"isPinned",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vB=Object($.a)(hB.prototype,"name",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hB);var RB,TB,_B,PB=(yB=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"searchResultGroups",gB,this),Object(de.a)(this,"_activeSection",mB,this),Object(de.a)(this,"activeInfoSubsection",wB,this),this.mainMenuState=new FB,this.parent=void 0}return Object(Q.a)(e,[{key:"resultCount",get:function(){return 0===this.searchResultGroups.length?0:this.searchResultGroups.map((function(e){return e.results.length})).reduce((function(e,t){return e+t}))}},{key:"activeSection",get:function(){return this._activeSection},set:function(e){var t,n=ke(this);"Info"===this._activeSection&&e!==this._activeSection&&(t=n,Object(c.flow)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ca(t).onSidebarInfoSectionCollapsed(),"t0",1);case 1:case"end":return e.stop()}}),e)}))))(),"Info"!==this._activeSection&&"Info"===e&&(this.activeInfoSubsection===kM.Info&&function(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ca(e).onSidebarInfoSectionExpanded(),"t0",1);case 1:case"end":return t.stop()}}),t)})))}(n)(),this.activeInfoSubsection===kM.Audit&&function(e){return Object(c.flow)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(ca(e).onSidebarAuditSectionExpanded(),"t0",1);case 1:case"end":return t.stop()}}),t)})))}(n)()),this._activeSection=e}},{key:"onSearchResultsChange",value:function(e){this.searchResultGroups=e,this.activeSection="Search"}}]),e}(),gB=Object($.a)(yB.prototype,"searchResultGroups",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mB=Object($.a)(yB.prototype,"_activeSection",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Menu"}}),wB=Object($.a)(yB.prototype,"activeInfoSubsection",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return kM.Info}}),Object($.a)(yB.prototype,"onSearchResultsChange",[c.action],Object.getOwnPropertyDescriptor(yB.prototype,"onSearchResultsChange"),yB.prototype),yB),FB=(OB=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"editing",jB,this),Object(de.a)(this,"folderStateMap",kB,this),this.refMap=new Map,Object(de.a)(this,"_highLightedItemId",xB,this)}return Object(Q.a)(e,[{key:"closeAll",value:function(){this.folderStateMap.clear()}},{key:"isOpen",value:function(e){var t;return null!==(t=this.folderStateMap.get(e))&&void 0!==t&&t}},{key:"setIsOpen",value:function(e,t){this.folderStateMap.set(e,t)}},{key:"flipIsOpen",value:function(e){var t=!this.isOpen(e);this.setIsOpen(e,t)}},{key:"setReference",value:function(e,t){this.refMap.set(e,t)}},{key:"scrollToItem",value:function(e){var t,n;null===(t=this.refMap.get(e))||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView()}},{key:"highLightedItemId",get:function(){return this._highLightedItemId}},{key:"highlightItem",value:function(e){var t=this;this._highLightedItemId=e,setTimeout((function(){return t._highLightedItemId=void 0}),3e3)}}]),e}(),jB=Object($.a)(OB.prototype,"editing",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kB=Object($.a)(OB.prototype,"folderStateMap",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),xB=Object($.a)(OB.prototype,"_highLightedItemId",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OB),MB=(RB=function(){function e(){Object(q.a)(this,e),Object(de.a)(this,"info",TB,this),this.parent=void 0}return Object(Q.a)(e,[{key:"update",value:function(){var e=this;return In({ctx:this.parent,action:function(){var t=Object(i.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l(e.parent),t.next=3,n.getAboutInfo();case 3:e.info=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}]),e}(),TB=Object($.a)(RB.prototype,"info",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{serverVersion:""}}}),RB);function LB(){var e=new wR,t=new sB(e),n=function(e){var t=new Map,n=new wR,r=new jR(e),o=new CR(n,(function(e){return t.get(e)})),i=new RR(n,r),a=new Map,s=new kR;return{lookupCacheMulti:o,lookupLoaderMulti:i,lookupCleanerReloaderById:t,lookupEngineById:a,cacheDependencies:s,startup:function(){o.startup()},teardown:function(){o.teardown()}}}((function(){return l(r)})),r=new DN({mainMenuEnvelope:new G_,favorites:new IB,workbenchLifecycle:new q_,searcher:new VN,openedScreens:new UN,openedDialogScreens:new UN,workQueues:new iB,chatrooms:new lB,recordInfo:new aB,notifications:new CB,sidebarState:new PB,lookupListCache:t,lookupMultiEngine:n,about:new MB});t.startup(),n.startup();var o=WR.beginLifetimeScope("Workbench");return El(r,o),r}function EB(e){return o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ae(e).clearAutoRefreshInterval();case 1:case"end":return t.stop()}}),t)}))}function AB(e){return o.a.mark((function t(){var n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(le.a)(bn(e).items),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}if(!(i=r.value).content||i.content.isLoading||!i.content.formScreen){t.next=7;break}return t.delegateYield(EB(i.content.formScreen)(),"t0",7);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(1),n.e(t.t1);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))}var VB,NB,BB,UB,GB,WB,HB,zB,YB,KB,qB=Object(K.observer)(_B=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object(q.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refPrimaryBtn=function(t){return e.elmPrimaryBtn=t},e.elmPrimaryBtn=void 0,e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t,n;e.elmPrimaryBtn&&(null===(t=(n=e.elmPrimaryBtn).focus)||void 0===t||t.call(n))}),150)}},{key:"render",value:function(){return Object(re.jsx)(xt,{title:bt("Question","question_title"),titleButtons:null,buttonsCenter:Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("button",{ref:this.refPrimaryBtn,tabIndex:0,autoFocus:!0,onClick:this.props.onYesClick,children:bt("Yes","button_yes")}),Object(re.jsx)("button",{tabIndex:0,onClick:this.props.onNoClick,children:bt("No","button_no")})]}),buttonsLeft:null,buttonsRight:null,children:Object(re.jsx)("div",{className:wt.a.dialogContent,children:bt("Some changes has not been saved yet. Do you still want to sign out?","sign_out_data_lost_question")})})}}]),n}(H.a.Component))||_B,QB=(VB=c.action.bound,NB=c.action.bound,BB=function(){function e(){Object(q.a)(this,e),this.$type_IApplicationLifecycle=1,Object(de.a)(this,"loginPageMessage",UB,this),Object(de.a)(this,"inFlow",GB,this),this.parent=void 0}return Object(Q.a)(e,[{key:"isWorking",get:function(){return this.inFlow>0}},{key:"onLoginFormSubmit",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.inFlow++,t.event.preventDefault(),e.delegateYield(this.performLogin(t),"t0",4);case 4:return e.prev=4,this.inFlow--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[0,,4,7]])}))},{key:"onSignOutClick",value:o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.requestSignout(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"requestSignout",value:o.a.mark((function e(){var t,n,r,i,a,s,c,u,l=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ke(this),n=t&&bn(t),r=!1,i=Object(le.a)(n.items);try{for(i.s();!(a=i.n()).done;)u=a.value,r=!(!r&&!(null===(s=u.content)||void 0===s||null===(c=s.formScreen)||void 0===c?void 0:c.isDirty))}catch(o){i.e(o)}finally{i.f()}if(!r){e.next=11;break}return e.next=8,new Promise((function(e){var t=Ys(l).pushDialog("",Object(re.jsx)(qB,{onYesClick:function(){t(),e(!0)},onNoClick:function(){t(),e(!1)}}))}));case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.delegateYield(this.performLogout(),"t0",12);case 12:case"end":return e.stop()}}),e,this)}))},{key:"run",value:o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.reuseAuthToken(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"performLogin",value:o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l(this),e.next=4,n.login({UserName:t.userName,Password:t.password});case 4:return r=e.sent,e.delegateYield(this.anounceAuthToken(r),"t0",6);case 6:e.next=12;break;case 8:throw e.prev=8,e.t1=e.catch(0),this.setLoginPageMessage("Login failed."),e.t1;case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))},{key:"performLogout",value:o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l(this),n=u(this),window.sessionStorage.removeItem("origamAuthToken"),r=0,i=Object.keys(window.sessionStorage);case 4:if(!(r<i.length)){e.next=13;break}if(!i[r].startsWith("oidc.user")){e.next=10;break}return t.resetAccessToken(),y.signoutRedirect(),e.abrupt("return");case 10:r++,e.next=4;break;case 13:return e.delegateYield(AB(n.workbench)(),"t0",14);case 14:return e.delegateYield(et(n.workbench)(),"t1",15);case 15:return n.resetWorkbench(),e.prev=16,e.next=19,t.logout();case 19:return e.prev=19,t.resetAccessToken(),e.finish(19);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,this,[[16,,19,22]])}))},{key:"reuseAuthToken",value:o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.sessionStorage.getItem("origamAuthToken"))){e.next=3;break}return e.delegateYield(this.anounceAuthToken(t),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"anounceAuthToken",value:o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(this),r=u(this),window.sessionStorage.setItem("origamAuthToken",t),n.setAccessToken(t),i=LB(),r.setWorkbench(i),e.delegateYield(i.run(),"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"setLoginPageMessage",value:function(e){this.loginPageMessage=e}},{key:"resetLoginPageMessage",value:function(){this.loginPageMessage=void 0}}]),e}(),UB=Object($.a)(BB.prototype,"loginPageMessage",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GB=Object($.a)(BB.prototype,"inFlow",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object($.a)(BB.prototype,"isWorking",[c.computed],Object.getOwnPropertyDescriptor(BB.prototype,"isWorking"),BB.prototype),Object($.a)(BB.prototype,"setLoginPageMessage",[VB],Object.getOwnPropertyDescriptor(BB.prototype,"setLoginPageMessage"),BB.prototype),Object($.a)(BB.prototype,"resetLoginPageMessage",[NB],Object.getOwnPropertyDescriptor(BB.prototype,"resetLoginPageMessage"),BB.prototype),BB),XB=0,ZB=(WB=c.observable.shallow,HB=c.action.bound,zB=c.action.bound,YB=function(){function e(){Object(q.a)(this,e),this.parent=void 0,Object(de.a)(this,"stackedDialogs",KB,this)}return Object(Q.a)(e,[{key:"pushDialog",value:function(e,t,n,r){var o=this,i=e||"DEFAULT_DIALOG_KEY_".concat(XB++);return this.stackedDialogs.push({key:i,closeOnClickOutside:r,component:t,dimensions:n}),function(){o.closeDialog(i)}}},{key:"closeDialog",value:function(e){var t=this.stackedDialogs.findIndex((function(t){return t.key===e}));t>-1&&this.stackedDialogs.splice(t,1)}},{key:"isOpen",value:function(e){return-1!==this.stackedDialogs.findIndex((function(t){return t.key===e}))}}]),e}(),KB=Object($.a)(YB.prototype,"stackedDialogs",[WB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object($.a)(YB.prototype,"pushDialog",[HB],Object.getOwnPropertyDescriptor(YB.prototype,"pushDialog"),YB.prototype),Object($.a)(YB.prototype,"closeDialog",[zB],Object.getOwnPropertyDescriptor(YB.prototype,"closeDialog"),YB.prototype),YB);function $B(){var e=new QB;return new SN({api:new cT((function(t){Object(c.flow)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(yt(e)(t),"t0",1);case 1:case"end":return n.stop()}}),n)})))()})),applicationLifecycle:e,dialogStack:new ZB,errorDialogController:new kN})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var JB=n(433),eU=n.n(JB);n(746);function tU(){var e=Object(_C.a)(Object(PC.a)({id:"selectionPreventer",initial:"IDLE",states:{IDLE:{on:{MOUSE_DOWN:{target:"DEAD_PERIOD",cond:"isNotEditable"}}},DEAD_PERIOD:{on:{MOUSE_DOWN:{actions:"preventDefault",target:"DEAD_PERIOD"}},after:{500:"IDLE"}}}},{actions:{preventDefault:function(e,t){t.payload.domEvent.preventDefault()}},guards:{isNotEditable:function(e,t){var n=t.payload.domEvent.target.tagName.toLowerCase();return"textarea"!==n&&"input"!==n}}})).start();window.addEventListener("mousedown",(function(t){e.send({type:"MOUSE_DOWN",payload:{domEvent:t}})}))}var nU=n(104),rU=n.n(nU),oU=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"getHelpUrl",value:function(){var e,t,n,r,o,i;return(null===(e=window.navigator)||void 0===e||null===(t=e.platform)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes("win"))?"https://support.microsoft.com/en-us/windows/how-to-set-your-time-and-time-zone-dfaa7122-479f-5b98-2a7b-fa0b6e01b261":(null===(r=window.navigator)||void 0===r||null===(o=r.platform)||void 0===o||null===(i=o.toLowerCase())||void 0===i?void 0:i.includes("mac"))?"https://support.apple.com/en-gb/guide/mac-help/mchlp2996/mac":""}},{key:"renderMessage",value:function(){if(this.props.error.message.includes("iat is in the future")||this.props.error.message.includes("exp is in the past")){var e=bt("Login is not possible due to discrepancy between time on the server and on your machine. Please make sure that time on your machine is correct.","login_error_due_to_time"),t=this.getHelpUrl();return Object(re.jsxs)("div",{className:ne()(rU.a.alert,rU.a.alertDanger),children:[Object(re.jsx)("p",{children:e}),t&&Object(re.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:bt("Help","switch_time_help")})]})}return Object(re.jsx)("div",{className:ne()(rU.a.alert,rU.a.alertDanger),children:this.props.error.message})}},{key:"render",value:function(){return Object(re.jsxs)("div",{className:rU.a.root,children:[this.renderMessage(),Object(re.jsxs)("div",{className:rU.a.returnLink,children:[bt("Click ","sign_out_click_1"),Object(re.jsx)("a",{className:rU.a.inPageLink,onClick:Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:bt("here","sign_out_click_2")}),bt(" to sign out.","sign_out_click_3")]})]})}}]),n}(H.a.Component);function iU(){var e;navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&(null===(e=document.querySelector('meta[name="viewport"]'))||void 0===e||e.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"))}function aU(){return(aU=Object(i.a)(o.a.mark((function e(){var t,n,r,i,a,s,u,d,p,h,f,b,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(iU(),tU(),t=window.location.hash,n="#origamAuthTokenOverride=",t.startsWith(n)&&(sessionStorage.setItem("origamAuthTokenOverride",t.replace(n,"")),window.location.hash=""),r="#origamBackendOverride=",!t.startsWith(r)){e.next=12;break}return i=t.replace(r,""),a=i+"#origamBackendOverrideReturn=".concat(window.location.origin),eU.a.set("backendUrl",i),window.location.assign(a),e.abrupt("return");case 12:if(s="#origamBackendOverrideReturn=",t.startsWith(s))for(window.sessionStorage.setItem("teleportAfterLogin",t.replace(s,"")),window.location.hash="",u=0,d=Object.keys(window.sessionStorage);u<d.length;u++)(p=d[u]).startsWith("oidc.user")&&window.sessionStorage.removeItem(p);return e.prev=14,e.next=17,g();case 17:h=e.sent,e.next=29;break;case 20:return e.prev=20,e.t0=e.catch(14),f=$B(),e.next=25,ut(f);case 25:return e.next=27,ht(f);case 27:return Y.a.render(Object(re.jsx)(oU,{error:e.t0}),document.getElementById("root")),e.abrupt("return");case 29:if(!h){e.next=48;break}if(!window.sessionStorage.getItem("teleportAfterLogin")){e.next=33;break}return window.sessionStorage.removeItem("teleportAfterLogin"),e.abrupt("return");case 33:return l(b=$B()).setAccessToken(h.access_token),sessionStorage.setItem("origamAuthToken",h.access_token),y.events.addUserLoaded((function(e){l(b).setAccessToken(e.access_token),sessionStorage.setItem("origamAuthToken",e.access_token)})),Object(c.flow)(b.run.bind(b))(),e.next=40,ut(b);case 40:return e.next=42,ot();case 42:return v=e.sent,document.documentElement.lang=v,Qn.a.locale(v),e.next=47,ht(b);case 47:Y.a.render(Object(re.jsx)(QV,{application:b}),document.getElementById("root"));case 48:case"end":return e.stop()}}),e,null,[[14,20]])})))).apply(this,arguments)}Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REVISION_DATE:"Sun Mar 6 12:15:07 2022 +0100",REACT_APP_GIT_REVISION_HASH:"720661b5accaeab2a8bbf8f9c86714e53dad209a"}).REACT_APP_SELENIUM_KICK&&s.a.post("http://127.0.0.1:3500/app-reload"),window.ORIGAM_CLIENT_REVISION_HASH="720661b5accaeab2a8bbf8f9c86714e53dad209a",window.ORIGAM_CLIENT_REVISION_DATE="Sun Mar 6 12:15:07 2022 +0100",function(){aU.apply(this,arguments)}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,n){e.exports={columnTable:"ColumnsDialog_columnTable__3IW6R",lockedColumns:"ColumnsDialog_lockedColumns__16RRQ",lockedColumnsInput:"ColumnsDialog_lockedColumnsInput__IAIXd",checkBoxCell:"ColumnsDialog_checkBoxCell__1-H_s",columnTableCell:"ColumnsDialog_columnTableCell__3gj86",columnWidthHandle:"ColumnsDialog_columnWidthHandle__2XIGL",checkBox:"ColumnsDialog_checkBox__34opU",dropdown:"ColumnsDialog_dropdown__3hicf"}},79:function(e,t,n){e.exports={resultItem:"SearchResults_resultItem__3gqOX",icon:"SearchResults_icon__38jUm",textContainer:"SearchResults_textContainer__UIGSx",resultItemName:"SearchResults_resultItemName__2gC9d",resultItemDescription:"SearchResults_resultItemDescription__1Wrta",resultGroupRow:"SearchResults_resultGroupRow__1-yR8",groupName:"SearchResults_groupName__2cMdf",arrow:"SearchResults_arrow__1SDZP"}},84:function(e,t,n){e.exports={navigationButtonContainer:"NavigationButton_navigationButtonContainer__eZVhQ",navigationButton:"NavigationButton_navigationButton__22YAH",navigationIcon:"NavigationButton_navigationIcon__2lsBW",label:"NavigationButton_label__h8S2Z"}},85:function(e,t,n){e.exports={droppedPanelContainer:"DateTimeEditor_droppedPanelContainer__3DTBf",dropdownSymbol:"DateTimeEditor_dropdownSymbol__16Coi",input:"DateTimeEditor_input__C4qX7",notification:"DateTimeEditor_notification__3YTPz",editorContainer:"DateTimeEditor_editorContainer__3Wri-",formatHintTooltip:"DateTimeEditor_formatHintTooltip__CgPt2"}},86:function(e,t,n){e.exports={headers:"Table_headers__2IR3N",scrolleeShifted:"Table_scrolleeShifted__3O-ZH",table:"Table_table__2QcwG",loadingOverlay:"Table_loadingOverlay__2BHxP",loadingIcon:"Table_loadingIcon__zzhK5",header:"Table_header__Mo8rm",cellAreaContainer:"Table_cellAreaContainer__2bI8E",canvasRow:"Table_canvasRow__1r8W1",toolTip:"Table_toolTip__3nq1g",toolTipContainer:"Table_toolTipContainer__nTV4R",tooltipContent:"Table_tooltipContent__HvJxF",toolTipLine:"Table_toolTipLine__23IBX"}},87:function(e,t,n){e.exports={blobEditor:"BlobEditor_blobEditor__1BpIC",imageEditor:"BlobEditor_imageEditor__JPYbH",dialogContent:"BlobEditor_dialogContent__3OChg",editorContainer:"BlobEditor_editorContainer__NmAFO",notification:"BlobEditor_notification__1lBZF",standardBorder:"BlobEditor_standardBorder__3VW0i",focusedBorder:"BlobEditor_focusedBorder__1-NT2"}},88:function(e,t,n){e.exports={header:"Header_header__1lpyZ",Header_order:"Header_Header_order__25O0i",columnWidthHandle:"Header_columnWidthHandle__2cLzS",root:"Header_root__33Etx",noSelect:"Header_noSelect__35hay","changing-order":"Header_changing-order__3X1bu",label:"Header_label__3C5sA",order:"Header_order__3JFC9",middleSeparator:"Header_middleSeparator__1_7gh",rightSeparator:"Header_rightSeparator__1DILU",inHeaderRow:"Header_inHeaderRow__2doQ5",additionalContentsRow:"Header_additionalContentsRow__2sSxI"}},91:function(e,t,n){e.exports={deleteIcon:"CMainMenu_deleteIcon__1QWMG",favoritesMenuItem:"CMainMenu_favoritesMenuItem__24jmI",addToFavoritesIconContainer:"CMainMenu_addToFavoritesIconContainer__13Hdz",addToFavoritesIcon:"CMainMenu_addToFavoritesIcon__VDuSc",isOpenedScreen:"CMainMenu_isOpenedScreen__2bpLx",itemGrip:"CMainMenu_itemGrip__cubux",topMenuHeader:"CMainMenu_topMenuHeader__3JHFc"}},96:function(e,t,n){e.exports={mapDiv:"MapPerspectiveUI_mapDiv__21RjH",mapSearch:"MapPerspectiveUI_mapSearch__1RLrw",mapSearchDropdown:"MapPerspectiveUI_mapSearchDropdown__3qi4t",mapToolbarButton:"MapPerspectiveUI_mapToolbarButton__2OUVR"}},98:function(e,t,n){e.exports={root:"FormField_root__3skoc",caption:"FormField_caption__2_h3h",editor:"FormField_editor__1r_is",notification:"FormField_notification__37GUS"}}},[[747,1,2]]]);
//# sourceMappingURL=main.33e3bd24.chunk.js.map